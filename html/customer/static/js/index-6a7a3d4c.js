import e from"./404-060407f8.js";import{o as t,b as a,c as s,Q as n,d as o,t as l,n as i,R as c,h as r,r as d,u,S as m,w as p,e as f,a as g,T as v,U as h,V as _,A as L,y,D as x,W as k,X as w,Y as b,C as I,Z as C,_ as P,B as M,$ as S,a0 as z,a1 as U,a2 as Z,a3 as j,p as E,a4 as T,a5 as A,a6 as N,a7 as O,H as R,O as $,P as q,M as B,a8 as Q}from"./.pnpm-9c274078.js";import{_ as V,a as D,b as F,c as H}from"./index-e716b57f.js";import{u as W,_ as X}from"./updatePassword-07a57af0.js";const Y={class:"menu-item-title"},G={class:"menu-item-title-title text-hideen"},J=V({__name:"menu-item-title",props:{icon:String,title:String},setup:e=>(i,c)=>{const r=D;return t(),a("div",Y,[e.icon?(t(),s(r,{key:0,class:"menu-item-title-icon",name:e.icon},null,8,["name"])):n("",!0),o("span",G,l(e.title),1)])}},[["__scopeId","data-v-a3e97ea2"]]),K={class:"menu-item"},ee=["title"],te={key:0,class:"remind"},ae={key:1,class:"red-point"},se=V({__name:"menu-item",props:{menuItem:{type:Object,default:()=>({})},basePath:{type:String,default:""}},setup(e){const L=e,y=i((()=>{let e=0;return F.state.socket.list.forEach((t=>{e+=t.unReadCount})),e})),{menuItem:x,basePath:k}=c(L),w=r({showingMenu:{}}),b=(e=[],t)=>0===(null==e?void 0:e.filter((e=>!e.hidden&&(w.showingMenu=e,!0)))).length&&(w.showingMenu=x,!0),{showingMenu:I}=c(w);return(e,i)=>{const c=D,r=h,L=d("MenuItem",!0),k=_;return t(),a("div",K,[b(u(x).children,u(x))?(t(),a(m,{key:0},[!0!==u(x).hidden?(t(),s(r,{key:0,route:{name:u(x).name},index:u(x).name},{title:p((()=>[o("span",{class:"menu-item-title text-hideen",title:u(I).meta.title},[f(l(u(I).meta.title)+" ",1),"/service"===u(I).path&&u(y)?(t(),a("span",te,l(u(y)),1)):"/service"===u(I).path&&u(F).state.socket.queue.size+u(F).state.socket.untreated.size>0?(t(),a("span",ae)):n("",!0)],8,ee)])),default:p((()=>[u(I).meta.icon?(t(),s(c,{key:0,size:"18px",class:"menu-item-icon",name:u(I).meta.icon},null,8,["name"])):n("",!0)])),_:1},8,["route","index"])):n("",!0)],64)):(t(),s(k,{key:1,index:u(x).path},{title:p((()=>[g(J,{icon:u(x).meta.icon,title:u(x).meta.title},null,8,["icon","title"])])),default:p((()=>[(t(!0),a(m,null,v(u(x).children,(e=>(t(),s(L,{key:e.path,menuItem:e,"base-path":u(x).path},null,8,["menuItem","base-path"])))),128))])),_:1},8,["index"]))])}}},[["__scopeId","data-v-0bfb43b5"]]),ne=V({__name:"menus",setup(e){const n=L(),o=y(),l=r({closed:!1,activeTextColor:"var('--cc-main-color')",textColor:"rgba(0,0,0,0.8)",backgroundColor:"#fff",routes:i((()=>n.getters.routeList))||H}),{routes:d}=c(l),f=i((()=>{const{name:e}=o;return e}));if(!n.state.socket.soc||3===n.state.socket.soc.readyState)try{3!=n.state.userInfo.role&&n.dispatch("initQueueSoc",n.state.userInfo.uuid)}catch{}return x((()=>{k((()=>{getComputedStyle(document.documentElement).getPropertyValue("--cc-main-color")}))})),(e,n)=>{const o=w;return t(),s(o,{style:{"--el-menu-base-level-padding":"40px"},"default-active":u(f),"unique-opened":"","active-text-color":l.activeTextColor,"background-color":l.backgroundColor,"text-color":l.textColor,collapse:l.closed,"collapse-transition":!1,router:""},{default:p((()=>[(t(!0),a(m,null,v(u(d),((e,a)=>(t(),s(se,{key:e,menuItem:e,"base-path":e.path},null,8,["menuItem","base-path"])))),128))])),_:1},8,["default-active","active-text-color","background-color","text-color","collapse"])}}},[["__scopeId","data-v-b501902e"]]),oe={class:"layout-main-sidebar height100"},le=V({__name:"index",setup:e=>(e,s)=>{const n=b;return t(),a("div",oe,[g(n,null,{default:p((()=>[g(ne)])),_:1})])}},[["__scopeId","data-v-983fd99b"]]),ie={class:"mains"},ce=V({__name:"AppMain",setup(e){L();M().appContext.config.globalProperties;const n=y().path;I();const o=r({myInterval:null,status:!0,infoShow:!1,infoId:0});return c(o),(e,o)=>{const l=d("router-view");return t(),a("div",ie,[g(l,null,{default:p((({Component:e})=>[g(C,{name:"slide-fade",mode:"out-in"},{default:p((()=>[(t(),s(P(e),{key:u(n)}))])),_:2},1024)])),_:1})])}}},[["__scopeId","data-v-371f2aac"]]),re=e=>($("data-v-71e96a94"),e=e(),q(),e),de={class:"menu-title"},ue={class:"web-title"},me={width:"64px",height:"24px",viewBox:"0 0 64 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",style:{margin:"0 4px","margin-bottom":"-2px"}},pe=[B('<title data-v-71e96a94>cms</title><g id="首页-客服" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-71e96a94><g transform="translate(-33.000000, -16.000000)" fill-rule="nonzero" id="cms" data-v-71e96a94><g transform="translate(33.000000, 16.000000)" data-v-71e96a94><path d="M7.181,17.7648556 L6.67564259,20.8274174 L15.5324357,20.8274174 L17.1187271,19.5716034 L16.4908201,24 L0,24 L0.99,17.7648556 L7.181,17.7648556 Z M18.4075887,10.0538556 L18.0771114,13.2264382 L7.93145655,13.2264382 L7.363,16.6628556 L1.165,16.6628556 L2.21419829,10.0538556 L18.4075887,10.0538556 Z" id="形状结合" fill="#4c83ff" data-v-71e96a94></path><path d="M39.6569522,0 L44.0461294,4.40929868 L42.5104039,23.8678091 L36.7931457,23.8678091 L38.0122399,9.10161439 L35.4675643,9.10161439 L34.24847,23.8678091 L29.1921665,23.8678091 L30.8115055,5.42964377 L28.2998776,5.42964377 L26.6474908,23.8678091 L20.9302326,23.8678091 L22.8470012,1.5836461 L21.8188494,0 L39.6569522,0 Z M39.2897551,0.734394125 L38.9411494,5.15049355 L43.6789324,5.1436928 L39.2897551,0.734394125 Z" id="形状" fill="#4c83ff" data-v-71e96a94></path><path d="M56.4169985,20.6878825 L56.7144281,18.4736842 L47.1966802,18.4736842 L48.4855419,9.91432069 L63.6875003,9.91432069 L63.0595933,14.0122399 L57.5736692,14.0122399 L57.6728124,13.0869033 L53.8723228,13.0869033 L53.5418455,15.3011016 L62.7621637,15.3011016 L62.101209,21.6462668 C61.9469862,22.2851897 61.594477,22.8139535 61.0436814,23.2325581 C60.4928859,23.6511628 59.8980266,23.8604651 59.2591037,23.8604651 L46.5687732,23.8604651 L47.1966802,19.4320685 L48.1550646,20.6878825 L56.4169985,20.6878825 Z" id="路径" fill="#4c83ff" data-v-71e96a94></path></g></g></g>',2)],fe={class:"user-avator"},ge=re((()=>o("span",{style:{"font-size":"14px","margin-left":"12px"}},"系统声音",-1))),ve=re((()=>o("span",{style:{"font-size":"14px","margin-left":"12px"}},"消息通知",-1))),he={key:0,class:"null-client"},_e=[re((()=>o("img",{src:X,alt:""},null,-1))),re((()=>o("p",null,"暂无通知",-1)))],Le={style:{"max-height":"75vh",overflow:"auto"}},ye={class:"notice-item"},xe={class:"title"},ke={class:"con"},we={key:1},be={class:"avator-link"},Ie={class:"avator"},Ce=re((()=>o("div",{class:"tags"},null,-1))),Pe={style:{margin:"0 8px","font-size":"16px","font-weight":"800"}},Me=V({__name:"index",setup(e){M().appContext.config.globalProperties;const d=L();window.aa=d.getters.notice,I();const h=r({dialogUpPwd:!1,userInfo:i((()=>d.getters.userInfo))||{},type:0}),_=e=>{"editPwd"==e&&(h.type=0,h.dialogUpPwd=!0),"editInfo"==e&&(h.type=1,h.dialogUpPwd=!0),"logout"==e&&d.dispatch("logout")};const{dialogUpPwd:y,userInfo:x,type:k}=c(h);return(e,i)=>{const c=D,r=O,h=S,L=R,w=z,b=U,I=Z;return t(),a("div",de,[o("div",ue,[(t(),a("svg",me,pe)),f(" 客服系统 ")]),o("div",fe,[3!=u(x).role?(t(),a("div",{key:0,class:"audio-ctr",onClick:i[0]||(i[0]=e=>function(e="1"){localStorage.setItem("serAudio",e),d.state.socket.audio="1"===e}(u(d).state.socket.audio?"0":"1"))},[u(d).state.socket.audio?(t(),s(c,{key:0,name:"audio_open",color:"#999999"})):(t(),s(c,{key:1,name:"audio_close",color:"#999999"})),ge])):n("",!0),g(W,{visible:u(y),"onUpdate:visible":i[1]||(i[1]=e=>j(y)?y.value=e:null),type:u(k),"onUpdate:type":i[2]||(i[2]=e=>j(k)?k.value=e:null)},null,8,["visible","type"]),3!=u(x).role?(t(),s(r,{key:1,placement:"bottom",width:332,trigger:"click"},{reference:p((()=>[o("div",{class:E(["notice",{remind:u(d).getters.notice.length>0}])},[g(c,{name:"notice",color:"#999999"}),ve],2)])),default:p((()=>[u(d).getters.notice&&0!==u(d).getters.notice.length?n("",!0):(t(),a("div",he,_e)),o("div",Le,[(t(!0),a(m,null,v(u(d).getters.notice,(e=>(t(),a("div",ye,[o("p",xe,l(e.title),1),o("div",ke,[T(e.message)?(t(),s(P(e.message),{key:0})):(t(),a("p",we,l(e.message),1))])])))),256))])])),_:1})):n("",!0),g(I,{onCommand:_},{dropdown:p((()=>[g(b,null,{default:p((()=>[g(w,{command:"editPwd"},{default:p((()=>[f("修改密码")])),_:1}),g(w,{command:"editInfo"},{default:p((()=>[f("编辑资料")])),_:1}),g(w,{command:"logout",divided:""},{default:p((()=>[f("退出登录")])),_:1})])),_:1})])),default:p((()=>[o("span",be,[o("div",Ie,[g(h,{icon:u(A),size:30,src:u(x).headImg},null,8,["icon","src"]),Ce]),o("span",Pe,l(u(x).nickName||u(x).userName||"管理员1号"),1),g(L,null,{default:p((()=>[g(u(N))])),_:1})])])),_:1})])])}}},[["__scopeId","data-v-71e96a94"]]),Se={class:"main-content"},ze={key:0,class:"main-container"},Ue={key:1,class:"page_404"},Ze=V({__name:"index",setup(s){const{$http:n}=M().appContext.config.globalProperties,o=L(),l=H;let i;return y().path,o.getters.userInfo.id&&(i=setInterval((()=>{n.get(`/api/v1/customer/user/${o.getters.userInfo.id}`).then((({data:e})=>{o.commit("SETUSERINFO",e)}))}),3e3)),Q((()=>{clearInterval(i)})),(s,n)=>(t(),a("div",Se,[g(Me),u(l)&&u(l).length>0?(t(),a("div",ze,[g(le),g(ce)])):(t(),a("div",Ue,[g(e)]))]))}},[["__scopeId","data-v-7c4410cd"]]);export{Ze as default};
