import{A as e,h as a,x as l,D as t,R as s,aj as n,ak as o,ai as r,a7 as i,al as d,am as c,an as u,ag as m,ah as p,ad as v,ao as g,o as h,b as f,d as b,a as y,w as _,u as x,a3 as I,S as w,T as S,af as k,c as z,Q as C,t as V,e as R,B as j,H as T,f as L,O as G,P}from"./.pnpm-9c274078.js";import{_ as U}from"./empty-6f66e897.js";import{_ as $}from"./pie-ea325c1c.js";import{l as A}from"./line3-2ad34cba.js";import{M as D}from"./mesList-6e63e858.js";import{_ as H,p as M}from"./index-e716b57f.js";import{U as N}from"./userinfo-2d757c21.js";/* empty css                                                 */const B=e=>(G("data-v-3443fe7f"),e=e(),P(),e),E={class:"exam-box"},q={class:"exam-header"},O={class:"exam-title"},Q=B((()=>b("p",null,"金币数据走势",-1))),F={class:"exam-searh-box"},J={class:"search-item"},K=B((()=>b("span",null,"用户身份",-1))),W={v:"",class:"search-item"},X=B((()=>b("span",null,"推广渠道",-1))),Y={style:{display:"flex",gap:"16px"},class:"panel"},Z={class:"exam-content",style:{width:"350px"}},ee=B((()=>b("div",{class:"exam-title"},"金币概况",-1))),ae={class:"content-table"},le={class:"container",style:{padding:"0"}},te={class:"chart-box"},se={class:"pieBox"},ne={class:"pieInfo"},oe={class:"infoItem"},re=B((()=>b("div",{class:"infoStatus"},[b("span",{style:{background:"#fdc343"},class:"tag"}),b("span",null,"充值")],-1))),ie={class:"countSpends"},de={class:"infoItem"},ce=B((()=>b("div",{class:"infoStatus"},[b("span",{style:{background:"#ec6836"},class:"tag"}),b("span",null,"消费")],-1))),ue={class:"countSpends"},me={class:"infoItem"},pe=B((()=>b("div",{class:"infoStatus"},[b("span",{style:{background:"#6c9eff"},class:"tag"}),b("span",null,"赠送")],-1))),ve={class:"countSpends"},ge={class:"pagination",style:{"font-size":"12px",padding:"0 46px 0 60px","line-height":"5vh"}},he={class:"filter",style:{margin:"0"}},fe={class:"right"},be={class:"search-item"},ye=B((()=>b("span",null,"时间范围",-1))),_e={class:"exam-content"},xe=B((()=>b("div",{class:"exam-title"},"金币详情",-1))),Ie={class:"content-table"},we={class:"container",style:{padding:"0"}},Se={class:"filter"},ke=B((()=>b("div",{class:"right"},[b("div",{class:"search-item"})],-1))),ze={class:"right"},Ce={class:"search-item"},Ve=B((()=>b("span",null,"类型",-1))),Re={class:"chart-box"},je=B((()=>b("div",{class:"table-empty"},[b("img",{src:U,alt:"空状态"}),b("p",null,"暂无数据")],-1))),Te={class:"pagination"},Le=["innerHTML"],Ge=H({__name:"index",setup(G){const P=j(),{$http:U}=P.appContext.config.globalProperties,H=e(),B=a({gd:{},search:"",value_time:[],channelId:"",refresh:!0,kind:"",memberRole:""}),Ge=l(),Pe=a({visible:!1,data:[],loading:!1,client:{},chatList:[],get:async e=>{var a;e.consultId=e.memberId,(null==(a=Ge.value)?void 0:a.page)&&(Ge.value.page=1),e.mesList=[],e.queryRole=1,Pe.client=e,Pe.visible=!0}}),Ue=()=>{var e;B.refresh=!1;let a={};(null==(e=B.value_time)?void 0:e.length)>0&&(a={timeStart:B.value_time[0]/1e3,timeEnd:Number(B.value_time[1]/1e3+86399)}),a.channelId="number"==typeof B.channelId?B.channelId:void 0,a.memberRole="number"==typeof B.memberRole?B.memberRole:void 0,a.lll="lll",U.get("/api/v1/customer/censor/agent_member/gold/statistics",{params:a}).then((({data:e})=>{B.gd=e})).finally((()=>{B.refresh=!0}))},$e=a({data:[]});t((()=>{Ae(),Ue(),U.get("/api/v1/customer/filter/member_channel").then((e=>{$e.data=e.data})).finally((()=>{}))}));const Ae=async()=>{var e,a,l;He.loading=!0;let t={limit:He.pageSize,page:He.currentPage};if(""!=B.search&&(t.keyword=B.search),B.kind&&(t.rechargeType=B.kind),B.memberRole&&(t.memberRole=B.memberRole),He.order){let e=He.order.split(",");t.orderName=e[0],t.orderSerial=e[1]}(null==(e=B.value_time)?void 0:e.length)>0&&(t.timeStart=B.value_time[0]/1e3,t.timeEnd=Number(B.value_time[1]/1e3+86399)),B.rechargeType&&(t.rechargeType=B.rechargeType),""!==B.channelId&&(t.channelId=B.channelId);var{data:s}=await U.get("/api/v1/customer/censor/agent_member/gold",{params:t});He.tableData=null!=(l=null==(a=s.list)?void 0:a.data)?l:[],He.total=(null==s?void 0:s.total)||0,He.loading=!1},De=a({loading:!1,data:[],load:()=>(De.loading=!0,U.get("/api/v1/customer/censor/agent_member/gold/statistics",{params:{channelId:"number"==typeof B.channelId?B.channelId:void 0,memberRole:"number"==typeof B.memberRole?B.memberRole:void 0,xx:"xx"}}).then((({data:e})=>{De.data=e})).finally((()=>{De.loading=!1})))});De.load();const He=a({tableData:[],currentPage:1,pageSize:20,total:0,order:"",loading:!1,current(e){He.currentPage=e,Ae()},size(e){He.pageSize=e,He.currentPage=1,Ae()},sort(e){const{prop:a,order:l}=e;He.order=a&&l?`${a},${"descending"==l?"desc":"asc"}`:"",Ae()}}),{gd:Me,search:Ne,value_time:Be,channelId:Ee,refresh:qe,kind:Oe,memberRole:Qe}=s(B),{total:Fe,currentPage:Je,pageSize:Ke,tableData:We,loading:Xe}=s(He);return(e,a)=>{var l,t,s,j,G,P,U,B,Ne,Ye,Ze,ea;const aa=n,la=o,ta=T,sa=L,na=r,oa=i,ra=d,ia=c,da=u,ca=m,ua=p,ma=v,pa=g;return h(),f("div",E,[b("div",q,[b("div",O,[Q,b("div",F,[b("div",J,[K,y(la,{modelValue:x(Qe),"onUpdate:modelValue":a[0]||(a[0]=e=>I(Qe)?Qe.value=e:null),onChange:a[1]||(a[1]=e=>{Ae(),De.load(),Ue()}),clearable:"",placeholder:"所有用户身份"},{default:_((()=>[y(aa,{label:"会员",value:1}),y(aa,{label:"代理商",value:2})])),_:1},8,["modelValue"])]),b("div",W,[X,y(la,{modelValue:x(Ee),"onUpdate:modelValue":a[2]||(a[2]=e=>I(Ee)?Ee.value=e:null),onChange:a[3]||(a[3]=e=>{Ae(),De.load(),Ue()}),clearable:"",filterable:"",placeholder:"所有渠道"},{default:_((()=>[y(aa,{label:"默认渠道",value:0}),(h(!0),f(w,null,S($e.data,(e=>(h(),z(aa,{label:e.name,value:e.id},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])])]),De.data.totalGoldContinued?k((h(),z(A,{key:0,type:3,list:De.data.totalGoldContinued,load:De.load},null,8,["list","load"])),[[pa,De.loading]]):C("",!0)]),b("div",Y,[b("div",Z,[ee,b("div",ae,[b("div",le,[b("div",te,[k((h(),f("div",se,[(null==(l=x(Me).totalGold)?void 0:l.status)&&x(qe)?(h(),z($,{key:0,type:1,list:null==(t=x(Me).totalGold)?void 0:t.status},null,8,["list"])):C("",!0),b("div",ne,[b("div",oe,[re,b("div",ie,[b("span",null,V(null==(G=null==(j=null==(s=x(Me).totalGold)?void 0:s.status)?void 0:j.status1)?void 0:G.total),1)])]),b("div",de,[ce,b("div",ue,[b("span",null,V(null==(B=null==(U=null==(P=x(Me).totalGold)?void 0:P.status)?void 0:U.status3)?void 0:B.total),1)])]),b("div",me,[pe,b("div",ve,[b("span",null,V(null==(Ze=null==(Ye=null==(Ne=x(Me).totalGold)?void 0:Ne.status)?void 0:Ye.status2)?void 0:Ze.total),1)])])])])),[[pa,!x(qe)]])]),b("div",ge,[R(V(x(Be)&&x(Be)[0]?x(M)(x(Be)[0],"{y}-{m}-{d}")+"~":"")+" "+V(x(Be)&&x(Be)[1]?x(M)(x(Be)[1],"{y}-{m}-{d}")+"":"")+" ",1),y(oa,{placement:"bottom",width:350,trigger:"click",teleported:!1},{reference:_((()=>[y(sa,{class:"m-2",type:"primary",style:{"margin-left":"auto"},link:""},{default:_((()=>[y(ta,null,{default:_((()=>[R("筛选")])),_:1})])),_:1})])),default:_((()=>[b("div",he,[b("div",fe,[b("div",be,[ye,y(na,{class:"item",placement:"top",modelValue:x(Be),"onUpdate:modelValue":a[4]||(a[4]=e=>I(Be)?Be.value=e:null),"value-format":"x",onChange:a[5]||(a[5]=e=>{Ue(),Ae()}),style:{width:"240px","--el-font-size-base":"12px"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",teleported:!1,size:"default"},null,8,["modelValue"])])])])])),_:1})])])])]),b("div",_e,[xe,b("div",Ie,[b("div",we,[b("div",Se,[ke,b("div",ze,[b("div",Ce,[Ve,y(la,{modelValue:x(Oe),"onUpdate:modelValue":a[6]||(a[6]=e=>I(Oe)?Oe.value=e:null),onChange:a[7]||(a[7]=e=>Ae()),clearable:"",placeholder:"所有类型"},{default:_((()=>[y(aa,{label:"充值",value:1}),y(aa,{label:"赠送",value:2}),y(aa,{label:"消费",value:3})])),_:1},8,["modelValue"])])])]),b("div",Re,[k((h(),z(ia,{onSortChange:He.sort,"tooltip-effect":"light",height:"38vh",data:x(We)},{empty:_((()=>[je])),default:_((()=>[y(ra,{label:"用户名",prop:"username",align:"left"},{default:_((({row:e})=>[y(N,{name:e.username,id:e.memberId},null,8,["name","id"])])),_:1}),y(ra,{prop:"agentId",align:"left",label:"用户身份"},{default:_((({row:e})=>[R(V(null===e.agentId?"会员":"代理商"),1)])),_:1}),y(ra,{label:"充值类型"},{default:_((({row:e})=>[b("span",null,V(1==e.rechargeType?"充值":2==e.rechargeType?"赠送":3==e.rechargeType?"消费":"-"),1)])),_:1}),y(ra,{label:"说明",prop:"remark","min-width":"120","show-overflow-tooltip":!0,formatter:e.$formatter},{default:_((({row:e})=>[R(V(e.remark||"-"),1)])),_:1},8,["formatter"]),y(ra,{label:"数量",prop:"amount",formatter:e.$formatter},null,8,["formatter"]),y(ra,{label:"剩余数量",prop:"remainingAmount","show-overflow-tooltip":!0,formatter:e.$formatter},null,8,["formatter"]),y(ra,{label:"推广渠道",prop:"channel",formatter:e.$formatter},{default:_((({row:e})=>[R(V(e.channel||"默认渠道"),1)])),_:1},8,["formatter"]),y(ra,{label:"时间",width:"150",prop:"createdAt"},{default:_((({row:e})=>[b("span",null,V(x(M)(e.createdAt)||"-"),1)])),_:1})])),_:1},8,["onSortChange","data"])),[[pa,x(Xe)]])]),b("div",Te,[y(da,{onSizeChange:He.size,small:"",onCurrentChange:He.current,"current-page":x(Je),"page-sizes":x(H).state.pageSizes,"page-size":x(Ke),layout:"total, prev, pager, next, sizes, jumper",total:x(Fe)},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])])])])]),y(ma,{modelValue:Pe.visible,"onUpdate:modelValue":a[8]||(a[8]=e=>Pe.visible=e),title:(null==(ea=Pe.client)?void 0:ea.memberUsername)+"的聊天记录","destroy-on-close":"",width:"880px","close-on-click-modal":!1},{default:_((()=>[y(ua,{type:"border-card",class:"demo-tabs"},{default:_((()=>[y(ca,{label:"聊天记录"},{default:_((()=>[k(y(D,{ref_key:"messageList",ref:Ge,style:{height:"45vh"},class:"dis-list",client:Pe.client,chatList:Pe.chatList,slaveId:!1},null,8,["client","chatList"]),[[pa,Pe.loading]])])),_:1}),y(ca,{label:"订单备注"},{default:_((()=>[b("div",{style:{height:"45vh"},innerHTML:Pe.client.attach},null,8,Le)])),_:1})])),_:1})])),_:1},8,["modelValue","title"])])}}},[["__scopeId","data-v-3443fe7f"]]);export{Ge as default};
