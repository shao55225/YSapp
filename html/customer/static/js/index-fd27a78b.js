import{x as e,D as a,ap as t,ac as l,o as n,b as r,h as s,R as i,d as o,p as d,u as p,a as m,W as u,aO as c,ai as v,A as g,a9 as h,af as f,c as b,w as y,e as x,Q as C,B as _,al as w,f as z,am as k,an as S,ao as F,a7 as I,ad as E,t as M,S as $,T as L,a3 as A,L as D,I as V,q as B}from"./.pnpm-9c274078.js";import{_ as j,p as U,a as K}from"./index-e716b57f.js";import{_ as N}from"./empty-6f66e897.js";import{U as T}from"./userinfo-2d757c21.js";/* empty css                                                 */const P={__name:"pieAgent",props:{list:{type:Object,default:()=>{}}},setup(s){const i=s,o=e(null),d={chart:null};a((()=>{d.chart=t(o.value);let e=l(i.list),a=[];for(let t in e)a.push({value:e[t].total,name:e[t].agentLevelName});p(a)}));const p=e=>{d.chart.setOption({series:[{name:"代理总数",type:"pie",radius:["50%","90%"],color:["#A0E8EB","#D49DFF","#61C7F0","#FB623E","#FCB721","#6C9EFF","#62E595","#8165FF","#F9E85C","#94A9CE"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!1}},labelLine:{show:!1},data:(null==e?void 0:e.length)?e:[{value:10,name:"普通代理"},{value:20,name:"至尊代理"},{value:30,name:"高级代理"},{value:10,name:"特约代理"},{value:20,name:"超级代理"},{value:30,name:"金牌代理"}]}]},!0),window.onresize=function(){d.chart.resize()}};return(e,a)=>(n(),r("div",{ref_key:"chartRef",ref:o,style:{width:"180px",height:"180px"}},null,512))}},O={class:"line-box"},Y={class:"top-right"},R=j({__name:"chartBar4",props:{list:{type:Object,default:()=>{}},member:{type:Object,default:()=>{}},survey:{type:Boolean,default:!1}},emits:["update:active","load"],setup(g,{emit:h}){const f=g,b=e();function y(e){return e.getTime()>(new Date).getTime()}const x=s({activeKey:7}),C=e=>{if(e==x.activeKey)return!1;x.activeKey=e,b.value=void 0,k()},{activeKey:_}=i(x),w=e(null),z={chart:null},k=()=>{if(b.value)var e=f.list.custom;else{let a=l(f.list);if(1==x.activeKey)e=(null==a?void 0:a.today)||[];else if(7==x.activeKey)e=(null==a?void 0:a.sevenDays)||[];else if(15==x.activeKey)e=(null==a?void 0:a.fifteenDays)||[];else if(30==x.activeKey)e=(null==a?void 0:a.thisMonth)||[]}let a=e.map((e=>e.agentLevelName)),t=e.map((e=>e.performance)),n=f.member.map((e=>e.total));S(a,t,n)};a((()=>{z.chart=t(w.value),k()}));const S=(e,a,t)=>{z.chart.setOption({tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{let a=e[0],l=a.dataIndex;return`<p>代理人数：${t[l]}</p><p>${a.name}：${a.data}</p>`}},grid:{top:"20%",left:"0%",right:"1%",bottom:"2%",containLabel:!0},xAxis:{type:"category",data:(null==e?void 0:e.length)?e:["普通代理","高级代理","超级代理","至尊代理","特约代理","金牌代理"],axisLabel:{color:"#999999",formatter:function(a,t){return(null==e?void 0:e.length)>5?a.substring(0,2):a}}},yAxis:[{type:"value"}],series:[{name:"代理业绩",data:(null==a?void 0:a.length)?a:[12,45,56,45,12,23],barWidth:20,itemStyle:{borderRadius:[10,10,0,0],color:new c(0,1,0,0,[{offset:0,color:"#FFB192"},{offset:1,color:"#FA5B50"}])},type:"bar"}]},!0),window.onresize=function(){z.chart.resize()}};return(e,a)=>{const t=v;return n(),r("div",O,[o("div",{ref_key:"classChart",ref:w,style:{width:"100%",height:"230px"}},null,512),o("div",Y,[o("span",{onClick:a[0]||(a[0]=e=>C(1)),class:d({active:1==p(_)&&!b.value})},"今天",2),o("span",{onClick:a[1]||(a[1]=e=>C(7)),class:d({active:7==p(_)&&!b.value})},"近7天",2),o("span",{onClick:a[2]||(a[2]=e=>C(15)),class:d({active:15==p(_)&&!b.value})},"近15天",2),o("span",{onClick:a[3]||(a[3]=e=>C(30)),class:d({active:30==p(_)&&!b.value})},"近一个月",2),m(t,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=e=>b.value=e),style:{width:"260px"},type:"daterange","range-separator":"～",format:"YYYY/MM/DD","value-format":"X","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"small","disabled-date":y,onChange:a[5]||(a[5]=e=>(x.activeKey=0,void(b.value?h("load",b.value?{timeStart:b.value[0],timeEnd:Number(b.value[1])+86399}:{},(()=>u((()=>{k()})))):C(7))))},null,8,["modelValue"])])])}}},[["__scopeId","data-v-8dc3169a"]]),W={class:"flex-y box"},q=j({__name:"teamTable",props:{his:{type:Array,default:()=>[]}},setup(a){const t=a,l=_(),{$http:i}=l.appContext.config.globalProperties,o=g(),d=e({pageIndex:1,pageSize:20,total:0});e();const u=s({loading:!1,data:[],searchVal:{keyword:void 0,agentLevelId:void 0,order:"",status:void 0},selectList:[],load(e){var a;d.value=e||d.value,u.loading=!0;const l={page:d.value.pageIndex,limit:d.value.pageSize,memberId:null==(a=t.his.at(-1))?void 0:a.memberId};i.get("/api/v1/customer/censor/agent_member/team_list",{params:l}).then((e=>{u.data=e.data,d.value.total=e.total})).finally((()=>{u.loading=!1}))},handleSelectionChange(e){this.selectList=e},sortChnage({column:e,prop:a,order:t}){u.searchVal.order=t?`${a} ${"ascending"===t?"asc":"desc"}`:"",u.load()}});return h(t.his,(()=>{d.pageIndex=1,u.load()}),{immediate:!0}),(e,l)=>{const s=w,i=z,c=k,v=S,g=F;return n(),r("div",W,[f((n(),b(c,{data:u.data||[],class:"auto",stripe:!0,height:"60vh",onSortChange:u.sortChnage,onSelectionChange:u.handleSelectionChange},{default:y((()=>[m(s,{"min-width":"80",label:"账号",prop:"memberName"}),m(s,{prop:"levelName",label:"代理等级","min-width":"80"}),m(s,{"min-width":"80",label:"可用佣金",prop:"brokerageUsable"}),m(s,{"min-width":"80",label:"累计佣金",prop:"brokerageTotal"}),m(s,{"min-width":"80",label:"冻结佣金",prop:"brokerageFreeze"}),m(s,{"min-width":"100",label:"已提现佣金",prop:"brokerageCashed"}),m(s,{"min-width":"80",label:"总业绩",prop:"performanceTotal"}),m(s,{"min-width":"100",label:"充值金额",prop:"rechargeTotal"}),m(s,{"min-width":"80",label:"推广码",prop:"inviteCode"}),a.his.length<=3?(n(),b(s,{key:0,fixed:"right",label:"操作",align:"right","min-width":"50"},{default:y((({row:e})=>[m(i,{type:"primary",link:"",onClick:a=>t.his.push(e)},{default:y((()=>[x(" 详情 ")])),_:2},1032,["onClick"])])),_:1})):C("",!0)])),_:1},8,["data","onSortChange","onSelectionChange"])),[[g,u.loading]]),m(v,{onSizeChange:l[0]||(l[0]=e=>{d.value.pageSize=e,u.load()}),small:"",style:{"margin-top":"16px",display:"flex","justify-content":"flex-end"},onCurrentChange:l[1]||(l[1]=e=>{d.value.pageIndex=e,u.load()}),"current-page":d.value.pageIndex,"page-sizes":p(o).state.pageSizes,"page-size":d.value.pageSize,layout:"total, prev, pager, next, sizes, jumper",total:d.value.total},null,8,["current-page","page-sizes","page-size","total"])])}}},[["__scopeId","data-v-f5c6a73b"]]),Q={class:"exam-box"},X={class:"exam-header"},G=o("div",{class:"exam-title"},"各级代理数据",-1),H={style:{display:"flex",gap:"16px"},class:"panel"},J={class:"exam-content",style:{width:"350px"}},Z=o("div",{class:"exam-title"},"代理概况",-1),ee={class:"content-table"},ae={class:"container",style:{padding:"0"}},te={class:"chart-box"},le={class:"pieBox"},ne=o("p",null,"代理总数（人）",-1),re={class:"number",style:{"font-size":"36px"}},se={class:"pieInfo pieAgent"},ie={class:"infoItem"},oe={class:"infoStatus",style:{"text-align":"center"}},de={class:"pagination",style:{"font-size":"12px",padding:"0 32px","line-height":"5vh"}},pe={class:"filter",style:{margin:"0"}},me={class:"right"},ue={class:"search-item"},ce=o("span",null,"时间范围",-1),ve={class:"exam-content"},ge=o("div",{class:"exam-title"},"代理详情",-1),he={class:"content-table"},fe={class:"container",style:{padding:"0"}},be={class:"filter"},ye=o("div",{class:"right"},[o("div",{class:"search-item"})],-1),xe={class:"right"},Ce={class:"custom-input"},_e={class:"chart-box"},we=o("div",{class:"table-empty"},[o("img",{src:N,alt:"空状态"}),o("p",null,"暂无数据")],-1),ze={key:1},ke={class:"pagination"},Se=o("span",{style:{color:"var(--el-button-text-color) !important"}},"返回",-1),Fe={__name:"index",setup(t){const l=_(),{$http:d}=l.appContext.config.globalProperties,u=g(),c=e([]),h=s({dl:{},search:"",value_time:[],refresh:!0}),j=e({}),N=(e,a)=>d.get("/api/v1/customer/censor/agent_member/agent/statistics",{params:e||{thisisexam:!0}}).then((({data:e})=>{j.value=e,a&&a()})).finally((()=>{})),O=(e,a)=>(h.refresh=!1,d.get("/api/v1/customer/censor/agent_member/agent/statistics",{params:e}).then((({data:e})=>{h.dl=e})).finally((()=>{h.refresh=!0})));a((()=>{Y(),O(),N()}));const Y=async()=>{var e,a;W.loading=!0;let t={limit:W.pageSize,page:W.currentPage};""!=h.search&&(t.keyword=h.search),h.agentLevelId&&(t.agentLevelId=h.agentLevelId),(null==(e=h.value_time)?void 0:e.length)>0&&(t.timeStart=h.value_time[0]/1e3,t.timeEnd=Number(h.value_time[1]/1e3+86399));var{data:l}=await d.get("/api/v1/customer/censor/agent_member/agent/list",{params:t});W.tableData=null!=(a=l.list)?a:[],W.total=(null==l?void 0:l.total)||0,W.loading=!1},W=s({tableData:[],currentPage:1,pageSize:20,total:0,order:"",loading:!1,current(e){W.currentPage=e,Y()},size(e){W.pageSize=e,W.currentPage=1,Y()},sort(e){const{prop:a,order:t}=e;W.order=a&&t?`${a},${"descending"==t?"desc":"asc"}`:"",Y()}}),{dl:Fe,search:Ie,value_time:Ee,refresh:Me}=i(h),{total:$e,currentPage:Le,pageSize:Ae,tableData:De,loading:Ve}=i(W);return(e,a)=>{var t,l,s,i,d,g,h,_,Be,je;const Ue=z,Ke=v,Ne=I,Te=K,Pe=V,Oe=w,Ye=k,Re=S,We=E,qe=F;return n(),r("div",Q,[o("div",X,[G,(null==(t=j.value)?void 0:t.totalAgentMemberContinued)?(n(),b(R,{key:0,list:null==(l=j.value)?void 0:l.totalAgentMemberContinued,member:null==(i=null==(s=j.value)?void 0:s.agentMember)?void 0:i.agentMember,onLoad:N},null,8,["list","member"])):C("",!0)]),o("div",H,[o("div",J,[Z,o("div",ee,[o("div",ae,[o("div",te,[f((n(),r("div",le,[ne,o("p",null,[o("span",re,M((null==(d=p(Fe).agentMember)?void 0:d.total)||0),1)]),(null==(h=null==(g=p(Fe))?void 0:g.agentMember)?void 0:h.agentMember)&&p(Me)?(n(),b(P,{key:0,list:null==(_=p(Fe))?void 0:_.agentMember.agentMember},null,8,["list"])):C("",!0),o("div",se,[(n(!0),r($,null,L(null==(je=null==(Be=p(Fe))?void 0:Be.agentMember)?void 0:je.agentMember,((e,a)=>(n(),r("div",ie,[o("div",oe,[o("span",{style:B({background:["#A0E8EB","#D49DFF","#61C7F0","#FB623E","#FCB721","#6C9EFF","#62E595","#8165FF","#F9E85C","#94A9CE"][a]}),class:"tag"},null,4),o("span",null,M(e.agentLevelName||"默认代理"),1)]),o("span",null,M(e.total||0),1)])))),256))])])),[[qe,!p(Me)]])]),o("div",de,[x(M(p(Ee)&&p(Ee)[0]?p(U)(p(Ee)[0],"{y}-{m}-{d}")+"~":"")+" "+M(p(Ee)&&p(Ee)[1]?p(U)(p(Ee)[1],"{y}-{m}-{d}")+"":"")+" ",1),m(Ne,{placement:"bottom",width:350,trigger:"click",teleported:!1},{reference:y((()=>[m(Ue,{class:"m-2",type:"primary",style:{"margin-left":"auto"},link:""},{default:y((()=>[x(" 筛选 ")])),_:1})])),default:y((()=>[o("div",pe,[o("div",me,[o("div",ue,[ce,m(Ke,{class:"item",modelValue:p(Ee),"onUpdate:modelValue":a[0]||(a[0]=e=>A(Ee)?Ee.value=e:null),placement:"top","value-format":"x",teleported:!1,onChange:a[1]||(a[1]=e=>{O(p(Ee)?{timeStart:p(Ee)[0]/1e3,timeEnd:Number(p(Ee)[1]/1e3+86399)}:{}),Y()}),style:{width:"240px","--el-font-size-base":"12px"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"default"},null,8,["modelValue"])])])])])),_:1})])])])]),o("div",ve,[ge,o("div",he,[o("div",fe,[o("div",be,[ye,o("div",xe,[o("div",Ce,[m(Te,{color:"#999",size:"14px",onClick:a[2]||(a[2]=e=>Y()),name:"search"}),m(Pe,{class:"seachInput",onKeyup:a[3]||(a[3]=D((e=>Y()),["enter","native"])),placeholder:"搜索关键字",modelValue:p(Ie),"onUpdate:modelValue":a[4]||(a[4]=e=>A(Ie)?Ie.value=e:null)},null,8,["modelValue"])])])]),o("div",_e,[f((n(),b(Ye,{onSortChange:W.sort,"tooltip-effect":"light",height:"38vh",data:p(De)},{empty:y((()=>[we])),default:y((()=>[m(Oe,{label:"用户名",prop:"username","min-width":"100",align:"left"},{default:y((({row:e})=>[m(T,{name:e.username,id:e.memberId},null,8,["name","id"])])),_:1}),m(Oe,{label:"代理等级",prop:"agentName",formatter:e.$formatter},null,8,["formatter"]),m(Oe,{label:"我的团队(人)",prop:"teamMember",formatter:e.$formatter},{default:y((({row:e})=>[e.teamMember?(n(),b(Ue,{key:0,link:"",type:"primary",onClick:a=>c.value.push(e)},{default:y((()=>[x(M(e.teamMember),1)])),_:2},1032,["onClick"])):(n(),r("span",ze,"-"))])),_:1},8,["formatter"]),m(Oe,{label:"直属代理",prop:"parent1Username",formatter:e.$formatter},{default:y((({row:e})=>[e.parent1Username?(n(),b(T,{key:0,name:e.parent1Username,id:e.parentId1},null,8,["name","id"])):C("",!0)])),_:1},8,["formatter"]),m(Oe,{label:"所属团队",prop:"parent2Username",formatter:e.$formatter},{default:y((({row:e})=>[e.parent2Username?(n(),b(T,{key:0,name:e.parent2Username,id:e.parentId2},null,8,["name","id"])):C("",!0)])),_:1},8,["formatter"]),m(Oe,{label:"累计佣金",prop:"brokerageTotal",formatter:e.$formatter},null,8,["formatter"]),m(Oe,{label:"总业绩",prop:"performanceTotal",formatter:e.$formatter},null,8,["formatter"]),m(Oe,{label:"累计充值金额",prop:"rechargeTotal",formatter:e.$formatter},null,8,["formatter"]),m(Oe,{label:"推广码 ",prop:"inviteCode",formatter:e.$formatter},null,8,["formatter"])])),_:1},8,["onSortChange","data"])),[[qe,p(Ve)]])]),o("div",ke,[m(Re,{onSizeChange:W.size,small:"",onCurrentChange:W.current,"current-page":p(Le),"page-sizes":p(u).state.pageSizes,"page-size":p(Ae),layout:"total, prev, pager, next, sizes, jumper",total:p($e)},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])])])])]),m(We,{modelValue:c.value.length>0,title:"团队列表",width:"1200",top:"10vh","destroy-on-close":"",onClose:a[6]||(a[6]=e=>c.value.length=0)},{title:y((()=>{var t,l;return[x(M((null==(t=c.value.at(-1))?void 0:t.username)||(null==(l=c.value.at(-1))?void 0:l.memberName))+"的团队列表 ",1),c.value.length>1?(n(),b(Ue,{key:0,type:"primary",link:"",onClick:a[5]||(a[5]=a=>c.value.pop(e.row)),style:{"margin-bottom":"3px"}},{default:y((()=>[Se])),_:1})):C("",!0)]})),default:y((()=>[m(q,{his:c.value},null,8,["his"])])),_:1},8,["modelValue"])])}}};export{Fe as default};
