import{h as e,R as t,x as a,aH as l,o as s,c as o,w as r,a as i,e as n,d as p,u as d,B as c,g as u,I as m,J as f,K as g,f as h,ad as v,A as b,D as y,al as _,am as k,ao as x,b as w,L as C,a3 as S,af as z,W as O,i as D,O as V,P as j}from"./.pnpm-9c274078.js";import{_ as P,a as U}from"./index-e716b57f.js";import{_ as $}from"./empty-6f66e897.js";const J={class:"content"},L={__name:"update",props:{visible:{type:Boolean,default:()=>!1}},emits:["update:visible","refreshDataList"],setup(b,{expose:y,emit:_}){const k=c(),{$http:x}=k.appContext.config.globalProperties,w=e({form:{},currObj:"add"}),{form:C,currObj:S}=t(w),z=a(null),O=async e=>{e?await z.value.validate((async(e,t)=>{if(e){let e=JSON.parse(JSON.stringify(w.form));"add"!=w.currObj&&(e.id=w.currObj),await x.post("/api/v1/customer/express",e),u({position:"bottom-right",title:"提示",type:"success",message:"操作成功"}),_("update:visible",!1),_("refreshDataList")}})):(z.value&&z.value.resetFields(),_("update:visible",!1))};return y({init:(e,t)=>{w.form={sort:t+1},w.currObj=e,"add"!=e&&x.get(`/api/v1/customer/express/${e}`).then((({data:e})=>{w.form={content:e.content,sort:e.sort}}))}}),(e,t)=>{const a=m,c=f,u=l,y=g,_=h,k=v;return s(),o(k,{"model-value":b.visible,"z-index":30,title:"add"==d(S)?"添加常用语":"编辑常用语","close-on-click-modal":!1,onClose:t[4]||(t[4]=e=>O(!1)),top:"20vh",width:"450px"},{footer:r((()=>[i(_,{size:"small",type:"default",onClick:t[2]||(t[2]=e=>O(!1))},{default:r((()=>[n("取消")])),_:1}),i(_,{type:"primary",size:"small",onClick:t[3]||(t[3]=e=>O(!0))},{default:r((()=>[n("保存")])),_:1})])),default:r((()=>[p("div",J,[i(y,{model:d(C),ref_key:"ruleFormRef",ref:z,"label-width":"60px"},{default:r((()=>[i(c,{label:"内容",prop:"content",rules:[{required:!0,whitespace:!0,message:"请输入内容",trigger:"blur"}]},{default:r((()=>[i(a,{modelValue:d(C).content,"onUpdate:modelValue":t[0]||(t[0]=e=>d(C).content=e),type:"textarea",rows:6,placeholder:"请输入内容"},null,8,["modelValue"])])),_:1}),i(c,{label:"序号",prop:"sort"},{default:r((()=>[i(u,{modelValue:d(C).sort,"onUpdate:modelValue":t[1]||(t[1]=e=>d(C).sort=e),min:1,step:1,"step-strictly":"","controls-position":"right"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["model-value","title"])}}},N={class:"container"},R={class:"filter"},I={class:"right"},K={class:"custom-input"},B=(e=>(V("data-v-59e63159"),e=e(),j(),e))((()=>p("div",{class:"table-empty"},[p("img",{src:$,alt:"空状态"}),p("p",null,"暂无数据")],-1))),F=P({__name:"index",setup(l){const f=b(),g=c(),{$http:v}=g.appContext.config.globalProperties,V=e({loading:!1,status:"",search:"",isUpdate:!1}),{loading:j,status:P,search:$,isUpdate:J}=t(V),F=a(null),q={update(e){V.isUpdate=!0;let t=JSON.parse(JSON.stringify(e));O((()=>{F.value.init(t,H.total)}))},clickDel(e){D.confirm("确定删除此条数据吗？","确认").then((async()=>{var{data:t}=await v.delete("/api/v1/customer/express",{data:{ids:[e]}});u({position:"bottom-right",title:"提示",type:"success",message:t||"操作成功"}),A()})).catch((()=>{}))}};y((()=>{A()}));const A=()=>{V.loading=!0;let e={limit:H.pageSize,page:H.currentPage};""!=V.search&&(e.keywords=V.search),v.get("/api/v1/customer/express",{params:e}).then((e=>{let{data:t}=e;H.tableData=t.list,H.total=t.total,V.loading=!1}))},H=e({tableData:[],currentPage:1,pageSize:f.state.pageSize,total:0,multipleSelection:[],order:"",size(e){H.pageSize=e,H.currentPage=1,A()},current(e){H.currentPage=e,A()},selection(e){H.multipleSelection=e},sort(e){const{prop:t,order:a}=e;H.order=t&&a?`${t} ${"descending"==a?"desc":"asc"}`:"",A()}}),{total:W,currentPage:E,pageSize:G,tableData:M}=t(H);return(e,t)=>{const a=h,l=U,c=m,u=_,f=k,g=x;return s(),w("div",N,[p("div",R,[i(a,{type:"primary",onClick:t[0]||(t[0]=e=>q.update("add"))},{default:r((()=>[n("新增常用语")])),_:1}),p("div",I,[p("div",K,[i(l,{onClick:A,color:"#999",size:"14 px",name:"search"}),i(c,{class:"seachInput",placeholder:"搜索关键字",onKeyup:C(A,["enter","native"]),modelValue:d($),"onUpdate:modelValue":t[1]||(t[1]=e=>S($)?$.value=e:null)},null,8,["onKeyup","modelValue"])])])]),z((s(),o(f,{onSortChange:H.sort,"tooltip-effect":"light",height:"78vh",data:d(M),style:{width:"100%"}},{empty:r((()=>[B])),default:r((()=>[i(u,{prop:"sort",align:"left",label:"顺序"}),i(u,{label:"内容","show-overflow-tooltip":!0,formatter:e.$formatter,prop:"content"},null,8,["formatter"]),i(u,{label:"操作",align:"right"},{default:r((({row:e})=>[i(a,{type:"primary",onClick:t=>q.update(e.id),link:""},{default:r((()=>[n("编辑")])),_:2},1032,["onClick"]),i(a,{type:"danger",onClick:t=>q.clickDel(e.id),link:""},{default:r((()=>[n("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["onSortChange","data"])),[[g,d(j)]]),i(L,{visible:d(J),"onUpdate:visible":t[2]||(t[2]=e=>S(J)?J.value=e:null),ref_key:"updateRef",ref:F,onRefreshDataList:t[3]||(t[3]=e=>A())},null,8,["visible"])])}}},[["__scopeId","data-v-59e63159"]]);export{F as default};
