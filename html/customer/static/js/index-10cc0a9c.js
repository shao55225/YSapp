import{A as e,h as a,D as l,R as t,aj as r,ak as n,ai as s,a7 as o,al as i,am as d,an as p,ao as m,o as c,b as u,d as g,a as v,w as h,S as f,T as b,u as y,a3 as x,af as _,c as I,Q as k,t as z,e as w,L as C,B as S,H as P,f as j,I as B,O as $,P as V}from"./.pnpm-9c274078.js";import{_ as U,p as L,a as A}from"./index-e716b57f.js";import{_ as F}from"./empty-6f66e897.js";import{c as N}from"./cprogress-89103bb1.js";import{l as D}from"./line2-83ec5b8b.js";import{U as E}from"./userinfo-2d757c21.js";/* empty css                                                 */const M=e=>($("data-v-91713115"),e=e(),V(),e),O={class:"exam-box"},T={class:"exam-header"},H={class:"exam-title"},K=M((()=>g("p",null,"分佣数据走势",-1))),Q={class:"exam-searh-box"},R={class:"search-item"},q=M((()=>g("span",null,"推广渠道",-1))),G={style:{display:"flex",gap:"16px"},class:"panel"},J={class:"exam-content",style:{width:"350px"}},W=M((()=>g("div",{class:"exam-title"},"分佣概况",-1))),X={class:"content-table"},Y={class:"container"},Z={class:"chart-box"},ee={class:"pieBox",style:{"justify-content":"flex-start",gap:"24px 0","padding-right":"0"}},ae=M((()=>g("p",null,"累计分佣（元）",-1))),le={class:"number",style:{"font-size":"36px"}},te={key:0,class:"fyInfo",style:{gap:"24px 0","padding-right":"16px"}},re={key:1,class:"table-empty",style:{padding:"16px 0 0",width:"100%"}},ne=[M((()=>g("img",{src:F,alt:"空状态",style:{width:"120px"}},null,-1))),M((()=>g("p",{style:{"font-size":"12px"}},"暂无数据",-1)))],se={class:"pagination",style:{"font-size":"12px",padding:"0 16px","line-height":"5vh"}},oe={class:"filter",style:{margin:"0"}},ie={class:"right"},de={class:"search-item"},pe=M((()=>g("span",null,"时间范围",-1))),me={class:"exam-content"},ce=M((()=>g("div",{class:"exam-title"},"分佣详情",-1))),ue={class:"content-table"},ge={class:"container",style:{padding:"0"}},ve={class:"filter"},he=M((()=>g("div",{class:"right"},[g("div",{class:"search-item"})],-1))),fe={class:"right"},be={class:"custom-input"},ye={class:"chart-box"},xe=M((()=>g("div",{class:"table-empty"},[g("img",{src:F,alt:"空状态"}),g("p",null,"暂无数据")],-1))),_e={class:"pagination"},Ie=U({__name:"index",setup($){const V=S(),{$http:U}=V.appContext.config.globalProperties,F=e(),M=a({fy:{},search:"",options:[],agentLevelId:"",value_time:[],channelId:"",refresh:!0}),Ie=()=>{var e;M.refresh=!1;let a={};(null==(e=M.value_time)?void 0:e.length)>0&&(a={timeStart:M.value_time[0]/1e3,timeEnd:Number(M.value_time[1]/1e3+86399)}),U.get("/api/v1/customer/censor/agent_member/brokerage/statistics",{params:{...a,channelId:"number"==typeof Ve.value?Ve.value:void 0}}).then((({data:e})=>{M.fy=e})).finally((()=>{M.refresh=!0}))},ke=a({data:[]});l((()=>{ze(),Ie(),U.get("/api/v1/customer/filter/agent_level/id_name").then((({data:e})=>{M.options=e})),U.get("/api/v1/customer/filter/member_channel").then((e=>{ke.data=e.data})).finally((()=>{}))}));const ze=async()=>{var e,a,l;we.loading=!0;let t={limit:we.pageSize,page:we.currentPage};if(""!=M.search&&(t.keyword=M.search),M.agentLevelId&&(t.agentLevelId=M.agentLevelId),we.order){let e=we.order.split(",");t.orderName=e[0],t.orderSerial=e[1]}(null==(e=M.value_time)?void 0:e.length)>0&&(t.timeStart=M.value_time[0]/1e3,t.timeEnd=Number(M.value_time[1]/1e3+86399)),""!==M.channelId&&(t.channelId=M.channelId);var{data:r}=await U.get("/api/v1/customer/censor/agent_member/brokerage",{params:t});we.tableData=null!=(l=null==(a=r.list)?void 0:a.data)?l:[],we.total=(null==r?void 0:r.total)||0,we.loading=!1},we=a({tableData:[],currentPage:1,pageSize:20,total:0,order:"",loading:!1,current(e){we.currentPage=e,ze()},size(e){we.pageSize=e,we.currentPage=1,ze()},sort(e){const{prop:a,order:l}=e;we.order=a&&l?`${a},${"descending"==l?"desc":"asc"}`:"",ze()}}),Ce=a({loading:!1,data:{},load:()=>(Ce.loading=!0,U.get("/api/v1/customer/censor/agent_member/brokerage/statistics",{params:{channelId:"number"==typeof M.channelId?M.channelId:void 0,xx:"xx"}}).then((({data:e})=>{Ce.data=e})).finally((()=>{Ce.loading=!1})))});Ce.load();const{fy:Se,search:Pe,options:je,agentLevelId:Be,value_time:$e,channelId:Ve,refresh:Ue}=t(M),{total:Le,currentPage:Ae,pageSize:Fe,tableData:Ne,loading:De}=t(we);return(e,a)=>{var l,t,S;const $=r,V=n,U=P,M=j,je=s,Be=o,Ee=A,Me=B,Oe=i,Te=d,He=p,Ke=m;return c(),u("div",O,[g("div",T,[g("div",H,[K,g("div",Q,[g("div",R,[q,v(V,{modelValue:y(Ve),"onUpdate:modelValue":a[0]||(a[0]=e=>x(Ve)?Ve.value=e:null),onChange:a[1]||(a[1]=e=>{ze(),Ce.load(),Ie()}),clearable:"",filterable:"",placeholder:"所有渠道"},{default:h((()=>[v($,{label:"默认渠道",value:0}),(c(!0),u(f,null,b(ke.data,(e=>(c(),I($,{label:e.name,value:e.id},null,8,["label","value"])))),256))])),_:1},8,["modelValue"])])])]),Ce.data.totalBrokerageContinued?_((c(),I(D,{key:0,type:3,load:Ce.load,list:Ce.data.totalBrokerageContinued},null,8,["load","list"])),[[Ke,Ce.loading]]):k("",!0)]),g("div",G,[g("div",J,[W,g("div",X,[g("div",Y,[g("div",Z,[_((c(),u("div",ee,[ae,g("p",null,[g("span",le,z((null==(t=null==(l=y(Se))?void 0:l.totalBrokerage)?void 0:t.whole.total)||0),1)]),(null==(S=y(Se).totalBrokerage)?void 0:S.topPerson3.length)>0&&y(Ue)?(c(),u("div",te,[(c(!0),u(f,null,b(new Array(10),((e,a)=>{var l,t,r,n,s,o,i;return c(),I(N,{type:5,size:"24px",color:a<=(null==(l=y(Se).totalBrokerage)?void 0:l.topPerson3.length)-1?["#FF5E09","#FFC071","#FFE680"][a]||"eaebc5":"#ebeef5",title:"TOP"+(a+1),text:`¥${(null==(r=null==(t=y(Se).totalBrokerage)?void 0:t.topPerson3[a])?void 0:r.total)||0}`,percentage:100*Number((null==(s=null==(n=y(Se).totalBrokerage)?void 0:n.topPerson3[a])?void 0:s.total)/(null==(i=null==(o=y(Se))?void 0:o.totalBrokerage)?void 0:i.whole.total))||0},null,8,["color","title","text","percentage"])})),256))])):(c(),u("div",re,ne))])),[[Ke,!y(Ue)]])]),g("div",se,[w(z(y($e)&&y($e)[0]?y(L)(y($e)[0],"{y}-{m}-{d}")+"~":"")+" "+z(y($e)&&y($e)[1]?y(L)(y($e)[1],"{y}-{m}-{d}")+"":"")+" ",1),v(Be,{placement:"bottom",width:350,trigger:"click",teleported:!1},{reference:h((()=>[v(M,{class:"m-2",type:"primary",style:{"margin-left":"auto",padding:"0"},link:""},{default:h((()=>[v(U,null,{default:h((()=>[w("筛选")])),_:1})])),_:1})])),default:h((()=>[g("div",oe,[g("div",ie,[g("div",de,[pe,v(je,{class:"item",teleported:!1,placement:"top",modelValue:y($e),"onUpdate:modelValue":a[2]||(a[2]=e=>x($e)?$e.value=e:null),"value-format":"x",onChange:a[3]||(a[3]=e=>{Ie(),ze()}),style:{width:"240px","--el-font-size-base":"12px"},type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"default"},null,8,["modelValue"])])])])])),_:1})])])])]),g("div",me,[ce,g("div",ue,[g("div",ge,[g("div",ve,[he,g("div",fe,[g("div",be,[v(Ee,{color:"#999",size:"14px",onClick:a[4]||(a[4]=e=>ze()),name:"search"}),v(Me,{class:"seachInput",onKeyup:a[5]||(a[5]=C((e=>ze()),["enter","native"])),placeholder:"搜索关键字",modelValue:y(Pe),"onUpdate:modelValue":a[6]||(a[6]=e=>x(Pe)?Pe.value=e:null)},null,8,["modelValue"])])])]),g("div",ye,[_((c(),I(Te,{onSortChange:we.sort,"tooltip-effect":"light",height:"36vh",data:y(Ne)},{empty:h((()=>[xe])),default:h((()=>[v(Oe,{label:"用户名",prop:"memberUsername","min-width":"100",align:"left"},{default:h((({row:e})=>[v(E,{name:e.memberUsername,id:e.memberId},null,8,["name","id"])])),_:1}),v(Oe,{label:"推广渠道"},{default:h((({row:e})=>[g("span",null,z(e.channel?e.channel:e.channelId?e.channelId:"默认渠道"),1)])),_:1}),v(Oe,{label:"代理等级",prop:"memberLevelName",formatter:e.$formatter},null,8,["formatter"]),v(Oe,{label:"充值会员",prop:"rechargeMemberUsername"},{default:h((({row:e})=>[v(E,{name:e.rechargeMemberUsername,id:e.rechargeMemberId},null,8,["name","id"])])),_:1}),v(Oe,{label:"充值说明",prop:"rechargeAttach",formatter:e.$formatter},null,8,["formatter"]),v(Oe,{label:"充值金额",prop:"rechargeAmount",formatter:e.$formatter},null,8,["formatter"]),v(Oe,{label:"佣金比例",prop:""},{default:h((({row:e})=>[g("span",null,z(`${Math.round(100*e.brokerageScale)}%`||"-"),1)])),_:1}),v(Oe,{label:"佣金数额",prop:"amount2",formatter:e.$formatter},null,8,["formatter"]),v(Oe,{label:"当前佣金",prop:"amount3",formatter:e.$formatter},null,8,["formatter"]),v(Oe,{label:"提成时间",width:"150",prop:"placeAt",sortable:""},{default:h((({row:e})=>[g("span",null,z(y(L)(e.brokerageAt)||"-"),1)])),_:1})])),_:1},8,["onSortChange","data"])),[[Ke,y(De)]])]),g("div",_e,[v(He,{onSizeChange:we.size,small:"",onCurrentChange:we.current,"current-page":y(Ae),"page-sizes":y(F).state.pageSizes,"page-size":y(Fe),layout:"total, prev, pager, next, sizes, jumper",total:y(Le)},null,8,["onSizeChange","onCurrentChange","current-page","page-sizes","page-size","total"])])])])])])])}}},[["__scopeId","data-v-91713115"]]);export{Ie as default};
