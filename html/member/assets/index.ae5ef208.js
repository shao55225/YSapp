import{P as le,d as We,b as ae,c as Pe,am as $o,an as Mo,f as be,S as Ie,i as L,k as i,w as u,s as I,l as To,t as oe,ae as mo,j as V,F as ce,D as pe,T as z,q as T,N as Z,W as me,_ as ge,r as q,Z as Ce,$ as vt,e as Se,Q as Xe,R as Je,h as $e,B as wt,C as lt,G as ke,az as Ct,aA as xt,aB as It,al as Ve,y as Ut,aC as zt,a7 as Q,E as je,ag as ho,a5 as go,p as rt,n as st,ar as Qt,aD as Oo,o as Ze,a6 as Vo,v as Re,aa as Lo,aE as No,aw as _o,O as it,au as Uo,L as dt,aF as eo,a2 as Ro,aG as qo,aH as zo,ab as jo,ay as Ho,aI as Ko,U as to,V as oo,X as Go,aJ as Mt}from"./entry.40130a59.js";/* empty css                        *//* empty css                  *//* empty css                   */import{m as ze}from"./message.61fa73af.js";/* empty css                          *//* empty css                  *//* empty css                          *//* empty css                 *//* empty css                    */const Wo=(r={page:0})=>le({url:"/site",method:"get",params:r,version:"v3"}),Xo=r=>le({url:"/custom/pay/disposition/all",method:"get",params:r}),Jo=r=>le({url:"/custom/pay/disposition/"+r,method:"get"}),jt=r=>le({url:"/custom/pay/disposition",method:"post",data:r}),Zo=r=>le({url:"/custom/pay/disposition",method:"put",data:r}),Yo=r=>le({url:"/custom/pay/disposition/"+r,method:"delete"}),Qo=r=>le({url:"/custom/pay/disposition/bind",method:"post",data:r}),ea=()=>le({url:"/custom/pay/disposition/parameterType",method:"get"}),ta=()=>le({url:"/custom/pay/disposition/constant",method:"get"}),oa=()=>le({url:"/custom/pay/disposition/parameterVal",method:"get"}),bt=r=>le({url:"/custom/pay/disposition/quote/"+r,method:"get"}),aa=r=>le({url:"/custom/pay/disposition/responseVal/"+r,method:"get"}),Ht=r=>le({url:`/custom/pay/argument/${r}/all`,method:"get"}),na=r=>le({url:"/custom/pay/argument",method:"post",data:r}),la=r=>le({url:"/custom/pay/argument/"+r.id,method:"put",data:r}),kt=r=>le({url:"/custom/pay/argument/"+r,method:"get"}),ra=r=>le({url:"/custom/pay/argument/"+r,method:"delete"}),sa=r=>le({url:"/custom/pay/sign/all/"+r,method:"get"}),ia=r=>le({url:"/custom/pay/sign",method:"post",data:r}),da=r=>le({url:"/custom/pay/sign/"+r.id,method:"put",data:r}),ua=r=>le({url:"/custom/pay/sign/"+r,method:"get"}),ca=r=>le({url:"/custom/pay/sign/"+r,method:"delete"}),pa=(r,e)=>le({url:"/custom/pay/interface/"+e,method:"post",data:r}),Dt=(r,e)=>le({url:"/custom/pay/interface/"+e+"/"+r,method:"get"}),fa=(r,e)=>le({url:"/custom/pay/interface/"+e+"/"+r.id,method:"put",data:r}),yo=(r,e)=>le({url:`/payCfg/create/${e}`,method:"post",data:r}),vo=r=>le({url:`/payCfg/${r}`,method:"get"}),ma=(r,e)=>le({url:"/custom/pay/disposition/test/"+r,method:"get",params:e}),ha=({id:r,orderNo:e})=>le({url:`/custom/pay/disposition/query/${r}/${e}`,method:"get"}),ga=()=>le({url:"/custom/pay/disposition/test/create/orderNo",method:"get"}),_a=r=>le({url:"/custom/pay/disposition/export/"+r,method:"get"}),ya=(r,e)=>le({url:"/custom/pay/disposition/import/analyze",method:"post",data:r,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e}),va=(r,e)=>le({url:"/custom/pay/disposition/import",method:"post",data:r,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e}),ba=r=>le({url:"/custom/pay/disposition/state",method:"put",data:r}),ka={style:{padding:"24px 0"}},wa={class:"footer"},Ca=T("\u53D6\u6D88"),xa=T("\u786E\u5B9A"),Ia=We({__name:"bindSite",emits:["load"],setup(r,{expose:e,emit:o}){const t=ae({id:null,siteId:[],key:void 0}),a=()=>{t.siteId=[],t.key=void 0,n.visible=!1},n=ae({loading:!1,visible:!1,siteOption:[]}),l=()=>{n.loading=!0,Wo({keywords:t.key}).then(c=>{n.siteOption=c.list}).finally(()=>n.loading=!1)},s=()=>{n.loading=!0,Qo({id:t.id,siteIds:t.siteId}).then(c=>{me({position:"bottom-right",type:"success",message:"\u7ED1\u5B9A\u6210\u529F"}),o("load"),a()}).finally(()=>n.loading=!1)};return e({openModal:async c=>{await l(),c&&(t.id=c.id,t.siteId=c.sites.map(f=>f.id)),n.visible=!0}}),(c,f)=>{const p=Pe,g=$o,C=Mo,x=be,k=Ie;return I(),L("div",null,[i(k,{"model-value":n.visible,"show-close":!n.loading,"close-on-press-escape":!1,title:"\u7ED1\u5B9A\u7AD9\u70B9",width:460,"z-index":20,"close-on-click-modal":!1,onClose:a},{default:u(()=>[i(p,{modelValue:t.key,"onUpdate:modelValue":f[0]||(f[0]=b=>t.key=b),size:"large",onBlur:l,onKeyup:To(l,["enter"]),onClear:l,placeholder:"\u641C\u7D22\u7AD9\u70B9\u540D\u79F0","prefix-icon":oe(mo)},null,8,["modelValue","onKeyup","prefix-icon"]),V("div",ka,[i(C,{modelValue:t.siteId,"onUpdate:modelValue":f[1]||(f[1]=b=>t.siteId=b)},{default:u(()=>[(I(!0),L(ce,null,pe(n.siteOption,b=>(I(),z(g,{label:b.id},{default:u(()=>[T(Z(b.name),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),V("div",wa,[i(x,{onClick:a,size:"small"},{default:u(()=>[Ca]),_:1}),i(x,{onClick:s,size:"small",loading:n.loading,type:"primary"},{default:u(()=>[xa]),_:1},8,["loading"])])]),_:1},8,["model-value","show-close"])])}}});const Da=ge(Ia,[["__scopeId","data-v-f2290072"]]),Fa=T(" \u53D6\u6D88 "),Pa=T(" \u4FDD\u5B58 "),Ba=We({__name:"editAliPay",props:{tempType:{type:Number,default:1}},emits:["load"],setup(r,{expose:e,emit:o}){const t=r,a=q(),n=q(0),l=ae({dayMaxMoney:void 0,onceMaxMoney:void 0,sort:0,name:"",appId:"",publicKey:"",privateKey:"",status:1,afterNotifyDomain:"",preNotifyDomain:"http://"}),s=ae({loading:!1,visible:!1,other:void 0}),d=q(),c=Ce("debounce")(x=>{!x||x.validate(k=>{k&&(s.loading=!0,yo({...l,id:s.other.id,dayMaxMoney:l.dayMaxMoney?l.dayMaxMoney*100:void 0,onceMaxMoney:l.onceMaxMoney?l.onceMaxMoney*100:void 0,alipay:{appId:l.appId,privateKey:l.privateKey,publicKey:l.publicKey,notifyDomain:l.preNotifyDomain+l.afterNotifyDomain}},1).then(b=>{t.tempType===2?jt({title:l.name,state:1,payType:d.value,payConfigId:b,clientWeb:2,clientH5:2,clientAPP:2}).then(m=>{me({position:"bottom-right",type:"success",message:"\u914D\u7F6E\u65B0\u589E\u6210\u529F"}),f()}):(me({position:"bottom-right",type:"success",message:"\u914D\u7F6E\u66F4\u65B0\u6210\u529F"}),f())}).finally(()=>{s.loading=!1}))})},300),f=()=>{o("load"),s.other=void 0,s.visible=!1},p={};function g(){var k,b,m,F,B,D,$,_,y,h,E,O,w,S,v,M,P;Object.keys(l).forEach(W=>{var R,ne;((R=s.other)==null?void 0:R[W])!==void 0&&(l[W]=(ne=s.other)==null?void 0:ne[W])}),l.dayMaxMoney=(k=s.other)!=null&&k.dayMaxMoney?((b=s.other)==null?void 0:b.dayMaxMoney)/100:void 0,l.onceMaxMoney=(m=s.other)!=null&&m.onceMaxMoney?((F=s.other)==null?void 0:F.onceMaxMoney)/100:void 0,l.id=(B=s.other)==null?void 0:B.id,l.appId=($=(D=s.other)==null?void 0:D.AliPay)==null?void 0:$.appId,l.publicKey=(y=(_=s.other)==null?void 0:_.AliPay)==null?void 0:y.publicKey,l.privateKey=(E=(h=s.other)==null?void 0:h.AliPay)==null?void 0:E.privateKey;const x=((S=(w=(O=s.other)==null?void 0:O.AliPay)==null?void 0:w.notifyDomain)==null?void 0:S.slice(0,5))==="https";l.preNotifyDomain=x?"https://":"http://",l.afterNotifyDomain=(P=(M=(v=s.other)==null?void 0:v.AliPay)==null?void 0:M.notifyDomain)==null?void 0:P.slice(x?8:7)}e({open(x,k){var b;d.value=k,x?vo(x).then(m=>{s.visible=!0,s.other=m}):((b=a.value)==null||b.resetFields(),s.visible=!0,s.other={})},formId:n,clearFrom(){n.value=0}});const C=vt(()=>{var x;return(x=s.other)!=null&&x.id?"\u7F16\u8F91\u914D\u7F6E":"\u65B0\u589E\u914D\u7F6E"});return(x,k)=>{const b=Pe,m=Se,F=Xe,B=Je,D=$e,$=be,_=Ie,y=wt;return I(),L("div",null,[i(_,{"model-value":s.visible,"show-close":!s.loading,"close-on-press-escape":!1,title:oe(C),width:450,"z-index":20,"close-on-click-modal":!1,onClose:f,onOpened:g},{footer:u(()=>[i($,{class:"ml-auto",size:"small",loading:s.loading,onClick:f},{default:u(()=>[Fa]),_:1},8,["loading"]),i($,{loading:s.loading,size:"small",type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:k[6]||(k[6]=h=>oe(c)(a.value))},{default:u(()=>[Pa]),_:1},8,["loading"])]),default:u(()=>[lt((I(),L("div",null,[i(D,{ref_key:"ruleFormRef",ref:a,"label-width":"100px",model:l,rules:p,"hide-required-asterisk":!1},{default:u(()=>[i(m,{label:"\u914D\u7F6E\u540D\u79F0",prop:"name",rules:{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"}},{default:u(()=>[i(b,{modelValue:l.name,"onUpdate:modelValue":k[0]||(k[0]=h=>l.name=h),modelModifiers:{trim:!0},clearable:"",class:"input",placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(m,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},prop:"appId",label:"\u5E94\u7528ID"},{default:u(()=>[i(b,{modelValue:l.appId,"onUpdate:modelValue":k[1]||(k[1]=h=>l.appId=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},null,8,["modelValue"])]),_:1}),i(m,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u94A5"},prop:"publicKey",label:"\u516C\u94A5"},{default:u(()=>[i(b,{modelValue:l.publicKey,"onUpdate:modelValue":k[2]||(k[2]=h=>l.publicKey=h),clearable:"",rows:5,type:"textarea",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u516C\u94A5"},null,8,["modelValue"])]),_:1}),i(m,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u79C1\u94A5"},prop:"privateKey",label:"\u79C1\u94A5"},{default:u(()=>[i(b,{modelValue:l.privateKey,"onUpdate:modelValue":k[3]||(k[3]=h=>l.privateKey=h),clearable:"",rows:5,type:"textarea",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u79C1\u94A5"},null,8,["modelValue"])]),_:1}),i(m,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},prop:"afterNotifyDomain",label:"\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},{default:u(()=>[i(b,{modelValue:l.afterNotifyDomain,"onUpdate:modelValue":k[5]||(k[5]=h=>l.afterNotifyDomain=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},{prepend:u(()=>[i(B,{modelValue:l.preNotifyDomain,"onUpdate:modelValue":k[4]||(k[4]=h=>l.preNotifyDomain=h),style:{width:"90px"}},{default:u(()=>[i(F,{label:"https://",value:"https://"}),i(F,{label:"http://",value:"http://"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])),[[y,s.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const Ea=ge(Ba,[["__scopeId","data-v-37eb0547"]]);const Aa={class:"hhhh"},Sa={style:{padding:"24px"}},$a={style:{"font-weight":"700"}},Ma={style:{display:"flex","align-items":"center",height:"32px"}},Ta={class:"el-dropdown-link"},Oa={key:0,class:"input-box input-color2",style:{color:"#4c83ff"}},Va=T(" \uFF08"),La=T("\uFF09 "),Na={class:"el-dropdown-link input-color2"},Ua=T(" \u53D6\u6D88 "),Ra=T(" \u4FDD\u5B58 "),qa=T(" \u53D6\u6D88 "),za=T(" \u4FDD\u5B58 "),ja={__name:"EditParamModal",emits:["load"],setup(r,{expose:e,emit:o}){const t=q(),a=q(),n=ae({text:"",var:[]}),l=q(!1),s=q([]),d=q({}),c=ae({loading:!1,visible:!1,other:null,type:""}),f=Ce("editPayForm"),p=ae({loading:!1,visible:!1}),g=q(null),C=async()=>{await bt(f.payId||f.id).then(h=>{s.value=h[0].child||[];const E={};k(s.value,E),d.value=E})},x=async h=>{p.visible=!0,h&&Ve(async()=>{await t.value.initSign({id:h})})},k=(h,E)=>{h.forEach(O=>{E[O.key]=O.title,O.child instanceof Array&&k(O.child,E)})},b=async()=>{try{p.loading=!0;const h=await t.value.saveSign();g.value.quote="IyCalc",g.value.value=h||null,await C(),p.loading=!1,m()}catch{throw p.loading=!1,new Error("SendHeader,eror")}},m=()=>{g.value=null,p.visible=!1},F=(h,E)=>{for(let O of h){if(O.key===E)return O;if(O.child&&O.child.length>0){let w=F(O.child,E);if(w)return w}}return null},B=(h,E,O)=>{const w=F(s.value,O);h.value=null,h[E]=O,h.type=w.type,O==="IyCalcCustom"&&(g.value=h,x(""))},D=Ce("debounce")(h=>{!h||h.validate(E=>{var O;if(E){c.loading=!1;let w="";n.var.forEach(S=>{var P,W;const v=(P=F(s.value,S.quote))==null?void 0:P.title,M=(W=F(s.value,S.value))==null?void 0:W.title;w=w+" "+v+"/"+(M||S.value||"")}),o("load",{code:(O=c.other)==null?void 0:O.key,args:n.var,name:w}),$()}})},300),$=()=>{n.text="",n.var=[{quote:"",type:"input"}],c.other=void 0,c.visible=!1,l.value=!1},_=()=>{l.value===!1&&o("load",!1),$()},y={var:{required:!1,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"blur"}};return e({open(h,E){E&&E.length>0?(n.var=E.map(O=>({...O})),l.value=!0):n.var=h==null?void 0:h.child.map(O=>({quote:"",type:O.type||h.type})),c.visible=!0,c.other=h,n.text=h.title,C()}}),(h,E)=>{const O=Se,w=Ct,S=xt,v=It,M=Pe,P=$e,W=be,R=Ie,ne=wt;return I(),L("div",Aa,[i(R,{"model-value":c.visible,"show-close":!1,"close-on-press-escape":!1,title:"\u7F16\u8F91\u53C2\u6570\u503C",width:440,"z-index":1e3,"close-on-click-modal":!1},{footer:u(()=>[i(W,{class:"ml-auto",size:"small",loading:c.loading,onClick:_},{default:u(()=>[Ua]),_:1},8,["loading"]),i(W,{size:"small",loading:c.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:E[0]||(E[0]=N=>oe(D)(a.value))},{default:u(()=>[Ra]),_:1},8,["loading"])]),default:u(()=>[lt((I(),L("div",null,[V("div",Sa,[i(P,{ref_key:"ruleFormRef",ref:a,"label-width":"80px",model:n,rules:y,"hide-required-asterisk":!1},{default:u(()=>{var N;return[i(O,{label:"\u53C2\u6570\u7B7E\u540D",prop:"text"},{default:u(()=>[V("div",$a,Z(n.text),1)]),_:1}),(I(!0),L(ce,null,pe((N=c.other)==null?void 0:N.child,(A,U)=>(I(),z(O,{label:A==null?void 0:A.title},{default:u(()=>{var X,j,ue;return[V("div",Ma,[i(v,{onCommand:re=>B(n.var[U],"quote",re)},{dropdown:u(()=>[i(S,null,{default:u(()=>[(I(!0),L(ce,null,pe(s.value,re=>(I(),z(w,{class:ke({"el-action-dropdown":n.var[U].quote===re.key}),command:re.key},{default:u(()=>[T(Z(re.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:u(()=>[V("span",Ta,Z(d.value[n.var[U].quote]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),((X=n.var[U])==null?void 0:X.type)==="input"||((j=n.var[U])==null?void 0:j.type)==="textarea"?(I(),L("div",Oa,[Va,i(M,{placeholder:"\u8BF7\u8F93\u5165",resize:"none",rows:1,style:{width:"200px"},type:(ue=n.var[U])==null?void 0:ue.type,spellcheck:"false",modelValue:n.var[U].value,"onUpdate:modelValue":re=>n.var[U].value=re},null,8,["type","modelValue","onUpdate:modelValue"]),La])):(I(),z(v,{key:1,onCommand:re=>B(n.var[U],"value",re)},{dropdown:u(()=>[i(S,null,{default:u(()=>{var re;return[(I(!0),L(ce,null,pe(((re=s.value.find(_e=>_e.key===n.var[U].quote))==null?void 0:re.child)||[],_e=>(I(),z(w,{class:ke({"el-action-dropdown":n.var[U].value===_e.key}),command:_e.key},{default:u(()=>[T(Z(_e.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:u(()=>[V("span",Na," \uFF08 "+Z(d.value[n.var[U].value]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))])]}),_:2},1032,["label"]))),256))]}),_:1},8,["model"])])])),[[ne,c.loading]])]),_:1},8,["model-value"]),i(R,{"model-value":p.visible,"align-center":"","destroy-on-close":"","show-close":!p.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":11e3,"close-on-click-modal":!1,onClose:m},{footer:u(()=>[i(W,{class:"ml-auto",size:"small",loading:p.loading,onClick:m},{default:u(()=>[qa]),_:1},8,["loading"]),i(W,{size:"small",loading:p.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:b},{default:u(()=>[za]),_:1},8,["loading"])]),default:u(()=>[i(At,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:t},null,512)]),_:1},8,["model-value","show-close"])])}}},Ha=ge(ja,[["__scopeId","data-v-957b0331"]]);const Ka={class:"balck-box"},Ga=["onClick"],Wa={__name:"quoteModal",emits:["updataValue"],setup(r,{expose:e,emit:o}){const t=ae({visible:!1,data:[{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"},{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"},{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"}]}),a=()=>{t.visible=!1},n=s=>{s&&(t.data=s),t.visible=!0},l=s=>{o("updataValue",s),a()};return e({open:n}),(s,d)=>{const c=Ie;return I(),L("div",null,[i(c,{"model-value":t.visible,"align-center":"","show-close":!t.loading,"close-on-press-escape":!1,title:"\u5F15\u7528\u503C",width:450,"z-index":100,"close-on-click-modal":!1,onClose:a},{default:u(()=>[V("div",Ka,[(I(!0),L(ce,null,pe(t.data,f=>(I(),L("div",null,[T(Z(f.text)+" ",1),V("div",{onClick:p=>l(f.value),class:"box-botton"},"\u5F15\u7528",8,Ga)]))),256))])]),_:1},8,["model-value","show-close"])])}}},Xa=ge(Wa,[["__scopeId","data-v-d82775ac"]]),Ja=r=>(rt("data-v-bb237e20"),r=r(),st(),r),Za={style:{"padding-top":"16px"}},Ya={style:{padding:"0px 12px 24px 12px"}},Qa={style:{display:"flex","align-items":"center"}},en={key:0,style:{"line-height":"16px",width:"16px","margin-left":"8px"}},tn=Ja(()=>V("span",{style:{cursor:"pointer","margin-left":"8px"}},[T(" \u7A7A\u503C "),V("i",{style:{cursor:"pointer"},class:"vxe-cell-help-icon vxe-icon-question-circle"})],-1)),on={style:{display:"flex","align-items":"center"}},an={key:0,class:"input-box input-color2",style:{color:"#4c83ff"}},nn=T("\uFF08"),ln=T("\uFF09"),rn={class:"el-dropdown-link input-color2"},sn=T("\u5B50\u9879"),dn=T("\u5220\u9664"),un=T(" \u53D6\u6D88 "),cn=T(" \u4FDD\u5B58 "),pn=We({__name:"EditSendHeader",props:["isWrite","title"],emits:["updataId"],setup(r,{expose:e,emit:o}){const t=r,a=q(),n=q(),l=q({}),s=ae({loading:!1}),d=vt(()=>t.isWrite===!0?!1:Boolean(c.id)),c=ae({type:1,title:t.title||"",id:""}),f=q(0),p=Ce("editPayForm"),g=q([]),C=q(),x=q([{id:1e4,parentId:null,var:"",emptyCalc:1,value:"",remark:"",type:"string",typeChild:!1,quote:"",valueType:"input"}]);bt(p.payId||p.id).then(A=>{g.value=A[0].child;const U={};b(g.value,U),l.value=U});const k=ae({loading:!1,visible:!1}),b=(A,U)=>{A.forEach(X=>{U[X.key]=X.title,X.child instanceof Array&&b(X.child,U)})},m=(A,U)=>{for(let X of A){if(X.key===U)return X;if(X.child&&X.child.length>0){let j=m(X.child,U);if(j)return j}}return null},F=(A,U,X)=>{const j=m(g.value,X);A.value=null,A[U]=X,A.valueType=j.type,X==="IyCalcCustom"&&(y.value=A,B(""))},B=async A=>{k.visible=!0,A&&Ve(async()=>{await n.value.initSign({id:A})})},D=async()=>{try{k.loading=!0;const A=await n.value.saveSign();y.value.quote="IyCalc",y.value.value=A||null,await bt(p.payId||p.id).then(U=>{g.value=U[0].child;const X={};b(g.value,X),l.value=X}),k.loading=!1,$()}catch(A){throw console.log(A),k.loading=!1,new Error("SendHeader,eror")}},$=()=>{y.value=null,k.visible=!1},_=async()=>c.title===""?(me({position:"bottom-right",type:"error",message:"\u8BF7\u586B\u5199\u914D\u7F6E\u540D\u79F0"}),Promise.reject("")):d.value?Promise.resolve(c.id):c.id?await la({...c,payId:p.payId||p.id,config:S()}).then(A=>Promise.resolve(c.id)):await na({...c,payId:p.payId||p.id,config:S()}).then(A=>Promise.resolve(A)),y=q(),h=A=>{y.value.value=A},E=()=>{x.value=[{id:1e4,parentId:null,var:"",emptyCalc:1,value:"",remark:"",type:"string",typeChild:!1,quote:"",valueType:"input"}],c.id="",c.type=0,f.value=1},O=A=>{const U={},X=[];return A.forEach(j=>{U[j.id]={...j,children:null}}),A.forEach(j=>{const ue=U[j.id];if(j.parentId===null)X.push(ue);else{const re=U[j.parentId];if(!re)return;re!=null&&re.children?re.children.push(ue):re.children=[ue]}}),X},w=A=>{const U=[];let X=1;const j=(ue,re)=>{const _e=X++,Le={id:_e,parentId:re,...ue};U.push(Le),ue.children?(Le.typeChild=!0,ue.children.forEach(et=>{j(et,_e)})):Le.typeChild=!1};return A.forEach(ue=>{j(ue,null)}),U},S=()=>{const A=C.value.getRemoveRecords();let U=x.value.filter(X=>A.findIndex(j=>j.id===X.id)===-1);return O(U.concat(C.value.getInsertRecords()))},v=async A=>{const U=C.value;if(U){let X=null;A.parentId?X=await U.getRowById(A.parentId):f.value-=1,await U.remove(A),X&&(!(X!=null&&X.children)||X.children.length===0)&&(X.type=N.base.var,X.typeChild=N.base.child)}},M=async A=>{const U=C.value;if(U){const X=Date.now(),j={var:"",id:X,parentId:null,emptyCalc:1,value:"",quote:"",valueType:"input",remark:"",type:N.base.var,typeChild:N.base.child},{row:ue}=await U.insertNextAt(j,A);await U.setEditRow(ue),f.value+=1}},P=async A=>{const U=C.value;if(U){const X=Date.now(),j={var:"",id:X,parentId:A.id,emptyCalc:1,value:"",quote:"",valueType:"input",remark:"",type:N.base.var,typeChild:N.base.child};A.type=N.object.var,A.typeChild=N.object.child;const{row:ue}=await U.insertAt(j,-1);await U.setTreeExpand(A,!0),await U.setTreeExpand(ue)}},W=A=>{const U=JSON.parse(A.config);f.value=U.length,x.value=w(U),Ve(()=>{C.value.setAllTreeExpand(!0)})},R=A=>{c.id=A,kt(A).then(U=>{c.title=U.title,W(U)})},ne=q([]),N={object:null,base:null};return ea().then(A=>{ne.value=A,N.base=A.find(U=>U.child===!1),N.object=A.find(U=>U.child===!0)}),e({open(A){A.config?(E(),c.id=A.id,W(A)):A.id?R(A.id):E()},saveData:_,handleClose:E}),vt(()=>"\u65B0\u589E\u652F\u4ED8"),(A,U)=>{const X=je,j=Xe,ue=Je,re=Pe,_e=Ut("vxe-column"),Le=ho,et=go,tt=Ct,ut=xt,H=It,K=be,ee=Ut("vxe-table"),te=Ie;return I(),L("div",Za,[V("div",Ya,[i(ee,{border:"",class:"page-vxe-table",ref_key:"tableRef",ref:C,stripe:!1,"show-overflow":"","keep-source":"","min-height":0,"row-config":{keyField:"id",height:40},"column-config":{resizable:!0},"print-config":{},"export-config":{},loading:s.loading,"tree-config":{transform:!0,rowField:"id",parentField:"parentId",expandAll:!0,showIcon:!1},"edit-config":{trigger:"click",mode:"row",showStatus:!0},data:x.value},{default:u(()=>[i(_e,{width:"250",title:"\u2003\xA0\xA0\u53D8\u91CF\u540D","tree-node":""},{default:u(({row:G,level:J})=>[V("div",Qa,[J===0&&!oe(d)?(I(),L("div",en,[i(X,{onClick:Y=>M(G),style:{"margin-right":"4px"}},{default:u(()=>[i(oe(zt))]),_:2},1032,["onClick"])])):Q("",!0),i(re,{class:"input-with-select",placeholder:"\u8BF7\u8F93\u5165",disabled:oe(d),spellcheck:"false",modelValue:G.var,"onUpdate:modelValue":Y=>G.var=Y,modelModifiers:{trim:!0}},{prepend:u(()=>[i(ue,{style:{width:"80px"},disabled:oe(d),modelValue:G.type,"onUpdate:modelValue":Y=>G.type=Y,class:"m-2",placeholder:"\u8BF7\u9009\u62E9"},{default:u(()=>[(I(!0),L(ce,null,pe(ne.value,Y=>(I(),z(j,{disabled:G.typeChild!==Y.child,label:Y.title,value:Y.var},null,8,["disabled","label","value"]))),256))]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])])]),_:1}),i(_e,{field:"remark",title:"\u5907\u6CE8"},{default:u(({row:G})=>[i(re,{disabled:oe(d),placeholder:"\u8BF7\u8F93\u5165",spellcheck:"false",modelValue:G.remark,"onUpdate:modelValue":J=>G.remark=J,modelModifiers:{trim:!0}},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),i(_e,{width:"80",field:"emptyCalc",title:"\u7A7A\u503C"},{header:u(()=>[i(Le,{placement:"right",width:180,trigger:"hover",content:"\u5F00\u542F\u8868\u793A\u7A7A\u503C\u65F6\u53C2\u4E0E\u8FD0\u7B97"},{reference:u(()=>[tn]),_:1})]),default:u(({row:G})=>[i(et,{disabled:oe(d),modelValue:G.emptyCalc,"onUpdate:modelValue":J=>G.emptyCalc=J,"active-value":1,"inactive-value":0},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),i(_e,{width:"280",field:"quote",title:"\u503C\u7C7B\u578B"},{default:u(({row:G})=>[V("div",on,[i(H,{disabled:oe(d),onCommand:J=>F(G,"quote",J)},{dropdown:u(()=>[i(ut,null,{default:u(()=>[(I(!0),L(ce,null,pe(g.value,J=>(I(),z(tt,{class:ke({"el-action-dropdown":G.quote===J.key}),command:J.key},{default:u(()=>[T(Z(J.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:u(()=>[(I(),L("span",{class:"el-dropdown-link",key:G.quote},Z(l.value[G.quote]||"\u8BF7\u9009\u62E9"),1))]),_:2},1032,["disabled","onCommand"]),G.valueType==="input"||G.valueType==="textarea"?(I(),L("div",an,[nn,i(re,{placeholder:"\u8BF7\u8F93\u5165",disabled:oe(d),style:{width:"100px"},type:G.valueType,spellcheck:"false",modelValue:G.value,"onUpdate:modelValue":J=>G.value=J},null,8,["disabled","type","modelValue","onUpdate:modelValue"]),ln])):(I(),z(H,{key:1,disabled:oe(d),onCommand:J=>F(G,"value",J)},{dropdown:u(()=>[i(ut,null,{default:u(()=>{var J;return[(I(!0),L(ce,null,pe(((J=g.value.find(Y=>Y.key===G.quote))==null?void 0:J.child)||[],Y=>(I(),z(tt,{class:ke({"el-action-dropdown":G.value===Y.key}),command:Y.key},{default:u(()=>[T(Z(Y.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:u(()=>[V("span",rn," \uFF08 "+Z(l.value[G.value]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["disabled","onCommand"]))])]),_:1}),i(_e,{field:"award_sec",width:"100",title:"\u64CD\u4F5C"},{default:u(({row:G,level:J})=>[i(K,{disabled:oe(d),type:"primary",link:"",onClick:Y=>P(G)},{default:u(()=>[sn]),_:2},1032,["disabled","onClick"]),i(K,{disabled:oe(d)||f.value===1&&J===0,type:"danger",link:"",onClick:Y=>v(G)},{default:u(()=>[dn]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["loading","data"])]),i(Xa,{onUpdataValue:h,ref_key:"quoteModalRef",ref:a},null,512),i(te,{"model-value":k.visible,"align-center":"","destroy-on-close":"","show-close":!k.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:$},{footer:u(()=>[i(K,{class:"ml-auto",size:"small",loading:k.loading,onClick:$},{default:u(()=>[un]),_:1},8,["loading"]),i(K,{size:"small",loading:k.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:D},{default:u(()=>[cn]),_:1},8,["loading"])]),default:u(()=>[i(At,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:n},null,512)]),_:1},8,["model-value","show-close"])])}}});const Kt=ge(pn,[["__scopeId","data-v-bb237e20"]]);const fn={class:"sideMeun"},mn=["onClick"],hn={class:"title"},gn={class:"icon","aria-hidden":"true"},_n=["fill","xlink:href"],yn={__name:"sideMeun",props:{data:{type:Array,default:()=>[]},activeMenu:{type:String,default:""},type:{type:Number,default:1}},emits:["update:activeMenu","updatekey","change"],setup(r,{emit:e}){const o=r,t=q([]),a=s=>{e("update:activeMenu",s),e("change",s)},n=(s,d=!1)=>{let c=t.value.indexOf(s);c===-1?t.value.push(s):d||t.value.splice(c,1)},l=s=>{(s==null?void 0:s.children)&&(s==null?void 0:s.children.length)>0?(n(s.key,!0),s.redirectKey?e("update:activeMenu",s.redirectKey):e("update:activeMenu",s.children[0].key),e("change",s.redirectKey?s.redirectKey:s.children[0].key)):(o.type===1?e("update:activeMenu",s==null?void 0:s.key):e("updatekey",s==null?void 0:s.key),o.type===1&&e("change",s==null?void 0:s.key))};return(s,d)=>{const c=je,f=Ut("sideMeun",!0);return I(),L("div",fn,[(I(!0),L(ce,null,pe(r.data,p=>{var g,C;return I(),L("div",{onClick:Qt(x=>l(p),["stop"]),class:ke(["meunItem",{showMuen:t.value.includes(p.key),isAction:p.key==r.activeMenu,isActionParm:(g=p==null?void 0:p.children)==null?void 0:g.find(x=>x.key==r.activeMenu)}]),key:p.key||p.name},[V("div",hn,[T(Z(p==null?void 0:p.name)+" ",1),((C=p.icon)==null?void 0:C.length)>0?(I(!0),L(ce,{key:0},pe(p.icon,x=>(I(),L("svg",gn,[V("use",{fill:x.color||"#FF9F46","xlink:href":(x==null?void 0:x.name)||x},null,8,_n)]))),256)):Q("",!0),p.children&&p.children.length>0?(I(),z(c,{key:1,onClick:Qt(x=>n(p.key),["stop"]),class:ke([{"n-icon":t.value.includes(p.key)},"u-icon"])},{default:u(()=>[i(oe(Oo))]),_:2},1032,["onClick","class"])):Q("",!0)]),p.children&&p.children.length>0?(I(),z(f,{key:0,onUpdatekey:a,type:2,activeMenu:r.activeMenu,class:"children-sideMeun",data:p.children},null,8,["activeMenu","data"])):Q("",!0)],10,mn)}),128))])}}},bo=ge(yn,[["__scopeId","data-v-f094aac3"]]);function Tt(r){return r===""?r:r==="true"||r=="1"}function vn(r,e){return new Promise((o,t)=>{var a=new XMLHttpRequest;a.responseType="blob",a.onload=function(){var n=new FileReader;n.onloadend=function(){o(n.result)},n.readAsArrayBuffer(a.response)},a.open("GET",r),a.send()})}function Be(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function ao(r,e){for(var o="",t=0,a=-1,n=0,l,s=0;s<=r.length;++s){if(s<r.length)l=r.charCodeAt(s);else{if(l===47)break;l=47}if(l===47){if(!(a===s-1||n===1))if(a!==s-1&&n===2){if(o.length<2||t!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var d=o.lastIndexOf("/");if(d!==o.length-1){d===-1?(o="",t=0):(o=o.slice(0,d),t=o.length-1-o.lastIndexOf("/")),a=s,n=0;continue}}else if(o.length===2||o.length===1){o="",t=0,a=s,n=0;continue}}e&&(o.length>0?o+="/..":o="..",t=2)}else o.length>0?o+="/"+r.slice(a+1,s):o=r.slice(a+1,s),t=s-a-1;a=s,n=0}else l===46&&n!==-1?++n:n=-1}return o}function bn(r,e){var o=e.dir||e.root,t=e.base||(e.name||"")+(e.ext||"");return o?o===e.root?o+t:o+r+t:t}var Ke={resolve:function(){for(var e="",o=!1,t,a=arguments.length-1;a>=-1&&!o;a--){var n;a>=0?n=arguments[a]:(t===void 0&&(t=process.cwd()),n=t),Be(n),n.length!==0&&(e=n+"/"+e,o=n.charCodeAt(0)===47)}return e=ao(e,!o),o?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Be(e),e.length===0)return".";var o=e.charCodeAt(0)===47,t=e.charCodeAt(e.length-1)===47;return e=ao(e,!o),e.length===0&&!o&&(e="."),e.length>0&&t&&(e+="/"),o?"/"+e:e},isAbsolute:function(e){return Be(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,o=0;o<arguments.length;++o){var t=arguments[o];Be(t),t.length>0&&(e===void 0?e=t:e+="/"+t)}return e===void 0?".":Ke.normalize(e)},relative:function(e,o){if(Be(e),Be(o),e===o||(e=Ke.resolve(e),o=Ke.resolve(o),e===o))return"";for(var t=1;t<e.length&&e.charCodeAt(t)===47;++t);for(var a=e.length,n=a-t,l=1;l<o.length&&o.charCodeAt(l)===47;++l);for(var s=o.length,d=s-l,c=n<d?n:d,f=-1,p=0;p<=c;++p){if(p===c){if(d>c){if(o.charCodeAt(l+p)===47)return o.slice(l+p+1);if(p===0)return o.slice(l+p)}else n>c&&(e.charCodeAt(t+p)===47?f=p:p===0&&(f=0));break}var g=e.charCodeAt(t+p),C=o.charCodeAt(l+p);if(g!==C)break;g===47&&(f=p)}var x="";for(p=t+f+1;p<=a;++p)(p===a||e.charCodeAt(p)===47)&&(x.length===0?x+="..":x+="/..");return x.length>0?x+o.slice(l+f):(l+=f,o.charCodeAt(l)===47&&++l,o.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(Be(e),e.length===0)return".";for(var o=e.charCodeAt(0),t=o===47,a=-1,n=!0,l=e.length-1;l>=1;--l)if(o=e.charCodeAt(l),o===47){if(!n){a=l;break}}else n=!1;return a===-1?t?"/":".":t&&a===1?"//":e.slice(0,a)},basename:function(e,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');Be(e);var t=0,a=-1,n=!0,l;if(o!==void 0&&o.length>0&&o.length<=e.length){if(o.length===e.length&&o===e)return"";var s=o.length-1,d=-1;for(l=e.length-1;l>=0;--l){var c=e.charCodeAt(l);if(c===47){if(!n){t=l+1;break}}else d===-1&&(n=!1,d=l+1),s>=0&&(c===o.charCodeAt(s)?--s===-1&&(a=l):(s=-1,a=d))}return t===a?a=d:a===-1&&(a=e.length),e.slice(t,a)}else{for(l=e.length-1;l>=0;--l)if(e.charCodeAt(l)===47){if(!n){t=l+1;break}}else a===-1&&(n=!1,a=l+1);return a===-1?"":e.slice(t,a)}},extname:function(e){Be(e);for(var o=-1,t=0,a=-1,n=!0,l=0,s=e.length-1;s>=0;--s){var d=e.charCodeAt(s);if(d===47){if(!n){t=s+1;break}continue}a===-1&&(n=!1,a=s+1),d===46?o===-1?o=s:l!==1&&(l=1):o!==-1&&(l=-1)}return o===-1||a===-1||l===0||l===1&&o===a-1&&o===t+1?"":e.slice(o,a)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return bn("/",e)},parse:function(e){Be(e);var o={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return o;var t=e.charCodeAt(0),a=t===47,n;a?(o.root="/",n=1):n=0;for(var l=-1,s=0,d=-1,c=!0,f=e.length-1,p=0;f>=n;--f){if(t=e.charCodeAt(f),t===47){if(!c){s=f+1;break}continue}d===-1&&(c=!1,d=f+1),t===46?l===-1?l=f:p!==1&&(p=1):l!==-1&&(p=-1)}return l===-1||d===-1||p===0||p===1&&l===d-1&&l===s+1?d!==-1&&(s===0&&a?o.base=o.name=e.slice(1,d):o.base=o.name=e.slice(s,d)):(s===0&&a?(o.name=e.slice(1,l),o.base=e.slice(1,d)):(o.name=e.slice(s,l),o.base=e.slice(s,d)),o.ext=e.slice(l,d)),s>0?o.dir=e.slice(0,s-1):a&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};Ke.posix=Ke;const kn=Ke.extname,ko=Ke.basename;class wn{constructor(){let e=(()=>typeof global>"u")(),o="image/png",t="image/jpeg",a="image/jpeg",n="image/webp",l="application/pdf",s="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:e?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:e?{png:o,jpg:t,jpeg:a,webp:n}:{png:o,jpg:t,jpeg:a,pdf:l,svg:s},mimes:e?{[o]:"png",[t]:"jpg",[n]:"webp"}:{[o]:"png",[t]:"jpg",[l]:"pdf",[s]:"svg"}})}toMime(e){return this.formats[(e||"").replace(/^\./,"").toLowerCase()]}fromMime(e){return this.mimes[e]}}function Cn(r,{filename:e="",extension:o="",format:k,page:a,quality:n,matte:l,density:s,outline:d,archive:C}={}){var{fromMime:f,toMime:p,expected:g}=new wn,C=C||"canvas",x=k||o.replace(/@\d+x$/i,"")||kn(e),k=f(p(x)||x),b=p(k),m=r.length;if(!x)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!k)throw new Error(`Unsupported file format "${x}" (expected ${g})`);if(!m)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let F,B,D=e.replace(/{(\d*)}/g,(_,y)=>(B=!0,y=parseInt(y,10),F=isFinite(y)?y:isFinite(F)?F:-1,"{}")),$=a>0?a-1:a<0?m+a:void 0;if(isFinite($)&&$<0||$>=m)throw new RangeError(m==1?`Canvas only has a \u2018page 1\u2019 (${$} is out of bounds)`:`Canvas has pages 1\u2013${m} (${$} is out of bounds)`);if(r=isFinite($)?[r[$]]:B||k=="pdf"?r:r.slice(-1),n===void 0)n=.92;else if(typeof n!="number"||!isFinite(n)||n<0||n>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(s===void 0){let _=(o||ko(e,x)).match(/@(\d+)x$/i);s=_?parseInt(_[1],10):1}else if(typeof s!="number"||!Number.isInteger(s)||s<1)throw new TypeError("The density option must be a non-negative integer");return d===void 0?d=!0:k=="svg"&&(d=!!d),{filename:e,pattern:D,format:k,mime:b,pages:r,padding:F,quality:n,matte:l,density:s,outline:d,archive:C}}class Ft{static for(e){return new Ft().append(e).get()}constructor(){this.crc=-1}get(){return~this.crc}append(e){for(var o=this.crc|0,t=this.table,a=0,n=e.length|0;a<n;a++)o=o>>>8^t[(o^e[a])&255];return this.crc=o,this}}Ft.prototype.table=(()=>{var r,e,o,t=[];for(r=0;r<256;r++){for(o=r,e=0;e<8;e++)o=o&1?o>>>1^3988292384:o>>>1;t[r]=o}return t})();function Ot(r){let e=new Uint8Array(r),o=new DataView(e.buffer),t={array:e,view:o,size:r,set8(a,n){return o.setUint8(a,n),t},set16(a,n){return o.setUint16(a,n,!0),t},set32(a,n){return o.setUint32(a,n,!0),t},bytes(a,n){return e.set(n,a),t}};return t}class Pt{constructor(e){let o=new Date;Object.assign(this,{directory:e,offset:0,files:[],time:(o.getHours()<<6|o.getMinutes())<<5|o.getSeconds()/2,date:(o.getFullYear()-1980<<4|o.getMonth()+1)<<5|o.getDate()}),this.add(e)}async add(e,o){let t=!o,a=Pt.encoder.encode(`${this.directory}/${t?"":e}`),n=new Uint8Array(t?0:await o.arrayBuffer()),l=30+a.length,s=l+n.length,d=16,{offset:c}=this,f=Ot(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,Ft.for(n)).set32(14,n.length).set32(18,n.length).set16(22,a.length);c+=l;let p=Ot(l+n.length+d).set32(0,67324752).bytes(4,f.array).bytes(30,a).bytes(l,n);c+=n.length,p.set32(s,134695760).bytes(s+4,f.array.slice(10,22)),c+=d,this.files.push({offset:c,folder:t,name:a,header:f,payload:p}),this.offset=c}toBuffer(){let e=this.files.reduce((p,{name:g})=>46+g.length+p,0),o=Ot(e+22),t=0;for(var{offset:a,name:n,header:l,folder:s}of this.files)o.set32(t,33639248).set16(t+4,20).bytes(t+6,l.array).set8(t+38,s?16:0).set32(t+42,a).bytes(t+46,n),t+=46+n.length;o.set32(t,101010256).set16(t+8,this.files.length).set16(t+10,this.files.length).set32(t+12,e).set32(t+16,this.offset);let d=new Uint8Array(this.offset+o.size),c=0;for(var{payload:f}of this.files)d.set(f.array,c),c+=f.size;return d.set(o.array,c),d}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Pt.encoder=new TextEncoder;const Gt=(r,e,o,t)=>{if(t){let{width:a,height:n}=r,l=Object.assign(document.createElement("canvas"),{width:a,height:n}),s=l.getContext("2d");s.fillStyle=t,s.fillRect(0,0,a,n),s.drawImage(r,0,0),r=l}return new Promise((a,n)=>r.toBlob(a,e,o))},xn=(...r)=>Gt(...r).then(e=>e.arrayBuffer()),In=async(r,e,o,t,a)=>{wo(a,await Gt(r,e,o,t))},Dn=async(r,e,o,t,a,n,l)=>{let s=f=>n.replace("{}",String(f+1).padStart(l,"0")),d=ko(a,".zip")||"archive",c=new Pt(d);await Promise.all(r.map(async(f,p)=>{let g=s(p);await c.add(g,await Gt(f,e,o,t))})),wo(`${d}.zip`,c.blob)},wo=(r,e)=>{const o=window.URL.createObjectURL(e),t=document.createElement("a");t.style.display="none",t.href=o,t.setAttribute("download",r),typeof t.download>"u"&&t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t),setTimeout(()=>window.URL.revokeObjectURL(o),100)},Fn=(r,e,o)=>r.map(t=>{if(e==1&&!o)return t.canvas;let a=document.createElement("canvas"),n=a.getContext("2d"),l=t.canvas?t.canvas:t;return a.width=l.width*e,a.height=l.height*e,o&&(n.fillStyle=o,n.fillRect(0,0,a.width,a.height)),n.scale(e,e),n.drawImage(l,0,0),a}),Pn={asBuffer:xn,asDownload:In,asZipDownload:Dn,atScale:Fn,options:Cn},{asBuffer:Vt,asDownload:Bn,asZipDownload:En,atScale:Lt,options:Nt}=Pn,no=Symbol.for("toDataURL"),An=r=>new Promise((e,o)=>Object.assign(new Co,{crossOrigin:"Anonymous",onload:e,onerror:o,src:r}));class Sn{constructor(e,o){let t=document.createElement("canvas"),a=[];Object.defineProperty(t,"async",{value:!0,writable:!1,enumerable:!0});for(var[n,l]of Object.entries({png:()=>Vt(t,"image/png"),jpg:()=>Vt(t,"image/jpeg"),pages:()=>a.concat(t).map(s=>s.getContext("2d"))}))Object.defineProperty(t,n,{get:l});return Object.assign(t,{width:e,height:o,newPage(...s){var{width:c,height:f}=t,d=Object.assign(document.createElement("canvas"),{width:c,height:f});d.getContext("2d").drawImage(t,0,0),a.push(d);var[c,f]=s.length?s:[c,f];return Object.assign(t,{width:c,height:f}).getContext("2d")},saveAs(s,d){d=typeof d=="number"?{quality:d}:d;let c=Nt(this.pages,{filename:s,...d}),{pattern:f,padding:p,mime:g,quality:C,matte:x,density:k,archive:b}=c,m=Lt(c.pages,k);return p==null?Bn(m[0],g,C,x,s):En(m,g,C,x,b,f,p)},toBuffer(s="png",d={}){d=typeof d=="number"?{quality:d}:d;let c=Nt(this.pages,{extension:s,...d}),{mime:f,quality:p,matte:g,pages:C,density:x}=c,k=Lt(C,x,g)[0];return Vt(k,f,p,g)},[no]:t.toDataURL.bind(t),toDataURL(s="png",d={}){d=typeof d=="number"?{quality:d}:d;let c=Nt(this.pages,{extension:s,...d}),{mime:f,quality:p,matte:g,pages:C,density:x}=c,k=Lt(C,x,g)[0],b=k[k===t?no:"toDataURL"](f,p);return Promise.resolve(b)}})}}const{CanvasRenderingContext2D:$n,CanvasGradient:Mn,CanvasPattern:Tn,Image:Co,ImageData:On,Path2D:Vn,DOMMatrix:Ln,DOMRect:Nn,DOMPoint:Un}=window,Rn={Canvas:Sn,loadImage:An,CanvasRenderingContext2D:$n,CanvasGradient:Mn,CanvasPattern:Tn,Image:Co,ImageData:On,Path2D:Vn,DOMMatrix:Ln,DOMRect:Nn,DOMPoint:Un},nt=(r,e,o={},t=o)=>{if(Array.isArray(e))e.forEach(a=>nt(r,a,o,t));else if(typeof e=="function")e(r,o,t,nt);else{const a=Object.keys(e)[0];Array.isArray(e[a])?(t[a]={},nt(r,e[a],o,t[a])):t[a]=e[a](r,o,t,nt)}return o},Ge=(r,e)=>(o,t,a,n)=>{e(o,t,a)&&n(o,r,t,a)},qn=(r,e)=>(o,t,a,n)=>{const l=[];let s=o.pos;for(;e(o,t,a);){const d={};if(n(o,r,t,d),o.pos===s)break;s=o.pos,l.push(d)}return l},zn=r=>({data:r,pos:0}),De=()=>r=>r.data[r.pos++],xo=(r=0)=>e=>e.data[e.pos+r],Ae=r=>e=>e.data.subarray(e.pos,e.pos+=r),Bt=r=>e=>e.data.subarray(e.pos,e.pos+r),Rt=r=>e=>Array.from(Ae(r)(e)).map(o=>String.fromCharCode(o)).join(""),He=r=>e=>{const o=Ae(2)(e);return r?(o[1]<<8)+o[0]:(o[0]<<8)+o[1]},Io=(r,e)=>(o,t,a)=>{const n=typeof e=="function"?e(o,t,a):e,l=Ae(r),s=new Array(n);for(var d=0;d<n;d++)s[d]=l(o);return s},jn=(r,e,o)=>{for(var t=0,a=0;a<o;a++)t+=r[e+a]&&2**(o-a-1);return t},Wt=r=>e=>{const o=De()(e),t=new Array(8);for(var a=0;a<8;a++)t[7-a]=!!(o&1<<a);return Object.keys(r).reduce((n,l)=>{const s=r[l];return s.length?n[l]=jn(t,s.index,s.length):n[l]=t[s.index],n},{})};var Et={blocks:r=>{const o=[],t=r.data.length;for(var a=0,n=De()(r);n!==0&&n;n=De()(r)){if(r.pos+n>=t){const c=t-r.pos;o.push(Ae(c)(r)),a+=c;break}o.push(Ae(n)(r)),a+=n}const l=new Uint8Array(a);for(var s=0,d=0;d<o.length;d++)l.set(o[d],s),s+=o[d].length;return l}};const Hn=Ge({gce:[{codes:Ae(2)},{byteSize:De()},{extras:Wt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:He(!0)},{transparentColorIndex:De()},{terminator:De()}]},r=>{var e=Bt(2)(r);return e[0]===33&&e[1]===249}),Kn=Ge({image:[{code:De()},{descriptor:[{left:He(!0)},{top:He(!0)},{width:He(!0)},{height:He(!0)},{lct:Wt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},Ge({lct:Io(3,(r,e,o)=>Math.pow(2,o.descriptor.lct.size+1))},(r,e,o)=>o.descriptor.lct.exists),{data:[{minCodeSize:De()},Et]}]},r=>xo()(r)===44),Gn=Ge({text:[{codes:Ae(2)},{blockSize:De()},{preData:(r,e,o)=>Ae(o.text.blockSize)(r)},Et]},r=>{var e=Bt(2)(r);return e[0]===33&&e[1]===1}),Wn=Ge({application:[{codes:Ae(2)},{blockSize:De()},{id:(r,e,o)=>Rt(o.blockSize)(r)},Et]},r=>{var e=Bt(2)(r);return e[0]===33&&e[1]===255}),Xn=Ge({comment:[{codes:Ae(2)},Et]},r=>{var e=Bt(2)(r);return e[0]===33&&e[1]===254}),Jn=[{header:[{signature:Rt(3)},{version:Rt(3)}]},{lsd:[{width:He(!0)},{height:He(!0)},{gct:Wt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:De()},{pixelAspectRatio:De()}]},Ge({gct:Io(3,(r,e)=>Math.pow(2,e.lsd.gct.size+1))},(r,e)=>e.lsd.gct.exists),{frames:qn([Hn,Wn,Xn,Kn,Gn],r=>{var e=xo()(r);return e===33||e===44})}],Zn=(r,e)=>{const o=new Array(r.length),t=r.length/e,a=function(f,p){const g=r.slice(p*e,(p+1)*e);o.splice.apply(o,[f*e,e].concat(g))},n=[0,4,2,1],l=[8,8,4,2];for(var s=0,d=0;d<4;d++)for(var c=n[d];c<t;c+=l[d])a(c,s),s++;return o},Yn=(r,e,o)=>{const n=o;var l,s,d,c,f,p,g,$,C,x,D,k,_,y,E,h;const b=new Array(o),m=new Array(4096),F=new Array(4096),B=new Array(4096+1);for(k=r,s=1<<k,f=s+1,l=s+2,g=-1,c=k+1,d=(1<<c)-1,C=0;C<s;C++)m[C]=0,F[C]=C;var D,$,_,y,h,E;for(D=$=_=y=h=E=0,x=0;x<n;){if(y===0){if($<c){D+=e[E]<<$,$+=8,E++;continue}if(C=D&d,D>>=c,$-=c,C>l||C==f)break;if(C==s){c=k+1,d=(1<<c)-1,l=s+2,g=-1;continue}if(g==-1){B[y++]=F[C],g=C,_=C;continue}for(p=C,C==l&&(B[y++]=_,C=g);C>s;)B[y++]=F[C],C=m[C];_=F[C]&255,B[y++]=_,l<4096&&(m[l]=g,F[l]=_,l++,(l&d)===0&&l<4096&&(c++,d+=l)),g=p}y--,b[h++]=B[y],x++}for(x=h;x<n;x++)b[x]=0;return b},Qn=r=>{const e=new Uint8Array(r);return nt(zn(e),Jn)},el=r=>{const e=r.pixels.length,o=new Uint8ClampedArray(e*4);for(var t=0;t<e;t++){const a=t*4,n=r.pixels[t],l=r.colorTable[n];o[a]=l[0],o[a+1]=l[1],o[a+2]=l[2],o[a+3]=n!==r.transparentIndex?255:0}return o},tl=(r,e,o)=>{if(!r.image){console.warn("gif frame does not have associated image.");return}const{image:t}=r,a=t.descriptor.width*t.descriptor.height;var n=Yn(t.data.minCodeSize,t.data.blocks,a);t.descriptor.lct.interlaced&&(n=Zn(n,t.descriptor.width));const l={pixels:n,dims:{top:r.image.descriptor.top,left:r.image.descriptor.left,width:r.image.descriptor.width,height:r.image.descriptor.height}};return t.descriptor.lct&&t.descriptor.lct.exists?l.colorTable=t.lct:l.colorTable=e,r.gce&&(l.delay=(r.gce.delay||10)*10,l.disposalType=r.gce.extras.disposal,r.gce.extras.transparentColorGiven&&(l.transparentIndex=r.gce.transparentColorIndex)),o&&(l.patch=el(l)),l},ol=(r,e)=>r.frames.filter(o=>o.image).map(o=>tl(o,r.gct,e));function al(r,e,o){const t=Do(e),a=r-1;let n=0;switch(o){case ve.L:n=Ee[a][0];break;case ve.M:n=Ee[a][1];break;case ve.Q:n=Ee[a][2];break;case ve.H:n=Ee[a][3];break}return t<=n}function nl(r,e){for(var o=1,t=Do(r),a=0,n=Ee.length;a<n;a++){var l=0;switch(e){case ve.L:l=Ee[a][0];break;case ve.M:l=Ee[a][1];break;case ve.Q:l=Ee[a][2];break;case ve.H:l=Ee[a][3];break}if(t<=l)break;o++}if(o>Ee.length)throw new Error("Too long data");return o}function Do(r){var e=encodeURI(r).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=Number(r)?3:0)}class ll{constructor(e){this.mode=xe.MODE_8BIT_BYTE,this.parsedData=[],this.data=e;const o=[];for(let t=0,a=this.data.length;t<a;t++){const n=[],l=this.data.charCodeAt(t);l>65536?(n[0]=240|(l&1835008)>>>18,n[1]=128|(l&258048)>>>12,n[2]=128|(l&4032)>>>6,n[3]=128|l&63):l>2048?(n[0]=224|(l&61440)>>>12,n[1]=128|(l&4032)>>>6,n[2]=128|l&63):l>128?(n[0]=192|(l&1984)>>>6,n[1]=128|l&63):n[0]=l,o.push(n)}this.parsedData=Array.prototype.concat.apply([],o),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let o=0,t=this.parsedData.length;o<t;o++)e.put(this.parsedData[o],8)}}class qe{constructor(e=-1,o=ve.L){this.moduleCount=0,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=o,this.moduleCount=0,this.dataList=[]}addData(e){if(this.typeNumber<=0)this.typeNumber=nl(e,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!al(this.typeNumber,e,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const o=new ll(e);this.dataList.push(o),this.dataCache=void 0}isDark(e,o){if(e<0||this.moduleCount<=e||o<0||this.moduleCount<=o)throw new Error(`${e},${o}`);return this.modules[e][o]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,o){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(let a=0;a<this.moduleCount;a++)this.modules[t][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,o),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=qe.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,o)}setupPositionProbePattern(e,o){for(let t=-1;t<=7;t++)if(!(e+t<=-1||this.moduleCount<=e+t))for(let a=-1;a<=7;a++)o+a<=-1||this.moduleCount<=o+a||(0<=t&&t<=6&&(a==0||a==6)||0<=a&&a<=6&&(t==0||t==6)||2<=t&&t<=4&&2<=a&&a<=4?this.modules[e+t][o+a]=!0:this.modules[e+t][o+a]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(Te).includes(this.maskPattern))return this.maskPattern;let e=0,o=0;for(let t=0;t<8;t++){this.makeImpl(!0,t);const a=ie.getLostPoint(this);(t==0||e>a)&&(e=a,o=t)}return o}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){const e=ie.getPatternPosition(this.typeNumber);for(let o=0;o<e.length;o++)for(let t=0;t<e.length;t++){const a=e[o],n=e[t];if(this.modules[a][n]==null)for(let l=-2;l<=2;l++)for(let s=-2;s<=2;s++)l==-2||l==2||s==-2||s==2||l==0&&s==0?this.modules[a+l][n+s]=!0:this.modules[a+l][n+s]=!1}}setupTypeNumber(e){const o=ie.getBCHTypeNumber(this.typeNumber);for(var t=0;t<18;t++){var a=!e&&(o>>t&1)==1;this.modules[Math.floor(t/3)][t%3+this.moduleCount-8-3]=a}for(var t=0;t<18;t++){var a=!e&&(o>>t&1)==1;this.modules[t%3+this.moduleCount-8-3][Math.floor(t/3)]=a}}setupTypeInfo(e,o){const t=this.errorCorrectLevel<<3|o,a=ie.getBCHTypeInfo(t);for(var n=0;n<15;n++){var l=!e&&(a>>n&1)==1;n<6?this.modules[n][8]=l:n<8?this.modules[n+1][8]=l:this.modules[this.moduleCount-15+n][8]=l}for(var n=0;n<15;n++){var l=!e&&(a>>n&1)==1;n<8?this.modules[8][this.moduleCount-n-1]=l:n<9?this.modules[8][15-n-1+1]=l:this.modules[8][15-n-1]=l}this.modules[this.moduleCount-8][8]=!e}mapData(e,o){let t=-1,a=this.moduleCount-1,n=7,l=0;for(let s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(let d=0;d<2;d++)if(this.modules[a][s-d]==null){let c=!1;l<e.length&&(c=(e[l]>>>n&1)==1),ie.getMask(o,a,s-d)&&(c=!c),this.modules[a][s-d]=c,n--,n==-1&&(l++,n=7)}if(a+=t,a<0||this.moduleCount<=a){a-=t,t=-t;break}}}static createData(e,o,t){const a=Oe.getRSBlocks(e,o),n=new rl;for(var l=0;l<t.length;l++){const d=t[l];n.put(d.mode,4),n.put(d.getLength(),ie.getLengthInBits(d.mode,e)),d.write(n)}let s=0;for(var l=0;l<a.length;l++)s+=a[l].dataCount;if(n.getLengthInBits()>s*8)throw new Error(`code length overflow. (${n.getLengthInBits()}>${s*8})`);for(n.getLengthInBits()+4<=s*8&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=s*8||(n.put(qe.PAD0,8),n.getLengthInBits()>=s*8));)n.put(qe.PAD1,8);return qe.createBytes(n,a)}static createBytes(e,o){let t=0,a=0,n=0;const l=new Array(o.length),s=new Array(o.length);for(var d=0;d<o.length;d++){const C=o[d].dataCount,x=o[d].totalCount-C;a=Math.max(a,C),n=Math.max(n,x),l[d]=new Array(C);for(var c=0;c<l[d].length;c++)l[d][c]=255&e.buffer[c+t];t+=C;const k=ie.getErrorCorrectPolynomial(x),m=new Qe(l[d],k.getLength()-1).mod(k);s[d]=new Array(k.getLength()-1);for(var c=0;c<s[d].length;c++){const B=c+m.getLength()-s[d].length;s[d][c]=B>=0?m.get(B):0}}let f=0;for(var c=0;c<o.length;c++)f+=o[c].totalCount;const p=new Array(f);let g=0;for(var c=0;c<a;c++)for(var d=0;d<o.length;d++)c<l[d].length&&(p[g++]=l[d][c]);for(var c=0;c<n;c++)for(var d=0;d<o.length;d++)c<s[d].length&&(p[g++]=s[d][c]);return p}}qe.PAD0=236;qe.PAD1=17;const ve={L:1,M:0,Q:3,H:2},xe={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},Te={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class ie{static getBCHTypeInfo(e){let o=e<<10;for(;ie.getBCHDigit(o)-ie.getBCHDigit(ie.G15)>=0;)o^=ie.G15<<ie.getBCHDigit(o)-ie.getBCHDigit(ie.G15);return(e<<10|o)^ie.G15_MASK}static getBCHTypeNumber(e){let o=e<<12;for(;ie.getBCHDigit(o)-ie.getBCHDigit(ie.G18)>=0;)o^=ie.G18<<ie.getBCHDigit(o)-ie.getBCHDigit(ie.G18);return e<<12|o}static getBCHDigit(e){let o=0;for(;e!=0;)o++,e>>>=1;return o}static getPatternPosition(e){return ie.PATTERN_POSITION_TABLE[e-1]}static getMask(e,o,t){switch(e){case Te.PATTERN000:return(o+t)%2==0;case Te.PATTERN001:return o%2==0;case Te.PATTERN010:return t%3==0;case Te.PATTERN011:return(o+t)%3==0;case Te.PATTERN100:return(Math.floor(o/2)+Math.floor(t/3))%2==0;case Te.PATTERN101:return o*t%2+o*t%3==0;case Te.PATTERN110:return(o*t%2+o*t%3)%2==0;case Te.PATTERN111:return(o*t%3+(o+t)%2)%2==0;default:throw new Error(`bad maskPattern:${e}`)}}static getErrorCorrectPolynomial(e){let o=new Qe([1],0);for(let t=0;t<e;t++)o=o.multiply(new Qe([1,fe.gexp(t)],0));return o}static getLengthInBits(e,o){if(1<=o&&o<10)switch(e){case xe.MODE_NUMBER:return 10;case xe.MODE_ALPHA_NUM:return 9;case xe.MODE_8BIT_BYTE:return 8;case xe.MODE_KANJI:return 8;default:throw new Error(`mode:${e}`)}else if(o<27)switch(e){case xe.MODE_NUMBER:return 12;case xe.MODE_ALPHA_NUM:return 11;case xe.MODE_8BIT_BYTE:return 16;case xe.MODE_KANJI:return 10;default:throw new Error(`mode:${e}`)}else if(o<41)switch(e){case xe.MODE_NUMBER:return 14;case xe.MODE_ALPHA_NUM:return 13;case xe.MODE_8BIT_BYTE:return 16;case xe.MODE_KANJI:return 12;default:throw new Error(`mode:${e}`)}else throw new Error(`type:${o}`)}static getLostPoint(e){const o=e.getModuleCount();let t=0;for(var a=0;a<o;a++)for(var n=0;n<o;n++){let d=0;const c=e.isDark(a,n);for(let f=-1;f<=1;f++)if(!(a+f<0||o<=a+f))for(let p=-1;p<=1;p++)n+p<0||o<=n+p||f==0&&p==0||c==e.isDark(a+f,n+p)&&d++;d>5&&(t+=3+d-5)}for(var a=0;a<o-1;a++)for(var n=0;n<o-1;n++){let f=0;e.isDark(a,n)&&f++,e.isDark(a+1,n)&&f++,e.isDark(a,n+1)&&f++,e.isDark(a+1,n+1)&&f++,(f==0||f==4)&&(t+=3)}for(var a=0;a<o;a++)for(var n=0;n<o-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(t+=40);for(var n=0;n<o;n++)for(var a=0;a<o-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(t+=40);let l=0;for(var n=0;n<o;n++)for(var a=0;a<o;a++)e.isDark(a,n)&&l++;return t+=Math.abs(100*l/o/o-50)/5*10,t}}ie.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];ie.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;ie.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;ie.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class fe{static glog(e){if(e<1)throw new Error(`glog(${e})`);return fe.LOG_TABLE[e]}static gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return fe.EXP_TABLE[e]}}fe.EXP_TABLE=new Array(256);fe.LOG_TABLE=new Array(256);fe._constructor=function(){for(var r=0;r<8;r++)fe.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)fe.EXP_TABLE[r]=fe.EXP_TABLE[r-4]^fe.EXP_TABLE[r-5]^fe.EXP_TABLE[r-6]^fe.EXP_TABLE[r-8];for(var r=0;r<255;r++)fe.LOG_TABLE[fe.EXP_TABLE[r]]=r}();class Qe{constructor(e,o){if(e.length==null)throw new Error(`${e.length}/${o}`);let t=0;for(;t<e.length&&e[t]==0;)t++;this.num=new Array(e.length-t+o);for(let a=0;a<e.length-t;a++)this.num[a]=e[a+t]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){const o=new Array(this.getLength()+e.getLength()-1);for(let t=0;t<this.getLength();t++)for(let a=0;a<e.getLength();a++)o[t+a]^=fe.gexp(fe.glog(this.get(t))+fe.glog(e.get(a)));return new Qe(o,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;const o=fe.glog(this.get(0))-fe.glog(e.get(0)),t=new Array(this.getLength());for(var a=0;a<this.getLength();a++)t[a]=this.get(a);for(var a=0;a<e.getLength();a++)t[a]^=fe.gexp(fe.glog(e.get(a))+o);return new Qe(t,0).mod(e)}}class Oe{constructor(e,o){this.totalCount=e,this.dataCount=o}static getRSBlocks(e,o){const t=Oe.getRsBlockTable(e,o);if(t==null)throw new Error(`bad rs block @ typeNumber:${e}/errorCorrectLevel:${o}`);const a=t.length/3,n=[];for(let l=0;l<a;l++){const s=t[l*3+0],d=t[l*3+1],c=t[l*3+2];for(let f=0;f<s;f++)n.push(new Oe(d,c))}return n}static getRsBlockTable(e,o){switch(o){case ve.L:return Oe.RS_BLOCK_TABLE[(e-1)*4+0];case ve.M:return Oe.RS_BLOCK_TABLE[(e-1)*4+1];case ve.Q:return Oe.RS_BLOCK_TABLE[(e-1)*4+2];case ve.H:return Oe.RS_BLOCK_TABLE[(e-1)*4+3];default:return}}}Oe.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class rl{constructor(){this.buffer=[],this.length=0}get(e){const o=Math.floor(e/8);return(this.buffer[o]>>>7-e%8&1)==1}put(e,o){for(let t=0;t<o;t++)this.putBit((e>>>o-t-1&1)==1)}getLengthInBits(){return this.length}putBit(e){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),e&&(this.buffer[o]|=128>>>this.length%8),this.length++}}const Ee=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var sl=100,he=256,lo=he-1,Ne=4,Fo=16,Xt=1<<Fo,Po=10,Jt=10,il=Xt>>Jt,dl=Xt<<Po-Jt,ul=he>>3,qt=6,cl=1<<qt,pl=ul*cl,fl=30,Bo=10,pt=1<<Bo,Eo=8,ro=1<<Eo,ml=Bo+Eo,Ye=1<<ml,so=499,io=491,uo=487,Ao=503,hl=3*Ao;function gl(r,e){var o,t,a,n,l;function s(){o=[],t=new Int32Array(256),a=new Int32Array(he),n=new Int32Array(he),l=new Int32Array(he>>3);var m,F;for(m=0;m<he;m++)F=(m<<Ne+8)/he,o[m]=new Float64Array([F,F,F,0]),n[m]=Xt/he,a[m]=0}function d(){for(var m=0;m<he;m++)o[m][0]>>=Ne,o[m][1]>>=Ne,o[m][2]>>=Ne,o[m][3]=m}function c(m,F,B,D,$){o[F][0]-=m*(o[F][0]-B)/pt,o[F][1]-=m*(o[F][1]-D)/pt,o[F][2]-=m*(o[F][2]-$)/pt}function f(m,F,B,D,$){for(var _=Math.abs(F-m),y=Math.min(F+m,he),h=F+1,E=F-1,O=1,w,S;h<y||E>_;)S=l[O++],h<y&&(w=o[h++],w[0]-=S*(w[0]-B)/Ye,w[1]-=S*(w[1]-D)/Ye,w[2]-=S*(w[2]-$)/Ye),E>_&&(w=o[E--],w[0]-=S*(w[0]-B)/Ye,w[1]-=S*(w[1]-D)/Ye,w[2]-=S*(w[2]-$)/Ye)}function p(m,F,B){var D=2147483647,$=D,_=-1,y=_,h,E,O,w,S;for(h=0;h<he;h++)E=o[h],O=Math.abs(E[0]-m)+Math.abs(E[1]-F)+Math.abs(E[2]-B),O<D&&(D=O,_=h),w=O-(a[h]>>Fo-Ne),w<$&&($=w,y=h),S=n[h]>>Jt,n[h]-=S,a[h]+=S<<Po;return n[_]+=il,a[_]-=dl,y}function g(){var m,F,B,D,$,_,y=0,h=0;for(m=0;m<he;m++){for(B=o[m],$=m,_=B[1],F=m+1;F<he;F++)D=o[F],D[1]<_&&($=F,_=D[1]);if(D=o[$],m!=$&&(F=D[0],D[0]=B[0],B[0]=F,F=D[1],D[1]=B[1],B[1]=F,F=D[2],D[2]=B[2],B[2]=F,F=D[3],D[3]=B[3],B[3]=F),_!=y){for(t[y]=h+m>>1,F=y+1;F<_;F++)t[F]=m;y=_,h=m}}for(t[y]=h+lo>>1,F=y+1;F<256;F++)t[F]=lo}function C(m,F,B){for(var D,$,_,y=1e3,h=-1,E=t[F],O=E-1;E<he||O>=0;)E<he&&($=o[E],_=$[1]-F,_>=y?E=he:(E++,_<0&&(_=-_),D=$[0]-m,D<0&&(D=-D),_+=D,_<y&&(D=$[2]-B,D<0&&(D=-D),_+=D,_<y&&(y=_,h=$[3])))),O>=0&&($=o[O],_=F-$[1],_>=y?O=-1:(O--,_<0&&(_=-_),D=$[0]-m,D<0&&(D=-D),_+=D,_<y&&(D=$[2]-B,D<0&&(D=-D),_+=D,_<y&&(y=_,h=$[3]))));return h}function x(){var m,F=r.length,B=30+(e-1)/3,D=F/(3*e),$=~~(D/sl),_=pt,y=pl,h=y>>qt;for(h<=1&&(h=0),m=0;m<h;m++)l[m]=_*((h*h-m*m)*ro/(h*h));var E;F<hl?(e=1,E=3):F%so!==0?E=3*so:F%io!==0?E=3*io:F%uo!==0?E=3*uo:E=3*Ao;var O,w,S,v,M=0;for(m=0;m<D;)if(O=(r[M]&255)<<Ne,w=(r[M+1]&255)<<Ne,S=(r[M+2]&255)<<Ne,v=p(O,w,S),c(_,v,O,w,S),h!==0&&f(h,v,O,w,S),M+=E,M>=F&&(M-=F),m++,$===0&&($=1),m%$===0)for(_-=_/B,y-=y/fl,h=y>>qt,h<=1&&(h=0),v=0;v<h;v++)l[v]=_*((h*h-v*v)*ro/(h*h))}function k(){s(),x(),d(),g()}this.buildColormap=k;function b(){for(var m=[],F=[],B=0;B<he;B++)F[o[B][3]]=B;for(var D=0,$=0;$<he;$++){var _=F[$];m[D++]=o[_][0],m[D++]=o[_][1],m[D++]=o[_][2]}return m}this.getColormap=b,this.lookupRGB=C}var co=-1,ft=12,at=5003,_l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function yl(r,e,o,t){var a=Math.max(2,t),n=new Uint8Array(256),l=new Int32Array(at),s=new Int32Array(at),d,c=0,f,p=0,g,C=!1,x,k,b,m,F,B;function D(v,M){n[f++]=v,f>=254&&E(M)}function $(v){_(at),p=k+2,C=!0,S(k,v)}function _(v){for(var M=0;M<v;++M)l[M]=-1}function y(v,M){var P,W,R,ne,N,A,U;for(x=v,C=!1,B=x,g=O(B),k=1<<v-1,b=k+1,p=k+2,f=0,ne=w(),U=0,P=at;P<65536;P*=2)++U;U=8-U,A=at,_(A),S(k,M);e:for(;(W=w())!=co;){if(P=(W<<ft)+ne,R=W<<U^ne,l[R]===P){ne=s[R];continue}else if(l[R]>=0){N=A-R,R===0&&(N=1);do if((R-=N)<0&&(R+=A),l[R]===P){ne=s[R];continue e}while(l[R]>=0)}S(ne,M),ne=W,p<1<<ft?(s[R]=p++,l[R]=P):$(M)}S(ne,M),S(b,M)}function h(v){v.writeByte(a),m=r*e,F=0,y(a+1,v),v.writeByte(0)}function E(v){f>0&&(v.writeByte(f),v.writeBytes(n,0,f),f=0)}function O(v){return(1<<v)-1}function w(){if(m===0)return co;--m;var v=o[F++];return v&255}function S(v,M){for(d&=_l[c],c>0?d|=v<<c:d=v,c+=B;c>=8;)D(d&255,M),d>>=8,c-=8;if((p>g||C)&&(C?(g=O(B=x),C=!1):(++B,B==ft?g=1<<ft:g=O(B))),v==b){for(;c>0;)D(d&255,M),d>>=8,c-=8;E(M)}}this.encode=h}function we(){this.page=-1,this.pages=[],this.newPage()}we.pageSize=4096;we.charMap={};for(var mt=0;mt<256;mt++)we.charMap[mt]=String.fromCharCode(mt);we.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(we.pageSize),this.cursor=0};we.prototype.getData=function(){for(var r="",e=0;e<this.pages.length;e++)for(var o=0;o<we.pageSize;o++)r+=we.charMap[this.pages[e][o]];return r};we.prototype.toFlattenUint8Array=function(){const r=[];for(var e=0;e<this.pages.length;e++)if(e===this.pages.length-1){const t=Uint8Array.from(this.pages[e].slice(0,this.cursor));r.push(t)}else r.push(this.pages[e]);const o=new Uint8Array(r.reduce((t,a)=>t+a.length,0));return r.reduce((t,a)=>(o.set(a,t),t+a.length),0),o};we.prototype.writeByte=function(r){this.cursor>=we.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=r};we.prototype.writeUTFBytes=function(r){for(var e=r.length,o=0;o<e;o++)this.writeByte(r.charCodeAt(o))};we.prototype.writeBytes=function(r,e,o){for(var t=o||r.length,a=e||0;a<t;a++)this.writeByte(r[a])};function de(r,e){this.width=~~r,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new we}de.prototype.setDelay=function(r){this.delay=Math.round(r/10)};de.prototype.setFrameRate=function(r){this.delay=Math.round(100/r)};de.prototype.setDispose=function(r){r>=0&&(this.dispose=r)};de.prototype.setRepeat=function(r){this.repeat=r};de.prototype.setTransparent=function(r){this.transparent=r};de.prototype.addFrame=function(r){this.image=r,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};de.prototype.finish=function(){this.out.writeByte(59)};de.prototype.setQuality=function(r){r<1&&(r=1),this.sample=r};de.prototype.setDither=function(r){r===!0&&(r="FloydSteinberg"),this.dither=r};de.prototype.setGlobalPalette=function(r){this.globalPalette=r};de.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};de.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};de.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new gl(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};de.prototype.indexPixels=function(r){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var o=0,t=0;t<e;t++){var a=this.findClosestRGB(this.pixels[o++]&255,this.pixels[o++]&255,this.pixels[o++]&255);this.usedEntry[a]=!0,this.indexedPixels[t]=a}};de.prototype.ditherPixels=function(r,e){var o={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!r||!o[r])throw"Unknown dithering kernel: "+r;var t=o[r],a=0,n=this.height,l=this.width,s=this.pixels,d=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<n;c++){e&&(d=d*-1);for(var f=d==1?0:l-1,p=d==1?l:0;f!==p;f+=d){a=c*l+f;var g=a*3,C=s[g],x=s[g+1],k=s[g+2];g=this.findClosestRGB(C,x,k),this.usedEntry[g]=!0,this.indexedPixels[a]=g,g*=3;for(var b=this.colorTab[g],m=this.colorTab[g+1],F=this.colorTab[g+2],B=C-b,D=x-m,$=k-F,_=d==1?0:t.length-1,y=d==1?t.length:0;_!==y;_+=d){var h=t[_][1],E=t[_][2];if(h+f>=0&&h+f<l&&E+c>=0&&E+c<n){var O=t[_][0];g=a+h+E*l,g*=3,s[g]=Math.max(0,Math.min(255,s[g]+B*O)),s[g+1]=Math.max(0,Math.min(255,s[g+1]+D*O)),s[g+2]=Math.max(0,Math.min(255,s[g+2]+$*O))}}}}};de.prototype.findClosest=function(r,e){return this.findClosestRGB((r&16711680)>>16,(r&65280)>>8,r&255,e)};de.prototype.findClosestRGB=function(r,e,o,t){if(this.colorTab===null)return-1;if(this.neuQuant&&!t)return this.neuQuant.lookupRGB(r,e,o);for(var a=0,n=256*256*256,l=this.colorTab.length,s=0,d=0;s<l;d++){var c=r-(this.colorTab[s++]&255),f=e-(this.colorTab[s++]&255),p=o-(this.colorTab[s++]&255),g=c*c+f*f+p*p;(!t||this.usedEntry[d])&&g<n&&(n=g,a=d)}return a};de.prototype.getImagePixels=function(){var r=this.width,e=this.height;this.pixels=new Uint8Array(r*e*3);for(var o=this.image,t=0,a=0,n=0;n<e;n++)for(var l=0;l<r;l++)this.pixels[a++]=o[t++],this.pixels[a++]=o[t++],this.pixels[a++]=o[t++],t++};de.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var r,e;this.transparent===null?(r=0,e=0):(r=1,e=2),this.dispose>=0&&(e=this.dispose&7),e<<=2,this.out.writeByte(0|e|0|r),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};de.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};de.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};de.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};de.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var r=3*256-this.colorTab.length,e=0;e<r;e++)this.out.writeByte(0)};de.prototype.writeShort=function(r){this.out.writeByte(r&255),this.out.writeByte(r>>8&255)};de.prototype.writePixels=function(){var r=new yl(this.width,this.height,this.indexedPixels,this.colorDepth);r.encode(this.out)};de.prototype.stream=function(){return this.out};var vl=globalThis&&globalThis.__awaiter||function(r,e,o,t){function a(n){return n instanceof o?n:new o(function(l){l(n)})}return new(o||(o=Promise))(function(n,l){function s(f){try{c(t.next(f))}catch(p){l(p)}}function d(f){try{c(t.throw(f))}catch(p){l(p)}}function c(f){f.done?n(f.value):a(f.value).then(s,d)}c((t=t.apply(r,e||[])).next())})};const{Canvas:Me}=Rn,ht=.4;function po(r){if(!r)return;function e(o){o.onload=null,o.onerror=null}return new Promise(function(o,t){if(r.slice(0,4)=="data"){let n=new Image;n.onload=function(){o(n),e(n)},n.onerror=function(){t("Image load error"),e(n)},n.src=r;return}let a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){o(a)},a.onerror=function(){t("Image load error")},a.src=r})}class se{constructor(e){const o=Object.assign({},e);if(Object.keys(se.defaultOptions).forEach(t=>{t in o||Object.defineProperty(o,t,{value:se.defaultOptions[t],enumerable:!0,writable:!0})}),o.components?typeof o.components=="object"&&Object.keys(se.defaultComponentOptions).forEach(t=>{t in o.components?Object.defineProperty(o.components,t,{value:Object.assign(Object.assign({},se.defaultComponentOptions[t]),o.components[t]),enumerable:!0,writable:!0}):Object.defineProperty(o.components,t,{value:se.defaultComponentOptions[t],enumerable:!0,writable:!0})}):o.components=se.defaultComponentOptions,o.dotScale!==null&&o.dotScale!==void 0){if(o.dotScale<=0||o.dotScale>1)throw new Error("dotScale should be in range (0, 1].");o.components.data.scale=o.dotScale,o.components.timing.scale=o.dotScale,o.components.alignment.scale=o.dotScale}this.options=o,this.canvas=new Me(e.size,e.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new qe(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(e=>this._draw().then(e))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(e,o,t,a,n,l){e.beginPath(),e.moveTo(o,t),e.arcTo(o+a,t,o+a,t+n,l),e.arcTo(o+a,t+n,o,t+n,l),e.arcTo(o,t+n,o,t,l),e.arcTo(o,t,o+a,t,l),e.closePath()}static _getAverageRGB(e){const t={r:0,g:0,b:0};let a,n,l=-4;const s={r:0,g:0,b:0};let d=0;n=e.naturalHeight||e.height,a=e.naturalWidth||e.width;const f=new Me(a,n).getContext("2d");if(!f)return t;f.drawImage(e,0,0);let p;try{p=f.getImageData(0,0,a,n)}catch{return t}for(;(l+=5*4)<p.data.length;)p.data[l]>200||p.data[l+1]>200||p.data[l+2]>200||(++d,s.r+=p.data[l],s.g+=p.data[l+1],s.b+=p.data[l+2]);return s.r=~~(s.r/d),s.g=~~(s.g/d),s.b=~~(s.b/d),s}static _drawDot(e,o,t,a,n=0,l=1){e.fillRect((o+n)*a,(t+n)*a,l*a,l*a)}static _drawAlignProtector(e,o,t,a){e.clearRect((o-2)*a,(t-2)*a,5*a,5*a),e.fillRect((o-2)*a,(t-2)*a,5*a,5*a)}static _drawAlign(e,o,t,a,n=0,l=1,s,d){const c=e.fillStyle;e.fillStyle=s,new Array(4).fill(0).map((f,p)=>{se._drawDot(e,o-2+p,t-2,a,n,l),se._drawDot(e,o+2,t-2+p,a,n,l),se._drawDot(e,o+2-p,t+2,a,n,l),se._drawDot(e,o-2,t+2-p,a,n,l)}),se._drawDot(e,o,t,a,n,l),d||(e.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((f,p)=>{se._drawDot(e,o-1+p,t-1,a,n,l),se._drawDot(e,o+1,t-1+p,a,n,l),se._drawDot(e,o+1-p,t+1,a,n,l),se._drawDot(e,o-1,t+1-p,a,n,l)})),e.fillStyle=c}_draw(){var e,o,t,a,n,l,s,d,c,f,p,g,C,x,k,b,m,F,B;return vl(this,void 0,void 0,function*(){const D=(e=this.qrCode)===null||e===void 0?void 0:e.moduleCount,$=this.options.size;let _=this.options.margin;(_<0||_*2>=$)&&(_=0);const y=Math.ceil(_),h=$-2*_,E=this.options.whiteMargin,O=this.options.backgroundDimming,w=Math.ceil(h/D),S=w*D,v=S+2*y,M=new Me(v,v),P=M.getContext("2d");this._clear(),P.save(),P.translate(y,y);const W=new Me(v,v),R=W.getContext("2d");let ne=null,N=[];if(this.options.gifBackground){const H=Qn(this.options.gifBackground);if(ne=H,N=ol(H,!0),this.options.autoColor){let K=0,ee=0,te=0,G=0;for(let J=0;J<N[0].colorTable.length;J++){const Y=N[0].colorTable[J];Y[0]>200||Y[1]>200||Y[2]>200||Y[0]===0&&Y[1]===0&&Y[2]===0||(G++,K+=Y[0],ee+=Y[1],te+=Y[2])}K=~~(K/G),ee=~~(ee/G),te=~~(te/G),this.options.colorDark=`rgb(${K},${ee},${te})`}}else if(this.options.backgroundImage){const H=yield po(this.options.backgroundImage);if(this.options.autoColor){const K=se._getAverageRGB(H);this.options.colorDark=`rgb(${K.r},${K.g},${K.b})`}R.drawImage(H,0,0,H.width,H.height,0,0,v,v),R.rect(0,0,v,v),R.fillStyle=O,R.fill()}else R.rect(0,0,v,v),R.fillStyle=this.options.colorLight,R.fill();const A=ie.getPatternPosition(this.qrCode.typeNumber),U=((t=(o=this.options.components)===null||o===void 0?void 0:o.data)===null||t===void 0?void 0:t.scale)||ht,X=(1-U)*.5;for(let H=0;H<D;H++)for(let K=0;K<D;K++){const ee=this.qrCode.isDark(H,K),te=K<8&&(H<8||H>=D-8)||K>=D-8&&H<8,G=H==6&&K>=8&&K<=D-8||K==6&&H>=8&&H<=D-8;let J=te||G;for(let ye=1;ye<A.length-1;ye++)J=J||H>=A[ye]-2&&H<=A[ye]+2&&K>=A[ye]-2&&K<=A[ye]+2;const Y=K*w+(J?0:X*w),Fe=H*w+(J?0:X*w);if(P.strokeStyle=ee?this.options.colorDark:this.options.colorLight,P.lineWidth=.5,P.fillStyle=ee?this.options.colorDark:this.options.colorLight,A.length===0)J||P.fillRect(Y,Fe,(J?1:U)*w,(J?1:U)*w);else{const ye=K<D-4&&K>=D-4-5&&H<D-4&&H>=D-4-5;!J&&!ye&&P.fillRect(Y,Fe,(J?1:U)*w,(J?1:U)*w)}}const j=A[A.length-1],ue=this.options.colorLight;if(P.fillStyle=ue,P.fillRect(0,0,8*w,8*w),P.fillRect(0,(D-8)*w,8*w,8*w),P.fillRect((D-8)*w,0,8*w,8*w),!((n=(a=this.options.components)===null||a===void 0?void 0:a.timing)===null||n===void 0)&&n.protectors&&(P.fillRect(8*w,6*w,(D-8-8)*w,w),P.fillRect(6*w,8*w,w,(D-8-8)*w)),!((s=(l=this.options.components)===null||l===void 0?void 0:l.cornerAlignment)===null||s===void 0)&&s.protectors&&se._drawAlignProtector(P,j,j,w),!((c=(d=this.options.components)===null||d===void 0?void 0:d.alignment)===null||c===void 0)&&c.protectors)for(let H=0;H<A.length;H++)for(let K=0;K<A.length;K++){const ee=A[K],te=A[H];if(!(ee===6&&(te===6||te===j))){if(te===6&&(ee===6||ee===j))continue;if(ee===j&&te===j)continue;se._drawAlignProtector(P,ee,te,w)}}P.fillStyle=this.options.colorDark,P.fillRect(0,0,7*w,w),P.fillRect((D-7)*w,0,7*w,w),P.fillRect(0,6*w,7*w,w),P.fillRect((D-7)*w,6*w,7*w,w),P.fillRect(0,(D-7)*w,7*w,w),P.fillRect(0,(D-7+6)*w,7*w,w),P.fillRect(0,0,w,7*w),P.fillRect(6*w,0,w,7*w),P.fillRect((D-7)*w,0,w,7*w),P.fillRect((D-7+6)*w,0,w,7*w),P.fillRect(0,(D-7)*w,w,7*w),P.fillRect(6*w,(D-7)*w,w,7*w),P.fillRect(2*w,2*w,3*w,3*w),P.fillRect((D-7+2)*w,2*w,3*w,3*w),P.fillRect(2*w,(D-7+2)*w,3*w,3*w);const re=((p=(f=this.options.components)===null||f===void 0?void 0:f.timing)===null||p===void 0?void 0:p.scale)||ht,_e=(1-re)*.5;for(let H=0;H<D-8;H+=2)se._drawDot(P,8+H,6,w,_e,re),se._drawDot(P,6,8+H,w,_e,re);const Le=((C=(g=this.options.components)===null||g===void 0?void 0:g.cornerAlignment)===null||C===void 0?void 0:C.scale)||ht,et=(1-Le)*.5;se._drawAlign(P,j,j,w,et,Le,this.options.colorDark,((k=(x=this.options.components)===null||x===void 0?void 0:x.cornerAlignment)===null||k===void 0?void 0:k.protectors)||!1);const tt=((m=(b=this.options.components)===null||b===void 0?void 0:b.alignment)===null||m===void 0?void 0:m.scale)||ht,ut=(1-tt)*.5;for(let H=0;H<A.length;H++)for(let K=0;K<A.length;K++){const ee=A[K],te=A[H];if(!(ee===6&&(te===6||te===j))){if(te===6&&(ee===6||ee===j))continue;if(ee===j&&te===j)continue;se._drawAlign(P,ee,te,w,ut,tt,this.options.colorDark,((B=(F=this.options.components)===null||F===void 0?void 0:F.alignment)===null||B===void 0?void 0:B.protectors)||!1)}}if(E&&(P.fillStyle=this.options.backgroundColor,P.fillRect(-y,-y,v,y),P.fillRect(-y,S,v,y),P.fillRect(S,-y,y,v),P.fillRect(-y,-y,y,v)),this.options.logoImage){const H=yield po(this.options.logoImage);let K=this.options.logoScale,ee=this.options.logoMargin,te=this.options.logoCornerRadius;(K<=0||K>=1)&&(K=.2),ee<0&&(ee=0),te<0&&(te=0);const G=S*K,J=.5*(v-G),Y=J;P.restore(),P.fillStyle=this.options.logoBackgroundColor,P.save(),se._prepareRoundedCornerClip(P,J-ee,Y-ee,G+2*ee,G+2*ee,te+ee),P.clip();const Fe=P.globalCompositeOperation;P.globalCompositeOperation="destination-out",P.fill(),P.globalCompositeOperation=Fe,P.restore(),P.save(),se._prepareRoundedCornerClip(P,J,Y,G,G,te),P.clip(),P.drawImage(H,J,Y,G,G),P.restore(),P.save(),P.translate(y,y)}if(ne){let H,K,ee,te,G,J;if(N.forEach(function(Y){H||(H=new de($,$),H.setDelay(Y.delay),H.setRepeat(0));const{width:Fe,height:ye}=Y.dims;K||(K=new Me(Fe,ye),ee=K.getContext("2d"),ee.rect(0,0,K.width,K.height),ee.fillStyle="#ffffff",ee.fill()),(!te||!J||Fe!==te.width||ye!==te.height)&&(te=new Me(Fe,ye),G=te.getContext("2d"),J=G.createImageData(Fe,ye)),J.data.set(Y.patch),G.putImageData(J,0,0),ee.drawImage(te.getContext("2d").canvas,Y.dims.left,Y.dims.top);const ct=new Me(v,v),ot=ct.getContext("2d");ot.drawImage(K.getContext("2d").canvas,0,0,v,v),ot.rect(0,0,v,v),ot.fillStyle=O,ot.fill(),ot.drawImage(M.getContext("2d").canvas,0,0,v,v);const $t=new Me($,$),Yt=$t.getContext("2d");Yt.drawImage(ct.getContext("2d").canvas,0,0,$,$),H.addFrame(Yt.getImageData(0,0,$t.width,$t.height).data)}),!H)throw new Error("No frames.");if(H.finish(),fo(this.canvas)){const Fe=H.stream().toFlattenUint8Array().reduce((ye,ct)=>ye+String.fromCharCode(ct),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(Fe)}`)}return Promise.resolve(Buffer.from(H.stream().toFlattenUint8Array()))}else{R.drawImage(M.getContext("2d").canvas,0,0,v,v),P.drawImage(W.getContext("2d").canvas,-y,-y,v,v);const H=new Me($,$);H.getContext("2d").drawImage(M.getContext("2d").canvas,0,0,$,$),this.canvas=H;const ee=this.options.gifBackground?"gif":"png";return fo(this.canvas)?Promise.resolve(this.canvas.toDataURL(ee)):Promise.resolve(this.canvas.toBuffer(ee))}})}}se.CorrectLevel=ve;se.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};se.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:ve.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:se.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function fo(r){try{return r instanceof HTMLElement}catch{return typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object"}}const bl={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const o=await vn(this.gifBgSrc),t=this.logoSrc;this.render(void 0,t,o);return}const r=this.bgSrc,e=this.logoSrc;this.render(r,e)},async render(r,e,o){const t=this;new se({gifBackground:o,text:t.text,size:t.size,margin:t.margin,colorDark:t.colorDark,colorLight:t.colorLight,backgroundColor:t.backgroundColor,backgroundImage:r,backgroundDimming:t.backgroundDimming,logoImage:e,logoScale:t.logoScale,logoBackgroundColor:t.logoBackgroundColor,correctLevel:t.correctLevel,logoMargin:t.logoMargin,logoCornerRadius:t.logoCornerRadius,whiteMargin:Tt(t.whiteMargin),dotScale:t.dotScale,autoColor:Tt(t.autoColor),binarize:Tt(t.binarize),binarizeThreshold:t.binarizeThreshold,components:t.components}).draw().then(a=>{this.imgUrl=a,t.callback&&t.callback(a,t.qid)})}}},kl=["src"];function wl(r,e,o,t,a,n){return o.bindElement?(I(),L("img",{key:0,style:{display:"inline-block"},src:a.imgUrl},null,8,kl)):Q("",!0)}const Cl=ge(bl,[["render",wl]]);const xl={class:"balck-box"},Il={__name:"SelectSign",setup(r,{expose:e}){const o=ae({visible:!1}),t=()=>{n.value=null,o.visible=!1},a=l=>{n.value=l,o.visible=!0},n=q();return e({open:a}),Ze(()=>{}),(l,s)=>{const d=Ie;return I(),L("div",null,[i(d,{"model-value":o.visible,"align-center":"","show-close":!o.loading,"close-on-press-escape":!1,title:"\u7B7E\u540D\u6D41\u7A0B",width:1e3,"z-index":100,"close-on-click-modal":!1,onClose:t},{default:u(()=>[V("div",xl,[V("pre",null,Z(n.value),1)])]),_:1},8,["model-value","show-close"])])}}},Dl=ge(Il,[["__scopeId","data-v-b70cce56"]]);const Fl=r=>(rt("data-v-af8861f1"),r=r(),st(),r),Pl={style:{padding:"0 24px",height:"540px",display:"flex","flex-direction":"column"}},Bl={style:{width:"38px"}},El={style:{display:"flex"}},Al=T(" \u5206 "),Sl={style:{display:"flex","margin-bottom":"16px"}},$l={class:"balck-box"},Ml=T("\u590D\u5236"),Tl={key:0,class:"status-text"},Ol=Fl(()=>V("div",{style:{"min-width":"70px","padding-top":"8px"}},"\u6D4B\u8BD5\u7ED3\u679C",-1)),Vl={class:"status-box"},Ll=T(" \u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0 "),Nl={__name:"ImitateTest",setup(r){const e=q(null),o=q(),t=Ce("editPayForm"),a=q(),n=ae({method:"",url:"",money:null,origin:"",productName:"\u6D4B\u8BD5\u5546\u54C1",orderNo:""}),l={money:[{required:!0,message:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u91D1\u989D",trigger:"blur"},{min:1,type:"number",message:"\u91D1\u989D\u6700\u5C0F\u503C\u4E3A1\u5206",trigger:"blur"}],orderNo:[{required:!0,message:"\u8BF7\u83B7\u53D6\u8BA2\u5355\u53F7",trigger:"blur"}],productName:[{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0",trigger:"blur"}],origin:[{pattern:/^(https?|http?):\/\/+\S*$/,message:"\u5FC5\u987B\u662Fhttp\u6216\u5219https\u5F00\u5934\u7684\u5B8C\u6574\u57DF\u540D",trigger:"blur"}]},s=()=>{ga().then(b=>{n.orderNo=b})};function d(b){try{return JSON.parse(b)}catch{return[]}}const c=()=>{const b=JSON.stringify(e.value);No(b==="null"?"":b)},f=q([{title:"\u53D1\u9001\u5934",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null},{title:"\u53D1\u9001\u6570\u636E",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null},{title:"\u54CD\u5E94\u5934",btnText:"",jsonData:null},{title:"\u54CD\u5E94\u6570\u636E",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null}]),p=q({type:null}),g=b=>{kt(b).then(m=>{f.value[0].jsonData=d(m.config)})},C=b=>{kt(b).then(m=>{f.value[1].jsonData=d(m.config)})},x=async b=>{!b||await b.validate((m,F)=>{if(m)switch(t.type){case"makeOrder":ma(t.payId||t.id,{money:n.money,productName:n.productName,orderNo:n.orderNo,origin:n.origin}).then(B=>{e.value=B});break;case"queryOrder":ha({id:t.payId||t.id,orderNo:n.orderNo}).then(B=>{e.value=B});break}})};return(()=>{let b=null;switch(t.type){case"makeOrder":b=t.makeOrder;break;case"queryOrder":b=t.queryOrder;break;case"callBackOrder":b=t.callBackOrder;break}b&&Dt(b,"all").then(m=>{n.method=m.method,n.url=m.addr,m.headerId&&g(m.headerId),m.bodyId&&C(m.bodyId),f.value[2].jsonData=m.response})})(),(b,m)=>{const F=be,B=Pe,D=Se,$=$e,_=je;return I(),L("div",Pl,[V("div",null,[i(B,{class:"testInput",modelValue:n.url,"onUpdate:modelValue":m[1]||(m[1]=y=>n.url=y),disabled:"",placeholder:""},{prepend:u(()=>{var y;return[V("div",Bl,Z((y=n.method)==null?void 0:y.toUpperCase()),1)]}),append:u(()=>[i(F,{onClick:m[0]||(m[0]=y=>x(a.value)),style:{"background-color":"var(--el-color-primary)"},type:"primary",icon:oe(mo)},{default:u(()=>[T(Z(oe(t).type==="makeOrder"?"\u6D4B\u8BD5\u4E0B\u5355":"\u8BA2\u5355\u67E5\u8BE2"),1)]),_:1},8,["icon"])]),_:1},8,["modelValue"]),i($,{ref_key:"ruleFormRef",ref:a,style:{"margin-top":"16px"},"label-width":"90px",model:n,rules:l,"hide-required-asterisk":!1},{default:u(()=>[V("div",El,[oe(t).type==="makeOrder"?(I(),z(D,{key:0,label:"\u6D4B\u8BD5\u91D1\u989D",prop:"money"},{default:u(()=>[i(B,{style:{width:"320px"},spellcheck:"false",modelValue:n.money,"onUpdate:modelValue":m[2]||(m[2]=y=>n.money=y),modelModifiers:{trim:!0,number:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u91D1\u989D"},{append:u(()=>[Al]),_:1},8,["modelValue"])]),_:1})):Q("",!0),oe(t).type==="makeOrder"?(I(),z(D,{key:1,style:{"margin-left":"16px"},label:"\u5546\u54C1\u540D\u79F0",prop:"productName"},{default:u(()=>[i(B,{style:{width:"320px"},spellcheck:"false",modelValue:n.productName,"onUpdate:modelValue":m[3]||(m[3]=y=>n.productName=y),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5546\u54C1\u540D\u79F0"},null,8,["modelValue"])]),_:1})):Q("",!0)]),V("div",Sl,[i(D,{label:"\u8BA2\u5355\u53F7",prop:"orderNo"},{default:u(()=>[i(B,{disabled:oe(t).type==="makeOrder",style:{width:"320px"},spellcheck:"false",modelValue:n.orderNo,"onUpdate:modelValue":m[4]||(m[4]=y=>n.orderNo=y),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u8BA2\u5355\u53F7"},Vo({_:2},[oe(t).type==="makeOrder"?{name:"append",fn:u(()=>[V("div",{onClick:s,class:"get-order"},"\u83B7\u53D6\u8BA2\u5355\u53F7")]),key:"0"}:void 0]),1032,["disabled","modelValue"])]),_:1}),oe(t).type==="makeOrder"?(I(),z(D,{key:0,label:"\u5F02\u6B65\u901A\u77E5\u57DF\u540D",style:{"margin-left":"16px"},prop:"origin"},{default:u(()=>[i(B,{style:{width:"320px"},spellcheck:"false",modelValue:n.origin,"onUpdate:modelValue":m[5]||(m[5]=y=>n.origin=y),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},null,8,["modelValue"])]),_:1})):Q("",!0)])]),_:1},8,["model"])]),V("div",$l,[V("pre",null,Z(e.value),1),i(F,{class:"botton",onClick:c,type:"primary",link:""},{default:u(()=>[Ml]),_:1})]),p.value.type!==null?(I(),L("div",Tl,[Ol,V("div",Vl,[V("div",null,[i(_,{color:p.value.type===0?"#FF4D4F":"#3DAA24"},{default:u(()=>[i(oe(Re))]),_:1},8,["color"]),V("div",{style:Lo({color:p.value.type===0?"#FF4D4F":"#3DAA24",marginRight:"8px"})},"\u6D4B\u8BD5\u6210\u529F",4),Ll]),i(Cl,{size:72,margin:10,style:{"margin-top":"8px"},text:"www.baidu.com"},null,8,["text"])])])):Q("",!0),i(Dl,{ref_key:"SelectSignRef",ref:o},null,512)])}}},gt=ge(Nl,[["__scopeId","data-v-af8861f1"]]),Ul=()=>({payId:"",addr:"",method:"",contentType:"",accept:"",bodyId:"",headerId:"",bindData:null,response:null}),Zt=async(r,e,o)=>{const t=Ul();return Object.keys(r).forEach(a=>{t[a]=r[a]}),e?await fa({...t,id:e},o):await pa(t,o)};const So=r=>(rt("data-v-5367ce1a"),r=r(),st(),r),Rl={style:{"margin-bottom":"32px"},class:"info"},ql=So(()=>V("div",null,[T(" \u7EDF\u4E00\u4E0B\u5355\u548C\u8BA2\u5355\u67E5\u8BE2\u4E24\u9879\u914D\u7F6E\u6B63\u786E\u529F\u80FD\u624D\u80FD\u6B63\u5E38\u4F7F\u7528"),V("br"),T(" \u8BF7\u4ED4\u7EC6\u6838\u5BF9\u8BA2\u5355\u67E5\u8BE2->\u54CD\u5E94\u6570\u636E\u9879\uFF0C\u9519\u8BEF\u914D\u7F6E\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5956\u52B1\u4E0D\u80FD\u6B63\u5E38\u53D1\u653E\u6216\u7528\u6237\u672A\u652F\u4ED8\u5C31\u53D1\u653E\u5956\u52B1"),V("br"),T(" \u8BF7\u6D4B\u8BD5\u6B63\u5E38\u4EE5\u540E\u518D\u5F00\u653E\u7ED9\u7528\u6237\u4F7F\u7528 ")],-1)),zl=So(()=>V("div",{class:"titleF"},"\u76EE\u524D\u4EC5\u652F\u6301 application/json",-1)),jl={class:"buttonBox"},Hl=T("\u4FDD\u5B58\u5E76\u66F4\u65B0"),Kl={__name:"InterfaceConfig",emits:["updataInterfaceId"],setup(r,{emit:e}){const o=q(),t=q(!1),a=ae({addr:"",method:"POST",contentType:"application/json",accept:"application/json"}),n=ae({addr:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42\u5730\u5740",trigger:"blur"}],method:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5",trigger:"blur"}]}),l=Ce("editPayForm"),s=async d=>{!d||await d.validate((c,f)=>{if(c){t.value=!0;let p=null;switch(l.type){case"makeOrder":p=l.makeOrder;break;case"queryOrder":p=l.queryOrder;break;case"callBackOrder":p=l.callBackOrder;break}const g=p?"base":l.type;Zt({payId:l.payId||l.id,addr:a.addr,method:a.method,contentType:a.contentType,accept:a.accept},p,g).then(C=>{p||e("updataInterfaceId",C),me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).finally(C=>t.value=!1)}})};return Ze(()=>{let d=null;switch(l.type){case"makeOrder":d=l.makeOrder;break;case"queryOrder":d=l.queryOrder;break;case"callBackOrder":d=l.callBackOrder;break}d&&Dt(d,"base").then(c=>{a.addr=c.addr,a.method=c.method,a.contentType=c.contentType||"application/json",a.accept=c.accept||"application/json"})}),(d,c)=>{const f=je,p=Xe,g=Je,C=Se,x=Pe,k=be,b=$e;return I(),L("div",null,[V("div",Rl,[i(f,{style:{margin:"2px 8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),ql]),i(b,{ref_key:"ruleFormRef",ref:o,"label-width":"80px",rules:n,model:a,"hide-required-asterisk":!1},{default:u(()=>[i(C,{label:"\u8BF7\u6C42\u65B9\u5F0F",prop:"method"},{default:u(()=>[i(g,{modelValue:a.method,"onUpdate:modelValue":c[0]||(c[0]=m=>a.method=m),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:u(()=>[i(p,{label:"GET",value:"GET"}),i(p,{label:"POST",value:"POST"})]),_:1},8,["modelValue"])]),_:1}),i(C,{label:"\u8BF7\u6C42\u5730\u5740",prop:"addr"},{default:u(()=>[i(x,{spellcheck:"false",modelValue:a.addr,"onUpdate:modelValue":c[1]||(c[1]=m=>a.addr=m),modelModifiers:{trim:!0},clearable:"",placeholder:"\u793A\u4F8B\uFF1Ahttp://xxx.xxx/xxxxx"},null,8,["modelValue"])]),_:1}),i(C,{label:"\u8BF7\u6C42\u5934"},{default:u(()=>[i(g,{modelValue:a.contentType,"onUpdate:modelValue":c[2]||(c[2]=m=>a.contentType=m),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:u(()=>[i(p,{label:"application/json",value:"application/json"}),i(p,{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"})]),_:1},8,["modelValue"])]),_:1}),i(C,{label:"\u54CD\u5E94\u5934"},{default:u(()=>[zl]),_:1}),i(C,{label:""},{default:u(()=>[V("div",jl,[i(k,{loading:t.value,onClick:c[3]||(c[3]=m=>s(o.value)),type:"primary"},{default:u(()=>[Hl]),_:1},8,["loading"])])]),_:1})]),_:1},8,["rules","model"])])}}},_t=ge(Kl,[["__scopeId","data-v-5367ce1a"]]);const Gl={style:{margin:"0 24px 24px 24px"}},Wl={style:{display:"flex","align-items":"center"}},Xl={key:0,class:"input-color2",style:{color:"#4c83ff"}},Jl=T("\uFF08"),Zl=T("\uFF09"),Yl={class:"el-dropdown-link input-color2"},Ql={class:"el-dropdown-link"},er={key:0,class:"input-color2",style:{color:"#4c83ff"}},tr=T("\uFF08"),or=T("\uFF09"),ar={class:"el-dropdown-link input-color2"},nr=["onClick"],lr={style:{display:"flex"}},rr={class:"el-dropdown-link"},sr={key:0,class:"input-color2",style:{color:"#4c83ff"}},ir=T("\uFF08"),dr=T("\uFF09"),ur={class:"el-dropdown-link input-color2"},cr={class:"value"},pr={style:{"margin-left":"24px"},class:"buttonBox"},fr=T("\u4FDD\u5B58\u5E76\u66F4\u65B0"),mr=T(" \u53D6\u6D88 "),hr=T(" \u4FDD\u5B58 "),gr={__name:"RespData",emits:["updataInterfaceId"],setup(r,{emit:e}){const o=q(),t=ae({respData:[{var2Type:"input",resCode:""}],dataOperate:[{}],payConstantList:{},quoteContOption:{}}),a=Ce("editPayForm"),n=q(!1),l=q([]),s=q([]),d=(_,y,h,E)=>{const O=D(l.value,h);_.var1=null,_.var=null,_[y]=h,y==="varCode"&&E!==2&&(_.var1Type=O.type),y==="varCode"&&E===2&&(_.varType=O.type)},c=(_,y,h)=>{const E=D(s.value,h);_.var2=null,_[y]=h,_.var2Type=E.type,h==="IyCalcCustom"&&(B.value=_,p(""))},f=ae({loading:!1,visible:!1}),p=async _=>{f.visible=!0,_&&Ve(async()=>{await o.value.initSign({id:_})})},g=async()=>{try{f.loading=!0;const _=await o.value.saveSign();B.value.resCode="IyCalc",B.value.var2=_,await x(),f.loading=!1,C(),me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}catch{}},C=()=>{B.value.value=null,f.visible=!1},x=async()=>{await bt(a.payId||a.id).then(_=>{s.value=_[0].child;const y={};m(_[0].child,y),t.quoteContOption=y})},k=(_,y)=>{try{return _.forEach(h=>{y.forEach(E=>{if(h[E]===null||h[E]===""||h[E]===void 0)throw new Error(h[E])})}),!0}catch{return me({position:"bottom-right",type:"error",message:"\u8BF7\u5B8C\u6574\u586B\u5165\u6761\u4EF6"}),!1}};x();const b=()=>{if(!k(t.respData,["message","var1","var2"]))return;n.value=!0;let _=null;switch(a.type){case"makeOrder":_=a.makeOrder;break;case"queryOrder":_=a.queryOrder;break;case"callBackOrder":_=a.callBackOrder;break}const y=_?"response":a.type;Zt({payId:a.payId||a.id,response:t.respData,bindData:t.dataOperate},_,y).then(h=>{_||e("updataInterfaceId",h),me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).finally(()=>n.value=!1)},m=(_,y)=>{_.forEach(h=>{y[h.key]=h.title,h.child instanceof Array&&m(h.child,y)})};aa(a.payId||a.id).then(_=>{l.value=_||[];const y={};m(l.value,y),t.payConstantList=y});const F=_=>{t.respData.splice(++_,0,{var2Type:"input",resCode:""})},B=q();function D(_,y){for(let h of _){if(h.key===y)return h;if(h.child&&h.child.length>0){let E=D(h.child,y);if(E)return E}}return null}const $=_=>{t.respData.length>1&&ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(t.respData.splice(_,1)))};return oa().then(_=>{t.dataOperate=_==null?void 0:_.map(y=>{let h=Object.keys(y)[0];return{var:"",title:y[h],tovar:h}})}),Ze(()=>{let _=null;switch(a.type){case"makeOrder":_=a.makeOrder;break;case"queryOrder":_=a.queryOrder;break;case"callBackOrder":_=a.callBackOrder;break}_&&Dt(_,"response").then(y=>{t.respData=y.response.map(h=>({...h,varCodeValue:h.var1Type==="label"?[h.varCode,h.var1]:[h.varCode],resCodeValue:h.var2Type==="label"?[h.resCode,h.var2]:[h.resCode]}))||[{}],t.dataOperate=y.bindData.map(h=>({...h,varCodeValue:h.varType==="label"?[h.varCode,h.tovar]:[h.varCode]}))||[{}]})}),(_,y)=>{const h=je,E=Ct,O=xt,w=It,S=Pe,v=Se,M=$e,P=be,W=Ie;return I(),L("div",Gl,[i(M,{ref:"ruleFormRef","label-width":"64px",model:t,"hide-required-asterisk":!1},{default:u(()=>[(I(!0),L(ce,null,pe(t.respData,(R,ne)=>(I(),L("div",Wl,[i(h,{style:{"margin-bottom":"18px","margin-left":"8px"},onClick:N=>F(ne),color:"#4c83ff"},{default:u(()=>[i(oe(zt))]),_:2},1032,["onClick"]),i(v,{"label-width":"36px",label:"\u5F53",prop:["respData",ne+"","varCodeValue"]},{default:u(()=>[i(w,{onCommand:N=>d(R,"varCode",N)},{dropdown:u(()=>[i(O,null,{default:u(()=>[(I(!0),L(ce,null,pe(l.value,N=>(I(),z(E,{class:ke({"el-action-dropdown":R.varCode===N.key}),command:N.key},{default:u(()=>[T(Z(N.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:u(()=>[(I(),L("span",{class:"el-dropdown-link",key:R.varCode},Z(t.payConstantList[R.varCode]||"\u8BF7\u9009\u62E9"),1))]),_:2},1032,["onCommand"]),R.var1Type==="input"?(I(),L("div",Xl,[Jl,i(S,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:R.var1,"onUpdate:modelValue":N=>R.var1=N},null,8,["modelValue","onUpdate:modelValue"]),Zl])):(I(),z(w,{key:1,onCommand:N=>d(R,"var1",N)},{dropdown:u(()=>[i(O,null,{default:u(()=>{var N;return[(I(!0),L(ce,null,pe(((N=l.value.find(A=>A.key===R.varCode))==null?void 0:N.child)||[],A=>(I(),z(E,{class:ke({"el-action-dropdown":R.var1===A.key}),command:A.key},{default:u(()=>[T(Z(A.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:u(()=>[V("span",Yl," \uFF08 "+Z(t.payConstantList[R.var1]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(v,{label:"\u4E0D\u7B49\u4E8E",prop:["respData",ne+"","resCodeValue"]},{default:u(()=>[i(w,{onCommand:N=>c(R,"resCode",N)},{dropdown:u(()=>[i(O,null,{default:u(()=>[(I(!0),L(ce,null,pe(s.value,N=>(I(),z(E,{class:ke({"el-action-dropdown":R.resCode===N.key}),command:N.key},{default:u(()=>[T(Z(N.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:u(()=>[V("span",Ql,Z(t.quoteContOption[R.resCode]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),R.var2Type==="input"?(I(),L("div",er,[tr,i(S,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:R.var2,"onUpdate:modelValue":N=>R.var2=N},null,8,["modelValue","onUpdate:modelValue"]),or])):(I(),z(w,{key:1,onCommand:N=>c(R,"var2",N)},{dropdown:u(()=>[i(O,null,{default:u(()=>{var N;return[(I(!0),L(ce,null,pe(((N=s.value.find(A=>A.key===R.resCode))==null?void 0:N.child)||[],A=>(I(),z(E,{class:ke({"el-action-dropdown":R.var2===A.key}),command:A.key},{default:u(()=>[T(Z(A.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:u(()=>[V("span",ar," \uFF08 "+Z(t.quoteContOption[R.var2]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(v,{label:"\u5219\u63D0\u793A",prop:["respData",ne+"","message"]},{default:u(()=>[i(S,{style:{width:"180px"},spellcheck:"false",placeholder:"\u8BF7\u8F93\u5165",modelValue:R.message,"onUpdate:modelValue":N=>R.message=N},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),V("span",{class:ke({noselect:t.respData.length===1}),style:{color:"#f56c6c","font-size":"12px","margin-left":"16px","margin-bottom":"12px",cursor:"pointer"},onClick:N=>$(ne)},"\u5220\u9664",10,nr)]))),256)),i(v,{"label-width":"48px",label:"\u5426\u5219",prop:"title"}),(I(!0),L(ce,null,pe(t.dataOperate,(R,ne)=>(I(),L("div",lr,[i(v,{"label-width":"36px",label:"\u628A",prop:["dataOperate",ne+"","varCodeValue"]},{default:u(()=>[i(w,{onCommand:N=>d(R,"varCode",N,2)},{dropdown:u(()=>[i(O,null,{default:u(()=>[(I(!0),L(ce,null,pe(l.value,N=>(I(),z(E,{class:ke({"el-action-dropdown":R.varCode===N.key}),command:N.key},{default:u(()=>[T(Z(N.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:u(()=>[V("span",rr,Z(t.payConstantList[R.varCode]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),R.varType==="input"?(I(),L("div",sr,[ir,i(S,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:R.var,"onUpdate:modelValue":N=>R.var=N},null,8,["modelValue","onUpdate:modelValue"]),dr])):(I(),z(w,{key:1,onCommand:N=>d(R,"var",N,2)},{dropdown:u(()=>[i(O,null,{default:u(()=>{var N;return[(I(!0),L(ce,null,pe(((N=l.value.find(A=>A.key===R.varCode))==null?void 0:N.child)||[],A=>(I(),z(E,{class:ke({"el-action-dropdown":R.var===A.key}),command:A.key},{default:u(()=>[T(Z(A.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:u(()=>[V("span",ur," \uFF08"+Z(t.payConstantList[R.var]||"\u8BF7\u9009\u62E9")+"\uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(v,{label:"\u7ED1\u5B9A\u5230",prop:["dataOperate",ne+"","var"]},{default:u(()=>[V("div",cr,Z(R.title),1)]),_:2},1032,["prop"])]))),256))]),_:1},8,["model"]),V("div",pr,[i(P,{loading:n.value,onClick:b,type:"primary"},{default:u(()=>[fr]),_:1},8,["loading"])]),i(W,{"model-value":f.visible,"align-center":"","destroy-on-close":"","show-close":!f.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:C},{footer:u(()=>[i(P,{class:"ml-auto",size:"small",loading:f.loading,onClick:C},{default:u(()=>[mr]),_:1},8,["loading"]),i(P,{size:"small",loading:f.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:g},{default:u(()=>[hr]),_:1},8,["loading"])]),default:u(()=>[i(At,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:o},null,512)]),_:1},8,["model-value","show-close"])])}}},yt=ge(gr,[["__scopeId","data-v-098ad4b2"]]);const _r={style:{padding:"0"},class:"dialogHeight"},yr={class:"data"},vr={class:"buttonBox"},br=T("\u4FDD\u5B58\u5E76\u66F4\u65B0"),kr={__name:"SendHeader",props:["activeMenu","makeOrderForm"],emits:["updataInterfaceId"],setup(r,{emit:e}){const o=r,t=q(),a=q(),n=q([]),l=Ce("editPayForm"),s=q(!1),d=q("");switch(l.type){case"makeOrder":d.value="\u7EDF\u4E00\u4E0B\u5355-"+(o.activeMenu.includes("SendHeader")?"\u53D1\u9001\u5934":"\u53D1\u9001\u6570\u636E");break;case"queryOrder":d.value="\u8BA2\u5355\u67E5\u8BE2-"+(o.activeMenu.includes("SendHeader")?"\u53D1\u9001\u5934":"\u53D1\u9001\u6570\u636E");break;case"callBackOrder":d.value="\u56DE\u8C03-"+(o.activeMenu.includes("SendHeader")?"\u53D1\u9001\u5934":"\u53D1\u9001\u6570\u636E");break}const c=ae({type:null,id:"",num:0,value:""}),f=k=>{var b;if(k!==null){if(k==="")return(b=a==null?void 0:a.value)==null?void 0:b.open();ze({message:"\u786E\u5B9A\u8981\u4F7F\u7528\u6240\u9009\u7684\u914D\u7F6E\u5417?",okEms:"\u8D4B\u503C\u6210\u529F"},()=>(k!==null&&g(k),c.type="",Promise.resolve("")),()=>{c.type=""})}},p=async()=>{try{s.value=!0,c.type!==null&&(c.id=await a.value.saveData());let k=null;switch(l.type){case"makeOrder":k=l.makeOrder;break;case"queryOrder":k=l.queryOrder;break;case"callBackOrder":k=l.callBackOrder;break;default:break}const b=k?o.activeMenu.includes("SendHeader")?"header":"body":l.type;Zt({payId:l.payId||l.id,headerId:c.type!==null&&o.activeMenu.includes("SendHeader")?c.id:null,bodyId:c.type!==null&&o.activeMenu.includes("SendData")?c.id:null},k,b).then(m=>{k||e("updataInterfaceId",m),x(),me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).finally(()=>s.value=!1)}catch{s.value=!1}};ae({num:0,title:"\u65E0"});const g=k=>{kt(k).then(b=>{Ve(()=>{var m;(m=a==null?void 0:a.value)==null||m.open({config:b.config,id:c.id})})})},C=()=>Ht(l.payId||l.id).then(k=>{n.value=k}),x=()=>{C();let k=null;switch(l.type){case"makeOrder":k=l.makeOrder;break;case"queryOrder":k=l.queryOrder;break;case"callBackOrder":k=l.callBackOrder;break}k&&Dt(k,o.activeMenu.includes("SendHeader")?"header":"body").then(b=>{c.id=o.activeMenu.includes("SendHeader")?b.headerId:b.bodyId,c.id&&(c.type=""),Ve(()=>{var m;(m=a.value)==null||m.open({id:c.id})})})};return Ze(()=>{x()}),(k,b)=>{const m=Xe,F=Je,B=Se,D=be,$=$e;return I(),L("div",_r,[i($,{ref_key:"ruleFormRef",ref:t,"label-width":"80px",model:c},{default:u(()=>[i(B,{label:o.activeMenu.includes("SendHeader")?"\u53D1\u9001\u5934":"\u53D1\u9001\u6570\u636E",prop:"type"},{default:u(()=>[i(F,{onChange:f,modelValue:c.type,"onUpdate:modelValue":b[0]||(b[0]=_=>c.type=_),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:u(()=>[i(m,{label:"\u65E0",value:null}),i(m,{label:"\u81EA\u5B9A\u4E49\u53D1\u9001\u6570\u636E",value:""}),(I(!0),L(ce,null,pe(n.value,_=>(I(),z(m,{label:_.title,value:_.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),i(B,{"label-width":"80px"},{default:u(()=>[V("div",yr,[c.type!==null?(I(),z(Kt,{key:0,"is-write":!0,title:d.value,ref_key:"EditSendHeaderRef",ref:a},null,8,["title"])):Q("",!0)])]),_:1}),i(B,{"label-width":"80px"},{default:u(()=>[V("div",vr,[i(D,{loading:s.value,onClick:p,type:"primary"},{default:u(()=>[br]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])])}}},Ue=ge(kr,[["__scopeId","data-v-ed38b614"]]),wr={class:"main"},Cr={style:{display:"flex","flex-direction":"row",height:"590px"}},xr={style:{flex:"1","padding-top":"24px",overflow:"hidden"}},Ir=We({__name:"HttpSign",emits:["updataAddrld"],setup(r,{expose:e,emit:o}){const t=q("OrderPlacement-InterfaceConfig"),a=ae({id:"",title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",config:[],type:"",payId:""}),n=()=>{s.visible=!1},l=f=>{f&&(a.type==="makeOrder"?a.makeOrder=f:a.queryOrder=f),o("updataAddrld",f)},s=ae({loading:!1,visible:!1,meuns:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderPlacement-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderPlacement-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderPlacement-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderPlacement-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderPlacement-ImitateTest"}]});_o("editPayForm",a);const d=Ce("editPayForm");return e({openModal:f=>{a.payId=d.payId||d.id,a.type="sign",a.id="paySign",a.type==="makeOrder"?a.makeOrder=f.id:a.queryOrder=f.id,s.visible=!0}}),(f,p)=>{const g=Ie;return I(),L("div",wr,[i(g,{"model-value":s.visible,"show-close":!s.loading,"align-center":"","close-on-press-escape":!1,title:"HTTP\u9A8C\u8BC1",width:1200,"z-index":1e3,"close-on-click-modal":!1,onClose:n},{default:u(()=>[V("div",Cr,[i(bo,{style:{"padding-bottom":"16px",height:"590px"},activeMenu:t.value,"onUpdate:activeMenu":p[0]||(p[0]=C=>t.value=C),data:s.meuns},null,8,["activeMenu","data"]),V("div",xr,[t.value==="OrderPlacement-InterfaceConfig"?(I(),z(_t,{key:0,onUpdataInterfaceId:l})):Q("",!0),t.value==="OrderPlacement-SendHeader"?(I(),z(Ue,{key:1,onUpdataInterfaceId:l,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderPlacement-SendData"?(I(),z(Ue,{key:2,onUpdataInterfaceId:l,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderPlacement-RespData"?(I(),z(yt,{key:3,onUpdataInterfaceId:l})):Q("",!0),t.value==="OrderPlacement-ImitateTest"?(I(),z(gt,{key:4,onUpdataInterfaceId:l})):Q("",!0)])])]),_:1},8,["model-value","show-close"])])}}});const Dr=ge(Ir,[["__scopeId","data-v-b0bb952c"]]);const Fr={class:"signa"},Pr={key:2,style:{padding:"0 12px"}},Br=T("\u65B0\u589E\u7B7E\u540D\u6B65\u9AA4"),Er=["onClick"],Ar=T("\u5220\u9664"),Sr={__name:"AddSignature",setup(r,{expose:e}){const o=q(),t=q(),a=q(),n=q(),l=q([]),s=ae({argumentId:null,type:0,title:"",addrId:"",id:"",process:[]}),d=ae({value:"key",label:"title",children:"child"}),c=q([]),f=Ce("editPayForm"),p=q(),g=S=>{Ve(()=>{var v;(v=a.value)==null||v.open({id:S})})},C=S=>{s.argumentId=S,S!==null&&g(s.argumentId)},x=()=>Ht(f.payId||f.id).then(S=>{l.value=S}),k=S=>{var M;const v=D(c.value,S.code);v.type!=="label"&&(v==null?void 0:v.child)&&(p.value=S,(M=t.value)==null||M.open(v,S.args))},b=()=>{s.process=[],s.type===0&&(s.title="")},m=()=>{var S;(S=o.value)==null||S.openModal({id:s.addrId})},F=S=>{s.addrId=S},B=S=>{const v=["\u96F6","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"],M="\u5341",P=S.toString().split("");let W="";return P.length===2?(P[0]==="1"?W+=M:P[0]!=="0"&&(W+=v[parseInt(P[0])]+M),P[1]!=="0"&&(W+=v[parseInt(P[1])])):W+=v[parseInt(P[0])],W};x();function D(S,v){for(let M of S){if(M.key===v)return M;if(M.child&&M.child.length>0){let P=D(M.child,v);if(P)return P}}return null}const $=S=>{var M;p.value=S;const v=D(c.value,S.code[1]);v.type!=="label"&&(v==null?void 0:v.child)?(M=t.value)==null||M.open(v):(p.value.code=v.key,p.value.args=null,p.value.name=v.title)},_=S=>{S?(p.value.code=S==null?void 0:S.code,p.value.args=S==null?void 0:S.args,p.value.name=S==null?void 0:S.name):(p.value.code=null,p.value.args=null,p.value.name=null)},y=S=>{ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(s.process.splice(S,1)))},h=()=>{s.process.push({})};ta().then(S=>{c.value=S.map(v=>({...v,leaf:!1,child:v.child.map(M=>({...M,leaf:!0}))}))});const E=S=>{try{return S.forEach(v=>{if(Object.keys(v).length===0)throw new Error(v);if(!v.code||typeof v.code=="object")throw new Error(v)}),!0}catch{return!1}};return e({saveSign:async()=>{var S,v;try{return s.type===0?null:s.type===1&&!s.title?Promise.reject(me({position:"bottom-right",type:"error",message:"\u8BF7\u586B\u5199\u7B97\u6CD5\u540D\u79F0"})):s.type===1&&!E(s.process)?Promise.reject(me({position:"bottom-right",type:"error",message:"\u8BF7\u5B8C\u5584\u8868\u683C\u53C2\u6570"})):(s.argumentId!=null&&(s.argumentId=await a.value.saveData()),s.id?await da({...s,payId:f.payId||f.id,addrId:s.type===2?s.addrId:"",process:((S=s.process)==null?void 0:S.length)>0&&s.type===1?s.process:null}).then(M=>Promise.resolve(s.id)):await ia({...s,payId:f.payId||f.id,addrId:s.type===2?s.addrId:"",process:((v=s.process)==null?void 0:v.length)>0&&s.type===1?s.process:null}).then(M=>Promise.resolve(M)))}catch(M){throw console.log(M),new Error(M)}},initSign:({id:S})=>{ua(S).then(v=>{s.title=v.title,s.id=S,s.addrId=v.addrId,s.id&&(s.addrId?s.type=2:s.type=1),v.process&&(s.process=JSON.parse(v.process)),v.argumentId&&(s.argumentId=v.argumentId),g(s.argumentId)})}}),(S,v)=>{const M=Xe,P=Je,W=Se,R=Pe,ne=be,N=it,A=Uo,U=dt,X=$e;return I(),L("div",Fr,[i(X,{ref_key:"ruleFormRef",ref:n,"label-width":"80px",model:s,"hide-required-asterisk":!1},{default:u(()=>[i(W,{label:"\u8BBE\u7F6E\u914D\u7F6E",prop:"argumentId"},{default:u(()=>[i(P,{onChange:C,modelValue:s.argumentId,"onUpdate:modelValue":v[0]||(v[0]=j=>s.argumentId=j),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:u(()=>[i(M,{label:"\u65E0",value:null}),i(M,{label:"\u81EA\u5B9A\u4E49\u53D1\u9001\u6570\u636E",onClick:S.openEdit,value:""},null,8,["onClick"]),(I(!0),L(ce,null,pe(l.value,j=>(I(),z(M,{label:j.title,value:j.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),s.argumentId!==null?(I(),z(Kt,{key:0,ref_key:"EditSendHeaderRef",ref:a},null,512)):Q("",!0),i(W,{label:"\u914D\u7F6E\u8FD0\u7B97"},{default:u(()=>[i(P,{modelValue:s.type,"onUpdate:modelValue":v[1]||(v[1]=j=>s.type=j),onChange:b,class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:u(()=>[i(M,{label:"\u65E0",value:0}),i(M,{label:"\u81EA\u5B9A\u4E49\u7B97\u6CD5\u6821\u9A8C",value:1}),i(M,{onClick:m,label:"HTTP\u9A8C\u8BC1",value:2})]),_:1},8,["modelValue"])]),_:1}),s.type===1||s.type===2?(I(),z(W,{key:1,label:"\u7B97\u6CD5\u540D\u79F0",prop:"title"},{default:u(()=>[i(R,{spellcheck:"false",modelValue:s.title,"onUpdate:modelValue":v[2]||(v[2]=j=>s.title=j),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7B97\u6CD5\u540D\u79F0"},null,8,["modelValue"])]),_:1})):Q("",!0),s.type===1?(I(),L("div",Pr,[i(W,{label:"\u81EA\u5B9A\u4E49\u7B7E\u540D"},{default:u(()=>[i(ne,{onClick:h,type:"primary"},{default:u(()=>[Br]),_:1})]),_:1}),i(U,{data:s.process},{default:u(()=>[i(N,{prop:"order",label:"\u6B65\u9AA4",width:"80"},{default:u(({row:j,$index:ue})=>[T(" \u7B2C"+Z(B(ue+1))+"\u6B65 ",1)]),_:1}),i(N,{prop:"code",label:"\u7B7E\u540D\u53C2\u6570\u64CD\u4F5C",width:"280"},{default:u(({row:j,$index:ue})=>[i(A,{modelValue:j.code,"onUpdate:modelValue":re=>j.code=re,props:d,options:c.value,onChange:re=>$(j)},null,8,["modelValue","onUpdate:modelValue","props","options","onChange"])]),_:1}),i(N,{prop:"args",label:"\u503C"},{default:u(({row:j})=>[V("div",{onClick:ue=>k(j)},Z(j.name),9,Er)]),_:1}),i(N,{width:"180",label:"\u64CD\u4F5C"},{default:u(({row:j,$index:ue})=>[i(ne,{type:"danger",link:"",onClick:re=>y(ue)},{default:u(()=>[Ar]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):Q("",!0)]),_:1},8,["model"]),i(Ha,{onLoad:_,ref_key:"editParamModalRef",ref:t},null,512),i(Dr,{onUpdataAddrld:F,ref_key:"httpSignRef",ref:o},null,512)])}}},At=ge(Sr,[["__scopeId","data-v-42c0c50f"]]),$r={style:{margin:"0 24px 24px 16px","max-height":"542px",overflow:"auto"}},Mr={key:0},Tr={key:1},Or=T("\u7F16\u8F91"),Vr=T("\u5220\u9664"),Lr=T(" \u53D6\u6D88 "),Nr=T(" \u4FDD\u5B58 "),Ur={__name:"index",setup(r){const e=q(),o=ae({data:[]}),t=Ce("editPayForm"),a=ae({loading:!1,visible:!1}),n=()=>{sa(t.payId||t.id).then(f=>{o.data=f})},l=async f=>{a.visible=!0,Ve(async()=>{await e.value.initSign({id:f.id})})},s=async()=>{a.loading=!0;try{const f=await e.value.saveSign();a.loading=!1,me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),d()}catch{a.loading=!1}},d=()=>{a.visible=!1},c=f=>ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>ca(f.id).then(p=>(n(),p)));return Ze(()=>{n()}),(f,p)=>{const g=it,C=be,x=dt,k=Ie;return I(),L("div",$r,[i(x,{border:"",class:"my-table-border",data:o.data},{default:u(()=>[i(g,{prop:"id",label:"\u7B97\u6CD5\u6807\u8BC6"}),i(g,{prop:"title",label:"\u7B97\u6CD5\u540D\u79F0"}),i(g,{prop:"calcID",label:"\u7B97\u6CD5\u65B9\u5F0F"},{default:u(({row:b})=>[b.addrId?(I(),L("span",Mr," HTTP\u7B7E\u540D ")):(I(),L("span",Tr,Z(b.process?"\u81EA\u5B9A\u4E49\u7B97\u6CD5\u6821\u9A8C":"\u65E0"),1))]),_:1}),i(g,{label:"\u64CD\u4F5C"},{default:u(({row:b,$index:m})=>[i(C,{type:"primary",link:"",onClick:F=>l(b)},{default:u(()=>[Or]),_:2},1032,["onClick"]),i(C,{type:"danger",link:"",onClick:F=>c(b)},{default:u(()=>[Vr]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(k,{"model-value":a.visible,"align-center":"","destroy-on-close":"","show-close":!a.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:d},{footer:u(()=>[i(C,{class:"ml-auto",size:"small",loading:a.loading,onClick:d},{default:u(()=>[Lr]),_:1},8,["loading"]),i(C,{size:"small",loading:a.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:s},{default:u(()=>[Nr]),_:1},8,["loading"])]),default:u(()=>[i(At,{class:"dialogHeight",style:{margin:"0"},ref_key:"AddSignatureRef",ref:e},null,512)]),_:1},8,["model-value","show-close"])])}}},Rr={style:{margin:"0 24px 24px 16px","max-height":"542px",overflow:"auto"}},qr=T("\u7F16\u8F91"),zr=T("\u5220\u9664"),jr=T(" \u53D6\u6D88 "),Hr=T(" \u4FDD\u5B58 "),Kr={__name:"index",setup(r){const e=q(),o=ae({data:[]}),t=ae({loading:!1,visible:!1}),a=Ce("editPayForm"),n=()=>{Ht(a.payId||a.id).then(f=>{o.data=f})},l=f=>ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>ra(f.id).then(p=>(n(),p))),s=async()=>{try{t.loading=!0;const f=await e.value.saveData();t.loading=!1,me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),d()}catch(f){t.loading=!1,console.log(f)}},d=()=>{t.visible=!1,n()},c=f=>{t.visible=!0,Ve(()=>{e.value.open({id:f.id})})};return Ze(()=>{n()}),(f,p)=>{const g=it,C=be,x=dt,k=Ie;return I(),L("div",Rr,[i(x,{border:"",class:"my-table-border",data:o.data},{default:u(()=>[i(g,{prop:"id",label:"\u914D\u7F6E\u6807\u8BC6"}),i(g,{prop:"title",label:"\u914D\u7F6E\u540D\u79F0"}),i(g,{prop:"number",label:"\u6570\u636E\u9879"}),i(g,{label:"\u64CD\u4F5C"},{default:u(({row:b,$index:m})=>[i(C,{type:"primary",link:"",onClick:F=>c(b)},{default:u(()=>[qr]),_:2},1032,["onClick"]),i(C,{type:"danger",link:"",onClick:F=>l(b)},{default:u(()=>[zr]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(k,{"model-value":t.visible,"align-center":"","destroy-on-close":"","show-close":!t.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u914D\u7F6E\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:d},{footer:u(()=>[i(C,{class:"ml-auto",size:"small",loading:t.loading,onClick:d},{default:u(()=>[jr]),_:1},8,["loading"]),i(C,{size:"small",loading:t.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:s},{default:u(()=>[Hr]),_:1},8,["loading"])]),default:u(()=>[i(Kt,{class:"dialogHeight","is-write":!0,style:{margin:"0"},ref_key:"EditSendHeaderRef",ref:e},null,512)]),_:1},8,["model-value","show-close"])])}}};const Gr=r=>(rt("data-v-a747c2bd"),r=r(),st(),r),Wr={class:"dialogHeight",style:{padding:"0","padding-left":"16px",position:"relative",height:"540px !important"}},Xr={style:{"margin-bottom":"16px"},class:"info"},Jr=Gr(()=>V("div",null,[T(" \u7EDF\u4E00\u4E0B\u5355\u548C\u8BA2\u5355\u67E5\u8BE2\u4E24\u9879\u914D\u7F6E\u6B63\u786E\u529F\u80FD\u624D\u80FD\u6B63\u5E38\u4F7F\u7528"),V("br"),T(" \u8BF7\u4ED4\u7EC6\u6838\u5BF9\u8BA2\u5355\u67E5\u8BE2->\u54CD\u5E94\u6570\u636E\u9879\uFF0C\u9519\u8BEF\u914D\u7F6E\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5956\u52B1\u4E0D\u80FD\u6B63\u5E38\u53D1\u653E\u6216\u7528\u6237\u672A\u652F\u4ED8\u5C31\u53D1\u653E\u5956\u52B1"),V("br"),T(" \u8BF7\u6D4B\u8BD5\u6B63\u5E38\u4EE5\u540E\u518D\u5F00\u653E\u7ED9\u7528\u6237\u4F7F\u7528 ")],-1)),Zr={class:"publicSetting",style:{"margin-bottom":"0"}},Yr=T(" \u81EA\u5B9A\u4E49\u914D\u7F6E\u9879 "),Qr={style:{"padding-right":"150px"}},es=T("\u5220\u9664"),ts={class:"info"},os={class:"buttonBox"},as=T("\u4FDD\u5B58\u5E76\u66F4\u65B0"),ns={__name:"index",setup(r){const e=Ce("editPayForm"),o=q(),t=q(!1),a=q({}),n=ae({id:"",title:"",clientId:[],clientAPP:2,state:1,documentUrl:""}),l=q([]);q([]),e.payId||e.id;const s=()=>{l.value.push({})},d=g=>{ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(l.value.splice(g,1)))},c=(g,C)=>{try{return g.forEach(x=>{C.forEach(k=>{if(x[k]===null||x[k]===""||x[k]===void 0)throw new Error(x[k])})}),!0}catch{return eo.error("\u8BF7\u5B8C\u5584\u8868\u683C\u53C2\u6570"),!1}},f=()=>{if(n.title==="")return eo.error("\u8BF7\u586B\u5199\u652F\u4ED8\u540D\u79F0");if(!c(l.value,["var","value"]))return;t.value=!0,Zo({...a.value,...n,config:l.value.length>0?l.value:null}).then(C=>{me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),p()}).finally(()=>{t.value=!1})},p=()=>{e.id&&Jo(e.id).then(g=>{n.id=g.id,n.clientAPP=g.clientAPP,n.state=g.state,n.title=g.title,n.documentUrl=g.documentUrl,g.config&&(l.value=JSON.parse(g.config)),a.value={...g}})};return Ze(()=>{p()}),(g,C)=>{const x=je,k=Pe,b=Se,m=Xe,F=Je,B=it,D=be,$=dt,_=$e;return I(),L("div",Wr,[V("div",Xr,[i(x,{style:{margin:"2px  8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),Jr]),i(_,{ref_key:"ruleFormRef",ref:o,"label-width":"86px",model:n,"hide-required-asterisk":!1},{default:u(()=>[i(b,{label:"\u652F\u4ED8\u540D\u79F0",prop:"title"},{default:u(()=>[i(k,{spellcheck:"false",modelValue:n.title,"onUpdate:modelValue":C[0]||(C[0]=y=>n.title=y),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u652F\u4ED8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(b,{label:"APP\u652F\u4ED8\u6A21\u5F0F",prop:"clientAPP"},{default:u(()=>[i(F,{modelValue:n.clientAPP,"onUpdate:modelValue":C[1]||(C[1]=y=>n.clientAPP=y),placeholder:"\u8BF7\u9009\u62E9APP\u652F\u4ED8\u6A21\u5F0F"},{default:u(()=>[i(m,{label:"\u8DF3\u8F6C",value:2}),i(m,{label:"\u751F\u6210\u4E8C\u7EF4\u7801",value:1})]),_:1},8,["modelValue"])]),_:1}),i(b,{label:"\u6587\u6863\u5730\u5740",prop:"documentUrl"},{default:u(()=>[i(k,{spellcheck:"false",modelValue:n.documentUrl,"onUpdate:modelValue":C[2]||(C[2]=y=>n.documentUrl=y),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740"},null,8,["modelValue"])]),_:1}),i(b,{label:"\u516C\u5171\u914D\u7F6E",prop:"clientId"},{default:u(()=>[V("div",Zr,[V("div",{onClick:s,class:"publicSettingItem"},[i(x,null,{default:u(()=>[i(oe(zt))]),_:1}),Yr])])]),_:1}),i(b,{label:"",prop:"clientId"},{default:u(()=>[V("div",Qr,[i($,{border:"",class:ke({"show-border":l.value.length===0}),data:l.value},{default:u(()=>[i(B,{prop:"var",label:"\u53D8\u91CF\u540D",width:"180"},{default:u(({row:y})=>[i(k,{placeholder:"\u70B9\u51FB\u8F93\u5165",spellcheck:"false",modelValue:y.var,"onUpdate:modelValue":h=>y.var=h,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(B,{prop:"remark",label:"\u5907\u6CE8",width:"180"},{default:u(({row:y})=>[i(k,{placeholder:"\u70B9\u51FB\u8F93\u5165",spellcheck:"false",modelValue:y.remark,"onUpdate:modelValue":h=>y.remark=h,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(B,{prop:"value",width:"370",label:"\u9ED8\u8BA4\u503C"},{default:u(({row:y})=>[i(k,{placeholder:"\u70B9\u51FB\u8F93\u5165",type:"textarea",rows:1,spellcheck:"false",modelValue:y.value,"onUpdate:modelValue":h=>y.value=h,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(B,{width:"62px",label:"\u64CD\u4F5C"},{default:u(({row:y,$index:h})=>[i(D,{type:"danger",link:"",onClick:E=>d(h)},{default:u(()=>[es]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["class","data"])])]),_:1}),i(b,{label:"",prop:""},{default:u(()=>[V("div",ts,[i(x,{style:{"margin-right":"16px"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),T(" \u516C\u5171\u914D\u7F6E\u652F\u6301\u5F15\u7528\u8C03\u7528\uFF0C\u5F15\u7528\u793A\u4F8B\uFF1A"+Z("<<PayCfg.APPID>>"),1)])]),_:1}),V("div",os,[i(D,{loading:t.value,onClick:f,type:"primary"},{default:u(()=>[as]),_:1},8,["loading"])])]),_:1},8,["model"])])}}},ls=ge(ns,[["__scopeId","data-v-a747c2bd"]]),rs={class:"main-1"},ss={style:{display:"flex","flex-direction":"row"}},is={style:{flex:"1","padding-top":"24px",overflow:"hidden"}},ds=We({__name:"editPay",emits:["updataTableList"],setup(r,{expose:e,emit:o}){const t=q("PublicConfig"),a={id:null,title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",callBackOrder:"",config:[],type:""},n=ae({id:null,title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",callBackOrder:"",config:[],type:""}),l=()=>{Object.keys(a).forEach(p=>{n[p]=a[p]}),o("updataTableList"),t.value="",s.visible=!1},s=ae({loading:!1,visible:!1,meuns:[{name:"\u516C\u5171\u914D\u7F6E",key:"PublicConfig",icon:["#icon-tishi"]},{name:"\u7EDF\u4E00\u4E0B\u5355",key:"OrderPlacement",icon:["#icon-jiaqian","#icon-tishi"],redirectKey:"OrderPlacement-InterfaceConfig",children:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderPlacement-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderPlacement-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderPlacement-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderPlacement-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderPlacement-ImitateTest"}]},{name:"\u8BA2\u5355\u67E5\u8BE2",key:"OrderQuery",icon:[{name:"#icon-jiaqian",color:"#57C76D"}],redirectKey:"OrderQuery-InterfaceConfig",children:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderQuery-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderQuery-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderQuery-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderQuery-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderQuery-ImitateTest"}]},{name:"\u914D\u7F6E\u7EC4\u7BA1\u7406",key:"ConfigSetting",icon:[]},{name:"\u7B97\u6CD5\u7EC4\u7BA1\u7406",key:"AlgoGroupSetting",icon:[]}]}),d=p=>{t.value="PublicConfig",Object.keys(n).forEach(g=>{n[g]=p[g]}),n.id=p.id,s.visible=!0},c=p=>{p.includes("OrderPlacement")&&(n.type="makeOrder"),p.includes("OrderQuery")&&(n.type="queryOrder"),p.includes("callback")&&(n.type="callBackOrder")},f=p=>{if(p)switch(n.type){case"makeOrder":n.makeOrder=p;break;case"queryOrder":n.queryOrder=p;break;case"callBackOrder":n.callBackOrder=p;break}};return _o("editPayForm",n),e({openModal:d}),(p,g)=>{const C=Ie;return I(),L("div",rs,[i(C,{"model-value":s.visible,"align-center":"","show-close":!s.loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u914D\u7F6E",width:1200,"z-index":20,"close-on-click-modal":!1,onClose:l},{default:u(()=>[V("div",ss,[i(bo,{onChange:c,class:"side-meun",activeMenu:t.value,"onUpdate:activeMenu":g[0]||(g[0]=x=>t.value=x),data:s.meuns},null,8,["activeMenu","data"]),V("div",is,[t.value==="PublicConfig"?(I(),z(ls,{key:0})):Q("",!0),t.value==="OrderPlacement-InterfaceConfig"?(I(),z(_t,{key:1,onUpdataInterfaceId:f})):Q("",!0),t.value==="OrderPlacement-SendHeader"?(I(),z(Ue,{key:2,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderPlacement-SendData"?(I(),z(Ue,{key:3,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderPlacement-RespData"?(I(),z(yt,{key:4,onUpdataInterfaceId:f})):Q("",!0),t.value==="OrderPlacement-ImitateTest"?(I(),z(gt,{key:5,onUpdataInterfaceId:f})):Q("",!0),t.value==="OrderQuery-InterfaceConfig"?(I(),z(_t,{key:6,onUpdataInterfaceId:f})):Q("",!0),t.value==="OrderQuery-SendHeader"?(I(),z(Ue,{key:7,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderQuery-SendData"?(I(),z(Ue,{key:8,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="OrderQuery-RespData"?(I(),z(yt,{key:9,onUpdataInterfaceId:f})):Q("",!0),t.value==="OrderQuery-ImitateTest"?(I(),z(gt,{key:10,onUpdataInterfaceId:f})):Q("",!0),t.value==="callback-InterfaceConfig"?(I(),z(_t,{key:11,onUpdataInterfaceId:f})):Q("",!0),t.value==="callback-SendHeader"?(I(),z(Ue,{key:12,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="callback-SendData"?(I(),z(Ue,{key:13,onUpdataInterfaceId:f,activeMenu:t.value},null,8,["activeMenu"])):Q("",!0),t.value==="callback-RespData"?(I(),z(yt,{key:14,onUpdataInterfaceId:f})):Q("",!0),t.value==="callback-ImitateTest"?(I(),z(gt,{key:15,onUpdataInterfaceId:f})):Q("",!0),t.value==="ConfigSetting"?(I(),z(Kr,{key:16})):Q("",!0),t.value==="AlgoGroupSetting"?(I(),z(Ur,{key:17})):Q("",!0)])])]),_:1},8,["model-value","show-close"])])}}});const us=ge(ds,[["__scopeId","data-v-7b585868"]]),St=r=>(rt("data-v-13bc581f"),r=r(),st(),r),cs={class:"info"},ps=St(()=>V("div",null,"\u767B\u5F55\u5546\u6237\u5E73\u53F0 > \u4EA7\u54C1\u4E2D\u5FC3 > AppID\u8D26\u53F7\u7BA1\u7406",-1)),fs={class:"info"},ms=St(()=>V("div",null,"\u767B\u5F55\u5546\u6237\u5E73\u53F0 > \u8D26\u6237\u4E2D\u5FC3 > API\u5B89\u5168",-1)),hs={class:"info"},gs=St(()=>V("div",null,"\u767B\u5F55\u5546\u6237\u5E73\u53F0 > \u8D26\u6237\u4E2D\u5FC3 > \u4E2A\u4EBA\u4FE1\u606F > \u767B\u5F55\u8D26\u6237",-1)),_s={class:"info"},ys=St(()=>V("div",null,"\u767B\u5F55\u5546\u6237\u5E73\u53F0 > \u8D26\u6237\u4E2D\u5FC3 > API\u5B89\u5168 > \u7533\u8BF7API\u8BC1\u4E66 > \u7BA1\u7406\u8BC1\u4E66 > \u8BC1\u4E66\u5E8F\u5217\u53F7",-1)),vs=T(" \u53D6\u6D88 "),bs=T(" \u4FDD\u5B58 "),ks=We({__name:"editWxPay",props:{tempType:{type:Number,default:1}},emits:["load"],setup(r,{expose:e,emit:o}){const t=r,a=q(),n=q(0),l=ae({dayMaxMoney:void 0,onceMaxMoney:void 0,sort:0,name:"",appId:"",apiv3Key:"",macId:"",parivate_Key:"",serialNo:"",status:1,afterNotifyDomain:"",preNotifyDomain:"http://"}),s=ae({loading:!1,visible:!1,other:void 0}),d=Ce("debounce")(C=>{!C||C.validate(x=>{x&&(s.loading=!0,yo({...l,id:s.other.id,dayMaxMoney:l.dayMaxMoney?l.dayMaxMoney*100:void 0,onceMaxMoney:l.onceMaxMoney?l.onceMaxMoney*100:void 0,wechatPay:{apiv3Key:l.apiv3Key,appId:l.appId,macId:l.macId,parivate_Key:l.parivate_Key,serialNo:l.serialNo,notifyDomain:l.preNotifyDomain+l.afterNotifyDomain}},2).then(k=>{t.tempType===2?jt({title:l.name,state:1,payType:"wechat",payConfigId:k,clientWeb:2,clientH5:2,clientAPP:2}).then(b=>{me({position:"bottom-right",type:"success",message:"\u914D\u7F6E\u65B0\u589E\u6210\u529F"}),c()}):(me({position:"bottom-right",type:"success",message:"\u914D\u7F6E\u66F4\u65B0\u6210\u529F"}),c())}).finally(()=>{s.loading=!1}))})},300),c=()=>{o("load"),s.other=void 0,s.visible=!1},f={};function p(){var x,k,b,m,F,B,D,$,_,y,h,E,O,w,S,v,M,P,W,R,ne;Object.keys(l).forEach(N=>{var A,U;((A=s.other)==null?void 0:A[N])!==void 0&&(l[N]=(U=s.other)==null?void 0:U[N])}),l.dayMaxMoney=(x=s.other)!=null&&x.dayMaxMoney?((k=s.other)==null?void 0:k.dayMaxMoney)/100:void 0,l.onceMaxMoney=(b=s.other)!=null&&b.onceMaxMoney?((m=s.other)==null?void 0:m.onceMaxMoney)/100:void 0,l.id=(F=s.other)==null?void 0:F.id,l.apiv3Key=(D=(B=s.other)==null?void 0:B.WechatPay)==null?void 0:D.apiv3Key,l.macId=(_=($=s.other)==null?void 0:$.WechatPay)==null?void 0:_.macId,l.parivate_Key=(h=(y=s.other)==null?void 0:y.WechatPay)==null?void 0:h.parivate_Key,l.appId=(O=(E=s.other)==null?void 0:E.WechatPay)==null?void 0:O.appId,l.serialNo=(S=(w=s.other)==null?void 0:w.WechatPay)==null?void 0:S.serialNo;const C=((P=(M=(v=s.other)==null?void 0:v.WechatPay)==null?void 0:M.notifyDomain)==null?void 0:P.slice(0,5))==="https";l.preNotifyDomain=C?"https://":"http://",l.afterNotifyDomain=(ne=(R=(W=s.other)==null?void 0:W.WechatPay)==null?void 0:R.notifyDomain)==null?void 0:ne.slice(C?8:7)}e({open(C){var x;C?vo(C).then(k=>{s.visible=!0,s.other=k}):((x=a.value)==null||x.resetFields(),s.visible=!0,s.other={})},formId:n,clearFrom(){n.value=0}});const g=vt(()=>{var C;return(C=s.other)!=null&&C.id?"\u7F16\u8F91\u914D\u7F6E":"\u65B0\u589E\u914D\u7F6E"});return(C,x)=>{const k=Pe,b=Se,m=je,F=Xe,B=Je,D=$e,$=be,_=Ie,y=wt;return I(),L("div",null,[i(_,{"model-value":s.visible,"show-close":!s.loading,"close-on-press-escape":!1,title:oe(g),width:450,"z-index":20,"close-on-click-modal":!1,onClose:c,onOpened:p},{footer:u(()=>[i($,{class:"ml-auto",size:"small",loading:s.loading,onClick:c},{default:u(()=>[vs]),_:1},8,["loading"]),i($,{loading:s.loading,type:"primary",size:"small",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:x[8]||(x[8]=h=>oe(d)(a.value))},{default:u(()=>[bs]),_:1},8,["loading"])]),default:u(()=>[lt((I(),L("div",null,[i(D,{ref_key:"ruleFormRef",ref:a,"label-width":"100px",model:l,rules:f,"hide-required-asterisk":!1},{default:u(()=>[i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},prop:"name",label:"\u914D\u7F6E\u540D\u79F0"},{default:u(()=>[i(k,{modelValue:l.name,"onUpdate:modelValue":x[0]||(x[0]=h=>l.name=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165APPID"},prop:"appId",label:"APPID"},{default:u(()=>[i(k,{modelValue:l.appId,"onUpdate:modelValue":x[1]||(x[1]=h=>l.appId=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165APPID"},null,8,["modelValue"]),V("div",cs,[i(m,{style:{margin:"2px 8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),ps])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165APIV3\u5BC6\u94A5"},prop:"apiv3Key",label:"APIV3\u5BC6\u94A5"},{default:u(()=>[i(k,{modelValue:l.apiv3Key,"onUpdate:modelValue":x[2]||(x[2]=h=>l.apiv3Key=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165APIV3\u5BC6\u94A5"},null,8,["modelValue"]),V("div",fs,[i(m,{style:{margin:"2px 8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),ms])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u6237ID"},prop:"macId",label:"\u5546\u6237ID"},{default:u(()=>[i(k,{modelValue:l.macId,"onUpdate:modelValue":x[3]||(x[3]=h=>l.macId=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5546\u6237ID"},null,8,["modelValue"]),V("div",hs,[i(m,{style:{margin:"2px 8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),gs])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u79C1\u94A5"},prop:"parivate_Key",label:"\u8BC1\u4E66\u79C1\u94A5"},{default:u(()=>[i(k,{modelValue:l.parivate_Key,"onUpdate:modelValue":x[4]||(x[4]=h=>l.parivate_Key=h),clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u79C1\u94A5",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},prop:"afterNotifyDomain",label:"\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},{default:u(()=>[i(k,{modelValue:l.afterNotifyDomain,"onUpdate:modelValue":x[6]||(x[6]=h=>l.afterNotifyDomain=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5F02\u6B65\u901A\u77E5\u57DF\u540D"},{prepend:u(()=>[i(B,{modelValue:l.preNotifyDomain,"onUpdate:modelValue":x[5]||(x[5]=h=>l.preNotifyDomain=h),style:{width:"80px"}},{default:u(()=>[i(F,{label:"https://",value:"https://"}),i(F,{label:"http://",value:"http://"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),i(b,{rules:{required:!0,message:"\u8BF7\u8F93\u5165API\u8BC1\u4E66\u5E8F\u5217\u53F7"},prop:"serialNo",label:"API\u8BC1\u4E66\u5E8F\u5217\u53F7"},{default:u(()=>[i(k,{modelValue:l.serialNo,"onUpdate:modelValue":x[7]||(x[7]=h=>l.serialNo=h),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165API\u8BC1\u4E66\u5E8F\u5217\u53F7"},null,8,["modelValue"]),V("div",_s,[i(m,{style:{margin:"2px 8px 0 0"},size:16,color:"#FF9F46"},{default:u(()=>[i(oe(Re))]),_:1}),ys])]),_:1})]),_:1},8,["model"])])),[[y,s.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const ws=ge(ks,[["__scopeId","data-v-13bc581f"]]),Cs={style:{display:"flex"}},xs={key:0,style:{"margin-bottom":"8px"},class:"info"},Is={style:{"font-size":"12px !important"}},Ds=T(" \u5F53\u524D\u652F\u4ED8\u7684\u5F00\u53D1\u6587\u6863\uFF1A"),Fs=["onClick"],Ps={style:{"font-size":"12px !important"}},Bs=T(" \u5982\u6709\u95EE\u9898\u8BF7\u4E0A\u8BBA\u575B\u7559\u8A00\uFF1A"),Es=["onClick"],As={class:"dialog-footer"},Ss=T("\u53D6\u6D88"),$s=T(" \u4FDD\u5B58 "),Ms=We({__name:"updataFile",emits:["updateList"],setup(r,{expose:e,emit:o}){const{proxy:t}=zo(),a=q(null),n=q(null),l=q(),s=ae({modalVisible:!1}),d=q(),c=q([]),f=q([]),p={name:[{required:!0,message:"\u8BF7\u8F93\u5165\u652F\u4ED8\u540D\u79F0",trigger:"blur"}]},g=ae({form:[],loading:!1,progress:!1,status:!1,isUnknown:!1,progressPercent:!1,fileBtnDisabled:!1,selectFileName:"\u9009\u62E9\u6587\u4EF6",name:"",fileName:""}),C=()=>{var _;(_=a.value)==null||_.resetFields(),g.form=[],f.value=[],c.value=[],g.selectFileName="\u9009\u62E9\u6587\u4EF6",g.progressPercent=!1,g.progress=!1,g.name="",g.status=!1,s.modalVisible=!1,d.value=!1,g.isUnknown=!1},x=_=>{window.open(_,"windowName")},k=_=>{g.progressPercent=!1,g.selectFileName=_.name,D(_.raw)},b=_=>{n.value.clearFiles();const y=_[0];n.value.handleStart(y),g.form=[]},m=()=>{t.$refs.uploadRef.$refs.uploadRef.$refs.inputRef.click()},F=async _=>{!_||await _.validate((y,h)=>{y&&n.value.submit()})},B=_=>_.size===0?(me({position:"bottom-right",type:"success",message:"\u8BF7\u9009\u62E9\u6587\u4EF6"}),!1):($(_),!1),D=_=>{g.loading=!0;const y=new FormData;y.append("file",_),y.append("name",g.name),g.progress=!0,g.progressPercent=0;const h=E=>{g.progressPercent=Number((E.loaded/E.total*100).toFixed(2))};g.fileBtnDisabled=!0,ya(y,h).then(E=>{g.progress=!1,g.progressPercent=!0,g.loading=!1,g.fileBtnDisabled=!1,E instanceof Array&&(g.form=E.filter(O=>O.type===""),c.value=E.filter(O=>O.type==="document"),f.value=E.filter(O=>O.type==="bbs")),s.modalVisible=!0}).catch(()=>{g.progress=!1,g.loading=!1,g.fileBtnDisabled=!1})},$=_=>{g.loading=!0;const y=new FormData;y.append("file",_),y.append("name",g.name),y.append("replace",JSON.stringify(g.form)),g.progress=!0,g.progressPercent=0;const h=E=>{g.progressPercent=Number((E.loaded/E.total*100).toFixed(2))};g.fileBtnDisabled=!0,va(y,h).then(E=>{me({message:"\u4E0A\u4F20\u6210\u529F",type:"success",position:"bottom-right"}),g.progress=!1,g.progressPercent=!0,g.loading=!1,g.fileBtnDisabled=!1,C(),o("updateList")}).catch(()=>{g.progress=!1,g.loading=!1,g.fileBtnDisabled=!1})};return e({modal:s,formData:g,confirFile:m}),(_,y)=>{const h=be,E=Ro,O=qo,w=Pe,S=Se,v=$e,M=Ie;return I(),L("div",null,[lt(V("div",Cs,[i(E,{ref_key:"uploadRef",ref:n,multiple:!1,class:"upload-demo",limit:1,style:{display:"inline-block","max-width":"670px"},"on-change":k,"on-exceed":b,"show-file-list":!1,"auto-upload":!1,"before-upload":B},{default:u(()=>[i(h,{slot:"trigger",class:"file-input",type:"primary",disabled:g.fileBtnDisabled},{default:u(()=>[T(Z(g.selectFileName),1)]),_:1},8,["disabled"])]),_:1},512),typeof g.progressPercent=="number"?(I(),z(O,{key:0,class:"progress","text-inside":!0,"stroke-width":32,percentage:g.progressPercent},{default:u(()=>[V("span",null,Z(g.progressPercent)+"%",1)]),_:1},8,["percentage"])):Q("",!0)],512),[[jo,!1]]),i(M,{modelValue:s.modalVisible,"onUpdate:modelValue":y[2]||(y[2]=P=>s.modalVisible=P),ref_key:"dialogRef",ref:l,"close-on-click-modal":!1,onClose:C,title:"\u5BFC\u5165\u914D\u7F6E",width:"440"},{footer:u(()=>[V("span",As,[i(h,{onClick:C,size:"small"},{default:u(()=>[Ss]),_:1}),i(h,{type:"primary",size:"small",loading:g.loading,onClick:y[1]||(y[1]=P=>F(a.value))},{default:u(()=>[$s]),_:1},8,["loading"])])]),default:u(()=>[i(v,{ref_key:"ruleFormRef",ref:a,model:g,rules:p,"label-width":"120px",class:"demo-ruleForm"},{default:u(()=>[i(S,{label:"\u652F\u4ED8\u540D\u79F0",prop:"name"},{default:u(()=>[i(w,{modelValue:g.name,"onUpdate:modelValue":y[0]||(y[0]=P=>g.name=P)},null,8,["modelValue"])]),_:1}),(I(!0),L(ce,null,pe(g.form,(P,W)=>(I(),z(S,{label:P.title,rules:[{required:!0,message:"\u8BF7\u8F93\u5165"+P.title,trigger:"blur"}],prop:["form",W,"value"]},{default:u(()=>[i(w,{modelValue:P.value,"onUpdate:modelValue":R=>P.value=R},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label","rules","prop"]))),256)),c.value.length||f.value.length?(I(),L("div",xs,[(I(!0),L(ce,null,pe(c.value,P=>(I(),L("div",Is,[Ds,V("span",{onClick:W=>x(P.key),class:"item-color"},Z(P.key),9,Fs)]))),256)),(I(!0),L(ce,null,pe(f.value,P=>(I(),L("div",Ps,[Bs,V("span",{onClick:W=>x(P.key),class:"item-color"},Z(P.key),9,Es)]))),256))])):Q("",!0)]),_:1},8,["model"]),typeof d.value=="number"?(I(),z(O,{key:0,"text-inside":!0,color:"#5e89f1","stroke-width":20,percentage:d.value},{default:u(()=>[V("span",null,Z(d.value)+"%",1)]),_:1},8,["percentage"])):Q("",!0)]),_:1},8,["modelValue"])])}}});const Ts=ge(Ms,[["__scopeId","data-v-18aad2ee"]]);const Os={class:"flex-y box",style:{"padding-top":"24px"}},Vs={class:"flex-x-between"},Ls=T(" \u65B0\u589E\u652F\u4ED8 "),Ns=T("\u5FAE\u4FE1"),Us=T("\u652F\u4ED8\u5B9D"),Rs=T("\u652F\u4ED8\u5B9D\u5F53\u9762\u4ED8"),qs=T("\u81EA\u5B9A\u4E49"),zs=T(" \u5BFC\u5165\u914D\u7F6E "),js={class:"search m-0"},Hs={key:0},Ks={key:1},Gs={key:2},Ws={key:3},Xs={style:{gap:"12px"},class:"flex-y"},Js={style:{display:"flex","align-items":"center",width:"80px",cursor:"pointer"}},Zs={key:1},Ys={key:0},Qs={key:1},ei={key:2},ti=T(" \u5BFC\u51FA "),oi=T(" \u7ED1\u5B9A\u7AD9\u70B9 "),ai=T(" \u7F16\u8F91 "),ni=T(" \u5220\u9664 "),hi={__name:"index",setup(r){const e=q(1),o=q(),t=q(),a=q(),n=q(),l=q(),s=q({pageIndex:1,pageSize:20,total:0}),d=ae({loading:!1,data:[],searchVal:{keywords:""},selectList:[],load(b){s.value=b||s.value,d.loading=!0,Xo({keyword:d.searchVal.keywords}).then(m=>{d.data=m}).finally(()=>{d.loading=!1})},handleSelectionChange(b){d.selectList=b},sortChnage({column:b,prop:m,order:F}){F?d.searchVal.order=`${m} ${F==="ascending"?"asc":"desc"}`:d.searchVal.order="",d.load()}}),c=()=>{o.value.confirFile()},f=b=>{ze({message:`\u786E\u5B9A\u8981${b.state===1?"\u5F00\u542F":"\u5173\u95ED"}\u5417\uFF1F`,icon:to(oo),customClass:"primaryWaring",okEms:"\u4FEE\u6539\u6210\u529F"},()=>ba({id:b.id,state:b.state}).finally(()=>{d.load()}),()=>{d.load()})},p=b=>{t.value.openModal(b)},g=b=>{switch(b==null?void 0:b.payType){case"alipay":e.value=1,n.value.open(b.payConfigId,b==null?void 0:b.payType);break;case"alipayFace":e.value=1,n.value.open(b.payConfigId,b==null?void 0:b.payType);break;case"wechat":e.value=1,l.value.open(b.payConfigId);break;case"custom":a.value.openModal(b);break}},C=async b=>{var m,F,B;switch(b){case"alipay":e.value=2,(m=n.value)==null||m.open(void 0,b);break;case"alipayFace":e.value=2,(F=n.value)==null||F.open(void 0,b);break;case"wechat":e.value=2,(B=l==null?void 0:l.value)==null||B.open();break;case"custom":const D="\u81EA\u5B9A\u4E49\u652F\u4ED8"+new Date().getTime();jt({title:D,payType:"custom",state:1,clientWeb:2,clientH5:2,clientAPP:2}).then($=>{a.value.openModal({id:$}),me({position:"bottom-right",type:"success",message:"\u521B\u5EFA"+D+"\u6210\u529F"})});break}},x={del:b=>ze({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",confirmButtonText:"\u5220\u9664",confirmButtonClass:"el-button-danger",icon:to(oo),okEms:"\u5220\u9664\u6210\u529F"},()=>Yo(b.id).then(m=>(d.load(),m)))},k=b=>{Go({title:"\u786E\u5B9A",message:Mt("div",null,[Mt("div",{},[Mt("span",null,"\u662F\u5426\u5BFC\u51FA\u652F\u4ED8\u914D\u7F6E\uFF1F")])]),showCancelButton:!0,confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",confirmButtonClass:"message-box-primary",beforeClose:(m,F,B)=>{m==="confirm"?(F.confirmButtonLoading=!0,F.confirmButtonText="Loading...",_a(b.id).then(D=>{const $=D,_=new Blob([$],{type:"text/plain;charset=utf-8"}),y="\u652F\u4ED8\u914D\u7F6E.txt";if("download"in document.createElement("a")){const h=document.createElement("a");h.download=y,h.style.display="none",h.href=URL.createObjectURL(_),document.body.appendChild(h),h.click(),URL.revokeObjectURL(h.href),document.body.removeChild(h)}else navigator.msSaveBlob(_,y);B()})):(me({message:"\u53D6\u6D88\u64CD\u4F5C",type:"info",position:"bottom-right"}),B())}})};return d.load(),(b,m)=>{const F=be,B=Ct,D=xt,$=It,_=Ho,y=it,h=je,E=ho,O=go,w=dt,S=wt;return I(),L("div",Os,[V("div",Vs,[V("div",null,[i($,{onCommand:m[4]||(m[4]=()=>{})},{dropdown:u(()=>[i(D,null,{default:u(()=>[i(B,{class:"hover-item",onClick:m[0]||(m[0]=v=>C("wechat")),command:"wechat"},{default:u(()=>[Ns]),_:1}),i(B,{class:"hover-item",onClick:m[1]||(m[1]=v=>C("alipay")),command:"alipay"},{default:u(()=>[Us]),_:1}),i(B,{class:"hover-item",onClick:m[2]||(m[2]=v=>C("alipayFace")),command:"alipayFace"},{default:u(()=>[Rs]),_:1}),i(B,{class:"hover-item",onClick:m[3]||(m[3]=v=>C("custom")),command:"custom"},{default:u(()=>[qs]),_:1})]),_:1})]),default:u(()=>[i(F,{type:"primary"},{default:u(()=>[Ls]),_:1})]),_:1}),i(F,{style:{"margin-left":"16px"},type:"primary",onClick:c},{default:u(()=>[zs]),_:1})]),V("div",js,[i(_,{modelValue:d.searchVal.keywords,"onUpdate:modelValue":m[5]||(m[5]=v=>d.searchVal.keywords=v),onChange:m[6]||(m[6]=()=>{s.value.pageIndex=1,d.load()})},null,8,["modelValue"])])]),lt((I(),z(w,{class:"auto",data:d.data,stripe:!0,onSortChange:d.sortChnage,onSelectionChange:d.handleSelectionChange},{default:u(()=>[i(y,{type:"index",label:"\u5E8F\u53F7",width:"100"}),i(y,{prop:"title",label:"\u652F\u4ED8\u540D\u79F0","show-overflow-tooltip":!0}),i(y,{prop:"payType",label:"\u652F\u4ED8\u7C7B\u578B"},{default:u(({row:v})=>[v.payType==="wechat"?(I(),L("span",Hs,"\u5FAE\u4FE1")):v.payType==="alipay"?(I(),L("span",Ks,"\u652F\u4ED8\u5B9D")):v.payType==="alipayFace"?(I(),L("span",Gs,"\u652F\u4ED8\u5B9D\u5F53\u9762\u4ED8")):(I(),L("span",Ws,"\u81EA\u5B9A\u4E49"))]),_:1}),i(y,{label:"\u4F7F\u7528\u7AD9\u70B9"},{default:u(({row:v})=>{var M,P;return[(M=v.sites)!=null&&M.length?(I(),z(E,{key:0,placement:"right",trigger:"hover"},{reference:u(()=>{var W;return[V("div",Js,[T(Z(((W=v.sites)==null?void 0:W.length)||0)+" ",1),i(h,{style:{background:"#4b82fa","border-radius":"6px",padding:"0 2px","margin-left":"4px"},color:"#fff",size:12},{default:u(()=>[i(oe(Ko))]),_:1})])]}),default:u(()=>[V("div",Xs,[(I(!0),L(ce,null,pe(v.sites,W=>(I(),L("p",null,Z(W.name),1))),256))])]),_:2},1024)):(I(),L("span",Zs,Z(((P=v.sites)==null?void 0:P.length)||0),1))]}),_:1}),i(y,{prop:"clientAPP",label:"APP\u652F\u4ED8\u6A21\u5F0F"},{default:u(({row:v})=>[v.payType==="custom"&&v.clientAPP===1?(I(),L("span",Ys,"\u751F\u6210\u4E8C\u7EF4\u7801")):v.payType==="custom"&&v.clientAPP===2?(I(),L("span",Qs,"\u8DF3\u8F6C")):(I(),L("span",ei,"-"))]),_:1}),i(y,{prop:"state",label:"\u72B6\u6001"},{default:u(({row:v})=>[i(O,{onChange:M=>f(v),modelValue:v.state,"onUpdate:modelValue":M=>v.state=M,"active-value":1,"inactive-value":2},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1}),i(y,{fixed:"right",label:"\u64CD\u4F5C",align:"right",width:"220"},{default:u(({row:v})=>[v.payType==="custom"?(I(),z(F,{key:0,onClick:M=>k(v),type:"warning",link:""},{default:u(()=>[ti]),_:2},1032,["onClick"])):Q("",!0),i(F,{onClick:M=>p(v),type:"primary",link:""},{default:u(()=>[oi]),_:2},1032,["onClick"]),i(F,{type:"primary",link:"",onClick:M=>g(v)},{default:u(()=>[ai]),_:2},1032,["onClick"]),i(F,{type:"danger",link:"",onClick:M=>x.del(v)},{default:u(()=>[ni]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[S,d.loading]]),i(Da,{onLoad:m[7]||(m[7]=v=>d.load(1)),ref_key:"bindSiteRef",ref:t},null,512),i(us,{onUpdataTableList:m[8]||(m[8]=v=>d.load()),ref_key:"editPayRef",ref:a},null,512),i(Ea,{onLoad:m[9]||(m[9]=v=>d.load()),"temp-type":e.value,ref_key:"editAliPayRef",ref:n},null,8,["temp-type"]),i(ws,{onLoad:m[10]||(m[10]=v=>d.load()),"temp-type":e.value,ref_key:"editWxPayRef",ref:l},null,8,["temp-type"]),i(Ts,{onUpdateList:m[11]||(m[11]=v=>d.load()),ref_key:"updataFileRef",ref:o},null,512)])}}};export{hi as default};
