import{P as A,d as L,u as T,r as $,b as v,o as M,f as N,c as P,B as j,i as c,j as F,k as o,w as u,C as q,T as z,L as G,s as d,t as D,ae as O,q as p,N as m,a7 as U,U as x,V as y,O as R,_ as H}from"./entry.40130a59.js";/* empty css                        */import{F as J}from"./filtter.26fb921a.js";import{m as k}from"./message.61fa73af.js";import{P as K}from"./pagination.bcfe9cd2.js";/* empty css                  *//* empty css                   */const Q=(g={page:0})=>A({url:"/browse/page",method:"get",params:g}),w=(g,f)=>A({url:"/browse/del",method:"delete",data:{ids:g,isAll:f}}),W={class:"fli_f_box"},X={class:"flex-y box havefit_box"},Y=p(" \u6E05\u7A7A\u6240\u6709 "),Z=p(" \u6E05\u7A7A\u672C\u9875 "),ee={class:"inputBox"},te={key:0},ae={key:1},oe={key:2},ue={key:3},ne={key:0},se={key:1},le=p(" \u5220\u9664 "),ie=L({__name:"index",setup(g){const f=T(),r=$({pageIndex:1,pageSize:20,total:0}),_=v([]),C=v([]),t=v({loading:!1,data:[],searchVal:{keywords:"",order:""},selectList:[],load(s){r.value=s||r.value,t.loading=!0,Q({page:r.value.pageIndex,limit:r.value.pageSize,...t.searchVal,...f.siteObj}).then(a=>{C.length=0,_.splice(0,_.length),_.push(...a.List),_.forEach(n=>{C.push(n.id)}),r.value.total=a.total}).finally(()=>{t.loading=!1})},handleSelectionChange(s){this.selectList=s},sortChnage({column:s,prop:a,order:n}){n?t.searchVal.order=`${a} ${n==="ascending"?"asc":"desc"}`:t.searchVal.order="",t.load()}}),b={browsedel:s=>k({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F\u5220\u9664\u540E\u6D4F\u89C8\u8BB0\u5F55\u5C06\u65E0\u6CD5\u627E\u56DE\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",confirmButtonText:"\u5220\u9664",confirmButtonClass:"el-button-danger",icon:x(y),okEms:"\u6D4F\u89C8\u8BB0\u5F55\u5220\u9664\u6210\u529F"},()=>w([s.id]).then(a=>(t.load(),a))),browsepagedel:(s,a)=>k({message:"\u786E\u5B9A\u8981\u6E05\u7A7A\u5417\uFF1F\u6E05\u7A7A\u540E\u6D4F\u89C8\u8BB0\u5F55\u5C06\u65E0\u6CD5\u627E\u56DE\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",confirmButtonText:"\u5220\u9664",confirmButtonClass:"el-button-danger",icon:x(y),okEms:"\u6D4F\u89C8\u8BB0\u5F55\u6E05\u7A7A\u6210\u529F"},()=>w(s,a).then(n=>(t.load(),n)))};return M(()=>{t.load()}),(s,a)=>{const n=N,I=P,i=R,V=G,S=j;return d(),c("div",W,[F("div",X,[o(J,{filtter:!1,onGetList:t.load},{fittleBtn:u(()=>[o(n,{class:"border-0",type:"danger",plain:"",onClick:a[0]||(a[0]=e=>b.browsepagedel([],!0))},{default:u(()=>[Y]),_:1}),o(n,{class:"border-0",type:"danger",plain:"",onClick:a[1]||(a[1]=e=>b.browsepagedel(C))},{default:u(()=>[Z]),_:1})]),fittleSear:u(()=>[F("div",ee,[o(I,{modelValue:t.searchVal.keywords,"onUpdate:modelValue":a[2]||(a[2]=e=>t.searchVal.keywords=e),"prefix-icon":D(O),clearable:"",placeholder:"\u641C\u7D22\u5173\u952E\u8BCD",class:"mr-4 w-36",onChange:a[3]||(a[3]=e=>{r.value.pageIndex=1,t.load()})},null,8,["modelValue","prefix-icon"])])]),_:1},8,["onGetList"]),q((d(),z(V,{data:_,class:"auto",stripe:!0,onSortChange:t.sortChnage,onSelectionChange:t.handleSelectionChange},{default:u(()=>[o(i,{prop:"member.name",label:"\u7528\u6237\u540D","min-width":"170"}),o(i,{prop:"type",label:"\u7C7B\u578B","min-width":"130"},{default:u(({row:e})=>[p(m(e.type==1?"\u89C6\u9891":"\u6587\u7AE0"),1)]),_:1}),o(i,{prop:"videoInfo",label:"\u89C6\u9891\u6807\u9898","min-width":"160"},{default:u(({row:e})=>{var l;return[p(m((l=e.videoInfo)==null?void 0:l.title),1)]}),_:1}),o(i,{prop:"videoInfo",label:"\u5206\u7C7B","min-width":"160"},{default:u(({row:e})=>{var l,h,B,E;return[p(m((h=(l=e.videoInfo)==null?void 0:l.category)==null?void 0:h.name)+"/"+m((E=(B=e.videoInfo)==null?void 0:B.categoryChild)==null?void 0:E.name),1)]}),_:1}),o(i,{prop:"videoInfo",label:"\u6536\u8D39\u72B6\u6001","min-width":"160"},{default:u(({row:e})=>[e.videoInfo?e.videoInfo.chargingMode==1?(d(),c("span",ae,"\u514D\u8D39")):e.videoInfo.chargingMode==2?(d(),c("span",oe,"VIP")):e.videoInfo.chargingMode==3?(d(),c("span",ue,"\u91D1\u5E01\u70B9\u64AD")):U("",!0):(d(),c("span",te,"-"))]),_:1}),o(i,{label:"\u6240\u5C5E\u7AD9\u70B9","min-width":"95"},{default:u(({row:e})=>{var l;return[e.siteId==0?(d(),c("span",ne,"\u9ED8\u8BA4\u7AD9\u70B9")):(d(),c("span",se,m(((l=D(f).siteMap.find(h=>h.id==e.siteId))==null?void 0:l.name)||"-"),1))]}),_:1}),o(i,{label:"\u6D4F\u89C8\u65F6\u95F4",sortable:"","min-width":"150",prop:"updateAt",type:"date"}),o(i,{fixed:"right",label:"\u64CD\u4F5C",align:"right","min-width":"110"},{default:u(({row:e})=>[o(n,{type:"danger",link:"",class:"text-dangerColor",onClick:l=>b.browsedel(e)},{default:u(()=>[le]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[S,t.loading]]),o(K,{pageinfo:r.value,class:"ml-auto",onChange:t.load},null,8,["pageinfo","onChange"])])])}}});const fe=H(ie,[["__scopeId","data-v-e3947e52"]]);export{fe as default};
