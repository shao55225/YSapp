(self.webpackChunkxxxxx=self.webpackChunkxxxxx||[]).push([[1911],{72532:(e,n,a)=>{"use strict";a.r(n),a.d(n,{default:()=>r});var l=a(59171),o=a.n(l),i=a(26143),t=a.n(i)()(o());t.push([e.id,".block[data-v-7041a7c1]{width:50%}.avatar-uploader[data-v-7041a7c1] .el-upload{border:1px dashed var(--el-border-color);border-radius:6px;cursor:pointer;position:relative;overflow:hidden;transition:var(--el-transition-duration-fast)}.avatar-uploader[data-v-7041a7c1] .el-upload img{width:80px;height:80px;-o-object-fit:cover;object-fit:cover}.avatar-uploader[data-v-7041a7c1] .el-upload:hover{border-color:var(--el-color-primary)}.avatar-uploader[data-v-7041a7c1] .el-upload .el-icon.avatar-uploader-icon{font-size:28px;color:#8c939d;width:80px;height:80px;text-align:center}","",{version:3,sources:["webpack://./src/tongji/pages/apply/iosEditor.vue"],names:[],mappings:"AACA,wBACE,SAAA,CAGF,6CACE,wCAAA,CACA,iBAAA,CACA,cAAA,CACA,iBAAA,CACA,eAAA,CACA,6CAAA,CAEA,iDACE,UAAA,CACA,WAAA,CACA,mBAAA,CAAA,gBAAA,CAGF,mDACE,oCAAA,CAGF,2EACE,cAAA,CACA,aAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA",sourcesContent:["\n.block {\n  width: 50%;\n}\n\n.avatar-uploader :deep(.el-upload) {\n  border: 1px dashed var(--el-border-color);\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  transition: var(--el-transition-duration-fast);\n\n  img {\n    width: 80px;\n    height: 80px;\n    object-fit: cover;\n  }\n\n  &:hover {\n    border-color: var(--el-color-primary);\n  }\n\n  .el-icon.avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 80px;\n    height: 80px;\n    text-align: center;\n  }\n}\n"],sourceRoot:""}]);const r=t},34621:(e,n,a)=>{var l=a(72532);l.__esModule&&(l=l.default),"string"==typeof l&&(l=[[e.id,l,""]]),l.locals&&(e.exports=l.locals);(0,a(80950).Z)("27afd812",l,!1,{})},61911:(e,n,a)=>{"use strict";a.d(n,{Z:()=>K});var l=a(44511),o=(a(47465),a(76),a(45086)),i=(a(46348),a(86605)),t=(a(80173),a(74366)),r=(a(80036),a(64117)),d=(a(1610),a(91387),a(90885)),u=(a(6903),a(89888)),c=(a(31581),a(49663),a(991)),s=(a(93785),a(99539)),p=a.n(s),m=a(52780),f=a.n(m),v=a(961),h=a.n(v),g=a(52122),A=a.n(g),b=a(11549),x=a.n(b),w=a(66802),C=a.n(w),y=a(82831),k=a.n(y),_=a(83256),I=a.n(_),N=a(34629),D=a(12161),j=a.n(D),W=(a(10175),a(84485),a(53394),a(49717),a(17391),a(26440)),q=a(71254),E=a(92811),V=a(54609),S=a(70215),U=a(48127),Z=(a(1021),a(20115));a(41386),a(6788);function z(e,n){var a=p()(e);if(f()){var l=f()(e);n&&(l=h()(l).call(l,(function(n){return A()(e,n).enumerable}))),a.push.apply(a,l)}return a}function B(e){for(var n=1;n<arguments.length;n++){var a,l,o=null!=arguments[n]?arguments[n]:{};n%2?x()(a=z(Object(o),!0)).call(a,(function(n){(0,N.Z)(e,n,o[n])})):C()?k()(e,C()(o)):x()(l=z(Object(o))).call(l,(function(n){I()(e,n,A()(o,n))}))}return e}var H=function(e){return(0,W.dD)("data-v-7041a7c1"),e=e(),(0,W.Cn)(),e},O={style:{display:"flex","align-items":"center",width:"100%",gap:"12px"}},F=["src"],P=H((function(){return(0,W._)("p",{class:"ps"},"请使用256x256 , 128x128 , 64x64的尺寸图标",-1)})),M=H((function(){return(0,W._)("p",{class:"ps"},"域名无法访问，则APP将不可用",-1)})),Y=H((function(){return(0,W._)("div",{style:{height:"90px",background:"#f7faff",border:"1px solid rgba(222, 233, 255, 1)","border-radius":"4px",padding:"0 16px","margin-bottom":"16px"}},[(0,W._)("p",{style:{"font-size":"12px",color:"#999999","line-height":"28px"}}," 示例：http://xxxx.xx "),(0,W._)("p",{style:{"font-size":"12px",color:"#999999","line-height":"28px"}}," 1.不填时默认访问下载的域名 "),(0,W._)("p",{style:{"font-size":"12px",color:"#999999","line-height":"28px"}}," 2.通讯域名协议端口等不可变，否则无法通讯导致APP不可用 ")],-1)}));const G={__name:"iosEditor",emits:["load"],setup:function(e,n){var a=n.expose,s=n.emit,p=(0,E.iH)(),m=(0,W.f3)("realodSurvey"),f=function(e){p.value.loadingImg(e)},v=function(e){A.icon=e},h=(0,W.FN)().appContext.config.globalProperties.$ajax,g=(0,E.iH)(),A=(0,E.qj)({appName:"",icon:"",channelID:0,domain:"",site_id:null}),b=(0,E.qj)({siteArr:[]}),x=(0,E.iH)(),w=(0,E.qj)({loading:!1,visible:!1,other:void 0}),C=function(){w.other=void 0,w.visible=!1,S.Z.commit("setModel",!1),m()},y=(0,E.qj)({data:[],load:function(e){h.get("/api/v3/sites/"+e+"/domains").then((function(e){var n,a=e.data.list;a=null===(n=a)||void 0===n?void 0:j()(n).call(n,(function(e,n){switch(n.tlsType){case 1:e.push(B(B({},n),{},{domainName:"http://"+n.domainName}));break;case 2:case 4:e.push(B(B({},n),{},{domainName:"https://"+n.domainName}));break;case 3:e.push(B(B({},n),{},{domainName:"http://"+n.domainName})),e.push(B(B({},n),{},{domainName:"https://"+n.domainName}))}return e}),[]),y.data=a}))}});function k(){var e;w.loading=!0,void 0!==(null===(e=w.other)||void 0===e?void 0:e.appId)?h.get("/api/v1/supt/app/IOS/".concat(A.appId)).then((function(e){var n=e.data.data;A.appName=n.appName,A.icon=n.Icon,A.domain=n.Domain})).finally((function(){w.loading=!1})):w.loading=!1}var _=function(e){A.channelID=null,A.domain="",h.get("/api/v3/sites/"+e+"/channel").then((function(e){var n=e.data;n.list.unshift({id:"0",name:"默认渠道",channelCode:"",state:1,domains:[],memberCount:0}),x.value=n.list}))},I=function(e){var n,a,l,o;null===(n=g.value)||void 0===n||n.resetFields(),w.visible=!0,w.other=e,A.channelID=null,A.appId=null===(a=w.other)||void 0===a?void 0:a.appId,A.site_id=null===(l=w.other)||void 0===l?void 0:l.siteId,null!==(o=w.other)&&void 0!==o&&o.appId&&(_(w.other.siteId),y.load(w.other.siteId)),h.get("/api/v3/site",{params:{limit:999,page:1}}).then((function(e){var n=e.data;b.siteArr=n.list}))};a({open:I}),(0,W.YP)([function(){return S.Z.state.visible},function(){return S.Z.state.sysLayOpt}],(function(e){e[0]&&4==e[1]&&I()}));var N=(0,W.Fl)((function(){var e;return null!==(e=w.other)&&void 0!==e&&e.appId?"编辑IOS轻应用":"创建IOS轻应用"}));return function(e,n){var a=c.EZ,m=t.nH,I=u.gn,D=d.LW,j=r.BT,S=r.ElSelect,z=t.ly,H=i.ElButton,G=o.d0,K=l.t;return(0,W.wg)(),(0,W.iD)(W.HY,null,[(0,W.Wm)(G,{"model-value":w.visible,"show-close":!w.loading,"close-on-press-escape":!1,title:N.value,width:460,"z-index":20,"close-on-click-modal":!1,onClosed:C,onOpened:k},{footer:(0,W.w5)((function(){return[(0,W.Wm)(H,{class:"ml-auto",size:"small",loading:w.loading,onClick:n[6]||(n[6]=function(e){return w.visible=!1})},{default:(0,W.w5)((function(){return[(0,W.Uk)(" 取消 ")]})),_:1},8,["loading"]),(0,W.Wm)(H,{size:"small",loading:w.loading,type:"primary",class:"",onClick:n[7]||(n[7]=function(e){var n;(n=g.value)&&n.validate((function(e){if(e){w.loading=!0;var n=B({},A);n.channelID=Number(n.channelID),h[A.appId?"put":"post"]("/api/v1/supt/app/IOS",n).then((function(e){var n;(0,Z.bM)({position:"bottom-right",type:"success",message:null!==(n=w.other)&&void 0!==n&&n.appId?"更新成功":"新增成功"}),s("load"),w.visible=!1})).finally((function(){w.loading=!1}))}}))})},{default:(0,W.w5)((function(){return[(0,W.kq)(" :disabled=\"form.name === '默认渠道'\" "),(0,W.Uk)(" 保存 ")]})),_:1},8,["loading"])]})),default:(0,W.w5)((function(){return[(0,W.wy)(((0,W.wg)(),(0,W.iD)("div",null,[(0,W.Wm)(z,{onSubmit:n[5]||(n[5]=(0,q.iM)((function(){}),["prevent"])),ref_key:"ruleFormRef",ref:g,"label-width":"80px",model:A,"hide-required-asterisk":!1},{default:(0,W.w5)((function(){return[(0,W.Wm)(m,{label:"应用名称",prop:"appName",rules:{required:!0,message:"请输入应用名称",trigger:"blur"}},{default:(0,W.w5)((function(){return[(0,W.Wm)(a,{spellcheck:"false",modelValue:A.appName,"onUpdate:modelValue":n[0]||(n[0]=function(e){return A.appName=e}),modelModifiers:{trim:!0},clearable:"",placeholder:"请输入应用名称"},null,8,["modelValue"])]})),_:1}),(0,W.Wm)(m,{label:"应用图标",prop:"icon",rules:{required:!0,message:"请上传应用图标",trigger:"blur"}},{default:(0,W.w5)((function(){return[(0,W._)("div",O,[(0,W.kq)(' <el-input\n              spellcheck="false"\n              v-model.trim="form.icon"\n              clearable\n              placeholder="请输入图标地址"\n            /> '),(0,W.Wm)(D,{class:"avatar-uploader","show-file-list":!1,data:{exts:"jpg,jpeg,png,gif"},"file-list":A.icon?[{name:"应用图标",url:A.icon}]:[],"on-change":f,"auto-upload":!1,accept:"image/jpg,image/jpeg,image/png"},{default:(0,W.w5)((function(){return[A.icon?((0,W.wg)(),(0,W.iD)("img",{key:0,src:A.icon,class:"avatar"},null,8,F)):((0,W.wg)(),(0,W.j4)(I,{key:1,class:"avatar-uploader-icon"},{default:(0,W.w5)((function(){return[(0,W.Wm)((0,E.SU)(U.v37))]})),_:1}))]})),_:1},8,["file-list"])]),P]})),_:1}),(0,W.Wm)(m,{label:"站点",prop:"site_id",rules:{required:!0,message:"请选择站点",trigger:"change"}},{default:(0,W.w5)((function(){return[(0,W.Wm)(S,{modelValue:A.site_id,"onUpdate:modelValue":n[1]||(n[1]=function(e){return A.site_id=e}),disabled:A.appId,class:"m-2",placeholder:"选择站点",style:{width:"100%"},onChange:n[2]||(n[2]=function(e){_(A.site_id),y.load(A.site_id)})},{default:(0,W.w5)((function(){return[((0,W.wg)(!0),(0,W.iD)(W.HY,null,(0,W.Ko)(b.siteArr,(function(e){return(0,W.wg)(),(0,W.j4)(j,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","disabled"])]})),_:1}),A.appId?(0,W.kq)("v-if",!0):((0,W.wg)(),(0,W.j4)(m,{key:0,label:"内置渠道",prop:"channelID"},{default:(0,W.w5)((function(){return[(0,W.Wm)(S,{modelValue:A.channelID,"onUpdate:modelValue":n[3]||(n[3]=function(e){return A.channelID=e}),clearable:"",placeholder:"请选择内置渠道",style:{width:"100%"}},{default:(0,W.w5)((function(){return[((0,W.wg)(!0),(0,W.iD)(W.HY,null,(0,W.Ko)(x.value,(function(e){return(0,W.wg)(),(0,W.j4)(j,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})),(0,W.kq)(' <el-form-item label="访问站点" prop="visitDomain">\n          <el-select\n            v-model="form.visitDomain"\n            clearable\n            placeholder="请选择访问站点"\n            style="width: 100%"\n            :allow-create="true"\n            :filterable="true"\n          >\n            <el-option\n              v-for="item of domain.data"\n              :key="item.id"\n              :label="item.domainName"\n              :value="item.domainName"\n            />\n          </el-select>\n        </el-form-item> '),(0,W.Wm)(m,{label:"内置域名",prop:"domain",rules:{required:!0,message:"请选择内置域名",trigger:"blur"}},{default:(0,W.w5)((function(){return[(0,W.kq)(' <el-input\n            spellcheck="false"\n            v-model.trim="form.channelID"\n            clearable\n            placeholder="请输入渠道ID"\n          /> '),(0,W.Wm)(S,{modelValue:A.domain,"onUpdate:modelValue":n[4]||(n[4]=function(e){return A.domain=e}),clearable:"",placeholder:"请选择内置域名",style:{width:"100%"},"allow-create":!0,filterable:!0},{default:(0,W.w5)((function(){return[((0,W.wg)(!0),(0,W.iD)(W.HY,null,(0,W.Ko)(y.data,(function(e){return(0,W.wg)(),(0,W.j4)(j,{key:e.domainName,label:e.domainName,value:e.domainName},null,8,["label","value"])})),128)),(0,W.kq)(' <el-option-group\n              v-for="group in domain.data"\n              :key="group.domainName"\n              :label="group.domainName"\n            >\n              <el-option\n                v-for="item in group.children"\n                :key="item.domainName"\n                :label="item.domainName"\n                :value="item.domainName"\n              />\n            </el-option-group> ')]})),_:1},8,["modelValue"]),M]})),_:1}),Y]})),_:1},8,["model"])])),[[K,w.loading]])]})),_:1},8,["model-value","show-close","title"]),(0,W.Wm)(V.Z,{ref_key:"cropRef",ref:p,onSaveCropImg:v},null,512)],64)}}};a(34621);const K=(0,a(40001).Z)(G,[["__scopeId","data-v-7041a7c1"]])}}]);
//# sourceMappingURL=1911.js.map