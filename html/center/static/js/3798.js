(self.webpackChunkxxxxx=self.webpackChunkxxxxx||[]).push([[3798],{29552:(n,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>o});var a=t(59171),i=t.n(a),l=t(26143),r=t.n(l)()(i());r.push([n.id,"[data-v-c49ec992] .jh_table .el-table__cell{text-align:center}[data-v-c49ec992] .jh_table .el-popper.is-light{width:320px !important}[data-v-c49ec992] .jh_table .el-popper.is-light{max-height:320px}[data-v-c49ec992] .jh_table thead .el-table__cell:first-child,[data-v-c49ec992] .jh_table .el-table__row .el-table__cell:first-child{border-right:0}[data-v-c49ec992] .jh_table thead .el-table__cell:first-child .el-table__expand-icon--expanded,[data-v-c49ec992] .jh_table .el-table__row .el-table__cell:first-child .el-table__expand-icon--expanded{display:none}[data-v-c49ec992] .jh_table th.el-table__cell:nth-of-type(2) .cell,[data-v-c49ec992] .jh_table td.el-table__cell:nth-of-type(2) .cell{position:relative;left:-48px}[data-v-c49ec992] .jh_table .el-table__expanded-cell{padding:0;border-bottom:0}[data-v-c49ec992] .jh_table .online{width:200px;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px 0;background-color:#f5f8fb;border-bottom:1px solid #ebeef5}[data-v-c49ec992] .jh_table .online p{font-size:20px !important}[data-v-c49ec992] .jh_table .online p{font-weight:bold;font-family:sans-serif}[data-v-c49ec992] .jh_table .online img{width:12px;height:12px;margin-top:0px;cursor:pointer}[data-v-c49ec992] .jh_table .online span{font-size:14px !important}[data-v-c49ec992] .jh_table .online span{color:#4c8fff;display:block}[data-v-c49ec992] .jh_table_expand .el-table__cell,[data-v-c49ec992] .jh_table_expand th.el-table__cell.is-leaf{background-color:#f5f8fb;border-bottom:0}.box[data-v-c49ec992]{background:#fff;box-shadow:3px 4px 6px 0px rgba(63,110,243,.1);border-radius:8px;padding:25px 16px 21px 16px;display:flex;flex-direction:column;gap:16px}.search[data-v-c49ec992]{display:flex;align-items:center;justify-content:flex-end}.search .label[data-v-c49ec992]{font-size:12px;color:#555;margin-right:8px}.search .part[data-v-c49ec992]{width:160px}.search .part+.part[data-v-c49ec992]{margin-left:16px}.user-count[data-v-c49ec992]{grid-area:auto/span 3}.user-count h4[data-v-c49ec992]{display:flex;justify-content:space-between;align-items:center;padding-right:24px}.user-count .count-num[data-v-c49ec992]{border:0 !important;height:248px !important}.user-count .count-num[data-v-c49ec992]{display:flex;flex-direction:column;justify-content:center;width:100px;background:#f4faff}.user-count .count-num p[data-v-c49ec992]{font-weight:700;color:#002b60;font-size:18px}.user-count .count-num a[data-v-c49ec992]{font-size:12px;cursor:pointer;color:#5a9cff;line-height:20px;height:20px}.user-count a[data-v-c49ec992]{font-size:12px;cursor:pointer;color:#5a9cff;line-height:16px;height:16px}.user-count .circle[data-v-c49ec992]{background:#ebeef5;border-radius:50%;height:14px;width:14px;line-height:14px;text-align:center;font-size:12px;display:inline-block;margin-left:8px;color:#879099}.user-count .user-t[data-v-c49ec992]{line-height:40px !important}.user-count .user-t[data-v-c49ec992]{background:#f4faff;font-size:12px;color:#333;font-weight:700;position:absolute;left:0;top:-58px;text-align:center;width:100%;padding-left:1px}.user-count .c[data-v-c49ec992]{padding:12px !important}.user-count .c[data-v-c49ec992]{display:flex;font-size:12px;align-items:flex-end}.user-count .c>div:nth-child(3) .user-t[data-v-c49ec992]{border-radius:8px 0 0 8px}.user-count .c>div:last-child .user-t[data-v-c49ec992]{border-radius:0 8px 8px 0}.user-count .c>div[data-v-c49ec992]{position:relative;text-align:center;flex:1;border-left:1px solid #e7f1fd;height:194px}.user-count .c>div p[data-v-c49ec992]:nth-child(2){font-weight:700}.user-count .c>div p[data-v-c49ec992]:last-child{margin-bottom:0}.user-count .c>div p[data-v-c49ec992]{margin-bottom:16px;line-height:1;text-align:center}[data-v-c49ec992] .tj_loading_box{display:flex;align-items:center;position:relative}[data-v-c49ec992] .tj_loading_box .load_icon{width:16px;height:16px;margin-right:8px;position:absolute;left:-20px}[data-v-c49ec992] .tj_loading_box .el-loading-mask{background-color:rgba(0,0,0,0)}[data-v-c49ec992] .tj_loading_box .el-loading-spinner{margin-top:0;top:0}[data-v-c49ec992] .tj_loading_box .el-loading-spinner svg{width:16px !important;height:16px !important}","",{version:3,sources:["webpack://./src/tongji/pages/statistics-web/app.vue"],names:[],mappings:"AAEE,4CACE,iBAAA,CAGF,gDACE,sBACA,CAFF,gDAEE,gBAAA,CAGF,qIAEE,cAAA,CAEA,uMACE,YAAA,CAMF,sIACE,iBAAA,CACA,UAAA,CAIJ,qDACE,SAAA,CACA,eAAA,CAGF,oCACE,WAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,qBAAA,CACA,UAAA,CACA,wBAAA,CACA,+BAAA,CAEA,sCAEE,yBACA,CAHF,sCACE,gBAAA,CAEA,sBAAA,CAGF,wCACE,UAAA,CACA,WAAA,CACA,cAAA,CACA,cAAA,CAGF,yCAEE,yBACA,CAHF,yCACE,aAAA,CAEA,aAAA,CAOJ,gHAEE,wBAAA,CACA,eAAA,CAIJ,sBACE,eAAA,CACA,8CAAA,CACA,iBAAA,CACA,2BAAA,CACA,YAAA,CACA,qBAAA,CACA,QAAA,CAGF,yBACE,YAAA,CACA,kBAAA,CACA,wBAAA,CAEA,gCACE,cAAA,CACA,UAAA,CACA,gBAAA,CAGF,+BACE,WAAA,CAGF,qCACE,gBAAA,CAIJ,6BACE,qBAAA,CAEA,gCACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,kBAAA,CAGF,wCAIE,mBAAA,CAEA,uBACA,CAPF,wCACE,YAAA,CACA,qBAAA,CACA,sBAAA,CAEA,WAAA,CAEA,kBAAA,CAEA,0CACE,eAAA,CACA,aAAA,CACA,cAAA,CAGF,0CACE,cAAA,CACA,cAAA,CACA,aAAA,CACA,gBAAA,CACA,WAAA,CAIJ,+BACE,cAAA,CACA,cAAA,CACA,aAAA,CACA,gBAAA,CACA,WAAA,CAGF,qCACE,kBAAA,CACA,iBAAA,CACA,WAAA,CACA,UAAA,CACA,gBAAA,CACA,iBAAA,CACA,cAAA,CACA,oBAAA,CACA,eAAA,CACA,aAAA,CAGF,qCACE,2BAUA,CAXF,qCAEE,kBAAA,CACA,cAAA,CACA,UAAA,CACA,eAAA,CACA,iBAAA,CACA,MAAA,CACA,SAAA,CACA,iBAAA,CACA,UAAA,CACA,gBAAA,CAGF,gCAGE,uBACA,CAJF,gCACE,YAAA,CACA,cAAA,CAEA,oBAAA,CAEA,yDACE,yBAAA,CAGF,uDACE,yBAAA,CAGF,oCACE,iBAAA,CACA,iBAAA,CACA,MAAA,CACA,6BAAA,CACA,YAAA,CAEA,mDACE,eAAA,CAGF,iDACE,eAAA,CAGF,sCACE,kBAAA,CACA,aAAA,CACA,iBAAA,CAMR,kCACE,YAAA,CACA,kBAAA,CACA,iBAAA,CAEA,6CACE,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,UAAA,CAGF,mDACE,8BAAA,CAGF,sDACE,YAAA,CACA,KAAA,CAEA,0DACE,qBAAA,CACA,sBAAA",sourcesContent:["\n:deep(.jh_table) {\n  .el-table__cell {\n    text-align: center;\n  }\n\n  .el-popper.is-light {\n    width: 320px !important;\n    max-height: 320px;\n  }\n\n  thead .el-table__cell:first-child,\n  .el-table__row .el-table__cell:first-child {\n    border-right: 0;\n\n    .el-table__expand-icon--expanded {\n      display: none;\n    }\n  }\n\n  th.el-table__cell:nth-of-type(2),\n  td.el-table__cell:nth-of-type(2) {\n    .cell {\n      position: relative;\n      left: -48px;\n    }\n  }\n\n  .el-table__expanded-cell {\n    padding: 0;\n    border-bottom: 0;\n  }\n\n  .online {\n    width: 200px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    gap: 12px 0;\n    background-color: #f5f8fb;\n    border-bottom: 1px solid #ebeef5;\n\n    p {\n      font-weight: bold;\n      font-size: 20px !important;\n      font-family: sans-serif;\n    }\n\n    img {\n      width: 12px;\n      height: 12px;\n      margin-top: 0px;\n      cursor: pointer;\n    }\n\n    span {\n      color: #4C8FFF;\n      font-size: 14px !important;\n      display: block;\n    }\n  }\n}\n\n:deep(.jh_table_expand) {\n\n  .el-table__cell,\n  th.el-table__cell.is-leaf {\n    background-color: #f5f8fb;\n    border-bottom: 0;\n  }\n}\n\n.box {\n  background: #ffffff;\n  box-shadow: 3px 4px 6px 0px rgba(63, 110, 243, 0.1);\n  border-radius: 8px;\n  padding: 25px 16px 21px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.search {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n\n  .label {\n    font-size: 12px;\n    color: #555555;\n    margin-right: 8px;\n  }\n\n  .part {\n    width: 160px;\n  }\n\n  .part+.part {\n    margin-left: 16px;\n  }\n}\n\n.user-count {\n  grid-area: auto / span 3;\n\n  h4 {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding-right: 24px;\n  }\n\n  .count-num {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    border: 0 !important;\n    width: 100px;\n    height: 248px !important;\n    background: #f4faff;\n\n    p {\n      font-weight: 700;\n      color: #002b60;\n      font-size: 18px;\n    }\n\n    a {\n      font-size: 12px;\n      cursor: pointer;\n      color: #5a9cff;\n      line-height: 20px;\n      height: 20px;\n    }\n  }\n\n  a {\n    font-size: 12px;\n    cursor: pointer;\n    color: #5a9cff;\n    line-height: 16px;\n    height: 16px;\n  }\n\n  .circle {\n    background: #ebeef5;\n    border-radius: 50%;\n    height: 14px;\n    width: 14px;\n    line-height: 14px;\n    text-align: center;\n    font-size: 12px;\n    display: inline-block;\n    margin-left: 8px;\n    color: #879099;\n  }\n\n  .user-t {\n    line-height: 40px !important;\n    background: #f4faff;\n    font-size: 12px;\n    color: #333333;\n    font-weight: 700;\n    position: absolute;\n    left: 0;\n    top: -58px;\n    text-align: center;\n    width: 100%;\n    padding-left: 1px;\n  }\n\n  .c {\n    display: flex;\n    font-size: 12px;\n    padding: 12px !important;\n    align-items: flex-end;\n\n    &>div:nth-child(3) .user-t {\n      border-radius: 8px 0 0 8px;\n    }\n\n    &>div:last-child .user-t {\n      border-radius: 0 8px 8px 0;\n    }\n\n    &>div {\n      position: relative;\n      text-align: center;\n      flex: 1;\n      border-left: 1px solid #e7f1fd;\n      height: 194px;\n\n      p:nth-child(2) {\n        font-weight: 700;\n      }\n\n      p:last-child {\n        margin-bottom: 0;\n      }\n\n      p {\n        margin-bottom: 16px;\n        line-height: 1;\n        text-align: center;\n      }\n    }\n  }\n}\n\n:deep(.tj_loading_box) {\n  display: flex;\n  align-items: center;\n  position: relative;\n\n  .load_icon {\n    width: 16px;\n    height: 16px;\n    margin-right: 8px;\n    position: absolute;\n    left: -20px;\n  }\n\n  .el-loading-mask {\n    background-color: transparent;\n  }\n\n  .el-loading-spinner {\n    margin-top: 0;\n    top: 0;\n\n    svg {\n      width: 16px !important;\n      height: 16px !important;\n    }\n  }\n}\n"],sourceRoot:""}]);const o=r},66599:(n,e,t)=>{"use strict";t.d(e,{Z:()=>Rn});var a=t(44511),i=(t(47465),t(76),t(45086)),l=(t(46348),t(50240)),r=(t(88255),t(50557),t(86605)),o=(t(80173),t(38819)),A=(t(87838),t(70670)),c=(t(74763),t(18938),t(991)),d=(t(93785),t(89888)),p=(t(31581),t(64117)),s=(t(1610),t(4695),t(91387),t(94974),t(61581),t(38887)),u=t.n(s),f=t(57851),h=t.n(f),C=t(83336),g=t.n(C),x=t(9869),v=t.n(x),m=t(61964),b=t.n(m),w=t(52780),_=t.n(w),y=t(961),k=t.n(y),E=t(52122),B=t.n(E),j=t(66802),z=t.n(j),I=t(82831),D=t.n(I),W=t(83256),F=t.n(W),U=t(34629),G=t(22839),q=(t(15165),t(24641),t(84485),t(53394),t(49717),t(17391),t(96103),t(22673)),N=t.n(q),S=t(37965),Y=t.n(S),V=t(11549),Z=t.n(V),L=t(99539),H=t.n(L),O=t(22078),K=t.n(O),M=t(68796),$=t.n(M),J=t(33657),P=t.n(J),R=t(18362),T=t.n(R),X=t(44062),Q=t.n(X),nn=t(37e3),en=t.n(nn),tn=t(93167),an=t.n(tn),ln=t(7121),rn=t.n(ln),on=t(26440),An=t(71254),cn=t(92811),dn=t(81040),pn=t(50802),sn=t(31270),un=t(7142),fn=t(51715),hn=t(48127),Cn=t(38316),gn=t(46557),xn=t(20115);t(41386);function vn(n,e){var t=H()(n);if(_()){var a=_()(n);e&&(a=k()(a).call(a,(function(e){return B()(n,e).enumerable}))),t.push.apply(t,a)}return t}function mn(n){for(var e=1;e<arguments.length;e++){var t,a,i=null!=arguments[e]?arguments[e]:{};e%2?Z()(t=vn(Object(i),!0)).call(t,(function(e){(0,U.Z)(n,e,i[e])})):z()?D()(n,z()(i)):Z()(a=vn(Object(i))).call(a,(function(e){F()(n,e,B()(i,e))}))}return n}function bn(n,e){var t=void 0!==g()&&v()(n)||n["@@iterator"];if(!t){if(b()(n)||(t=function(n,e){var t;if(!n)return;if("string"==typeof n)return wn(n,e);var a=u()(t=Object.prototype.toString.call(n)).call(t,8,-1);"Object"===a&&n.constructor&&(a=n.constructor.name);if("Map"===a||"Set"===a)return h()(n);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wn(n,e)}(n))||e&&n&&"number"==typeof n.length){t&&(n=t);var a=0,i=function(){};return{s:i,n:function(){return a>=n.length?{done:!0}:{done:!1,value:n[a++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,o=!1;return{s:function(){t=t.call(n)},n:function(){var n=t.next();return r=n.done,n},e:function(n){o=!0,l=n},f:function(){try{r||null==t.return||t.return()}finally{if(o)throw l}}}}function wn(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,a=new Array(e);t<e;t++)a[t]=n[t];return a}var _n=function(n){return(0,on.dD)("data-v-c49ec992"),n=n(),(0,on.Cn)(),n},yn={class:"box"},kn={class:"search"},En=_n((function(){return(0,on._)("span",{class:"label"},"统计应用",-1)})),Bn={style:{display:"flex"}},jn={class:"online"},zn={key:0,style:{display:"flex",gap:"0 8px"}},In=["onClick"],Dn={key:1,class:"tj_loading_box"},Wn={class:"load_icon"},Fn=_n((function(){return(0,on._)("span",null,"加载中...",-1)})),Un={key:0},Gn={key:1},qn={key:0},Nn={key:1},Sn={key:0},Yn={key:1},Vn={key:0},Zn={key:1},Ln={key:0},Hn={key:1},On={key:0},Kn={key:1},Mn=["onClick"],$n=["onClick"],Jn={style:{width:"100%"}},Pn={key:1,style:{padding:"16px","font-size":"12px"}};const Rn={__name:"app",setup:function(n){var e=(0,on.FN)().appContext.config.globalProperties.$ajax,t=(0,on.f3)("realodSurvey"),s=(0,cn.iH)({pageIndex:1,pageSize:20,total:0}),u=Y()((0,G.Z)(N().mark((function n(){var e,t,a,i;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=bn(f.data),n.prev=1,e.s();case 3:if((t=e.n()).done){n.next=18;break}if(!((a=t.value).refresh<=1&&a.refresh>-1)){n.next=15;break}return a.refresh=-1,n.next=9,x(a);case 9:i=n.sent,a.data=i.data,a.online=i.online,a.refresh=5,n.next=16;break;case 15:a.refresh-=1;case 16:n.next=3;break;case 18:n.next=23;break;case 20:n.prev=20,n.t0=n.catch(1),e.e(n.t0);case 23:return n.prev=23,e.f(),n.finish(23);case 26:case"end":return n.stop()}}),n,null,[[1,20,23,26]])}))),1200);(0,on.Ah)((function(){clearInterval(u)}));var f=(0,cn.qj)({search:{appId:""},data:[],loading:!1,refreshLoading:!1,load:function(n){s.value=n||s.value,f.loading=!0,f.data=[],m.load();var t={limit:s.value.pageSize,page:s.value.pageIndex,keywords:f.search.keywords};""!=f.search.appId&&(t.appId=f.search.appId),e.get("/api/v1/supt/statistics/app",{params:t}).then(function(){var n=(0,G.Z)(N().mark((function n(e){var t,a,i,l,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.data.data,a=bn(t.list),n.prev=2,a.s();case 4:if((i=a.n()).done){n.next=14;break}return l=i.value,n.next=8,x(l);case 8:r=n.sent,l.data=r.data,l.online=r.online,l.refresh=5;case 12:n.next=4;break;case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(2),a.e(n.t0);case 19:return n.prev=19,a.f(),n.finish(19);case 22:f.data=t.list,s.value.total=t.total;case 24:case"end":return n.stop()}}),n,null,[[2,16,19,22]])})));return function(e){return n.apply(this,arguments)}}()).finally((function(){f.loading=!1}))},refresh:function(n){f.refreshLoading||(f.refreshLoading=!0,e.get("/api/v1/supt/statistics/app/statistics/data/"+n).then((function(e){var t,a,i=e.data.data,l=[];Z()(t=H()(i)).call(t,(function(n){C[n]&&l.push(mn(mn({},i[n]),{},{text:C[n],idx:K()(g).call(g,n)}))}));var r={data:$()(l).call(l,(function(n,e){return n.idx-e.idx})),online:i.online};Z()(a=f.data).call(a,(function(e){e.id==n&&P()((function(){e.refresh=5,e.data=r.data,e.online=r.online}),300)}))})).catch((function(n){})).finally((function(){P()((function(){f.refreshLoading=!1}),500)})))},state:function(n){var t;e.put(T()(t="/api/v1/supt/statistics/app/".concat(n.id,"/state/")).call(t,n.state)).then((function(){(0,xn.bM)({position:"bottom-right",type:"success",message:"更新成功"})}))}}),h=(0,cn.iH)(),C={today:"今日",yesterday:"昨日",predict_today:"预计今日",yesterday_now:"昨日此时",seven_day_mean:"七日平均",history_total:"历史高峰",history_mean:"历史最高"},g=["toDay","yesterday","predict_today","yesterday_now","seven_day_mean","history_total","history_mean"],x=function(n){return new(Q())((function(t,a){e.get("/api/v1/supt/statistics/app/statistics/data/"+n.id).then((function(n){var e,a=n.data.data,i=[];Z()(e=H()(a)).call(e,(function(n){C[n]&&i.push(mn(mn({},a[n]),{},{text:C[n],idx:K()(g).call(g,n)}))})),t({data:$()(i).call(i,(function(n,e){return n.idx-e.idx})),online:a.online})})).catch((function(n){t([])}))}))},v=(0,cn.qj)({data:{},detailUrl:"",load:function(n){n.visible=!0,e.get("/api/v1/supt/statistics/app/statistics/data/"+n.id).then((function(n){var e=n.data.data;v.data=e.statistic,v.detailUrl=e.detailUrl})).finally((function(){n.visible=!1}))}}),m=(0,cn.qj)({data:[],data2:[],data3:[],getChannelBysuptList:function(n){return en()(n).call(n,(function(n){var e,t=an()(e=m.data).call(e,(function(e){return n.channelId==e.id}));return mn(mn({},n),{},{appName:n.appName+(t?"（"+(null==t?void 0:t.name)+"）":"")})}))},load:function(){e.get("/api/v3/channels",{params:{limit:999,page:1}}).then((function(n){var e=n.data;e.list.unshift({id:"0",name:"默认渠道",channelCode:"",state:1,domains:[],memberCount:0}),m.data=e.list}))},fetch:function(){var n=arguments;return(0,G.Z)(N().mark((function t(){var a,i,l;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],l={limit:999,page:1},(a=n.length>0&&void 0!==n[0]?n[0]:null)&&(l.siteId=a,m.data3=[]),t.next=6,e.get("/api/v1/supt/app/Android",{params:l}).then((function(n){var e,t,a,l=n.data.data;1===(null===(e=l.list)||void 0===e?void 0:e.length)?i.push({appName:"APK应用",children:l.list}):(null===(t=l.list)||void 0===t?void 0:t.length)>1&&i.push({appName:"APK应用",children:m.getChannelBysuptList(l.list)}),m.data3.push({appName:"APK应用",children:(null===(a=l.list)||void 0===a?void 0:a.length)>1?m.getChannelBysuptList(l.list):l.list})}));case 6:return t.next=8,e.get("/api/v1/supt/app/IOS",{params:l}).then((function(n){var e,t,a,l=n.data.data;1===(null===(e=l.list)||void 0===e?void 0:e.length)?i.push({appName:"IOS轻应用",children:l.list}):(null===(t=l.list)||void 0===t?void 0:t.length)>1&&i.push({appName:"IOS轻应用",children:m.getChannelBysuptList(l.list)}),m.data3.push({appName:"IOS轻应用",children:(null===(a=l.list)||void 0===a?void 0:a.length)>1?m.getChannelBysuptList(l.list):l.list})}));case 8:!a&&(m.data2=i);case 9:case"end":return t.stop()}}),t)})))()}});f.load(),m.fetch();var b=function(n){if(n){var e=rn()(String(n/3600)),t=rn()(String((n-3600*e)/60)),a=(n-3600*e)%60;return(e>=10?e:"0"+e)+":"+(t>=10?t:"0"+t)+":"+(a>=10?a:"0"+a)}return"-"},w=(0,cn.qj)({visible:!1,form:{appIds:[]},loading:!1,row:void 0,open:function(n){var e;w.visible=!0,w.row=n,w.form.state=n.state,w.form.appName=n.appName,w.form.id=n.id,w.form.appIds=(null===(e=n.Apps)||void 0===e?void 0:en()(e).call(e,(function(n){return n.appId})))||[],m.fetch(n.siteId)},close:function(){w.form={appIds:[]},w.row={},w.visible=!1},submit:function(){w.loading=!0;var n=w.form;e.post("/api/v1/supt/statistics/app",n).then((function(n){n.data;f.load(),w.loading=!1,w.close(),(0,xn.bM)({position:"bottom-right",type:"success",message:"操作成功"})}))}});return function(n,u){var C=p.BT,g=p.LC,x=p.ElSelect,v=d.gn,_=c.EZ,y=A.$Y,k=A.eI,E=o.OX,B=r.ElButton,j=l.ElCheckbox,z=l.z5,I=i.d0,D=a.t;return(0,on.wg)(),(0,on.iD)("div",yn,[(0,on._)("div",kn,[En,(0,on.Wm)(x,{modelValue:f.search.appId,"onUpdate:modelValue":u[0]||(u[0]=function(n){return f.search.appId=n}),placeholder:"不限应用",class:"part",clearable:"",onChange:u[1]||(u[1]=function(n){s.value.pageIndex=1,f.load()})},{default:(0,on.w5)((function(){return[((0,on.wg)(!0),(0,on.iD)(on.HY,null,(0,on.Ko)(m.data2,(function(n){return(0,on.wg)(),(0,on.j4)(g,{key:n.appName,label:n.appName},{default:(0,on.w5)((function(){return[((0,on.wg)(!0),(0,on.iD)(on.HY,null,(0,on.Ko)(n.children,(function(n){return(0,on.wg)(),(0,on.j4)(C,{key:n.appId,label:n.appName,value:n.appId},null,8,["label","value"])})),128))]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"]),(0,on.Wm)(_,{modelValue:f.search.keywords,"onUpdate:modelValue":u[3]||(u[3]=function(n){return f.search.keywords=n}),class:"part",clearable:"",placeholder:"搜索关键字",onKeyup:u[4]||(u[4]=(0,An.D2)((function(n){s.value.pageIndex=1,f.load()}),["enter"])),onClear:u[5]||(u[5]=function(n){s.value.pageIndex=1,f.load()})},{prefix:(0,on.w5)((function(){return[(0,on.Wm)(v,{class:"el-input__icon",onClick:u[2]||(u[2]=function(n){s.value.pageIndex=1,f.load()})},{default:(0,on.w5)((function(){return[(0,on.Wm)((0,cn.SU)(hn.olm))]})),_:1})]})),_:1},8,["modelValue"])]),(0,on.wy)(((0,on.wg)(),(0,on.j4)(k,{class:"auto jh_table jh_table",data:f.data,stripe:!0,"default-expand-all":!0,"tooltip-effect":"light",border:"",height:"calc(100vh - 250px)"},{default:(0,on.w5)((function(){return[(0,on.Wm)(y,{type:"expand"},{default:(0,on.w5)((function(n){var e,t,a;return[(0,on._)("div",Bn,[(0,on._)("div",jn,[(0,on._)("p",null,(0,dn.zw)(null===(e=n.row)||void 0===e?void 0:e.online),1),(null===(t=n.row)||void 0===t?void 0:t.refresh)>0?((0,on.wg)(),(0,on.iD)("div",zn,[(0,on._)("span",null,(0,dn.zw)(null===(a=n.row)||void 0===a?void 0:a.refresh)+" 秒",1),(0,on._)("img",{src:pn,onClick:function(e){n.row.refresh=-1,f.refresh(n.row.id)}},null,8,In)])):((0,on.wg)(),(0,on.iD)("div",Dn,[(0,on.wy)((0,on._)("div",Wn,null,512),[[D,!0]]),Fn]))]),(0,on.Wm)(k,{data:n.row.data,class:"jh_table_expand",border:!1},{default:(0,on.w5)((function(){return[(0,on.Wm)(y,{prop:"text","min-width":"180",label:""}),(0,on.Wm)(y,{prop:"active_user","min-width":"120",label:"活跃用户"},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",Un,[(0,on._)("p",null,(0,dn.zw)(e.number.active_user),1),(0,on._)("p",null,(0,dn.zw)(e.date.active_user),1)])):((0,on.wg)(),(0,on.iD)("span",Gn,(0,dn.zw)(e.active_user),1))]})),_:1}),(0,on.Wm)(y,{prop:"new_user","min-width":"150",label:"新用户数"},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",qn,[(0,on._)("p",null,(0,dn.zw)(e.number.new_user),1),(0,on._)("p",null,(0,dn.zw)(e.date.new_user),1)])):((0,on.wg)(),(0,on.iD)("span",Nn,(0,dn.zw)(e.new_user),1))]})),_:1}),(0,on.Wm)(y,{prop:"install","min-width":"120",label:"安装量"},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",Sn,[(0,on._)("p",null,(0,dn.zw)(e.number.install),1),(0,on._)("p",null,(0,dn.zw)(e.date.install),1)])):((0,on.wg)(),(0,on.iD)("span",Yn,(0,dn.zw)(e.install),1))]})),_:1}),(0,on.Wm)(y,{prop:"start","min-width":"150",label:"启动次数 "},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",Vn,[(0,on._)("p",null,(0,dn.zw)(e.number.start),1),(0,on._)("p",null,(0,dn.zw)(e.date.start),1)])):((0,on.wg)(),(0,on.iD)("span",Zn,(0,dn.zw)(e.start),1))]})),_:1}),(0,on.Wm)(y,{"min-width":"150",label:"均次在线时长"},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",Ln,[(0,on._)("p",null,(0,dn.zw)(b(e.number.every_active_time)||0),1),(0,on._)("p",null,(0,dn.zw)(e.date.every_active_time),1)])):((0,on.wg)(),(0,on.iD)("span",Hn,(0,dn.zw)("string"==typeof e.every_active_time?e.every_active_time:b(e.every_active_time)||0),1))]})),_:1}),(0,on.Wm)(y,{"min-width":"150",label:"人均在线时长"},{default:(0,on.w5)((function(n){var e=n.row;return[6==n.$index?((0,on.wg)(),(0,on.iD)("div",On,[(0,on._)("p",null,(0,dn.zw)(b(e.number.user_active_time)),1),(0,on._)("p",null,(0,dn.zw)(e.date.user_active_time),1)])):((0,on.wg)(),(0,on.iD)("span",Kn,(0,dn.zw)("string"==typeof e.user_active_time?e.user_active_time:b(e.user_active_time)||0),1))]})),_:1})]})),_:2},1032,["data"])])]})),_:1}),(0,on.Wm)(y,{label:"应用ID",prop:"statisticID"},{default:(0,on.w5)((function(n){n.row;return[]})),_:1}),(0,on.Wm)(y,{prop:"appName",label:"应用名称","show-overflow-tooltip":!0},{default:(0,on.w5)((function(){return[(0,on.kq)(' <template #default="{ row }">\n          <el-button\n            :disabled="!row.channelCode"\n            type="primary"\n            link\n            @click="copyUrl(row.channelCode)"\n          >\n            {{ row.channelCode || "-" }}\n          </el-button>\n        </template> ')]})),_:1}),(0,on.Wm)(y,{label:"统计应用"},{default:(0,on.w5)((function(n){var e,t,a=n.row;return[(null===(e=a.Apps)||void 0===e?void 0:e.length)>0?((0,on.wg)(),(0,on.iD)("span",{key:0,style:{color:"#1e80ff",cursor:"pointer"},onClick:function(n){return w.open(a)}},(0,dn.zw)(en()(t=a.Apps).call(t,(function(n){return n.appName+"(".concat(n.Os,")")})).join(",")),9,Mn)):((0,on.wg)(),(0,on.iD)("span",{key:1,style:{color:"red",cursor:"pointer"},onClick:function(n){return w.open(a)}},"未统计",8,$n))]})),_:1}),(0,on.Wm)(y,{label:"状态",prop:"status"},{default:(0,on.w5)((function(n){var e=n.row;return[(0,on.Wm)(E,{size:"small",modelValue:e.state,"onUpdate:modelValue":function(n){return e.state=n},"active-value":1,"inactive-value":2,onChange:function(n){return f.state(e)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),(0,on.Wm)(y,{label:"更新时间",prop:"updateAt"},{default:(0,on.w5)((function(n){var e=n.row;return[(0,on.Uk)((0,dn.zw)(e.updateAt?(0,cn.SU)(fn.Z)(e.updateAt):"-"),1)]})),_:1}),(0,on.Wm)(y,{label:"创建时间",prop:"createAt"},{default:(0,on.w5)((function(n){var e=n.row;return[(0,on.Uk)((0,dn.zw)(e.createAt?(0,cn.SU)(fn.Z)(e.createAt):"-"),1)]})),_:1}),(0,on.Wm)(y,{fixed:"right",label:"操作",align:"right",width:"210"},{default:(0,on.w5)((function(n){var a=n.row;return[(0,on.Wm)(B,{type:"primary",link:"",onClick:function(n){var e;return null===(e=h.value)||void 0===e?void 0:e.open(a)}},{default:(0,on.w5)((function(){return[(0,on.Uk)(" 编辑 ")]})),_:2},1032,["onClick"]),(0,on.Wm)(B,{type:"danger",link:"",onClick:function(n){return function(n){return(0,sn.Z)({message:"确定要删除这个统计记录吗",okEms:"删除成功"},(function(){return e.delete("/api/v1/supt/statistics/app",{params:{id:n.id}}).then((function(n){n.data,f.load(),t()}))}))}(a)}},{default:(0,on.w5)((function(){return[(0,on.Uk)(" 删除 ")]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])),[[D,f.loading]]),(0,on.Wm)(Cn.Z,{ref_key:"editorRef",ref:h,"channe-list":m.data2,onLoad:f.load},null,8,["channe-list","onLoad"]),(0,on.Wm)(gn.Z,{"channe-list":m.data},null,8,["channe-list"]),(0,on.Wm)(un.Z,{pageinfo:s.value,onChange:f.load},null,8,["pageinfo","onChange"]),(0,on.Wm)(I,{modelValue:w.visible,"onUpdate:modelValue":u[8]||(u[8]=function(n){return w.visible=n}),title:"统计应用",width:"500px"},{footer:(0,on.w5)((function(){return[(0,on.Wm)(B,{class:"ml-auto",size:"small",loading:w.loading,onClick:w.close},{default:(0,on.w5)((function(){return[(0,on.Uk)(" 取消 ")]})),_:1},8,["loading","onClick"]),(0,on.Wm)(B,{size:"small",loading:w.loading,type:"primary",class:"",onClick:u[7]||(u[7]=function(n){return w.submit()})},{default:(0,on.w5)((function(){return[(0,on.kq)(" :disabled=\"form.name === '默认渠道'\" "),(0,on.Uk)(" 保存 ")]})),_:1},8,["loading"])]})),default:(0,on.w5)((function(){return[(0,on.wy)(((0,on.wg)(),(0,on.j4)(z,{modelValue:w.form.appIds,"onUpdate:modelValue":u[6]||(u[6]=function(n){return w.form.appIds=n}),style:{display:"flex","flex-wrap":"wrap",gap:"8px 0",padding:"0 12px","font-size":"14px","line-height":"14px"}},{default:(0,on.w5)((function(){return[((0,on.wg)(!0),(0,on.iD)(on.HY,null,(0,on.Ko)(m.data3,(function(n){var e;return(0,on.wg)(),(0,on.iD)(on.HY,null,[(0,on._)("div",Jn,(0,dn.zw)(n.appName),1),(null===(e=n.children)||void 0===e?void 0:e.length)>0?((0,on.wg)(),(0,on.iD)(on.HY,{key:0},[(0,on.kq)(" flex: 0 0 33%; "),((0,on.wg)(!0),(0,on.iD)(on.HY,null,(0,on.Ko)(n.children,(function(n){return(0,on.wg)(),(0,on.j4)(j,{label:n.appId,style:{"flex-wrap":"wrap",margin:"0 12px 0 0","min-width":"120px","text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,on.w5)((function(){return[(0,on.Uk)((0,dn.zw)(n.appName),1)]})),_:2},1032,["label"])})),256))],64)):((0,on.wg)(),(0,on.iD)("div",Pn,"暂无数据"))],64)})),256))]})),_:1},8,["modelValue"])),[[D,w.loading]])]})),_:1},8,["modelValue"])])}}}},60261:(n,e,t)=>{var a=t(29552);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[n.id,a,""]]),a.locals&&(n.exports=a.locals);(0,t(80950).Z)("3a484ba8",a,!1,{})}}]);
//# sourceMappingURL=3798.js.map