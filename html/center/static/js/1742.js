"use strict";(self.webpackChunkxxxxx=self.webpackChunkxxxxx||[]).push([[1742],{21742:(e,n,t)=>{t.d(n,{Z:()=>Be});var l=t(44511),a=(t(47465),t(76),t(45086)),o=(t(46348),t(74366)),i=(t(80036),t(49663),t(70670)),r=(t(74763),t(84365)),u=(t(23078),t(17075)),p=(t(11595),t(86170)),s=(t(16158),t(97796)),c=(t(17153),t(86605)),d=(t(80173),t(38819)),f=(t(87838),t(18938),t(991)),m=(t(93785),t(89888)),w=(t(31581),t(64117)),v=(t(1610),t(91387),t(99539)),b=t.n(v),h=t(52780),g=t.n(h),k=t(961),A=t.n(k),y=t(52122),E=t.n(y),I=t(11549),S=t.n(I),x=t(66802),D=t.n(x),C=t(82831),_=t.n(C),W=t(83256),L=t.n(W),U=t(34629),P=t(18362),N=t.n(P),q=t(93167),j=t.n(q),K=t(37e3),O=t.n(K),R=t(33657),V=t.n(R),F=(t(18554),t(84485),t(53394),t(49717),t(15165),t(24641),t(17391),t(10175),t(57629),t(26440)),T=t(71254),z=t(92811),G=t(81040),H=t(18230),Z=t(38691),M=t(24253),B=t(83025),Y=t(31270),$=t(7142),X=t(51715),J=t(17187),Q=t(58436),ee=t(48127),ne=t(25080),te=t(35405),le=t(93349),ae=t(22585),oe=t(61911),ie=t(44435),re=t(20115);t(41386);function ue(e,n){var t=b()(e);if(g()){var l=g()(e);n&&(l=A()(l).call(l,(function(n){return E()(e,n).enumerable}))),t.push.apply(t,l)}return t}function pe(e){for(var n=1;n<arguments.length;n++){var t,l,a=null!=arguments[n]?arguments[n]:{};n%2?S()(t=ue(Object(a),!0)).call(t,(function(n){(0,U.Z)(e,n,a[n])})):D()?_()(e,D()(a)):S()(l=ue(Object(a))).call(l,(function(n){L()(e,n,E()(a,n))}))}return e}var se=function(e){return(0,F.dD)("data-v-b17dec0e"),e=e(),(0,F.Cn)(),e},ce={class:"box"},de={class:"search"},fe=se((function(){return(0,F._)("span",{class:"label"},"状态",-1)})),me=se((function(){return(0,F._)("span",{class:"label"},"渠道",-1)})),we={key:1,style:{display:"flex","align-items":"center",gap:"6px","line-height":"1"}},ve=se((function(){return(0,F._)("span",{class:"radio",style:{width:"5px",height:"5px","background-color":"#666666"}},null,-1)})),be=se((function(){return(0,F._)("span",null,"未统计数据",-1)})),he=se((function(){return(0,F._)("img",{src:H,alt:""},null,-1)})),ge={class:"verinfo"},ke=se((function(){return(0,F._)("span",{class:"label"},"APP名称：",-1)})),Ae=se((function(){return(0,F._)("span",{class:"label"},"所属账号：",-1)})),ye=se((function(){return(0,F._)("p",null,[(0,F._)("span",{class:"label"},"绑定类型："),(0,F.Uk)("APP")],-1)})),Ee={style:{display:"flex","align-items":"center"}},Ie=["innerHTML"],Se={style:{display:"flex","align-items":"center",gap:"6px"}},xe={key:0},De={key:1},Ce={key:2},_e={key:3},We={key:4,style:{width:"200px",display:"flex","align-items":"center"}},Le=se((function(){return(0,F._)("span",null,"打包中",-1)})),Ue=se((function(){return(0,F._)("img",{style:{width:"32px",height:"32px"},src:Z,alt:""},null,-1)})),Pe={key:5},Ne=["src"],qe={key:6},je={key:7},Ke={key:8},Oe=["src"],Re={key:9,style:{width:"200px",display:"flex",gap:"8px","align-items":"center"}},Ve=se((function(){return(0,F._)("span",null,"下载中",-1)})),Fe={key:10},Te=["src"],ze=["onClick"],Ge={class:"hideKey"},He=["innerHTML"],Ze=["src"],Me=["src"];const Be={__name:"apk",setup:function(e){var n=(0,F.f3)("realodSurvey"),t=(0,F.FN)().appContext.config.globalProperties.$ajax,v=((0,te.tv)(),(0,z.iH)()),b=(0,z.iH)(),h=JSON.parse((0,ne.PR)()),g=(0,z.iH)(!1),k=(0,z.iH)(!0),A=(0,z.qj)({visible:!1,loading:!1,select:[],form:{appid:"",tjId:""},open:function(e){A.visible=!0,A.form={appid:e.appId,tjId:""},y(e.siteId)},submit:function(){var e;A.loading=!0,t.put(N()(e="/api/v1/supt/app/Android/bind/".concat(A.form.appid,"/statistic/")).call(e,A.form.tjId)).then((function(e){(0,re.bM)({position:"bottom-right",type:"success",message:A.form.tjId?"绑定成功":"解绑成功"}),S.load(),A.visible=!1})).finally((function(){A.loading=!1}))}}),y=function(e){t.get("/api/v1/supt/statistics/app",{params:{limit:999,page:1,siteId:e}}).then((function(e){var n=e.data.data.list;A.select=n}))};t.get("/api/v1/system/plugin").then((function(e){var n,t=e.data;g.value=1===(null===(n=j()(t).call(t,(function(e){return"53753F2A7D834F08918B0BB24AE28B84"===e.hash})))||void 0===n?void 0:n.status)})).finally((function(){k.value=!1}));var E=function(){(0,Y.Z)({message:"确定要开启统计吗?",okEms:"开启成功"},(function(){return k.value=!0,t.put("/api/v1/system/plugin",{hash:"53753F2A7D834F08918B0BB24AE28B84",status:1}).then((function(e){e.data;g.value=!0})).catch((function(e){g.value=!1})).finally((function(e){k.value=!1}))}))},I=(0,z.iH)({pageIndex:1,pageSize:20,total:0}),S=(0,z.qj)({search:{},data:[],showPover:"",loading:!1,load:function(e){var n,l;I.value=e||I.value,D.load(),S.loading=!0,t.get("/api/v1/supt/app/Android",{params:pe(pe({},S.search),{},{channelId:0===(null===(n=S.search)||void 0===n?void 0:n.channelId)?"0":(null===(l=S.search)||void 0===l?void 0:l.channelId)||void 0,limit:I.value.pageSize,page:I.value.pageIndex})}).then((function(e){var n=e.data.data;S.data=n.list,I.value.total=n.total})).finally((function(){S.loading=!1}))}}),x=(0,z.iH)(),D=(0,z.qj)({data:[],load:function(){t.get("/api/v3/channels",{params:{limit:999,page:1}}).then((function(e){var n=e.data;n.list.unshift({id:0,name:"默认渠道",channelCode:"",state:1,domains:[],memberCount:0}),D.data=n.list}))}});S.load();(0,z.iH)("");var C=(0,z.qj)({visible:!1,form:{channelId:[]},loading:!1,row:void 0,open:function(e){var n;C.visible=!0,C.row=e,C.form.appId=e.unitUid,C.form.channelId=(null===(n=e.useChannels)||void 0===n?void 0:O()(n).call(n,(function(e){return e.id})))||[]},close:function(){C.form={channelId:[]},C.row={},C.visible=!1},submit:function(e){var n,l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];C.loading=!0,(a?l?t.post("/api/v1/supt/app/channel/Android",C.form):t.put("/api/v1/supt/app/channel/Android",C.form):t.delete(N()(n="/api/v3/channel/".concat(C.row.id,"/unbind/")).call(n,e))).then((function(e){e.data;S.load(),C.loading=!1,C.close(),(0,re.bM)({position:"bottom-right",type:"success",message:"绑定成功"})}))}}),_=null,W=function(){clearInterval(_),_=null},L=function e(){var n,l;I.value=I.value,t.get("/api/v1/supt/app/Android",{params:pe(pe({},S.search),{},{channelId:0===(null===(n=S.search)||void 0===n?void 0:n.channelId)?"0":(null===(l=S.search)||void 0===l?void 0:l.channelId)||void 0,limit:I.value.pageSize,page:I.value.pageIndex})}).then((function(e){var n=e.data.data;S.data=n.list})).finally((function(){_&&W(),_=V()((function(){e()}),3e3)}))};return(0,F.bv)((function(){L()})),(0,F.Ah)((function(){W()})),function(e,k){var y=w.BT,C=w.ElSelect,_=m.gn,W=f.EZ,L=i.$Y,U=d.OX,P=c.ElButton,N=s.$t,q=p.Mr,j=u.Q0,K=r.Xh,O=i.eI,R=o.nH,V=o.ly,H=a.d0,Z=l.t;return(0,F.wg)(),(0,F.iD)("div",ce,[(0,F._)("div",de,[fe,(0,F.Wm)(C,{modelValue:S.search.state,"onUpdate:modelValue":k[0]||(k[0]=function(e){return S.search.state=e}),placeholder:"不限状态",class:"part",clearable:"",onChange:k[1]||(k[1]=function(e){I.value.pageIndex=1,S.load()})},{default:(0,F.w5)((function(){return[(0,F.Wm)(y,{label:"未打包",value:"UNPACKED"}),(0,F.Wm)(y,{label:"待打包",value:"WAIT-PACKED"}),(0,F.Wm)(y,{label:"打包中",value:"PACKING"}),(0,F.Wm)(y,{label:"打包完成",value:"DOWNLOAD-WAIT"}),(0,F.Wm)(y,{label:"打包失败",value:"PACK-FAILED"}),(0,F.Wm)(y,{label:"待发布",value:"DOWNLOAD-SUCCESS"}),(0,F.Wm)(y,{label:"下载中",value:"DOWNLOADING"}),(0,F.kq)(' <el-option label="下载失败" value="DOWNLOAD-FAIL" /> '),(0,F.Wm)(y,{label:"已发布",value:"RELEASED"}),(0,F.Wm)(y,{label:"发布失败",value:"RELEASE-FAILED"})]})),_:1},8,["modelValue"]),me,(0,F.Wm)(C,{modelValue:S.search.channelId,"onUpdate:modelValue":k[2]||(k[2]=function(e){return S.search.channelId=e}),placeholder:"不限渠道",class:"part",clearable:"",onChange:k[3]||(k[3]=function(e){I.value.pageIndex=1,S.load()})},{default:(0,F.w5)((function(){return[((0,F.wg)(!0),(0,F.iD)(F.HY,null,(0,F.Ko)(D.data,(function(e){return(0,F.wg)(),(0,F.j4)(y,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"]),(0,F.Wm)(W,{modelValue:S.search.keywords,"onUpdate:modelValue":k[4]||(k[4]=function(e){return S.search.keywords=e}),class:"part",clearable:"",placeholder:"搜索关键字",onKeyup:k[5]||(k[5]=(0,T.D2)((function(e){I.value.pageIndex=1,S.load()}),["enter"])),onBlur:k[6]||(k[6]=function(e){I.value.pageIndex=1,S.load()})},{prefix:(0,F.w5)((function(){return[(0,F.Wm)(_,{class:"el-input__icon"},{default:(0,F.w5)((function(){return[(0,F.Wm)((0,z.SU)(ee.olm))]})),_:1})]})),_:1},8,["modelValue"]),(0,F.kq)(' <el-input\n        v-model="table.search.keywords"\n        class="part"\n        clearable\n        placeholder="搜索关键字"\n@keyup.enter="\n          pageinfo.pageIndex = 1;\n          table.load();\n        "\n        @blur="\n          pageinfo.pageIndex = 1;\n          table.load();\n        "\n      >\n        <template #prefix>\n          <el-icon class="el-input__icon"><search /></el-icon>\n        </template>\n      </el-input> ')]),(0,F.wy)(((0,F.wg)(),(0,F.j4)(O,{class:"auto",data:S.data,stripe:!0,height:"calc(100vh - 250px)"},{default:(0,F.w5)((function(){return[(0,F.Wm)(L,{prop:"appName",label:"APP名称","show-overflow-tooltip":!0},{default:(0,F.w5)((function(){return[(0,F.kq)(' <template #default="{ row }">\n          <el-button\n            :disabled="!row.channelCode"\n            type="primary"\n            link\n            @click="copyUrl(row.channelCode)"\n          >\n            {{ row.channelCode || "-" }}\n          </el-button>\n        </template> ')]})),_:1}),(0,F.Wm)(L,{prop:"Icon",label:"应用图标",width:"80","show-overflow-tooltip":!0},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F.Wm)(B.Z,{src:n.Icon,style:{width:"30px",height:"30px"}},null,8,["src"])]})),_:1}),(0,F.kq)(' <el-table-column prop="logo" label="LOGO" width="80" :show-overflow-tooltip="true">\n        <template #default="{ row }">\n          <Image :src="row.logo" style="width: 30px; height: 30px"></Image>\n        </template>\n      </el-table-column> '),(0,F.kq)(' <el-table-column\n        prop="Version"\n        label="当前版本"\n        :show-overflow-tooltip="true"z\n      >\n      </el-table-column> '),(0,F.Wm)(L,{label:"内置渠道",width:"120"},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F.kq)(' {{ channe.data?.find((v) => v.id === row.channelId)?.name || "-" }} '),(0,F.Uk)(" "+(0,G.zw)(n.channelName),1)]})),_:1}),(0,F.kq)(' <el-table-column label="绑定渠道" :show-overflow-tooltip="true">\n        <template #default="{ row }">\n          <el-button\n            :type="\n              !row.useChannels || row.useChannels.length === 0\n                ? \'danger\'\n                : \'primary\'\n            "\n            link\n            @click="bindDia.open(row)"\n          >\n            {{\n              !row.useChannels || row.useChannels.length === 0\n                ? "未统计"\n                : row.useChannels?.map((v) => v.channelName).join("，")\n            }}\n          </el-button>\n        </template>\n        </el-table-column> '),(0,F.Wm)(L,{label:"数据统计","show-overflow-tooltip":!0},{default:(0,F.w5)((function(e){var n=e.row;return[!1===g.value?((0,F.wg)(),(0,F.j4)(U,{key:0,"model-value":g.value,"onUpdate:modelValue":E,"active-value":!0,"inactive-value":!1},null,8,["model-value"])):n.statisticId?((0,F.wg)(),(0,F.j4)(N,{key:2,placement:"right",width:"380px",trigger:"hover",disabled:!0},{reference:(0,F.w5)((function(){return[(0,F.Wm)(P,{type:"primary",link:"",onClick:function(e){return l=n.appId,void(0,Y.Z)({message:"确定要解除绑定吗?",okEms:"解除绑定成功"},(function(){return S.loading=!0,t.put("/api/v1/supt/app/Android/bind/".concat(l,"/statistic/0")).then((function(e){S.load()})).catch((function(){S.loading=!1}))}));var l}},{default:(0,F.w5)((function(){return[(0,F.Uk)((0,G.zw)(n.statisticAppName),1)]})),_:2},1032,["onClick"])]})),default:(0,F.w5)((function(){var e;return[(0,F._)("div",ge,[(0,F._)("div",null,[(0,F._)("p",null,[ke,(0,F.Uk)((0,G.zw)(n.statisticAppName),1)]),(0,F._)("p",null,[Ae,(0,F.Uk)((0,G.zw)(null===(e=(0,z.SU)(h))||void 0===e?void 0:e.username),1)]),ye])])]})),_:2},1024)):((0,F.wg)(),(0,F.iD)("p",we,[ve,be,(0,F.Wm)(P,{type:"primary",link:"",onClick:function(e){return A.open(n)}},{default:(0,F.w5)((function(){return[he]})),_:2},1032,["onClick"])]))]})),_:1}),(0,F.Wm)(L,{label:"当前版本信息",prop:"version",width:"100"},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F.Uk)((0,G.zw)(n.version),1)]})),_:1}),(0,F.Wm)(L,{label:"最新版本信息",prop:"version",width:"100"},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F._)("div",Ee,[(0,F.Uk)((0,G.zw)(n.latestAppVersion||"-")+" ",1),n.packInfo?((0,F.wg)(),(0,F.j4)(j,{key:0,class:"box-item",effect:"light",placement:"top"},{content:(0,F.w5)((function(){return[(0,F.Wm)(q,{"max-height":"400px"},{default:(0,F.w5)((function(){return[(0,F._)("div",{class:"packInfo_html_content",innerHTML:n.latestAppUpdateContent},null,8,Ie)]})),_:2},1024)]})),default:(0,F.w5)((function(){return[(0,F.Wm)(_,{style:{"margin-left":"8px"}},{default:(0,F.w5)((function(){return[(0,F.Wm)((0,z.SU)(ee.cEj))]})),_:1})]})),_:2},1024)):(0,F.kq)("v-if",!0)]),(0,F.kq)(' <el-popover placement="right" width="380px" trigger="hover" :disabled="!row.version">\n            <template #reference>\n              <el-button type="primary" link v-if="row.version">\n                {{ row.version }}</el-button><span v-else>-</span>\n            </template>\n            <div class="verinfo">\n              <div>\n                <p><span class="label">当前版本：</span>{{ row.version }}<span v-if="row.latestAppVersion === row.version" class="version_hint">（当前已是最新版本）</span></p>\n                <p style="display: flex; align-items: center">\n                  <span class="label">打包状态：</span>\n                  <span v-if="row.State === \'UNPACKED\'">未打包</span>\n                  <span v-else-if="row.State === \'WAIT-PACKED\'">待打包</span>\n                  <span v-else-if="row.State === \'PACKING\'">打包中</span>\n                  <span v-else-if="row.State === \'PACK-FAILED\'">打包失败</span>\n                  <span v-else-if="row.PackAt">已打包 &nbsp;&nbsp;{{\n                    row.PackAt ? format(row.PackAt) : "-"\n                  }}</span>\n                </p>\n                <p>\n                  <span class="label">发布状态：</span>\n                  <span v-if="row.State === \'WAIT-RELEASE\'">待发布</span>\n                  <span v-else-if="row.State === \'RELEASED\'">已发布 &nbsp;&nbsp;{{\n                    row.publishAt ? format(row.publishAt) : "-"\n                  }}</span>\n                  <span v-else-if="row.State === \'RELEASE-FAILED\'">发布失败</span>\n                  <span v-else>-</span>\n                </p>\n                <div style="display: flex; flex-wrap: wrap">\n                  <span class="label">版本摘要：</span>\n                  <div v-html="row.updateContent"></div>\n                </div>\n\n              </div>\n              <span style="\n                  display: block;\n                  height: 1px;\n                  background-color: #e4e4e4;\n                  margin: 24px 0;\n                " v-if="row.latestAppVersion !== row.version"></span>\n              <div v-if="row.latestAppVersion !== row.version">\n                <p>\n                  <span class="label">最新版本：</span>{{ row.latestAppVersion || "-" }}\n                </p>\n                <div style="display: flex; flex-wrap: wrap">\n                  <span class="label">版本摘要：</span>\n                  <div v-html="row.latestAppUpdateContent"></div>\n                </div>\n                <el-button type="primary" style="margin-left: auto;font-size: 12px;" link :disabled="row.State === \'PACKING\'"\n                      @click="createPack(row, row.latestAppVersionId)">\n                      打包最新版本\n                </el-button>\n              </div>\n            </div>\n          </el-popover> ')]})),_:1}),(0,F.Wm)(L,{label:"当前版本状态",prop:"status",width:"180"},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F._)("div",Se,[(0,F._)("span",{style:{display:"inline-block",height:"5px",width:"5px","border-radius":"50%"},class:(0,G.C_)(n.State)},null,2),"UNPACKED"===n.State?((0,F.wg)(),(0,F.iD)("span",xe,"未打包")):"WAIT-PACKED"===n.State?((0,F.wg)(),(0,F.iD)("span",De,"待打包")):"DOWNLOAD-SUCCESS"===n.State?((0,F.wg)(),(0,F.iD)("span",Ce,"待发布")):"DOWNLOAD-WAIT"===n.State?((0,F.wg)(),(0,F.iD)("span",_e,"打包完成")):"PACKING"===n.State?((0,F.wg)(),(0,F.iD)("div",We,[Le,Ue,(0,F.kq)(" <el-progress style=\"flex: 1\" v-if=\"Number(row.packInfo.replace('%', '')) >= 0\"\n                :percentage=\"Number(row.packInfo.replace('%', ''))\" /> ")])):"PACK-FAILED"===n.State?((0,F.wg)(),(0,F.iD)("span",Pe,[(0,F.Uk)(" 打包失败 "),n.packInfo?((0,F.wg)(),(0,F.j4)(j,{key:0,class:"box-item",effect:"light",content:n.packInfo,placement:"top"},{default:(0,F.w5)((function(){return[(0,F._)("img",{src:(0,z.SU)(M),style:{width:"11px"},alt:""},null,8,Ne)]})),_:2},1032,["content"])):(0,F.kq)("v-if",!0)])):"WAIT-RELEASE"===n.State||"WAIT-RELEASE"===n.State?((0,F.wg)(),(0,F.iD)("span",qe,"打包完成")):"RELEASED"===n.State?((0,F.wg)(),(0,F.iD)("span",je,"已发布")):"RELEASE-FAILED"===n.State?((0,F.wg)(),(0,F.iD)("span",Ke,[(0,F.Uk)("发布失败 "),n.packInfo?((0,F.wg)(),(0,F.j4)(j,{key:0,class:"box-item",effect:"light",content:n.packInfo,placement:"top"},{default:(0,F.w5)((function(){return[(0,F._)("img",{src:(0,z.SU)(M),style:{width:"11px"},alt:""},null,8,Oe)]})),_:2},1032,["content"])):(0,F.kq)("v-if",!0)])):"DOWNLOADING"===n.State?((0,F.wg)(),(0,F.iD)("div",Re,[Ve,Number(n.downProcess.replace("%",""))>=0?((0,F.wg)(),(0,F.j4)(K,{key:0,style:{flex:"1"},percentage:Number(n.downProcess.replace("%",""))},null,8,["percentage"])):(0,F.kq)("v-if",!0)])):"DOWNLOAD-FAIL"===n.State?((0,F.wg)(),(0,F.iD)("span",Fe,[(0,F.Uk)(" 下载失败 "),n.downloadMessage?((0,F.wg)(),(0,F.j4)(j,{key:0,class:"box-item",effect:"light",content:n.downloadMessage,placement:"top"},{default:(0,F.w5)((function(){return[(0,F._)("img",{src:(0,z.SU)(M),style:{width:"11px"},alt:""},null,8,Te)]})),_:2},1032,["content"])):(0,F.kq)("v-if",!0)])):(0,F.kq)("v-if",!0)])]})),_:1}),(0,F.Wm)(L,{label:"slogan",prop:"slogan","show-overflow-tooltip":!0},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F.Uk)((0,G.zw)(n.slogan||"-"),1)]})),_:1}),(0,F.Wm)(L,{label:"更新说明",prop:"publishContent",width:"200"},{default:(0,F.w5)((function(n){var t=n.row;return[(0,F._)("div",{style:(0,G.j5)({display:"flex",alignItems:"center",cursor:"RELEASED"==t.State?"pointer":"auto"}),onClick:function(e){return function(e){S.showPover=e.id,"RELEASED"===e.State&&(b.value.type=2,b.value.open(e))}(t)}},[(0,F.Wm)(j,{placement:"top",disabled:!t.publishContent},{content:(0,F.w5)((function(){return[(0,F._)("div",{style:{"max-width":"285px"},innerHTML:t.publishContent.replace(/\n/g,"<br/>")},null,8,He)]})),default:(0,F.w5)((function(){return[(0,F._)("span",Ge,(0,G.zw)(t.publishContent?t.publishContent:"-"),1)]})),_:2},1032,["disabled"]),"RELEASED"==t.State?((0,F.wg)(),(0,F.j4)(_,{key:0,color:"#4C83FF",middle:"",class:"keyIcon",style:(0,G.j5)({marginLeft:"3px",display:e.visible&&S.showPover==t.id?"block":"none"})},{default:(0,F.w5)((function(){return[(0,F.Wm)((0,z.SU)(ee.qHu))]})),_:2},1032,["style"])):(0,F.kq)("v-if",!0)],12,ze)]})),_:1}),(0,F.Wm)(L,{label:"强制更新",prop:"forceUpgrade","show-overflow-tooltip":!0,width:"100"},{default:(0,F.w5)((function(e){return[e.row.forceUpgrade?((0,F.wg)(),(0,F.iD)("img",{key:0,src:(0,z.SU)(J),alt:""},null,8,Ze)):((0,F.wg)(),(0,F.iD)("img",{key:1,src:(0,z.SU)(Q),alt:""},null,8,Me))]})),_:1}),(0,F.kq)(' <el-table-column>\n        <template #default="{ row }">\n          <el-icon\n            color="#4C83FF"\n            middle\n            class="keyIcon"\n            :style="{\n              marginLeft: \'6px\',\n              display: visible && pages.showPover == row.id ? \'block\' : \'none\',\n            }"\n            @click="getDate(row)"\n          >\n            <EditPen />\n          </el-icon>\n        </template>\n      </el-table-column> '),(0,F.kq)(' <el-table-column label="发布时间" prop="publishAt">\n        <template #default="{ row }">\n          {{ row.publishAt ? format(row.publishAt) : "-" }}</template\n        >\n      </el-table-column> '),(0,F.kq)(' <el-table-column label="打包时间" prop="PackAt">\n        <template #default="{ row }">\n          {{ row.PackAt ? format(row.PackAt) : "-" }}</template\n        >\n      </el-table-column> '),(0,F.Wm)(L,{label:"更新时间",prop:"createAt",width:"150"},{default:(0,F.w5)((function(e){var n=e.row;return[(0,F.Uk)((0,G.zw)(n.createAt?(0,z.SU)(X.Z)(n.createAt):"-"),1)]})),_:1}),(0,F.Wm)(L,{fixed:"right",label:"操作",align:"right",width:"240"},{default:(0,F.w5)((function(e){var l=e.row;return[(0,F.Wm)(P,{type:"primary",link:"",onClick:function(e){return function(e){v.value.open(e)}(l)},disabled:"WAIT-PACKED"===l.State||"PACKING"===l.State||"PACK-FAILED"===l.State||"DOWNLOADING"===l.State||"DOWNLOAD-FAIL"===l.State||"RELEASE-FAILED"===l.State},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 下载 ")]})),_:2},1032,["onClick","disabled"]),(0,F.kq)(' <el-popover placement="left" width="auto" trigger="click" @before-enter="downloadApp(row, false)">\n            <template #reference>\n\n            </template>\n\n          </el-popover> '),(0,F.kq)(' <el-button type="primary" :disabled="row.State === \'PACKING\'\n            " link @click="createPack(row)">\n            {{ row.State === \'WAIT-RELEASE\' ||\n                row.State === \'RELEASED\' ||\n                row.State === \'RELEASE-FAILED\' ? "重新打包" : "打包" }}\n          </el-button> '),(0,F.Wm)(P,{type:"primary",link:"",disabled:"PACKING"===l.State||"WAIT-PACKED"===l.State,onClick:function(e){return function(e,n){var l={};n&&(l.appVersionId=n),(0,Y.Z)({message:"确定要".concat("WAIT-RELEASE"===e.State||"RELEASED"===e.State||"RELEASE-FAILED"===e.State?"重新打包":"打包","吗？确认后应用将提交到打包队列"),okEms:"提交".concat("WAIT-RELEASE"===e.State||"RELEASED"===e.State||"RELEASE-FAILED"===e.State?"重新打包":"打包","成功")},(function(){return t.put("/api/v1/supt/app/Android/pack/"+e.appId,l).then((function(e){e.data,S.load()}))}))}(l,l.latestAppVersionId)}},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 打包 ")]})),_:2},1032,["disabled","onClick"]),(0,F.kq)(' <el-dropdown :disabled="row.State === \'PACKING\'">\n            <el-link @click="createPack(row, row.latestAppVersionId)" type="primary" :disabled="row.State === \'PACKING\'"\n              style="margin: 6px 8px 0;" :underline="false">打包</el-link>\n            <template #dropdown>\n              <el-dropdown-menu>\n                <el-dropdown-item @click="createPack(row)">打包当前版本</el-dropdown-item>\n                <el-dropdown-item @click="createPack(row, row.latestAppVersionId)">打包最新版本</el-dropdown-item>\n              </el-dropdown-menu>\n            </template>\n          </el-dropdown> '),(0,F.Wm)(P,{type:"primary",link:"",style:{width:"42px"},disabled:"DOWNLOAD-SUCCESS"!=l.State,onClick:function(e){return function(e){b.value.open(e)}(l)}},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 发布 ")]})),_:2},1032,["disabled","onClick"]),(0,F.kq)(' <el-button type="primary" link @click="cancleApp(row)" v-else="row.State !== \'RELEASED\'">\n            取消发布\n          </el-button> '),(0,F.Wm)(P,{type:"primary",link:"",onClick:function(e){var n;return null===(n=x.value)||void 0===n?void 0:n.open(l)},disabled:"PACKING"===l.State||"WAIT-PACKED"===l.State},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 编辑 ")]})),_:2},1032,["onClick","disabled"]),(0,F.Wm)(P,{type:"danger",link:"",onClick:function(e){return function(e){return(0,Y.Z)({message:"确定要删除这个应用吗?",okEms:"删除成功"},(function(){return t.delete("/api/v1/supt/app/Android/"+e.appId).then((function(e){e.data,S.load(),n()}))}))}(l)},disabled:"PACKING"===l.State||"WAIT-PACKED"===l.State},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 删除 ")]})),_:2},1032,["onClick","disabled"])]})),_:1})]})),_:1},8,["data"])),[[Z,S.loading]]),(0,F.Wm)(ae.Z,{ref_key:"editorRef",ref:x,"channe-list":D.data,onLoad:S.load},null,8,["channe-list","onLoad"]),(0,F.Wm)(oe.Z),(0,F.Wm)($.Z,{pageinfo:I.value,onChange:S.load},null,8,["pageinfo","onChange"]),(0,F.kq)(' <el-dialog v-model="bindDia.visible" title="绑定渠道" width="460px">\n      <el-checkbox-group\n        v-model="bindDia.form.channelId"\n        style="display: flex; flex-wrap: wrap; gap: 8px 0; padding: 0 12px"\n        v-loading="bindDia.loading"\n      >\n        <el-checkbox\n          v-for="item of channe.data"\n          :label="item.id"\n          style="\n            flex: 0 0 33%;\n            margin: 0;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            white-space: nowrap;\n          "\n        >\n          {{ item.name }}\n        </el-checkbox>\n      </el-checkbox-group>\n      <template #footer>\n        <el-button\n          class="ml-auto"\n          size="small"\n          :loading="bindDia.loading"\n          @click="bindDia.close"\n        >\n          取消\n        </el-button>\n        <el-button\n          size="small"\n          :loading="bindDia.loading"\n          type="primary"\n          class=""\n          @click="bindDia.submit()"\n        >\n          保存\n        </el-button>\n      </template>\n    </el-dialog> '),(0,F.Wm)(H,{modelValue:A.visible,"onUpdate:modelValue":k[12]||(k[12]=function(e){return A.visible=e}),title:"绑定统计数据",width:"460px"},{footer:(0,F.w5)((function(){return[(0,F.Wm)(P,{class:"ml-auto",size:"small",type:"primary",plain:"",style:{float:"left"},onClick:k[9]||(k[9]=function(e){return n="/center/#/statistics-web",void window.open(n);var n})},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 去统计系统 ")]})),_:1}),(0,F.Wm)(P,{class:"ml-auto",size:"small",loading:A.loading,onClick:k[10]||(k[10]=function(e){return A.visible=!1})},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 取消 ")]})),_:1},8,["loading"]),(0,F.Wm)(P,{size:"small",loading:A.loading,type:"primary",class:"",onClick:k[11]||(k[11]=function(e){return A.submit()})},{default:(0,F.w5)((function(){return[(0,F.Uk)(" 保存 ")]})),_:1},8,["loading"])]})),default:(0,F.w5)((function(){return[(0,F.Wm)(V,{onSubmit:k[8]||(k[8]=(0,T.iM)((function(){}),["prevent"])),ref:"ruleFormRef","label-width":"80px",model:A.form,"hide-required-asterisk":!1},{default:(0,F.w5)((function(){return[(0,F.Wm)(R,{label:"统计名称",prop:"tjId",style:{"margin-bottom":"0"},rules:{required:!0,message:"请选择统计名称",trigger:"blur"}},{default:(0,F.w5)((function(){return[(0,F.Wm)(C,{modelValue:A.form.tjId,"onUpdate:modelValue":k[7]||(k[7]=function(e){return A.form.tjId=e}),clearable:"",placeholder:"请选择统计名称",style:{width:"100%"}},{default:(0,F.w5)((function(){return[((0,F.wg)(!0),(0,F.iD)(F.HY,null,(0,F.Ko)(A.select,(function(e){return(0,F.wg)(),(0,F.j4)(y,{key:e.id,label:e.appName,value:e.id},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["modelValue"]),(0,F.Wm)(le.Z,{type:1,onUpdata:S.load,ref_key:"apkDownModalRef",ref:v},null,8,["onUpdata"]),(0,F.Wm)(ie.Z,{onUpdata:S.load,ref_key:"releaseModalRef",ref:b},null,8,["onUpdata"])])}}}}}]);
//# sourceMappingURL=1742.js.map