import{_ as ae,f as oe,c as te,v as ne,h as F,i as se,j as de,k as j,l as re}from"./entry-8561ffba.js";import{m as O}from"./message-48c984f7.js";import{E as ie,g as ue,a as ce,s as pe,b as me,_ as fe,d as _e,c as ge,e as ve}from"./videoAlbum-3de0ee4f.js";import{E as he,a as ye,P as be}from"./pagination-6c424080.js";import{g as ke,E as Ve,a as Ce,b as xe,e as Le,v as $e,_ as we,c as Ie,d as Re,f as Ee,h as Se,i as Me,j as De}from"./setFees-834c95c1.js";import{b as p,Y as C,h as Be,z as Pe,c as v,T as l,R as n,M as Ae,a as w,K as Ne,Q as k,o as i,V as h,a5 as d,u as K,O as I,ac as R,ad as Ue}from"./vue-e9f47459.js";import"./el-tab-pane-ea2b2b56.js";import"./el-date-picker-2f2b4ad1.js";/* empty css                       */const Te={class:"flex-y box"},ze={key:0,class:"full_pro"},Fe={class:"percentage_value"},je={class:"flex-x-between"},Oe={class:"flex-x-center search m-0"},Ke=["onClick"],Qe={key:1},Ye={__name:"index",setup(qe){const y=p({pageIndex:1,pageSize:20,total:0}),m=C({value:[],get(){ue().then(s=>{m.value=s})}});m.get();const b=p([]);ke({limit:998}).then(s=>{b.value=s.list});const Q=C([[1,"\u662F"],[2,"\u5426"]]),Y=C([[1,"\u662F"],[2,"\u5426"]]),q=C([[1,"\u514D\u8D39"],[2,"VIP\u514D\u8D39"],[3,"\u91D1\u5E01\u70B9\u64AD"]]),o=C({loading:!1,data:[],searchVal:{keywords:"",categoryId:0,order:"updateAt desc",cycle:"",recommend:"",mode:"",line:""},selectList:[],load(s){y.value=s||y.value,o.loading=!0,ce({page:y.value.pageIndex,limit:y.value.pageSize,...o.searchVal}).then(a=>{o.data=a.list,y.value.total=a.total}).finally(()=>{o.loading=!1})},handleSelectionChange(s){o.selectList=s},sortChnage({column:s,prop:a,order:V}){V?o.searchVal.order=`${a} ${V==="ascending"?"asc":"desc"}`:o.searchVal.order="",o.load()}}),S=p(),P=p(),M=p(),G=p(),A=p(),D=p(),N=p(),E=p(),B=p(),U=p(),r=C({status:!1,timer:null,pro:0,key:""}),H=()=>{ve(r.key).then(s=>{r.pro=Math.ceil(s.index/s.total*100),s.index>=s.total&&(F({position:"bottom-right",type:"success",message:"\u89C6\u9891\u6570\u636E\u5220\u9664\u6210\u529F"}),r.pro=100,clearInterval(r.timer),o.load(),setTimeout(()=>{r.status=!1},1e3))})},f={del:s=>O({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u63D0\u4EA4\u6210\u529F"},()=>(r.timer&&(clearInterval(r.timer),r.timer=null),_e(s).then(a=>(r.key=a.key,r.status=!0,r.timer=setInterval(()=>{H()},1e3),a)))),search(){y.value.pageIndex=1,o.load()},batch:(s,a,V,x)=>O({message:`\u786E\u5B9A\u8981${x}\u5417\uFF1F`,okEms:`\u5F71\u89C6${x}\u6210\u529F`},()=>ge(s,a,V).then(_=>(o.load(),_))),syncImg:s=>{pe({ids:s}).then(a=>{F({position:"bottom-right",type:"success",message:a||"\u540C\u6B65\u6210\u529F"})})}},J=()=>{me().then(s=>{U.value=s,console.log(1111111,s)})};return Be(()=>{o.load(),J()}),Pe(()=>{r.timer&&clearInterval(r.timer)}),(s,a)=>{const V=ie,x=oe,_=te,c=Ve,T=Ce,z=xe,L=he,$=ye,W=fe,X=se,u=re,Z=Ue("MyImage"),ee=de,le=ne;return i(),v("div",Te,[r.status?(i(),v("div",ze,[l(V,{type:"circle",percentage:r.pro},{default:n(({percentage:e})=>[w("span",Fe,h(e)+"%",1)]),_:1},8,["percentage"])])):Ae("",!0),w("div",je,[w("div",null,[l(z,{trigger:"click","hide-on-click":!0,style:{"margin-left":"16px"},"popper-class":"video-top-menu"},{dropdown:n(()=>[l(T,{style:{width:"78px"}},{default:n(()=>[l(c,{onClick:a[0]||(a[0]=e=>M.value.open(o.selectList.map(t=>t.id),"recommend"))},{default:n(()=>[d(" \u63A8\u8350\u8BBE\u7F6E ")]),_:1}),l(c,{onClick:a[1]||(a[1]=e=>M.value.open(o.selectList.map(t=>t.id),"cycle"))},{default:n(()=>[d(" \u8F6E\u64AD\u8BBE\u7F6E ")]),_:1}),l(c,{onClick:a[2]||(a[2]=e=>A.value.open(o.selectList.map(t=>t.id),m.value))},{default:n(()=>[d(" \u4E13\u9898\u8BBE\u7F6E ")]),_:1}),l(c,{onClick:a[3]||(a[3]=e=>D.value.open(o.selectList.map(t=>t.id),"select",m.value)),divided:!0},{default:n(()=>[d(" \u8BBE\u7F6E\u6536\u8D39 ")]),_:1}),l(c,{onClick:a[4]||(a[4]=e=>f.del(o.selectList.map(t=>t.id))),divided:""},{default:n(()=>[d(" \u5220\u9664\u6240\u9009 ")]),_:1}),l(c,{onClick:a[5]||(a[5]=e=>{var t;return(t=B.value)==null?void 0:t.open(o.selectList.map(g=>g.id,b.value))})},{default:n(()=>[d(" \u66FF\u6362\u5206\u7C7B ")]),_:1})]),_:1})]),default:n(()=>[l(_,{disabled:o.selectList.length<=0},{default:n(()=>[d(" \u6279\u91CF\u7BA1\u7406 "),l(x,{style:{"padding-left":"5px","margin-top":"-3px"}},{default:n(()=>[l(K(j))]),_:1})]),_:1},8,["disabled"])]),_:1}),l(z,{trigger:"hover","hide-on-click":!0,style:{"margin-left":"16px"},"popper-class":"video-top-menu"},{dropdown:n(()=>[l(T,{style:{width:"120px"}},{default:n(()=>[l(c,{onClick:a[6]||(a[6]=e=>{var t;return(t=N.value)==null?void 0:t.open({},b.value)})},{default:n(()=>[d(" \u4E00\u952E\u5220\u9664 ")]),_:1}),l(c,{onClick:a[7]||(a[7]=e=>D.value.open({},"all",m.value))},{default:n(()=>[d(" \u4E00\u952E\u6536\u8D39 ")]),_:1}),l(c,{onClick:a[8]||(a[8]=e=>{var t;return(t=E.value)==null?void 0:t.open(1,b.value)})},{default:n(()=>[d(" \u66FF\u6362\u5C01\u9762 ")]),_:1}),l(c,{onClick:a[9]||(a[9]=e=>{var t;return(t=E.value)==null?void 0:t.open(2,b.value)})},{default:n(()=>[d(" \u66FF\u6362\u7EBF\u8DEF ")]),_:1}),l(c,{onClick:a[10]||(a[10]=e=>{var t;return(t=B.value)==null?void 0:t.open([],b.value)})},{default:n(()=>[d(" \u66FF\u6362\u5206\u7C7B ")]),_:1}),l(c,{onClick:a[11]||(a[11]=e=>{var t;return(t=E.value)==null?void 0:t.open(3,b.value)})},{default:n(()=>[d(" \u66FF\u6362\u89C6\u9891\u4EFB\u610F\u5B57\u6BB5 ")]),_:1})]),_:1})]),default:n(()=>[l(_,null,{default:n(()=>[d(" \u66F4\u591A "),l(x,{style:{"padding-left":"5px","margin-top":"-3px"}},{default:n(()=>[l(K(j))]),_:1})]),_:1})]),_:1}),l(_,{type:"primary",style:{"margin-left":"16px"},onClick:a[12]||(a[12]=e=>{var t;return(t=S.value)==null?void 0:t.open({},m.value)})},{default:n(()=>[d(" \u65B0\u589E\u89C6\u9891 ")]),_:1})]),w("div",Oe,[l($,{modelValue:o.searchVal.albumsId,"onUpdate:modelValue":a[13]||(a[13]=e=>o.searchVal.albumsId=e),class:"m-2",placeholder:"\u6240\u6709\u4E13\u9898",clearable:"",onChange:f.search},{default:n(()=>[(i(!0),v(I,null,R(m.value,(e,t)=>(i(),k(L,{key:e.id,label:e.title,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(W,{type:"videoType",placeholder:"\u6240\u6709\u5206\u7C7B",checkStrictly:!0,page:"index",onChange:a[14]||(a[14]=e=>{o.searchVal.categoryId=e?e[e.length-1]:void 0,f.search()})}),l($,{modelValue:o.searchVal.cycle,"onUpdate:modelValue":a[15]||(a[15]=e=>o.searchVal.cycle=e),class:"m-2",placeholder:"\u662F\u5426\u8F6E\u64AD",clearable:"",onChange:f.search},{default:n(()=>[(i(!0),v(I,null,R(Q,(e,t)=>(i(),k(L,{key:t,label:e[1],value:e[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l($,{modelValue:o.searchVal.recommend,"onUpdate:modelValue":a[16]||(a[16]=e=>o.searchVal.recommend=e),class:"m-2",placeholder:"\u662F\u5426\u63A8\u8350",clearable:"",onChange:f.search},{default:n(()=>[(i(!0),v(I,null,R(Y,(e,t)=>(i(),k(L,{key:t,label:e[1],value:e[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l($,{modelValue:o.searchVal.mode,"onUpdate:modelValue":a[17]||(a[17]=e=>o.searchVal.mode=e),class:"m-2",placeholder:"\u662F\u5426\u6536\u8D39",clearable:"",onChange:f.search},{default:n(()=>[(i(!0),v(I,null,R(q,(e,t)=>(i(),k(L,{key:t,label:e[1],value:e[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l($,{modelValue:o.searchVal.line,"onUpdate:modelValue":a[18]||(a[18]=e=>o.searchVal.line=e),class:"m-2",placeholder:"\u64AD\u653E\u7EBF\u8DEF",clearable:"",onChange:f.search},{default:n(()=>[(i(!0),v(I,null,R(U.value,(e,t)=>(i(),k(L,{key:t,label:e.name,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),l(X,{modelValue:o.searchVal.keywords,"onUpdate:modelValue":a[19]||(a[19]=e=>o.searchVal.keywords=e),onChange:f.search},null,8,["modelValue","onChange"])])]),Ne((i(),k(ee,{data:o.data,class:"auto",stripe:!0,onSortChange:o.sortChnage,onSelectionChange:o.handleSelectionChange},{default:n(()=>[l(u,{type:"selection",width:"25"}),l(u,{prop:"id",label:"ID",width:"80",sortable:""},{default:n(({row:e,store:t})=>[w("div",{onClick:g=>t.toggleRowSelection(e,void 0)},h(e.id),9,Ke)]),_:1}),l(u,{label:"\u7F29\u7565\u56FE","min-width":"60"},{default:n(({row:e})=>[e.surfacePlot?(i(),k(Z,{key:0,src:e.surfacePlot,style:{width:"50px",height:"30px"}},null,8,["src"])):(i(),v("span",Qe,"-"))]),_:1}),l(u,{prop:"title",label:"\u540D\u79F0","min-width":"150","show-overflow-tooltip":!0}),l(u,{label:"\u5206\u7C7B","min-width":"120"},{default:n(({row:e})=>[d(h(e.categoryName)+h(e.childCategoryName?"/"+e.childCategoryName:""),1)]),_:1}),l(u,{prop:"actors",label:"\u4E3B\u6F14",width:"100","show-overflow-tooltip":!0}),l(u,{prop:"doubanScore",label:"\u8BC4\u5206","min-width":"80",sortable:""},{default:n(({row:e})=>[d(h(e.doubanScore?e.doubanScore/10:"-"),1)]),_:1}),l(u,{prop:"popularitySum",label:"\u4EBA\u6C14","min-width":"80",sortable:""}),l(u,{prop:"cycle",label:"\u8F6E\u64AD","min-width":"80",sortable:""},{default:n(({row:e})=>[d(h(e.cycle===1?"\u662F":"\u5426"),1)]),_:1}),l(u,{prop:"recommend",label:"\u63A8\u8350","min-width":"80",sortable:""},{default:n(({row:e})=>[d(h(e.recommend===1?"\u662F":"\u5426"),1)]),_:1}),l(u,{prop:"chargingMode",label:"\u6536\u8D39","min-width":"120",sortable:""},{default:n(({row:e})=>[d(h(e.buyMode===1?e.chargingMode===1?"\u6309\u90E8-\u514D\u8D39":e.chargingMode===2?"\u6309\u90E8-VIP\u514D\u8D39":e.chargingMode===3?"\u6309\u90E8-\u91D1\u5E01\u70B9\u64AD":"-":e.buyMode===2?"\u6309\u96C6":"-"),1)]),_:1}),l(u,{prop:"releaseAt",label:"\u4E0A\u6620\u65E5\u671F",type:"day",width:"150",sortable:""}),l(u,{prop:"shelfAt",label:"\u66F4\u65B0\u65F6\u95F4",type:"date",width:"150",sortable:""}),l(u,{fixed:"right",label:"\u64CD\u4F5C",align:"right","min-width":"180"},{default:n(({row:e})=>[l(_,{type:"primary",link:"",onClick:t=>{var g;return(g=P.value)==null?void 0:g.open(e,m.value)}},{default:n(()=>[d(" \u7EBF\u8DEF\u7BA1\u7406 ")]),_:2},1032,["onClick"]),l(_,{type:"primary",link:"",onClick:t=>{var g;return(g=S.value)==null?void 0:g.open(e,m.value)}},{default:n(()=>[d(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),l(_,{type:"danger",link:"",onClick:t=>f.del([e.id])},{default:n(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[le,o.loading]]),l(be,{pageinfo:y.value,onChange:o.load},null,8,["pageinfo","onChange"]),l(Le,{ref_key:"editorRef",ref:S,onLoad:o.load},null,8,["onLoad"]),l($e,{ref_key:"vodLineRef",ref:P,onLoad:o.load},null,8,["onLoad"]),l(we,{ref_key:"replaceRef",ref:E,onLoad:o.load},null,8,["onLoad"]),l(Ie,{ref_key:"lineRef",ref:G,onLoad:o.load},null,8,["onLoad"]),l(Re,{ref_key:"setAlbumRef",ref:A,onLoad:o.load},null,8,["onLoad"]),l(Ee,{ref_key:"setFeesRef",ref:D,onLoad:o.load},null,8,["onLoad"]),l(Se,{ref_key:"allDelVueRef",ref:N,onLoad:o.load},null,8,["onLoad"]),l(Me,{ref_key:"classVueRef",ref:B,onLoad:o.load},null,8,["onLoad"]),l(De,{ref_key:"batchVueRef",ref:M,onLoad:o.load},null,8,["onLoad"])])}}},ol=ae(Ye,[["__scopeId","data-v-bcded2dd"]]);export{ol as default};
