import{b as ne,d as se,c as U,f as T,h as R,a as fe,v as q,_ as G,i as K,l as W,j as X}from"./entry-5490c999.js";import"./el-table-column-a25f0439.js";import{P as J,E as _e,a as be}from"./pagination-5ca1e60a.js";import{_ as z,d as ye,e as ve,f as Ce,g as Fe,E as Ve,b as ke,h as xe,i as de,s as Ee,j as Be,c as De,k as we}from"./videoStar-ea710fef.js";import{E as ie}from"./el-date-picker-72643638.js";import{m as re}from"./message-26acb8b6.js";import{Y as $,b as D,Q as A,R as a,u as d,o as V,T as e,a5 as m,a as f,F as j,y as Ie,i as Q,c as S,K as N,X as oe,M as pe,L as ue,ad as Y,am as Z,an as ee,C as ce,V as I,h as Ae}from"./vue-5906fc2c.js";/* empty css                       */import{E as Se}from"./el-input-number-860f564c.js";import{E as $e}from"./el-progress-37d8b86e.js";import{a as Ne,b as Le,E as Me}from"./el-popover-dbd58a57.js";import{w as Ue}from"./wangEditor-8dd71e06.js";const ze={style:{display:"flex","align-items":"center",gap:"8px",width:"100%"}},Pe={__name:"allDel",emits:["load"],setup(x,{expose:E,emit:g}){const b=$({loading:!1,visible:!1,other:void 0}),y=D(),l=$({categoryId:[],collectionId:[],updateAtEnd:"",updateAtStart:"",tags:[]});D([]),D([]);const o=i=>{if(l.updateAtEnd)return i.getTime()>l.updateAtEnd.getTime()},v=i=>i.getTime()<new Date(l.updateAtStart).getTime(),p=()=>re({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u4F5C\u8005\u6570\u636E\u5220\u9664\u6210\u529F"},()=>y.value.validate((i,s)=>{var u;i&&(b.loading=!0,ye({collectionId:l.collectionId,updateAtStart:l.updateAtStart||void 0,updateAtEnd:l.updateAtEnd||void 0,categoryId:(u=l.categoryId)==null?void 0:u.map(t=>t.at(-1)),tags:l.tags||[]}).then(t=>{b.visible=!1}).finally(()=>{b.loading=!1}))})),k=()=>{var i;b.visible=!1,(i=y.value)==null||i.resetFields(),l.updateAtStart="",l.updateAtEnd="",l.tags=[],g("load")},F=()=>{};return E({open(i){b.visible=!0}}),(i,s)=>{const u=ne,t=ie,h=se,B=U,c=T;return V(),A(c,{"model-value":d(b).visible,"show-close":!d(b).loading,"close-on-press-escape":!1,title:"\u4E00\u952E\u5220\u9664",width:550,"z-index":20,top:"25vh","close-on-click-modal":!1,onClose:k,onOpened:F},{footer:a(()=>[e(B,{class:"ml-auto",size:"small",loading:d(b).loading,onClick:k},{default:a(()=>[m(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(B,{class:"ml-auto",size:"small",type:"primary",loading:d(b).loading,onClick:s[3]||(s[3]=C=>p())},{default:a(()=>[m(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:a(()=>[e(h,{ref_key:"ruleFormRef",ref:y,"label-width":"80px",model:d(l),rules:{},"hide-required-asterisk":!1},{default:a(()=>[e(u,{label:"\u4F5C\u8005\u5206\u7C7B",prop:"categoryId"},{default:a(()=>[e(z,{modelValue:d(l).categoryId,"onUpdate:modelValue":s[0]||(s[0]=C=>d(l).categoryId=C),style:{width:"100%"},type:"starType",placeholder:"\u9ED8\u8BA4\u5168\u90E8\u5206\u7C7B",checkStrictly:!0,props:{checkStrictly:!1,multiple:!0,emitPath:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"\u66F4\u65B0\u65F6\u95F4",prop:["updateAtStart","updateAtEnd"]},{default:a(()=>[f("div",ze,[e(t,{modelValue:d(l).updateAtStart,"onUpdate:modelValue":s[1]||(s[1]=C=>d(l).updateAtStart=C),type:"datetime",placeholder:"\u5F00\u59CB\u65E5\u671F",style:{flex:"1 1"},"disabled-date":o,format:"YYYY/MM/DD HH:mm:ss",clearable:!1},null,8,["modelValue"]),m(" ~ "),e(t,{modelValue:d(l).updateAtEnd,"onUpdate:modelValue":s[2]||(s[2]=C=>d(l).updateAtEnd=C),type:"datetime",style:{flex:"1 1"},"disabled-date":v,placeholder:"\u7ED3\u675F\u65E5\u671F",format:"YYYY/MM/DD HH:mm:ss",clearable:!1},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","show-close"])}}},Re=Pe,le=x=>(Z("data-v-3c232eaa"),x=x(),ee(),x),Te={style:{"max-height":"635px"}},qe={class:"flex-x-between tab-view"},je={class:"icon svg-icon","aria-hidden":"true",style:{width:"50px",height:"50px"}},Ye=le(()=>f("use",{"xlink:href":"#icon-morentouxiang1"},null,-1)),Oe=[Ye],He=le(()=>f("span",{style:{"margin-left":"16px"}},"CM",-1)),Ge=le(()=>f("span",{style:{"margin-left":"16px"}},"KG",-1)),Ke={class:"flex-x-between tab-view"},We={style:{"line-height":"32px"}},Xe=j({__name:"editor",emits:["load"],setup(x,{expose:E,emit:g}){const b=D(1),y=D(),l=$({birthday:0,categoriesId:void 0,categoryChildId:void 0,categoryPid:0,celebrityLike:"",chineseName:"",englishName:"",headImg:"",height:void 0,id:0,introduce:"",masterWork:"",nationality:"",nickName:"",popularity:void 0,profession:"",recommend:1,sex:3,weight:void 0,description:"",starSign:"",bloodType:"",school:"",nativePlace:""}),o=$({loading:!1,visible:!1,other:void 0}),v=Ie("debounce")(u=>{!u||u.validate(t=>{t&&(o.loading=!0,(l.id?ve(l):Ce(l)).then(()=>{var h;R({position:"bottom-right",type:"success",message:(h=o.other)!=null&&h.id?"\u4F5C\u8005\u66F4\u65B0\u6210\u529F":"\u4F5C\u8005\u65B0\u589E\u6210\u529F"}),g("load"),p()}).finally(()=>{o.loading=!1}))})},300),p=()=>{o.other=void 0,o.visible=!1},k={chineseName:{required:!0,message:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D",trigger:"blur"},headImg:{required:!1,message:"\u8BF7\u8F93\u5165\u5934\u50CF",trigger:"blur"},nationality:{required:!1,message:"\u8BF7\u8F93\u5165\u56FD\u7C4D",trigger:"blur"},profession:{required:!1,message:"\u8BF7\u8F93\u5165\u804C\u4E1A",trigger:"blur"},masterWork:{required:!1,message:"\u8BF7\u8F93\u5165\u4EE3\u8868\u4F5C",trigger:"blur"},englishName:{required:!1,message:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D",trigger:"blur"},nickName:{required:!1,message:"\u8BF7\u8F93\u5165\u522B\u540D",trigger:"blur"},height:{required:!1,message:"\u8BF7\u8F93\u5165\u8EAB\u9AD8",trigger:"blur"},weight:{required:!1,message:"\u8BF7\u8F93\u5165\u4F53\u91CD",trigger:"blur"},birthday:{required:!1,message:"\u8BF7\u8F93\u5165\u5C01\u9762",trigger:"blur"},celebrityLike:{required:!1,message:"\u8BF7\u8F93\u5165\u751F\u65E5",trigger:"blur"},popularity:{required:!1,message:"\u8BF7\u8F93\u5165\u4EBA\u6C14",trigger:"blur"},categoriesId:{required:!0,message:"\u8BF7\u9009\u62E9\u5206\u7C7B",trigger:"blur"},introduce:{required:!1,message:"\u8BF7\u9009\u62E9\u7B80\u4ECB",trigger:"blur"}},F=D([]);Fe({limit:9999}).then(u=>{F.value=u.list});function i(){var u,t;(u=o.other)!=null&&u.id?(o.loading=!0,xe((t=o.other)==null?void 0:t.id).then(h=>{Object.keys(l).forEach(B=>{switch(B){case"categoriesId":l.categoriesId=h.Categories.map(c=>({parentId:c.category_pid,childId:c.category_id}));break;default:l[B]=(h==null?void 0:h[B])||l[B]}})}).finally(()=>{o.loading=!1})):l.id=0}E({open(u){var t;(t=y.value)==null||t.resetFields(),l.description="",o.visible=!0,o.other=u}});const s=Q(()=>{var u;return(u=o.other)!=null&&u.id?"\u7F16\u8F91\u4F5C\u8005":"\u65B0\u589E\u4F5C\u8005"});return(u,t)=>{const h=Ne,B=Le,c=Y("MyImage"),C=$e,_=ne,n=fe,w=ie,P=Se,H=U,M=Ve,ae=ke,me=se,ge=T,he=q;return V(),S("div",null,[e(ge,{"model-value":o.visible,"show-close":!o.loading,"close-on-press-escape":!1,title:d(s),width:881,"z-index":20,"close-on-click-modal":!1,onClose:p,onOpened:i},{footer:a(()=>[e(H,{class:"ml-auto",size:"small",loading:o.loading,onClick:p},{default:a(()=>[m(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(H,{size:"small",loading:o.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:t[22]||(t[22]=r=>d(v)(y.value))},{default:a(()=>[m(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:a(()=>[N((V(),S("div",Te,[e(me,{ref_key:"ruleFormRef",ref:y,"label-width":"80px",model:l,rules:k,"hide-required-asterisk":!1},{default:a(()=>[e(B,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=r=>b.value=r),class:"demo-tabs",addable:!0,type:"card"},{default:a(()=>[f("div",null,[e(h,{label:"\u57FA\u672C\u4FE1\u606F",class:"flex-x-between tab-view",name:1}),e(h,{label:"\u8BE6\u7EC6\u4FE1\u606F",class:"flex-x-between tab-view",name:2})])]),_:1},8,["modelValue"]),e(oe,{name:"pages"},{default:a(()=>[N(f("div",qe,[f("div",null,[e(_,{label:"",style:{"margin-bottom":"0"}},{default:a(()=>[e(C,{class:"avatar-uploader",action:"/api/v1/upload","show-file-list":!1,data:{exts:"jpg,jpeg,png,gif"},"auto-upload":!0,accept:"image/jpg,image/jpeg,image/png,image/gif","on-success":r=>l.headImg=r.path,"on-error":r=>d(R)({position:"bottom-right",type:"error",message:JSON.parse(r.message).message})},{default:a(()=>[e(c,{placement:"bottom",trigger:"hover",src:l.headImg||"#icon-suijibofang",style:{width:"60px",height:"60px","background-color":"inherit"}},{default:a(()=>[(V(),S("svg",je,Oe))]),_:1},8,["src"])]),_:1},8,["on-success","on-error"])]),_:1}),e(_,{label:"\u5934\u50CF\u5730\u5740",prop:"headImg"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.headImg,"onUpdate:modelValue":t[1]||(t[1]=r=>l.headImg=r),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5934\u50CF\u5730\u5740"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u4E2D\u6587\u540D",prop:"chineseName"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.chineseName,"onUpdate:modelValue":t[2]||(t[2]=r=>l.chineseName=r),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4E2D\u6587\u540D"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u82F1\u6587\u540D",prop:"englishName"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.englishName,"onUpdate:modelValue":t[3]||(t[3]=r=>l.englishName=r),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u540D"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u522B\u540D",prop:"nickName"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.nickName,"onUpdate:modelValue":t[4]||(t[4]=r=>l.nickName=r),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u522B\u540D"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u5206\u7C7B",prop:"categoriesId"},{default:a(()=>{var r;return[o.loading?pe("",!0):(V(),A(z,{key:0,"model-value":(r=l.categoriesId)==null?void 0:r.map(L=>L.childId?[L.parentId,L.childId]:[L.parentId]),placeholder:"\u8BF7\u9009\u62E9\u4F5C\u8005\u5206\u7C7B",type:"starType",checkStrictly:!0,props:{checkStrictly:!0,multiple:!0,emitPath:!0},"onUpdate:modelValue":t[5]||(t[5]=L=>l.categoriesId=L.map(te=>({childId:te[1]||0,parentId:te[0]})))},null,8,["model-value"]))]}),_:1}),e(_,{label:"\u56FD\u7C4D",prop:"nationality"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.nationality,"onUpdate:modelValue":t[6]||(t[6]=r=>l.nationality=r),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u56FD\u7C4D,\u7528\u201C/\u201D\u5206\u9694"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u804C\u4E1A",prop:"profession"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.profession,"onUpdate:modelValue":t[7]||(t[7]=r=>l.profession=r),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u804C\u4E1A,\u7528\u201C/\u201D\u5206\u9694"},null,8,["modelValue"])]),_:1})]),f("div",null,[e(_,{label:"\u751F\u65E5",prop:"birthday"},{default:a(()=>[e(w,{modelValue:l.birthday,"onUpdate:modelValue":t[8]||(t[8]=r=>l.birthday=r),modelModifiers:{number:!0},type:"date",style:{width:"100%"},"value-format":"X",placeholder:"\u8BF7\u9009\u62E9\u751F\u65E5"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u8EAB\u9AD8",prop:"height"},{default:a(()=>[e(P,{spellcheck:"false",modelValue:l.height,"onUpdate:modelValue":t[9]||(t[9]=r=>l.height=r),modelModifiers:{number:!0},clearable:"",precision:0,"step-strictly":"",min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u8EAB\u9AD8"},null,8,["modelValue"]),He]),_:1}),e(_,{label:"\u4F53\u91CD",prop:"weight"},{default:a(()=>[e(P,{spellcheck:"false",modelValue:l.weight,"onUpdate:modelValue":t[10]||(t[10]=r=>l.weight=r),modelModifiers:{number:!0},clearable:"",precision:0,"step-strictly":"",min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u4F53\u91CD"},null,8,["modelValue"]),Ge]),_:1}),e(_,{label:"\u4EBA\u6C14",prop:"popularity"},{default:a(()=>[e(P,{spellcheck:"false",modelValue:l.popularity,"onUpdate:modelValue":t[11]||(t[11]=r=>l.popularity=r),modelModifiers:{number:!0},clearable:"",precision:0,"step-strictly":"",min:0,"controls-position":"right",placeholder:"\u8BF7\u8F93\u5165\u4EBA\u6C14",onClearable:t[12]||(t[12]=r=>l.popularitySum||(l.popularitySum=0))},null,8,["modelValue"]),e(H,{type:"primary",link:"",onClick:t[13]||(t[13]=r=>l.popularity=Math.ceil(Math.random()*10*100*(Math.random()*10)))},{default:a(()=>[m(" \u968F\u673A\u4EBA\u6C14 ")]),_:1})]),_:1}),e(_,{label:"\u6027\u522B",prop:"sex"},{default:a(()=>[e(ae,{modelValue:l.sex,"onUpdate:modelValue":t[14]||(t[14]=r=>l.sex=r)},{default:a(()=>[e(M,{label:1},{default:a(()=>[m(" \u7537 ")]),_:1}),e(M,{label:2},{default:a(()=>[m(" \u5973 ")]),_:1}),e(M,{label:3},{default:a(()=>[m(" \u672A\u77E5 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u63A8\u8350",prop:"recommend"},{default:a(()=>[e(ae,{modelValue:l.recommend,"onUpdate:modelValue":t[15]||(t[15]=r=>l.recommend=r)},{default:a(()=>[e(M,{label:1},{default:a(()=>[m(" \u662F ")]),_:1}),e(M,{label:2},{default:a(()=>[m(" \u5426 ")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u7B80\u4ECB",prop:"introduce"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.introduce,"onUpdate:modelValue":t[16]||(t[16]=r=>l.introduce=r),rows:7,type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u7B80\u4ECB"},null,8,["modelValue"])]),_:1})])],512),[[ue,b.value==1]])]),_:1}),e(oe,{name:"pages"},{default:a(()=>[N(f("div",null,[f("div",Ke,[f("div",null,[e(_,{label:"\u661F\u5EA7",prop:"starSign"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.starSign,"onUpdate:modelValue":t[17]||(t[17]=r=>l.starSign=r),placeholder:"\u8BF7\u8F93\u5165\u661F\u5EA7"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u8840\u578B",prop:"bloodType"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.bloodType,"onUpdate:modelValue":t[18]||(t[18]=r=>l.bloodType=r),placeholder:"\u8BF7\u8F93\u5165\u8840\u578B"},null,8,["modelValue"])]),_:1})]),f("div",null,[e(_,{label:"\u5B66\u6821",prop:"school"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.school,"onUpdate:modelValue":t[19]||(t[19]=r=>l.school=r),placeholder:"\u8BF7\u8F93\u5165\u5B66\u6821"},null,8,["modelValue"])]),_:1}),e(_,{label:"\u7C4D\u8D2F",prop:"nativePlace"},{default:a(()=>[e(n,{spellcheck:"false",modelValue:l.nativePlace,"onUpdate:modelValue":t[20]||(t[20]=r=>l.nativePlace=r),placeholder:"\u8BF7\u8F93\u5165\u7C4D\u8D2F"},null,8,["modelValue"])]),_:1})])]),e(_,{label:"\u8BE6\u60C5",prop:"content"},{default:a(()=>[f("div",We,[e(Ue,{"model-value":l.description,"onUpdate:modelValue":t[21]||(t[21]=r=>l.description=r==="<p><br></p>"?"":r),height:"400px",style:{"z-index":"9"}},null,8,["model-value"])])]),_:1})],512),[[ue,b.value==2]])]),_:1})]),_:1},8,["model"])])),[[he,o.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const Je=G(Xe,[["__scopeId","data-v-3c232eaa"]]),Qe=x=>(Z("data-v-71464301"),x=x(),ee(),x),Ze={class:"flex-y",style:{height:"100%"}},el={class:"flex-x-between"},ll={style:{display:"flex",gap:"8px",padding:"8px"}},al={class:"flex-x-center search"},tl=Qe(()=>f("span",{style:{flexShrink:0}},"\u5206\u7C7B",-1)),ol={key:1},ul={style:{display:"flex",gap:"8px",padding:"8px"}},nl={class:"flex-x-end dia-footer"},sl=j({__name:"addVideo",emits:["close"],setup(x,{expose:E,emit:g}){const b=D({pageIndex:1,pageSize:20,total:0}),y=D([]),l=$({loading:!1,data:[],selectList:[],searchVal:{categoryId:void 0,keywords:"",order:""},load(F){var i;b.value=F||b.value,l.loading=!0,l.selectList.length=0,de({page:b.value.pageIndex,limit:b.value.pageSize,skipCelebrityId:(i=o.other)==null?void 0:i.id,categoryId:y.value?y.value[y.value.length-1]:0,order:l.searchVal.order,keywords:l.searchVal.keywords}).then(s=>{l.data.length=0,Object.assign(l.data,s.list),b.value.total=s.total}).finally(()=>{l.loading=!1})},handleSelectionChange(F){l.selectList.length=0,Object.assign(l.selectList,F)},sortChnage({column:F,prop:i,order:s}){s?l.searchVal.order=`${i} ${s==="ascending"?"asc":"desc"}`:l.searchVal.order="",l.load()}}),o=$({visible:!1,other:void 0}),v=()=>{o.visible=!1,b.value.pageIndex=1,y.value=[],l.searchVal={},g("close")},p={search(){b.value.pageIndex=1,l.load()},add(F,i){var s,u;(s=o.other)!=null&&s.id&&Ee((u=o.other)==null?void 0:u.id,F.map(t=>t.id),i).then(()=>{l.load(),R({position:"bottom-right",type:"success",message:"\u6DFB\u52A0\u6210\u529F"})})}};E({open(F){o.other=F,o.visible=!0,b.value.pageIndex=1,l.load()}});const k=Q(()=>{var F,i,s,u;return(((i=(F=o.other)==null?void 0:F.chineseName)==null?void 0:i.length)>20?((s=o.other)==null?void 0:s.chineseName.substring(0,15))+"...":(u=o.other)==null?void 0:u.chineseName)+"\u7684\u5C0F\u8BF4\u5217\u8868"});return(F,i)=>{const s=U,u=Me,t=K,h=W,B=Y("MyImage"),c=X,C=T,_=q;return V(),A(C,{"model-value":d(o).visible,"show-close":!0,"close-on-press-escape":!1,"before-close":v,title:d(k),width:1100,"z-index":20,top:"20vh",style:{height:"65vh"},onClose:v},{default:a(()=>[N((V(),S("div",Ze,[f("header",el,[d(l).loading?pe("",!0):(V(),A(u,{key:0,placement:"bottom",trigger:"hover",width:"210px","popper-class":"not_pb",teleported:!1,disabled:d(l).selectList.length<1},{reference:a(()=>[e(s,{disabled:d(l).selectList.length<1},{default:a(()=>[m(" \u6279\u91CF\u7ED1\u5B9A ")]),_:1},8,["disabled"])]),default:a(()=>[f("div",ll,[e(s,{type:"primary",link:"",disabled:d(l).selectList.length===0,onClick:i[0]||(i[0]=n=>p.add(d(l).selectList,1))},{default:a(()=>[m(" \u7ED1\u5B9A\u6F14\u5458 ")]),_:1},8,["disabled"]),m(" / "),e(s,{type:"primary",link:"",disabled:d(l).selectList.length===0,style:{"margin-left":"0"},onClick:i[1]||(i[1]=n=>p.add(d(l).selectList,2))},{default:a(()=>[m(" \u7ED1\u5B9A\u5BFC\u6F14 ")]),_:1},8,["disabled"]),m(" / "),e(s,{type:"primary",link:"",disabled:d(l).selectList.length===0,style:{"margin-left":"0"},onClick:i[2]||(i[2]=n=>p.add(d(l).selectList,3))},{default:a(()=>[m(" \u90FD\u7ED1\u5B9A ")]),_:1},8,["disabled"])])]),_:1},8,["disabled"])),f("div",al,[tl,e(z,{modelValue:d(y),"onUpdate:modelValue":i[3]||(i[3]=n=>ce(y)?y.value=n:null),type:"novel",checkStrictly:!0,onChange:p.search},null,8,["modelValue","onChange"]),e(t,{modelValue:d(l).searchVal.keywords,"onUpdate:modelValue":i[4]||(i[4]=n=>d(l).searchVal.keywords=n),onBlur:p.search},null,8,["modelValue","onBlur"])])]),N((V(),A(c,{data:d(l).data,class:"auto",stripe:!1,border:!0,onSelectionChange:d(l).handleSelectionChange,onSortChange:d(l).sortChnage},{default:a(()=>[e(h,{type:"selection",width:"35"}),e(h,{prop:"id",label:"ID",width:"80"}),e(h,{label:"\u7F29\u7565\u56FE","min-width":"85"},{default:a(({row:n})=>[n.surfacePlot?(V(),A(B,{key:0,src:n.surfacePlot,style:{width:"50px",height:"30px"}},null,8,["src"])):(V(),S("span",ol,"-"))]),_:1}),e(h,{prop:"title",label:"\u540D\u79F0","min-width":"150"}),e(h,{label:"\u5206\u7C7B","min-width":"150"},{default:a(({row:n})=>[m(I(n.categoryName)+"/"+I(n.childCategoryName),1)]),_:1}),e(h,{prop:"popularitySum",label:"\u4EBA\u6C14","min-width":"80"}),e(h,{label:"\u6536\u8D39","min-width":"100"},{default:a(({row:n})=>[m(I(n.buyMode===1?n.chargingMode===1?"\u6309\u90E8-\u514D\u8D39":n.chargingMode===2?"\u6309\u90E8-VIP\u514D\u8D39":n.chargingMode===3?"\u6309\u90E8-\u91D1\u5E01\u70B9\u64AD":"-":n.buyMode===2?"\u6309\u96C6":"-"),1)]),_:1}),e(h,{prop:"releaseAt",label:"\u4E0A\u6620\u65E5\u671F",type:"day",width:"150",sortable:""}),e(h,{prop:"shelfAt",label:"\u66F4\u65B0\u65F6\u95F4",width:"150",type:"date"}),e(h,{fixed:"right",label:"\u64CD\u4F5C",align:"right","min-width":"55"},{default:a(({row:n})=>[e(u,{placement:"bottom",trigger:"hover",width:"auto","popper-class":"not_pb"},{reference:a(()=>[e(s,{type:"primary",link:""},{default:a(()=>[m(" \u7ED1\u5B9A ")]),_:1})]),default:a(()=>[f("div",ul,[e(s,{type:"primary",link:"",style:{"margin-left":"0"},onClick:w=>p.add([n],1)},{default:a(()=>[m(" \u7ED1\u5B9A\u6F14\u5458 ")]),_:2},1032,["onClick"]),m(" / "),e(s,{type:"primary",link:"",style:{"margin-left":"0"},onClick:w=>p.add([n],2)},{default:a(()=>[m(" \u7ED1\u5B9A\u5BFC\u6F14 ")]),_:2},1032,["onClick"]),m(" / "),e(s,{type:"primary",link:"",style:{"margin-left":"0"},onClick:w=>p.add([n],3)},{default:a(()=>[m(" \u90FD\u7ED1\u5B9A ")]),_:2},1032,["onClick"])])]),_:2},1024)]),_:1})]),_:1},8,["data","onSelectionChange","onSortChange"])),[[_,d(l).loading]]),f("div",nl,[e(J,{pageinfo:d(b),class:"ml-auto",onChange:d(l).load},null,8,["pageinfo","onChange"])])])),[[_,d(l).loading]])]),_:1},8,["model-value","title"])}}});const dl=G(sl,[["__scopeId","data-v-71464301"]]),il={class:"flex-y",style:{height:"70vh"}},rl={class:"flex-x-between search"},pl={class:"flex-x-center search",style:{margin:"0"}},cl=f("span",{style:{flexShrink:0}},"\u5206\u7C7B",-1),ml=["onClick"],gl={key:1},hl={class:"flex-x-end dia-footer"},fl=j({__name:"videoList",emits:["load"],setup(x,{expose:E,emit:g}){const b=D(),y=D({pageIndex:1,pageSize:20,total:0}),l=D([]),o=$({loading:!1,data:[],selectList:[],searchVal:{categoryId:void 0,keywords:"",order:""},load(i){var s;y.value=i||y.value,o.loading=!0,de({page:y.value.pageIndex,limit:y.value.pageSize,celebrityId:(s=v.other)==null?void 0:s.id,categoryId:l.value?l.value[l.value.length-1]:0,order:o.searchVal.order,keywords:o.searchVal.keywords}).then(u=>{o.data=u.list,y.value.total=u.total}).finally(()=>{o.loading=!1})},handleSelectionChange(i){o.selectList=i},sortChnage({column:i,prop:s,order:u}){u?o.searchVal.order=`${s} ${u==="ascending"?"asc":"desc"}`:o.searchVal.order="",o.load()}}),v=$({visible:!1,other:void 0}),p={search(){y.value.pageIndex=1,o.load()},del(i){var s,u;(s=v.other)!=null&&s.id&&(o.loading=!0,Be((u=v.other)==null?void 0:u.id,i).then(t=>{o.load(),R({position:"bottom-right",type:"success",message:"\u89E3\u7ED1\u6210\u529F"})}).catch(()=>{o.loading=!1}))},addClose(){y.value.pageIndex=1,o.load()}},k=()=>{v.visible=!1,y.value.pageIndex=1,l.value=[],o.searchVal={},g("load")};E({open(i){v.other=i,v.visible=!0,y.value.pageIndex=1,o.load()}});const F=Q(()=>{var i,s,u,t;return(((s=(i=v.other)==null?void 0:i.chineseName)==null?void 0:s.length)>20?((u=v.other)==null?void 0:u.chineseName.substring(0,15))+"...":(t=v.other)==null?void 0:t.chineseName)+"\u7684\u5C0F\u8BF4\u5217\u8868"});return(i,s)=>{const u=U,t=K,h=W,B=Y("MyImage"),c=X,C=T,_=q;return V(),A(C,{"model-value":d(v).visible,"show-close":!0,"close-on-press-escape":!1,title:d(F),width:1200,"z-index":20,"close-on-click-modal":!1,onClose:k},{default:a(()=>[N((V(),S("div",il,[f("header",rl,[f("div",null,[e(u,{type:"primary",onClick:s[0]||(s[0]=n=>{var w;return(w=d(b))==null?void 0:w.open(d(v).other)})},{default:a(()=>[m(" \u7ED1\u5B9A\u5C0F\u8BF4 ")]),_:1}),e(u,{disabled:d(o).selectList.length<1,onClick:s[1]||(s[1]=n=>p.del(d(o).selectList.map(w=>w.id)))},{default:a(()=>[m(" \u6279\u91CF\u89E3\u7ED1 ")]),_:1},8,["disabled"])]),f("div",pl,[cl,e(z,{modelValue:d(l),"onUpdate:modelValue":s[2]||(s[2]=n=>ce(l)?l.value=n:null),type:"novel",checkStrictly:!0,onChange:p.search},null,8,["modelValue","onChange"]),e(t,{modelValue:d(o).searchVal.keywords,"onUpdate:modelValue":s[3]||(s[3]=n=>d(o).searchVal.keywords=n),onBlur:p.search},null,8,["modelValue","onBlur"])])]),e(c,{data:d(o).data,class:"auto",stripe:!1,border:!0,onSortChange:d(o).sortChnage,onSelectionChange:d(o).handleSelectionChange},{default:a(()=>[e(h,{type:"selection",width:"55"}),e(h,{prop:"id",label:"ID",width:"100"},{default:a(({row:n,store:w})=>[f("div",{onClick:P=>w.toggleRowSelection(n,void 0)},I(n.id),9,ml)]),_:1}),e(h,{label:"\u7F29\u7565\u56FE","min-width":"100"},{default:a(({row:n})=>[n.surfacePlot?(V(),A(B,{key:0,src:n.surfacePlot,style:{width:"50px",height:"30px"}},null,8,["src"])):(V(),S("span",gl,"-"))]),_:1}),e(h,{prop:"title",label:"\u540D\u79F0","show-overflow-tooltip":!0,"min-width":"150"}),e(h,{label:"\u5206\u7C7B","min-width":"150"},{default:a(({row:n})=>[m(I(n.categoryName)+"/"+I(n.childCategoryName),1)]),_:1}),e(h,{prop:"popularitySum",label:"\u4EBA\u6C14","min-width":"80"}),e(h,{label:"\u6536\u8D39","min-width":"100"},{default:a(({row:n})=>[m(I(n.buyMode===1?n.chargingMode===1?"\u6309\u90E8-\u514D\u8D39":n.chargingMode===2?"\u6309\u90E8-VIP\u514D\u8D39":n.chargingMode===3?"\u6309\u90E8-\u91D1\u5E01\u70B9\u64AD":"-":n.buyMode===2?"\u6309\u96C6":"-"),1)]),_:1}),e(h,{prop:"releaseAt",label:"\u4E0A\u6620\u65E5\u671F",type:"day",width:"150",sortable:""}),e(h,{prop:"shelfAt",label:"\u66F4\u65B0\u65F6\u95F4",width:"150",type:"date"}),e(h,{fixed:"right",label:"\u64CD\u4F5C",align:"right","min-width":"60"},{default:a(({row:n})=>[e(u,{type:"danger",link:"",onClick:w=>p.del([n.id])},{default:a(()=>[m(" \u89E3\u7ED1 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"]),f("div",hl,[e(J,{pageinfo:d(y),class:"ml-auto",onChange:d(o).load},null,8,["pageinfo","onChange"])])])),[[_,d(o).loading]]),e(dl,{ref_key:"addVideoRef",ref:b,onClose:p.addClose},null,8,["onClose"])]),_:1},8,["model-value","title"])}}}),O=x=>(Z("data-v-aa80b14a"),x=x(),ee(),x),_l={class:"flex-y box"},bl={class:"flex-x-between search"},yl={class:"flex-center",style:{gap:"16px","font-size":"12px"}},vl=O(()=>f("span",{style:{flexShrink:0}},"\u662F\u5426\u63A8\u8350",-1)),Cl=O(()=>f("span",{style:{flexShrink:0}},"\u5206\u7C7B",-1)),Fl=O(()=>f("span",{style:{flexShrink:0}},"\u6027\u522B",-1)),Vl=["onClick"],kl={class:"flex-x-center"},xl={key:1,class:"icon svg-icon","aria-hidden":"true",style:{width:"50px",height:"38px"}},El=O(()=>f("use",{"xlink:href":"#icon-morentouxiang1"},null,-1)),Bl=[El],Dl=j({__name:"index",setup(x){const E=D({pageIndex:1,pageSize:20,total:0}),g=$({loading:!1,data:[],searchVal:{keywords:"",order:"updateAt desc",categoryId:void 0,sex:void 0,recommend:void 0},selectList:[],load(v){E.value=v||E.value,g.loading=!0,De({page:E.value.pageIndex,limit:E.value.pageSize,...g.searchVal}).then(p=>{g.data=p.list,E.value.total=p.total}).finally(()=>{g.loading=!1})},handleSelectionChange(v){g.selectList=v},sortChnage({column:v,prop:p,order:k}){k?g.searchVal.order=`${p} ${k==="ascending"?"asc":"desc"}`:g.searchVal.order="",g.load()}}),b=D(),y=D(),l={del:v=>re({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u4F5C\u8005\u5220\u9664\u6210\u529F"},()=>we(v).then(p=>(g.load(),p))),search:()=>{E.value.pageIndex=1,g.load()}},o=D();return Ae(()=>{g.load()}),(v,p)=>{const k=U,F=_e,i=be,s=K,u=W,t=Y("MyImage"),h=X,B=q;return V(),S("div",_l,[f("div",bl,[f("div",null,[e(k,{type:"primary",onClick:p[0]||(p[0]=c=>{var C;return(C=y.value)==null?void 0:C.open({})})},{default:a(()=>[m(" \u65B0\u589E\u4F5C\u8005 ")]),_:1}),e(k,{onClick:p[1]||(p[1]=c=>{var C;return(C=b.value)==null?void 0:C.open({})})},{default:a(()=>[m(" \u4E00\u952E\u5220\u9664 ")]),_:1}),e(k,{type:"danger",disabled:g.selectList.length<=0,onClick:p[2]||(p[2]=c=>l.del(g.selectList.map(C=>C.id)))},{default:a(()=>[m(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])]),f("div",yl,[vl,e(i,{modelValue:g.searchVal.recommend,"onUpdate:modelValue":p[3]||(p[3]=c=>g.searchVal.recommend=c),class:"page-size",clearable:"",style:{width:"64px"},onChange:l.search},{default:a(()=>[e(F,{label:"\u662F",value:1}),e(F,{label:"\u5426",value:2})]),_:1},8,["modelValue","onChange"]),Cl,e(z,{type:"starType",checkStrictly:!0,"model-value":g.searchVal.categoryId||[],onChange:p[4]||(p[4]=c=>{g.searchVal.categoryId=c?c[c.length-1]:void 0,l.search()})},null,8,["model-value"]),Fl,e(i,{modelValue:g.searchVal.sex,"onUpdate:modelValue":p[5]||(p[5]=c=>g.searchVal.sex=c),class:"page-size",style:{width:"64px"},clearable:"",onChange:l.search},{default:a(()=>[e(F,{label:"\u7537",value:1}),e(F,{label:"\u5973",value:2}),e(F,{label:"\u672A\u77E5",value:3})]),_:1},8,["modelValue","onChange"]),e(s,{modelValue:g.searchVal.keywords,"onUpdate:modelValue":p[6]||(p[6]=c=>g.searchVal.keywords=c),onChange:l.search},null,8,["modelValue","onChange"])])]),N((V(),A(h,{data:g.data,class:"auto",stripe:!0,onSortChange:g.sortChnage,onSelectionChange:g.handleSelectionChange},{default:a(()=>[e(u,{type:"selection",width:"30"}),e(u,{prop:"id",label:"ID"},{default:a(({row:c,store:C})=>[f("div",{onClick:_=>C.toggleRowSelection(c,void 0)},I(c.id),9,Vl)]),_:1}),e(u,{label:"\u5934\u50CF","min-width":"80",align:"center"},{default:a(({row:c})=>[f("div",kl,[c.headImg?(V(),A(t,{key:0,src:c.headImg,style:{width:"50px",height:"38px"}},null,8,["src"])):(V(),S("svg",xl,Bl))])]),_:1}),e(u,{prop:"chineseName",label:"\u4E2D\u6587\u540D","min-width":"150","show-overflow-tooltip":!0}),e(u,{label:"\u5206\u7C7B",prop:"categoryName","min-width":"150"},{default:a(({row:c})=>[m(I(c.categoryName&&c.categoryName.length>0?c.categoryName.join(","):"-"),1)]),_:1}),e(u,{prop:"englishName",label:"\u82F1\u6587\u540D","min-width":"150","show-overflow-tooltip":!0}),e(u,{prop:"nickName",label:"\u522B\u540D","min-width":"150","show-overflow-tooltip":!0}),e(u,{prop:"video_num",label:"\u4EE3\u8868\u4F5C\u6570\u91CF","min-width":"150"}),e(u,{prop:"popularity",label:"\u4EBA\u6C14","min-width":"100"}),e(u,{prop:"nationality",label:"\u56FD\u7C4D","min-width":"100"}),e(u,{prop:"recommend",label:"\u63A8\u8350","min-width":"80"},{default:a(({row:c})=>[m(I(c.recommend===1?"\u662F":"\u5426"),1)]),_:1}),e(u,{prop:"userName",label:"\u6027\u522B","min-width":"50"},{default:a(({row:c})=>[m(I(c.sex===1?"\u7537":c.sex===2?"\u5973":"\u672A\u77E5"),1)]),_:1}),e(u,{prop:"updateAt",label:"\u66F4\u65B0\u65F6\u95F4",type:"date",width:"150",sortable:""}),e(u,{fixed:"right",label:"\u64CD\u4F5C",align:"right","min-width":"170"},{default:a(({row:c})=>[e(k,{type:"primary",link:"",onClick:C=>{var _;return(_=o.value)==null?void 0:_.open(c)}},{default:a(()=>[m(" \u5C0F\u8BF4\u7BA1\u7406 ")]),_:2},1032,["onClick"]),e(k,{type:"primary",link:"",onClick:C=>{var _;return(_=y.value)==null?void 0:_.open(c)}},{default:a(()=>[m(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(k,{type:"danger",link:"",onClick:C=>l.del([c.id])},{default:a(()=>[m(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[B,g.loading]]),e(J,{pageinfo:E.value,onChange:g.load},null,8,["pageinfo","onChange"]),e(Je,{ref_key:"editorRef",ref:y,onLoad:g.load},null,8,["onLoad"]),e(fl,{ref_key:"videoListRef",ref:o,onLoad:g.load},null,8,["onLoad"]),e(Re,{ref_key:"allDelVueRef",ref:b,onLoad:g.load},null,8,["onLoad"])])}}});const Tl=G(Dl,[["__scopeId","data-v-aa80b14a"]]);export{Tl as default};
