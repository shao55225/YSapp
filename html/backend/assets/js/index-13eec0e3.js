import{R as se,_ as fe,E as Me,b as Ie,c as Se,N as Ut,bX as Nt,d as tt,f as ot,h as nt,i as Be,j as ye,k as Ce,v as at,bV as Fo,S as So,g as po,t as Ht,s as lt,w as fo,C as Ge,m as rt,o as st,T as Bo,b8 as To}from"./entry-9cc5c370.js";import{P as Vo}from"./pagination-db6078c7.js";/* empty css                        *//* empty css                   */import{p as Oo}from"./plugHeader-c50619f4.js";/* empty css                          */import{a as j,Z as oe,z as ge,e as Qe,l as P,m as $,U as i,S as p,u,a6 as O,L as it,G as We,ag as $o,p as N,P as de,af as ue,R as X,W as ee,ap as dt,aq as ut,Q as we,n as $e,ac as Bt,O as le,V as Ro,d as je,X as Lo,D as mo,y as ho}from"./vue-11eabec3.js";import{E as Uo}from"./el-cascader-panel-27ac6c37.js";/* empty css                   */import{E as jt,a as zt,b as qt}from"./el-dropdown-item-8093790a.js";import{E as Kt}from"./index-0abbf098.js";import{E as go}from"./index-bf5a11eb.js";/* empty css                      */import"./index-971e6ee4.js";/* empty css                                                                   */import"./arrays-2e03ed1f.js";const No=()=>se({url:"/custom/pay/disposition/all",method:"get"}),Ho=r=>se({url:"/custom/pay/disposition/"+r,method:"get"}),jo=r=>se({url:"/custom/pay/disposition",method:"post",data:r}),zo=r=>se({url:"/custom/pay/disposition",method:"put",data:r}),qo=r=>se({url:"/custom/pay/disposition/"+r,method:"delete"}),Ko=r=>se({url:"/custom/pay/disposition/bind",method:"post",data:r}),Go=()=>se({url:"/custom/pay/disposition/parameterType",method:"get"}),Wo=()=>se({url:"/custom/pay/disposition/constant",method:"get"}),Xo=()=>se({url:"/custom/pay/disposition/parameterVal",method:"get"}),et=r=>se({url:"/custom/pay/disposition/quote/"+r,method:"get"}),Zo=r=>se({url:"/custom/pay/disposition/responseVal/"+r,method:"get"}),Gt=r=>se({url:`/custom/pay/argument/${r}/all`,method:"get"}),Jo=r=>se({url:"/custom/pay/argument",method:"post",data:r}),Yo=r=>se({url:"/custom/pay/argument/"+r.id,method:"put",data:r}),Tt=r=>se({url:"/custom/pay/argument/"+r,method:"get"}),Qo=r=>se({url:"/custom/pay/argument/"+r,method:"delete"}),en=r=>se({url:"/custom/pay/sign/all/"+r,method:"get"}),tn=r=>se({url:"/custom/pay/sign",method:"post",data:r}),on=r=>se({url:"/custom/pay/sign/"+r.id,method:"put",data:r}),nn=r=>se({url:"/custom/pay/sign/"+r,method:"get"}),an=r=>se({url:"/custom/pay/sign/"+r,method:"delete"}),ln=(r,e)=>se({url:"/custom/pay/interface/"+e,method:"post",data:r}),_t=(r,e)=>se({url:"/custom/pay/interface/"+e+"/"+r,method:"get"}),rn=(r,e)=>se({url:"/custom/pay/interface/"+e+"/"+r.id,method:"put",data:r}),yo=(r,e)=>se({url:`/payCfg/create/${e}`,method:"post",data:r}),_o=r=>se({url:`/payCfg/${r}`,method:"get"});const sn={class:"hhhh"},dn={__name:"addPay",props:["editAliPayRef","editWxPayRef"],emits:["load"],setup(r,{expose:e,emit:t}){const n=r,a=j(),o=oe({title:"",clientId:[],ceilingAmount:0,minimumAmount:0,state:1,payType:"custom",payConfigId:0}),l=oe({loading:!1,visible:!1,other:void 0}),s=w=>{switch(w){case"alipay":o.payConfigId=n.editAliPayRef.formId,n.editAliPayRef.open(o.payConfigId);break;case"wechat":o.payConfigId=n.editWxPayRef.formId,n.editWxPayRef.open(o.payConfigId);break}},d=ge("debounce")(w=>{!w||(o.payType==="wechat"?o.payConfigId=n.editWxPayRef.formId:o.payType==="alipay"?o.payConfigId=n.editAliPayRef.formId:o.payConfigId=0,w.validate(_=>{_&&(l.loading=!0,jo({...o,clientWeb:o.clientId.includes("Web")?1:2,clientH5:o.clientId.includes("H5")?1:2,clientAPP:o.clientId.includes("App")?1:2}).then(()=>{Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),t("load"),h()}).finally(()=>{l.loading=!1}))}))},300),h=()=>{var w,_;(w=n.editAliPayRef)==null||w.clearFrom(),(_=n.editWxPayRef)==null||_.clearFrom(),o.payType="custom",l.other=void 0,l.visible=!1},f=oe({title:{required:!0,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"blur"},payConfigId:[{validator:(w,_,M)=>{console.log("12312312312312"),o.payType!=="custom"&&_===0?(console.log("123123"),M(new Error("\u8BF7\u4FDD\u5B58\u652F\u4ED8\u7C7B\u578B"))):M()},trigger:"blur"}]});function y(){}e({open(w){var _,M;(_=a.value)==null||_.resetFields(),l.visible=!0,l.other=w,o.id=(M=l.other)==null?void 0:M.id}});const g=Qe(()=>{var w;return(w=l.other)!=null&&w.id?"\u7F16\u8F91\u652F\u4ED8":"\u65B0\u589E\u652F\u4ED8"});return(w,_)=>{const M=Ie,x=Se,A=Ut,T=Nt,k=tt,v=ot,m=nt,C=Be,I=ye,R=Ce,U=at;return P(),$("div",sn,[i(R,{"model-value":u(l).visible,"show-close":!u(l).loading,"close-on-press-escape":!1,title:u(g),width:460,"z-index":20,"close-on-click-modal":!1,onClose:h,onOpened:y},{footer:p(()=>[i(I,{class:"ml-auto",size:"small",loading:u(l).loading,onClick:h},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(I,{size:"small",loading:u(l).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:_[9]||(_[9]=b=>u(d)(u(a)))},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[it((P(),$("div",null,[i(C,{ref_key:"ruleFormRef",ref:a,"label-width":"80px",model:u(o),rules:u(f),"hide-required-asterisk":!1},{default:p(()=>[i(x,{label:"\u652F\u4ED8\u540D\u79F0",prop:"title"},{default:p(()=>[i(M,{spellcheck:"false",modelValue:u(o).title,"onUpdate:modelValue":_[0]||(_[0]=b=>u(o).title=b),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6E20\u9053\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(x,{label:"\u4E0A\u9650\u91D1\u989D",prop:"ceilingAmount"},{default:p(()=>[i(M,{spellcheck:"false",modelValue:u(o).ceilingAmount,"onUpdate:modelValue":_[1]||(_[1]=b=>u(o).ceilingAmount=b),modelModifiers:{trim:!0,number:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4E0A\u7EBF\u91D1\u989D"},null,8,["modelValue"])]),_:1}),i(x,{label:"\u4E0B\u9650\u91D1\u989D",prop:"minimumAmount"},{default:p(()=>[i(M,{spellcheck:"false",modelValue:u(o).minimumAmount,"onUpdate:modelValue":_[2]||(_[2]=b=>u(o).minimumAmount=b),modelModifiers:{trim:!0,number:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u4E0B\u7EBF\u91D1\u989D"},null,8,["modelValue"])]),_:1}),i(x,{label:"\u9002\u7528\u5BA2\u6237\u7AEF",prop:"clientId"},{default:p(()=>[i(T,{modelValue:u(o).clientId,"onUpdate:modelValue":_[3]||(_[3]=b=>u(o).clientId=b)},{default:p(()=>[i(A,{label:"Web"}),i(A,{label:"H5"}),i(A,{label:"App"})]),_:1},8,["modelValue"])]),_:1}),i(x,{label:"\u652F\u4ED8\u7C7B\u578B",prop:"payConfigId"},{default:p(()=>[i(v,{modelValue:u(o).payType,"onUpdate:modelValue":_[7]||(_[7]=b=>u(o).payType=b),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:p(()=>[i(k,{onClick:_[4]||(_[4]=b=>s("wechat")),label:"\u5FAE\u4FE1",value:"wechat"}),i(k,{onClick:_[5]||(_[5]=b=>s("alipay")),label:"\u652F\u4ED8\u5B9D",value:"alipay"}),i(k,{onClick:_[6]||(_[6]=b=>s("value")),label:"\u81EA\u5B9A\u4E49",value:"custom"})]),_:1},8,["modelValue"])]),_:1}),i(x,{label:"\u652F\u4ED8\u72B6\u6001",prop:"state"},{default:p(()=>[i(m,{modelValue:u(o).state,"onUpdate:modelValue":_[8]||(_[8]=b=>u(o).state=b),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])),[[U,u(l).loading]])]),_:1},8,["model-value","show-close","title"])])}}},un=fe(dn,[["__scopeId","data-v-56afd64b"]]),cn={style:{padding:"24px 0"}},pn={class:"footer"},fn=We({__name:"bindSite",emits:["load"],setup(r,{expose:e,emit:t}){const n=oe({id:null,siteId:[],key:void 0}),a=()=>{n.siteId=[],n.key=void 0,o.visible=!1},o=oe({loading:!1,visible:!1,siteOption:[]}),l=()=>{o.loading=!0,So({keywords:n.key}).then(h=>{o.siteOption=h.list}).finally(()=>o.loading=!1)},s=()=>{o.loading=!0,Ko({id:n.id,siteIds:n.siteId}).then(h=>{Me({position:"bottom-right",type:"success",message:"\u521B\u5EFA\u6210\u529F"}),t("load"),a()}).finally(()=>o.loading=!1)};return e({openModal:async h=>{await l(),h&&(n.id=h.id,n.siteId=h.sites.map(c=>c.id)),o.visible=!0}}),(h,c)=>{const f=Ie,y=Ut,g=Nt,w=ye,_=Ce;return P(),$("div",null,[i(_,{"model-value":u(o).visible,"show-close":!u(o).loading,"close-on-press-escape":!1,title:"\u7ED1\u5B9A\u7AD9\u70B9",width:460,"z-index":20,"close-on-click-modal":!1,onClose:a},{default:p(()=>[i(f,{modelValue:u(n).key,"onUpdate:modelValue":c[0]||(c[0]=M=>u(n).key=M),size:"large",onBlur:l,onKeyup:$o(l,["enter"]),onClear:l,placeholder:"\u641C\u7D22\u7AD9\u70B9\u540D\u79F0","prefix-icon":u(Fo)},null,8,["modelValue","onKeyup","prefix-icon"]),N("div",cn,[i(g,{modelValue:u(n).siteId,"onUpdate:modelValue":c[1]||(c[1]=M=>u(n).siteId=M)},{default:p(()=>[(P(!0),$(de,null,ue(u(o).siteOption,M=>(P(),X(y,{label:M.id},{default:p(()=>[O(ee(M.name),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])]),N("div",pn,[i(w,{onClick:a},{default:p(()=>[O("\u53D6\u6D88")]),_:1}),i(w,{onClick:s,loading:u(o).loading,type:"primary"},{default:p(()=>[O("\u786E\u5B9A")]),_:1},8,["loading"])])]),_:1},8,["model-value","show-close"])])}}});const mn=fe(fn,[["__scopeId","data-v-31aa3574"]]),vt=r=>(dt("data-v-3533528a"),r=r(),ut(),r),hn=vt(()=>N("span",{style:{"font-size":"12px",margin:"0 18px 0 6px"}},"\u5143",-1)),gn=vt(()=>N("span",{class:"ps"},"\u6536\u6B3E\u91D1\u989D",-1)),yn=vt(()=>N("span",{style:{"font-size":"12px",margin:"0 18px 0 6px"}},"\u5143",-1)),_n=vt(()=>N("span",{class:"ps"},"\u6536\u6B3E\u91D1\u989D",-1)),vn=We({__name:"editAliPay",emits:["load"],setup(r,{expose:e,emit:t}){const n=j(),a=j(0),o=oe({dayMaxMoney:void 0,onceMaxMoney:void 0,sort:0,name:"",appId:"",publicKey:"",privateKey:"",status:1}),l=oe({loading:!1,visible:!1,other:void 0}),s=ge("debounce")(y=>{!y||y.validate(g=>{g&&(l.loading=!0,yo({...o,id:l.other.id,dayMaxMoney:o.dayMaxMoney?o.dayMaxMoney*100:void 0,onceMaxMoney:o.onceMaxMoney?o.onceMaxMoney*100:void 0,alipay:{appId:o.appId,privateKey:o.privateKey,publicKey:o.publicKey}},1).then(w=>{var _;Me({position:"bottom-right",type:"success",message:(_=l.other)!=null&&_.id?"\u914D\u7F6E\u66F4\u65B0\u6210\u529F":"\u914D\u7F6E\u65B0\u589E\u6210\u529F"}),a.value=w,d()}).finally(()=>{l.loading=!1}))})},300),d=()=>{l.other=void 0,l.visible=!1},h={};function c(){var y,g,w,_,M,x,A,T;Object.keys(o).forEach(k=>{var v,m;((v=l.other)==null?void 0:v[k])!==void 0&&(o[k]=(m=l.other)==null?void 0:m[k])}),o.dayMaxMoney=(y=l.other)!=null&&y.dayMaxMoney?((g=l.other)==null?void 0:g.dayMaxMoney)/100:void 0,o.onceMaxMoney=(w=l.other)!=null&&w.onceMaxMoney?((_=l.other)==null?void 0:_.onceMaxMoney)/100:void 0,o.id=(M=l.other)==null?void 0:M.id,o.appId=(x=l.other)==null?void 0:x.AliPay.appId,o.publicKey=(A=l.other)==null?void 0:A.AliPay.publicKey,o.privateKey=(T=l.other)==null?void 0:T.AliPay.privateKey}e({open(y){var g;y?_o(y).then(w=>{l.visible=!0,l.other=w}):((g=n.value)==null||g.resetFields(),l.visible=!0,l.other={})},formId:a,clearFrom(){a.value=0}});const f=Qe(()=>{var y;return(y=l.other)!=null&&y.id?"\u7F16\u8F91\u914D\u7F6E":"\u65B0\u589E\u914D\u7F6E"});return(y,g)=>{const w=Ie,_=Se,M=po,x=nt,A=Be,T=ye,k=Ce,v=at;return P(),$("div",null,[i(k,{"model-value":l.visible,"show-close":!l.loading,"close-on-press-escape":!1,title:u(f),width:450,"z-index":20,"close-on-click-modal":!1,onClose:d,onOpened:c},{footer:p(()=>[i(T,{class:"ml-auto",loading:l.loading,onClick:d},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(T,{loading:l.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:g[8]||(g[8]=m=>u(s)(n.value))},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[it((P(),$("div",null,[i(A,{ref_key:"ruleFormRef",ref:n,"label-width":"80px",model:o,rules:h,"hide-required-asterisk":!1},{default:p(()=>[i(_,{label:"\u914D\u7F6E\u540D\u79F0",prop:"name",rules:{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"}},{default:p(()=>[i(w,{modelValue:o.name,"onUpdate:modelValue":g[0]||(g[0]=m=>o.name=m),modelModifiers:{trim:!0},clearable:"",class:"input",placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},prop:"appId",label:"\u5E94\u7528ID"},{default:p(()=>[i(w,{modelValue:o.appId,"onUpdate:modelValue":g[1]||(g[1]=m=>o.appId=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u516C\u94A5"},prop:"publicKey",label:"\u516C\u94A5"},{default:p(()=>[i(w,{modelValue:o.publicKey,"onUpdate:modelValue":g[2]||(g[2]=m=>o.publicKey=m),clearable:"",rows:1,type:"textarea",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u516C\u94A5"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u79C1\u94A5"},prop:"privateKey",label:"\u79C1\u94A5"},{default:p(()=>[i(w,{modelValue:o.privateKey,"onUpdate:modelValue":g[3]||(g[3]=m=>o.privateKey=m),clearable:"",rows:1,type:"textarea",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u79C1\u94A5"},null,8,["modelValue"])]),_:1}),i(_,{prop:"dayMaxMoney",label:"\u5355\u65E5\u6700\u9AD8"},{default:p(()=>[i(M,{modelValue:o.dayMaxMoney,"onUpdate:modelValue":g[4]||(g[4]=m=>o.dayMaxMoney=m),modelModifiers:{number:!0},clearable:"",precision:0,"step-strictly":"",min:0,"controls-position":"right",placeholder:"\u5355\u65E5\u6700\u9AD8"},null,8,["modelValue"]),hn,gn]),_:1}),i(_,{prop:"onceMaxMoney",label:"\u5355\u7B14\u6700\u9AD8",rules:{validator:(m,C,I)=>{o.onceMaxMoney&&o.onceMaxMoney>o.dayMaxMoney?I("\u5355\u7B14\u6700\u9AD8\u4E0D\u80FD\u5927\u4E8E\u5355\u65E5\u6700\u9AD8\u6536\u6B3E\u91D1\u989D"):I()},trigger:"blur"}},{default:p(()=>[i(M,{modelValue:o.onceMaxMoney,"onUpdate:modelValue":g[5]||(g[5]=m=>o.onceMaxMoney=m),modelModifiers:{number:!0},clearable:"",precision:0,class:"w80","step-strictly":"",min:0,"controls-position":"right",placeholder:"\u5355\u7B14\u6700\u9AD8"},null,8,["modelValue"]),yn,_n]),_:1},8,["rules"]),i(_,{prop:"sort",label:"\u5E8F\u53F7"},{default:p(()=>[i(M,{modelValue:o.sort,"onUpdate:modelValue":g[6]||(g[6]=m=>o.sort=m),modelModifiers:{number:!0},clearable:"",precision:0,class:"w80","step-strictly":"",min:1,"controls-position":"right",placeholder:"\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),i(_,{label:"\u72B6\u6001",prop:"status"},{default:p(()=>[i(x,{modelValue:o.status,"onUpdate:modelValue":g[7]||(g[7]=m=>o.status=m),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])),[[v,l.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const bn=fe(vn,[["__scopeId","data-v-3533528a"]]);const Cn={class:"hhhh"},wn={style:{padding:"24px"}},xn={style:{"font-weight":"700"}},kn={style:{display:"flex","align-items":"center",height:"32px"}},In={class:"el-dropdown-link"},Dn={key:0,class:"input-box input-color2",style:{color:"#4c83ff"}},En={class:"el-dropdown-link input-color2"},Pn={__name:"EditParamModal",emits:["load"],setup(r,{expose:e,emit:t}){const n=j(),a=j(),o=oe({text:"",var:[{quote:"",type:"input"}]}),l=j([]),s=j({}),d=oe({loading:!1,visible:!1,other:null,type:""}),h=ge("editPayForm"),c=oe({loading:!1,visible:!1}),f=j(null),y=async()=>{await et(h.payId||h.id).then(m=>{l.value=m[0].child||[];const C={};w(l.value,C),s.value=C})},g=async m=>{c.visible=!0,m&&$e(async()=>{await n.value.initSign({id:m})})},w=(m,C)=>{m.forEach(I=>{C[I.key]=I.title,I.child instanceof Array&&w(I.child,C)})},_=async()=>{try{c.loading=!0;const m=await n.value.saveSign();console.log(m,"calcID"),f.value.quote="IyCalc",f.value.value=m||null,await y(),c.loading=!1,M()}catch{throw c.loading=!1,new Error("SendHeader,eror")}},M=()=>{f.value=null,c.visible=!1},x=(m,C)=>{for(let I of m){if(I.key===C)return I;if(I.child&&I.child.length>0){let R=x(I.child,C);if(R)return R}}return null},A=(m,C,I)=>{const R=x(l.value,I);m.value=null,m[C]=I,m.type=R.type,I==="IyCalcCustom"&&(f.value=m,g("")),console.log(m)},T=ge("debounce")(m=>{!m||m.validate(C=>{C&&(d.loading=!1,k())})},300),k=()=>{var C;let m="";o.var.forEach(I=>{var b,F;const R=(b=x(l.value,I.quote))==null?void 0:b.title,U=(F=x(l.value,I.value))==null?void 0:F.title;console.log(R,U,"anb"),m=R+"/"+(U||I.value)}),console.log(o.var),t("load",{code:(C=d.other)==null?void 0:C.key,args:o.var,name:m}),o.text="",o.var=[{quote:"",type:"input"}],d.other=void 0,d.visible=!1},v={var:{required:!1,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"blur"}};return e({open(m,C){C&&C.length>0&&(o.var=C),d.visible=!0,d.other=m,o.text=m.title,y()}}),(m,C)=>{const I=Se,R=jt,U=zt,b=qt,F=Ie,D=Be,L=ye,B=Ce,H=at;return P(),$("div",Cn,[i(B,{"model-value":u(d).visible,"show-close":!1,"close-on-press-escape":!1,title:"\u7F16\u8F91\u53C2\u6570\u503C",width:440,"z-index":1e3,"close-on-click-modal":!1},{footer:p(()=>[i(L,{class:"ml-auto",size:"small",loading:u(d).loading,onClick:k},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(L,{size:"small",loading:u(d).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:C[0]||(C[0]=K=>u(T)(u(a)))},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[it((P(),$("div",null,[N("div",wn,[i(D,{ref_key:"ruleFormRef",ref:a,"label-width":"80px",model:u(o),rules:v,"hide-required-asterisk":!1},{default:p(()=>{var K;return[i(I,{label:"\u53C2\u6570\u7B7E\u540D",prop:"text"},{default:p(()=>[N("div",xn,ee(u(o).text),1)]),_:1}),(P(!0),$(de,null,ue((K=u(d).other)==null?void 0:K.child,(E,S)=>(P(),X(I,{label:E==null?void 0:E.title},{default:p(()=>[N("div",kn,[i(b,{onCommand:V=>A(u(o).var[S],"quote",V)},{dropdown:p(()=>[i(U,null,{default:p(()=>[(P(!0),$(de,null,ue(u(l),V=>(P(),X(R,{class:we({"el-action-dropdown":u(o).var[S].quote===V.key}),command:V.key},{default:p(()=>[O(ee(V.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:p(()=>[N("span",In,ee(u(s)[u(o).var[S].quote]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),u(o).var[S].type==="input"||u(o).var[S].type==="textarea"?(P(),$("div",Dn,[O(" \uFF08"),i(F,{placeholder:"\u8BF7\u8F93\u5165",disabled:m.isReadOnly,style:{width:"100px"},type:u(o).var[S].type,spellcheck:"false",modelValue:u(o).var[S].value,"onUpdate:modelValue":V=>u(o).var[S].value=V},null,8,["disabled","type","modelValue","onUpdate:modelValue"]),O("\uFF09 ")])):(P(),X(b,{key:1,onCommand:V=>A(u(o).var[S],"value",V)},{dropdown:p(()=>[i(U,null,{default:p(()=>{var V;return[(P(!0),$(de,null,ue(((V=u(l).find(Z=>Z.key===u(o).var[S].quote))==null?void 0:V.child)||[],Z=>(P(),X(R,{class:we({"el-action-dropdown":u(o).var[S].value===Z.key}),command:Z.key},{default:p(()=>[O(ee(Z.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:p(()=>[N("span",En," \uFF08 "+ee(u(s)[u(o).var[S].value]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))])]),_:2},1032,["label"]))),256))]}),_:1},8,["model"])])])),[[H,u(d).loading]])]),_:1},8,["model-value"]),i(B,{"model-value":u(c).visible,"align-center":"","destroy-on-close":"","show-close":!u(c).loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":11e3,"close-on-click-modal":!1,onClose:M},{footer:p(()=>[i(L,{class:"ml-auto",size:"small",loading:u(c).loading,onClick:M},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(L,{size:"small",loading:u(c).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:_},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[i(kt,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:n},null,512)]),_:1},8,["model-value","show-close"])])}}},An=fe(Pn,[["__scopeId","data-v-17d35efa"]]);const Mn={class:"balck-box"},Fn=["onClick"],Sn={__name:"quoteModal",emits:["updataValue"],setup(r,{expose:e,emit:t}){const n=oe({visible:!1,data:[{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"},{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"},{text:"\u4EA7\u54C1\u540D\u79F0\u3010<<IyOrder.ProductName>>\u3011",value:"<<IyOrder.ProductName>>"}]}),a=()=>{n.visible=!1},o=s=>{s&&(n.data=s),n.visible=!0},l=s=>{t("updataValue",s),a()};return e({open:o}),(s,d)=>{const h=Ce;return P(),$("div",null,[i(h,{"model-value":u(n).visible,"align-center":"","show-close":!u(n).loading,"close-on-press-escape":!1,title:"\u5F15\u7528\u503C",width:450,"z-index":100,"close-on-click-modal":!1,onClose:a},{default:p(()=>[N("div",Mn,[(P(!0),$(de,null,ue(u(n).data,c=>(P(),$("div",null,[O(ee(c.text)+" ",1),N("div",{onClick:f=>l(c.value),class:"box-botton"},"\u5F15\u7528",8,Fn)]))),256))])]),_:1},8,["model-value","show-close"])])}}},Bn=fe(Sn,[["__scopeId","data-v-9c16c78c"]]),Tn=r=>(dt("data-v-aa5d3665"),r=r(),ut(),r),Vn={style:{"padding-top":"16px"}},On={style:{padding:"0px 12px 24px 12px"}},$n={style:{display:"flex","align-items":"center"}},Rn={key:0,style:{"line-height":"16px",width:"16px","margin-left":"8px"}},Ln=Tn(()=>N("span",{style:{cursor:"pointer","margin-left":"8px"}},[O(" \u7A7A\u503C "),N("i",{style:{cursor:"pointer"},class:"vxe-cell-help-icon vxe-icon-question-circle"})],-1)),Un={style:{display:"flex","align-items":"center"}},Nn={key:0,class:"input-box input-color2",style:{color:"#4c83ff"}},Hn={class:"el-dropdown-link input-color2"},jn=We({__name:"EditSendHeader",props:["isWrite"],emits:["updataId"],setup(r,{expose:e,emit:t}){const n=r,a=j(),o=j(),l=j({}),s=oe({loading:!1}),d=Qe(()=>(console.log(n.isWrite,"isr"),n.isWrite===!0?!1:Boolean(h.id))),h=oe({type:1,title:"",id:""}),c=ge("editPayForm"),f=j([]),y=j(),g=j([{id:1e4,parentId:null,var:"test abc1",emptyCalc:1,value:"",remark:"2020-08-01",type:"string",typeChild:!1,quote:"",valueType:"input"}]);et(c.payId||c.id).then(E=>{f.value=E[0].child;const S={};_(f.value,S),l.value=S});const w=oe({loading:!1,visible:!1}),_=(E,S)=>{E.forEach(V=>{S[V.key]=V.title,V.child instanceof Array&&_(V.child,S)})},M=(E,S)=>{for(let V of E){if(V.key===S)return V;if(V.child&&V.child.length>0){let Z=M(V.child,S);if(Z)return Z}}return null},x=(E,S,V)=>{const Z=M(f.value,V);E.value=null,E[S]=V,E.valueType=Z.type,V==="IyCalcCustom"&&(m.value=E,A("")),console.log(E)},A=async E=>{w.visible=!0,E&&$e(async()=>{await o.value.initSign({id:E})})},T=async()=>{try{w.loading=!0;const E=await o.value.saveSign();console.log(E,"calcID"),m.value.quote="IyCalc",m.value.value=E||null,await et(c.payId||c.id).then(S=>{f.value=S[0].child;const V={};_(f.value,V),l.value=V}),w.loading=!1,k()}catch{throw w.loading=!1,new Error("SendHeader,eror")}},k=()=>{m.value=null,w.visible=!1},v=async()=>h.title===""?(Kt.error("\u8BF7\u586B\u5199\u914D\u7F6E\u540D\u79F0"),Promise.reject("")):(d.value&&console.log(d.value,"isReadOnly"),d.value?Promise.resolve(h.id):h.id?await Yo({...h,payId:c.payId||c.id,config:b()}).then(E=>Promise.resolve(h.id)):await Jo({...h,payId:c.payId||c.id,config:b()}).then(E=>Promise.resolve(E))),m=j(),C=E=>{m.value.value=E},I=()=>{g.value=[{id:1e4,parentId:null,var:"test abc1",emptyCalc:1,value:"",remark:"2020-08-01",type:"string",typeChild:!1,quote:"",valueType:"input"}],h.id="",h.title="",h.type=0},R=E=>{const S={},V=[];return E.forEach(Z=>{S[Z.id]={...Z,children:null}}),E.forEach(Z=>{const ce=S[Z.id];if(Z.parentId===null)V.push(ce);else{const J=S[Z.parentId];J.children?J.children.push(ce):J.children=[ce]}}),V},U=E=>{const S=[];let V=1;const Z=(ce,J)=>{const _e=V++,De={id:_e,parentId:J,...ce};S.push(De),ce.children?(De.typeChild=!0,ce.children.forEach(Ee=>{Z(Ee,_e)})):De.typeChild=!1};return E.forEach(ce=>{Z(ce,null)}),S},b=()=>{const E=y.value.getRemoveRecords();let S=g.value.filter(V=>E.findIndex(Z=>Z.id===V.id)===-1);return R(S.concat(y.value.getInsertRecords()))},F=async E=>{const S=y.value;if(S){const V=S.getParentRow(E);await S.remove(E),(!(V!=null&&V.children)||V.children.length===0)&&(V.type=K.base.var,V.typeChild=K.base.child)}},D=async E=>{const S=y.value;if(S){const V=Date.now(),Z={var:`\u65B0\u6570\u636E${V}`,id:V,parentId:null,emptyCalc:1,value:"",quote:"",valueType:"input",remark:"",type:K.base.var,typeChild:K.base.child},{row:ce}=await S.insertNextAt(Z,E);await S.setEditRow(ce)}},L=async E=>{const S=y.value;if(S){const V=Date.now(),Z={var:`\u65B0\u6570\u636E${V}`,id:V,parentId:E.id,emptyCalc:1,value:"",remark:"",type:K.base.var,typeChild:K.base.child};E.type=K.object.var,E.typeChild=K.object.child;const{row:ce}=await S.insertAt(Z,-1);await S.setTreeExpand(E,!0),await S.setTreeExpand(ce)}},B=E=>{h.id=E,Tt(E).then(S=>{g.value=U(JSON.parse(S.config)),$e(()=>{y.value.setAllTreeExpand(!0)}),h.title=S.title})},H=j([]),K={object:null,base:null};return Go().then(E=>{H.value=E,K.base=E.find(S=>S.child===!1),K.object=E.find(S=>S.child===!0)}),e({open(E){E.id?B(E.id):I()},saveData:v,handleClose:I}),Qe(()=>"\u65B0\u589E\u652F\u4ED8"),(E,S)=>{const V=Ie,Z=Se,ce=Be,J=lt,_e=tt,De=ot,Ee=Bt("vxe-column"),ct=go,Dt=nt,Xe=jt,pt=zt,z=qt,G=ye,Y=Bt("vxe-table"),te=Ce;return P(),$("div",Vn,[i(ce,{ref:"ruleFormRef","label-width":"80px","hide-required-asterisk":!1},{default:p(()=>[i(Z,{label:"\u6570\u636E\u6807\u9898",prop:"text"},{default:p(()=>[i(V,{disabled:u(d),spellcheck:"false",modelValue:u(h).title,"onUpdate:modelValue":S[0]||(S[0]=q=>u(h).title=q),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},null,8,["disabled","modelValue"])]),_:1}),i(Z,{label:"\u6570\u636E\u9879"})]),_:1},512),N("div",On,[i(Y,{border:"",class:"page-vxe-table",ref_key:"tableRef",ref:y,stripe:!1,"show-overflow":"","keep-source":"","row-config":{keyField:"id",height:40},"column-config":{resizable:!0},"print-config":{},"export-config":{},loading:u(s).loading,"tree-config":{transform:!0,rowField:"id",parentField:"parentId",expandAll:!0,showIcon:!1},"edit-config":{trigger:"click",mode:"row",showStatus:!0},data:u(g)},{default:p(()=>[i(Ee,{width:"250",title:"\u2003\xA0\xA0\u53D8\u91CF\u540D","tree-node":""},{default:p(({row:q,level:W})=>[N("div",$n,[W===0&&!u(d)?(P(),$("div",Rn,[i(J,{onClick:Q=>D(q),style:{"margin-right":"4px"}},{default:p(()=>[i(u(Ht))]),_:2},1032,["onClick"])])):le("",!0),i(V,{class:"input-with-select",placeholder:"\u8BF7\u8F93\u5165",disabled:u(d),spellcheck:"false",modelValue:q.var,"onUpdate:modelValue":Q=>q.var=Q,modelModifiers:{trim:!0}},{prepend:p(()=>[i(De,{style:{width:"80px"},disabled:u(d),modelValue:q.type,"onUpdate:modelValue":Q=>q.type=Q,class:"m-2",placeholder:"\u8BF7\u9009\u62E9"},{default:p(()=>[(P(!0),$(de,null,ue(u(H),Q=>(P(),X(_e,{disabled:q.typeChild!==Q.child,label:Q.title,value:Q.var},null,8,["disabled","label","value"]))),256))]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])]),_:2},1032,["disabled","modelValue","onUpdate:modelValue"])])]),_:1}),i(Ee,{field:"remark",title:"\u5907\u6CE8"},{default:p(({row:q})=>[i(V,{disabled:u(d),placeholder:"\u8BF7\u8F93\u5165",spellcheck:"false",modelValue:q.remark,"onUpdate:modelValue":W=>q.remark=W,modelModifiers:{trim:!0}},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),i(Ee,{width:"80",field:"emptyCalc",title:"\u7A7A\u503C"},{header:p(()=>[i(ct,{placement:"right",width:180,trigger:"hover",content:"\u5F00\u542F\u8868\u793A\u7A7A\u503C\u65F6\u53C2\u4E0E\u8FD0\u7B97"},{reference:p(()=>[Ln]),_:1})]),default:p(({row:q})=>[i(Dt,{disabled:u(d),modelValue:q.emptyCalc,"onUpdate:modelValue":W=>q.emptyCalc=W,"active-value":1,"inactive-value":0},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),i(Ee,{width:"280",field:"quote",title:"\u503C\u7C7B\u578B"},{default:p(({row:q})=>[N("div",Un,[i(z,{disabled:u(d),onCommand:W=>x(q,"quote",W)},{dropdown:p(()=>[i(pt,null,{default:p(()=>[(P(!0),$(de,null,ue(u(f),W=>(P(),X(Xe,{class:we({"el-action-dropdown":q.quote===W.key}),command:W.key},{default:p(()=>[O(ee(W.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:p(()=>[(P(),$("span",{class:"el-dropdown-link",key:q.quote},ee(u(l)[q.quote]||"\u8BF7\u9009\u62E9"),1))]),_:2},1032,["disabled","onCommand"]),q.valueType==="input"||q.valueType==="textarea"?(P(),$("div",Nn,[O("\uFF08"),i(V,{placeholder:"\u8BF7\u8F93\u5165",disabled:u(d),style:{width:"100px"},type:q.valueType,spellcheck:"false",modelValue:q.value,"onUpdate:modelValue":W=>q.value=W},null,8,["disabled","type","modelValue","onUpdate:modelValue"]),O("\uFF09")])):(P(),X(z,{key:1,disabled:u(d),onCommand:W=>x(q,"value",W)},{dropdown:p(()=>[i(pt,null,{default:p(()=>{var W;return[(P(!0),$(de,null,ue(((W=u(f).find(Q=>Q.key===q.quote))==null?void 0:W.child)||[],Q=>(P(),X(Xe,{class:we({"el-action-dropdown":q.value===Q.key}),command:Q.key},{default:p(()=>[O(ee(Q.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:p(()=>[N("span",Hn," \uFF08 "+ee(u(l)[q.value]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["disabled","onCommand"]))])]),_:1}),i(Ee,{field:"award_sec",width:"100",title:"\u64CD\u4F5C"},{default:p(({row:q})=>[i(G,{disabled:u(d),type:"primary",link:"",onClick:W=>L(q)},{default:p(()=>[O("\u5B50\u9879")]),_:2},1032,["disabled","onClick"]),i(G,{disabled:u(d),type:"danger",link:"",onClick:W=>F(q)},{default:p(()=>[O("\u5220\u9664")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["loading","data"])]),i(Bn,{onUpdataValue:C,ref_key:"quoteModalRef",ref:a},null,512),i(te,{"model-value":u(w).visible,"align-center":"","destroy-on-close":"","show-close":!u(w).loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:k},{footer:p(()=>[i(G,{class:"ml-auto",size:"small",loading:u(w).loading,onClick:k},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(G,{size:"small",loading:u(w).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:T},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[i(kt,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:o},null,512)]),_:1},8,["model-value","show-close"])])}}});const Wt=fe(jn,[["__scopeId","data-v-aa5d3665"]]);const zn={class:"sideMeun"},qn=["onClick"],Kn={class:"title"},Gn={class:"icon","aria-hidden":"true"},Wn=["fill","xlink:href"],Xn={__name:"sideMeun",props:{data:{type:Array,default:()=>[]},activeMenu:{type:String,default:""},type:{type:Number,default:1}},emits:["update:activeMenu","updatekey","change"],setup(r,{emit:e}){const t=r,n=o=>{e("update:activeMenu",o),e("change",o)},a=o=>{console.log(o,"item"),(o==null?void 0:o.children)&&(o==null?void 0:o.children.length)>0?(o.redirectKey?e("update:activeMenu",o.redirectKey):e("update:activeMenu",o.children[0].key),e("change",o.redirectKey?o.redirectKey:o.children[0].key)):(t.type===1?e("update:activeMenu",o==null?void 0:o.key):e("updatekey",o==null?void 0:o.key),t.type===1&&e("change",o==null?void 0:o.key))};return(o,l)=>{const s=Bt("sideMeun",!0);return P(),$("div",zn,[(P(!0),$(de,null,ue(r.data,d=>{var h,c;return P(),$("div",{onClick:Ro(f=>a(d),["stop"]),class:we(["meunItem",{isAction:d.key==r.activeMenu,isActionParm:(h=d==null?void 0:d.children)==null?void 0:h.find(f=>f.key==r.activeMenu)}]),key:d.key||d.name},[N("div",Kn,[O(ee(d==null?void 0:d.name)+" ",1),((c=d.icon)==null?void 0:c.length)>0?(P(!0),$(de,{key:0},ue(d.icon,f=>(P(),$("svg",Gn,[N("use",{fill:f.color||"#FF9F46","xlink:href":(f==null?void 0:f.name)||f},null,8,Wn)]))),256)):le("",!0)]),d.children&&d.children.length>0?(P(),X(s,{key:0,onUpdatekey:n,type:2,activeMenu:r.activeMenu,class:"children-sideMeun",data:d.children},null,8,["activeMenu","data"])):le("",!0)],10,qn)}),128))])}}},vo=fe(Xn,[["__scopeId","data-v-f493f3a5"]]);function Pt(r){return r===""?r:r==="true"||r=="1"}function Zn(r,e){return new Promise((t,n)=>{var a=new XMLHttpRequest;a.responseType="blob",a.onload=function(){var o=new FileReader;o.onloadend=function(){t(o.result)},o.readAsArrayBuffer(a.response)},a.open("GET",r),a.send()})}function Pe(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function to(r,e){for(var t="",n=0,a=-1,o=0,l,s=0;s<=r.length;++s){if(s<r.length)l=r.charCodeAt(s);else{if(l===47)break;l=47}if(l===47){if(!(a===s-1||o===1))if(a!==s-1&&o===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var d=t.lastIndexOf("/");if(d!==t.length-1){d===-1?(t="",n=0):(t=t.slice(0,d),n=t.length-1-t.lastIndexOf("/")),a=s,o=0;continue}}else if(t.length===2||t.length===1){t="",n=0,a=s,o=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+r.slice(a+1,s):t=r.slice(a+1,s),n=s-a-1;a=s,o=0}else l===46&&o!==-1?++o:o=-1}return t}function Jn(r,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+r+n:n}var Ne={resolve:function(){for(var e="",t=!1,n,a=arguments.length-1;a>=-1&&!t;a--){var o;a>=0?o=arguments[a]:(n===void 0&&(n=process.cwd()),o=n),Pe(o),o.length!==0&&(e=o+"/"+e,t=o.charCodeAt(0)===47)}return e=to(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Pe(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=to(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return Pe(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];Pe(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Ne.normalize(e)},relative:function(e,t){if(Pe(e),Pe(t),e===t||(e=Ne.resolve(e),t=Ne.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var a=e.length,o=a-n,l=1;l<t.length&&t.charCodeAt(l)===47;++l);for(var s=t.length,d=s-l,h=o<d?o:d,c=-1,f=0;f<=h;++f){if(f===h){if(d>h){if(t.charCodeAt(l+f)===47)return t.slice(l+f+1);if(f===0)return t.slice(l+f)}else o>h&&(e.charCodeAt(n+f)===47?c=f:f===0&&(c=0));break}var y=e.charCodeAt(n+f),g=t.charCodeAt(l+f);if(y!==g)break;y===47&&(c=f)}var w="";for(f=n+c+1;f<=a;++f)(f===a||e.charCodeAt(f)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+t.slice(l+c):(l+=c,t.charCodeAt(l)===47&&++l,t.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(Pe(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,a=-1,o=!0,l=e.length-1;l>=1;--l)if(t=e.charCodeAt(l),t===47){if(!o){a=l;break}}else o=!1;return a===-1?n?"/":".":n&&a===1?"//":e.slice(0,a)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Pe(e);var n=0,a=-1,o=!0,l;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,d=-1;for(l=e.length-1;l>=0;--l){var h=e.charCodeAt(l);if(h===47){if(!o){n=l+1;break}}else d===-1&&(o=!1,d=l+1),s>=0&&(h===t.charCodeAt(s)?--s===-1&&(a=l):(s=-1,a=d))}return n===a?a=d:a===-1&&(a=e.length),e.slice(n,a)}else{for(l=e.length-1;l>=0;--l)if(e.charCodeAt(l)===47){if(!o){n=l+1;break}}else a===-1&&(o=!1,a=l+1);return a===-1?"":e.slice(n,a)}},extname:function(e){Pe(e);for(var t=-1,n=0,a=-1,o=!0,l=0,s=e.length-1;s>=0;--s){var d=e.charCodeAt(s);if(d===47){if(!o){n=s+1;break}continue}a===-1&&(o=!1,a=s+1),d===46?t===-1?t=s:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||a===-1||l===0||l===1&&t===a-1&&t===n+1?"":e.slice(t,a)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Jn("/",e)},parse:function(e){Pe(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),a=n===47,o;a?(t.root="/",o=1):o=0;for(var l=-1,s=0,d=-1,h=!0,c=e.length-1,f=0;c>=o;--c){if(n=e.charCodeAt(c),n===47){if(!h){s=c+1;break}continue}d===-1&&(h=!1,d=c+1),n===46?l===-1?l=c:f!==1&&(f=1):l!==-1&&(f=-1)}return l===-1||d===-1||f===0||f===1&&l===d-1&&l===s+1?d!==-1&&(s===0&&a?t.base=t.name=e.slice(1,d):t.base=t.name=e.slice(s,d)):(s===0&&a?(t.name=e.slice(1,l),t.base=e.slice(1,d)):(t.name=e.slice(s,l),t.base=e.slice(s,d)),t.ext=e.slice(l,d)),s>0?t.dir=e.slice(0,s-1):a&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Ne.posix=Ne;const Yn=Ne.extname,bo=Ne.basename;class Qn{constructor(){let e=(()=>typeof global>"u")(),t="image/png",n="image/jpeg",a="image/jpeg",o="image/webp",l="application/pdf",s="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:e?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:e?{png:t,jpg:n,jpeg:a,webp:o}:{png:t,jpg:n,jpeg:a,pdf:l,svg:s},mimes:e?{[t]:"png",[n]:"jpg",[o]:"webp"}:{[t]:"png",[n]:"jpg",[l]:"pdf",[s]:"svg"}})}toMime(e){return this.formats[(e||"").replace(/^\./,"").toLowerCase()]}fromMime(e){return this.mimes[e]}}function ea(r,{filename:e="",extension:t="",format:_,page:a,quality:o,matte:l,density:s,outline:d,archive:g}={}){var{fromMime:c,toMime:f,expected:y}=new Qn,g=g||"canvas",w=_||t.replace(/@\d+x$/i,"")||Yn(e),_=c(f(w)||w),M=f(_),x=r.length;if(!w)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!_)throw new Error(`Unsupported file format "${w}" (expected ${y})`);if(!x)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let A,T,k=e.replace(/{(\d*)}/g,(m,C)=>(T=!0,C=parseInt(C,10),A=isFinite(C)?C:isFinite(A)?A:-1,"{}")),v=a>0?a-1:a<0?x+a:void 0;if(isFinite(v)&&v<0||v>=x)throw new RangeError(x==1?`Canvas only has a \u2018page 1\u2019 (${v} is out of bounds)`:`Canvas has pages 1\u2013${x} (${v} is out of bounds)`);if(r=isFinite(v)?[r[v]]:T||_=="pdf"?r:r.slice(-1),o===void 0)o=.92;else if(typeof o!="number"||!isFinite(o)||o<0||o>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(s===void 0){let m=(t||bo(e,w)).match(/@(\d+)x$/i);s=m?parseInt(m[1],10):1}else if(typeof s!="number"||!Number.isInteger(s)||s<1)throw new TypeError("The density option must be a non-negative integer");return d===void 0?d=!0:_=="svg"&&(d=!!d),{filename:e,pattern:k,format:_,mime:M,pages:r,padding:A,quality:o,matte:l,density:s,outline:d,archive:g}}class bt{static for(e){return new bt().append(e).get()}constructor(){this.crc=-1}get(){return~this.crc}append(e){for(var t=this.crc|0,n=this.table,a=0,o=e.length|0;a<o;a++)t=t>>>8^n[(t^e[a])&255];return this.crc=t,this}}bt.prototype.table=(()=>{var r,e,t,n=[];for(r=0;r<256;r++){for(t=r,e=0;e<8;e++)t=t&1?t>>>1^3988292384:t>>>1;n[r]=t}return n})();function At(r){let e=new Uint8Array(r),t=new DataView(e.buffer),n={array:e,view:t,size:r,set8(a,o){return t.setUint8(a,o),n},set16(a,o){return t.setUint16(a,o,!0),n},set32(a,o){return t.setUint32(a,o,!0),n},bytes(a,o){return e.set(o,a),n}};return n}class Ct{constructor(e){let t=new Date;Object.assign(this,{directory:e,offset:0,files:[],time:(t.getHours()<<6|t.getMinutes())<<5|t.getSeconds()/2,date:(t.getFullYear()-1980<<4|t.getMonth()+1)<<5|t.getDate()}),this.add(e)}async add(e,t){let n=!t,a=Ct.encoder.encode(`${this.directory}/${n?"":e}`),o=new Uint8Array(n?0:await t.arrayBuffer()),l=30+a.length,s=l+o.length,d=16,{offset:h}=this,c=At(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,bt.for(o)).set32(14,o.length).set32(18,o.length).set16(22,a.length);h+=l;let f=At(l+o.length+d).set32(0,67324752).bytes(4,c.array).bytes(30,a).bytes(l,o);h+=o.length,f.set32(s,134695760).bytes(s+4,c.array.slice(10,22)),h+=d,this.files.push({offset:h,folder:n,name:a,header:c,payload:f}),this.offset=h}toBuffer(){let e=this.files.reduce((f,{name:y})=>46+y.length+f,0),t=At(e+22),n=0;for(var{offset:a,name:o,header:l,folder:s}of this.files)t.set32(n,33639248).set16(n+4,20).bytes(n+6,l.array).set8(n+38,s?16:0).set32(n+42,a).bytes(n+46,o),n+=46+o.length;t.set32(n,101010256).set16(n+8,this.files.length).set16(n+10,this.files.length).set32(n+12,e).set32(n+16,this.offset);let d=new Uint8Array(this.offset+t.size),h=0;for(var{payload:c}of this.files)d.set(c.array,h),h+=c.size;return d.set(t.array,h),d}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Ct.encoder=new TextEncoder;const Xt=(r,e,t,n)=>{if(n){let{width:a,height:o}=r,l=Object.assign(document.createElement("canvas"),{width:a,height:o}),s=l.getContext("2d");s.fillStyle=n,s.fillRect(0,0,a,o),s.drawImage(r,0,0),r=l}return new Promise((a,o)=>r.toBlob(a,e,t))},ta=(...r)=>Xt(...r).then(e=>e.arrayBuffer()),oa=async(r,e,t,n,a)=>{Co(a,await Xt(r,e,t,n))},na=async(r,e,t,n,a,o,l)=>{let s=c=>o.replace("{}",String(c+1).padStart(l,"0")),d=bo(a,".zip")||"archive",h=new Ct(d);await Promise.all(r.map(async(c,f)=>{let y=s(f);await h.add(y,await Xt(c,e,t,n))})),Co(`${d}.zip`,h.blob)},Co=(r,e)=>{const t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,n.setAttribute("download",r),typeof n.download>"u"&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>window.URL.revokeObjectURL(t),100)},aa=(r,e,t)=>r.map(n=>{if(e==1&&!t)return n.canvas;let a=document.createElement("canvas"),o=a.getContext("2d"),l=n.canvas?n.canvas:n;return a.width=l.width*e,a.height=l.height*e,t&&(o.fillStyle=t,o.fillRect(0,0,a.width,a.height)),o.scale(e,e),o.drawImage(l,0,0),a}),la={asBuffer:ta,asDownload:oa,asZipDownload:na,atScale:aa,options:ea},{asBuffer:Mt,asDownload:ra,asZipDownload:sa,atScale:Ft,options:St}=la,oo=Symbol.for("toDataURL"),ia=r=>new Promise((e,t)=>Object.assign(new wo,{crossOrigin:"Anonymous",onload:e,onerror:t,src:r}));class da{constructor(e,t){let n=document.createElement("canvas"),a=[];Object.defineProperty(n,"async",{value:!0,writable:!1,enumerable:!0});for(var[o,l]of Object.entries({png:()=>Mt(n,"image/png"),jpg:()=>Mt(n,"image/jpeg"),pages:()=>a.concat(n).map(s=>s.getContext("2d"))}))Object.defineProperty(n,o,{get:l});return Object.assign(n,{width:e,height:t,newPage(...s){var{width:h,height:c}=n,d=Object.assign(document.createElement("canvas"),{width:h,height:c});d.getContext("2d").drawImage(n,0,0),a.push(d);var[h,c]=s.length?s:[h,c];return Object.assign(n,{width:h,height:c}).getContext("2d")},saveAs(s,d){d=typeof d=="number"?{quality:d}:d;let h=St(this.pages,{filename:s,...d}),{pattern:c,padding:f,mime:y,quality:g,matte:w,density:_,archive:M}=h,x=Ft(h.pages,_);return f==null?ra(x[0],y,g,w,s):sa(x,y,g,w,M,c,f)},toBuffer(s="png",d={}){d=typeof d=="number"?{quality:d}:d;let h=St(this.pages,{extension:s,...d}),{mime:c,quality:f,matte:y,pages:g,density:w}=h,_=Ft(g,w,y)[0];return Mt(_,c,f,y)},[oo]:n.toDataURL.bind(n),toDataURL(s="png",d={}){d=typeof d=="number"?{quality:d}:d;let h=St(this.pages,{extension:s,...d}),{mime:c,quality:f,matte:y,pages:g,density:w}=h,_=Ft(g,w,y)[0],M=_[_===n?oo:"toDataURL"](c,f);return Promise.resolve(M)}})}}const{CanvasRenderingContext2D:ua,CanvasGradient:ca,CanvasPattern:pa,Image:wo,ImageData:fa,Path2D:ma,DOMMatrix:ha,DOMRect:ga,DOMPoint:ya}=window,_a={Canvas:da,loadImage:ia,CanvasRenderingContext2D:ua,CanvasGradient:ca,CanvasPattern:pa,Image:wo,ImageData:fa,Path2D:ma,DOMMatrix:ha,DOMRect:ga,DOMPoint:ya},Ye=(r,e,t={},n=t)=>{if(Array.isArray(e))e.forEach(a=>Ye(r,a,t,n));else if(typeof e=="function")e(r,t,n,Ye);else{const a=Object.keys(e)[0];Array.isArray(e[a])?(n[a]={},Ye(r,e[a],t,n[a])):n[a]=e[a](r,t,n,Ye)}return t},He=(r,e)=>(t,n,a,o)=>{e(t,n,a)&&o(t,r,n,a)},va=(r,e)=>(t,n,a,o)=>{const l=[];let s=t.pos;for(;e(t,n,a);){const d={};if(o(t,r,n,d),t.pos===s)break;s=t.pos,l.push(d)}return l},ba=r=>({data:r,pos:0}),xe=()=>r=>r.data[r.pos++],xo=(r=0)=>e=>e.data[e.pos+r],Fe=r=>e=>e.data.subarray(e.pos,e.pos+=r),wt=r=>e=>e.data.subarray(e.pos,e.pos+r),Vt=r=>e=>Array.from(Fe(r)(e)).map(t=>String.fromCharCode(t)).join(""),Ue=r=>e=>{const t=Fe(2)(e);return r?(t[1]<<8)+t[0]:(t[0]<<8)+t[1]},ko=(r,e)=>(t,n,a)=>{const o=typeof e=="function"?e(t,n,a):e,l=Fe(r),s=new Array(o);for(var d=0;d<o;d++)s[d]=l(t);return s},Ca=(r,e,t)=>{for(var n=0,a=0;a<t;a++)n+=r[e+a]&&2**(t-a-1);return n},Zt=r=>e=>{const t=xe()(e),n=new Array(8);for(var a=0;a<8;a++)n[7-a]=!!(t&1<<a);return Object.keys(r).reduce((o,l)=>{const s=r[l];return s.length?o[l]=Ca(n,s.index,s.length):o[l]=n[s.index],o},{})};var xt={blocks:r=>{const t=[],n=r.data.length;for(var a=0,o=xe()(r);o!==0&&o;o=xe()(r)){if(r.pos+o>=n){const h=n-r.pos;t.push(Fe(h)(r)),a+=h;break}t.push(Fe(o)(r)),a+=o}const l=new Uint8Array(a);for(var s=0,d=0;d<t.length;d++)l.set(t[d],s),s+=t[d].length;return l}};const wa=He({gce:[{codes:Fe(2)},{byteSize:xe()},{extras:Zt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:Ue(!0)},{transparentColorIndex:xe()},{terminator:xe()}]},r=>{var e=wt(2)(r);return e[0]===33&&e[1]===249}),xa=He({image:[{code:xe()},{descriptor:[{left:Ue(!0)},{top:Ue(!0)},{width:Ue(!0)},{height:Ue(!0)},{lct:Zt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},He({lct:ko(3,(r,e,t)=>Math.pow(2,t.descriptor.lct.size+1))},(r,e,t)=>t.descriptor.lct.exists),{data:[{minCodeSize:xe()},xt]}]},r=>xo()(r)===44),ka=He({text:[{codes:Fe(2)},{blockSize:xe()},{preData:(r,e,t)=>Fe(t.text.blockSize)(r)},xt]},r=>{var e=wt(2)(r);return e[0]===33&&e[1]===1}),Ia=He({application:[{codes:Fe(2)},{blockSize:xe()},{id:(r,e,t)=>Vt(t.blockSize)(r)},xt]},r=>{var e=wt(2)(r);return e[0]===33&&e[1]===255}),Da=He({comment:[{codes:Fe(2)},xt]},r=>{var e=wt(2)(r);return e[0]===33&&e[1]===254}),Ea=[{header:[{signature:Vt(3)},{version:Vt(3)}]},{lsd:[{width:Ue(!0)},{height:Ue(!0)},{gct:Zt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:xe()},{pixelAspectRatio:xe()}]},He({gct:ko(3,(r,e)=>Math.pow(2,e.lsd.gct.size+1))},(r,e)=>e.lsd.gct.exists),{frames:va([wa,Ia,Da,xa,ka],r=>{var e=xo()(r);return e===33||e===44})}],Pa=(r,e)=>{const t=new Array(r.length),n=r.length/e,a=function(c,f){const y=r.slice(f*e,(f+1)*e);t.splice.apply(t,[c*e,e].concat(y))},o=[0,4,2,1],l=[8,8,4,2];for(var s=0,d=0;d<4;d++)for(var h=o[d];h<n;h+=l[d])a(h,s),s++;return t},Aa=(r,e,t)=>{const o=t;var l,s,d,h,c,f,y,v,g,w,k,_,m,C,R,I;const M=new Array(t),x=new Array(4096),A=new Array(4096),T=new Array(4096+1);for(_=r,s=1<<_,c=s+1,l=s+2,y=-1,h=_+1,d=(1<<h)-1,g=0;g<s;g++)x[g]=0,A[g]=g;var k,v,m,C,I,R;for(k=v=m=C=I=R=0,w=0;w<o;){if(C===0){if(v<h){k+=e[R]<<v,v+=8,R++;continue}if(g=k&d,k>>=h,v-=h,g>l||g==c)break;if(g==s){h=_+1,d=(1<<h)-1,l=s+2,y=-1;continue}if(y==-1){T[C++]=A[g],y=g,m=g;continue}for(f=g,g==l&&(T[C++]=m,g=y);g>s;)T[C++]=A[g],g=x[g];m=A[g]&255,T[C++]=m,l<4096&&(x[l]=y,A[l]=m,l++,(l&d)===0&&l<4096&&(h++,d+=l)),y=f}C--,M[I++]=T[C],w++}for(w=I;w<o;w++)M[w]=0;return M},Ma=r=>{const e=new Uint8Array(r);return Ye(ba(e),Ea)},Fa=r=>{const e=r.pixels.length,t=new Uint8ClampedArray(e*4);for(var n=0;n<e;n++){const a=n*4,o=r.pixels[n],l=r.colorTable[o];t[a]=l[0],t[a+1]=l[1],t[a+2]=l[2],t[a+3]=o!==r.transparentIndex?255:0}return t},Sa=(r,e,t)=>{if(!r.image){console.warn("gif frame does not have associated image.");return}const{image:n}=r,a=n.descriptor.width*n.descriptor.height;var o=Aa(n.data.minCodeSize,n.data.blocks,a);n.descriptor.lct.interlaced&&(o=Pa(o,n.descriptor.width));const l={pixels:o,dims:{top:r.image.descriptor.top,left:r.image.descriptor.left,width:r.image.descriptor.width,height:r.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?l.colorTable=n.lct:l.colorTable=e,r.gce&&(l.delay=(r.gce.delay||10)*10,l.disposalType=r.gce.extras.disposal,r.gce.extras.transparentColorGiven&&(l.transparentIndex=r.gce.transparentColorIndex)),t&&(l.patch=Fa(l)),l},Ba=(r,e)=>r.frames.filter(t=>t.image).map(t=>Sa(t,r.gct,e));function Ta(r,e,t){const n=Io(e),a=r-1;let o=0;switch(t){case he.L:o=Ae[a][0];break;case he.M:o=Ae[a][1];break;case he.Q:o=Ae[a][2];break;case he.H:o=Ae[a][3];break}return n<=o}function Va(r,e){for(var t=1,n=Io(r),a=0,o=Ae.length;a<o;a++){var l=0;switch(e){case he.L:l=Ae[a][0];break;case he.M:l=Ae[a][1];break;case he.Q:l=Ae[a][2];break;case he.H:l=Ae[a][3];break}if(n<=l)break;t++}if(t>Ae.length)throw new Error("Too long data");return t}function Io(r){var e=encodeURI(r).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=Number(r)?3:0)}class Oa{constructor(e){this.mode=be.MODE_8BIT_BYTE,this.parsedData=[],this.data=e;const t=[];for(let n=0,a=this.data.length;n<a;n++){const o=[],l=this.data.charCodeAt(n);l>65536?(o[0]=240|(l&1835008)>>>18,o[1]=128|(l&258048)>>>12,o[2]=128|(l&4032)>>>6,o[3]=128|l&63):l>2048?(o[0]=224|(l&61440)>>>12,o[1]=128|(l&4032)>>>6,o[2]=128|l&63):l>128?(o[0]=192|(l&1984)>>>6,o[1]=128|l&63):o[0]=l,t.push(o)}this.parsedData=Array.prototype.concat.apply([],t),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(e){for(let t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}}class Le{constructor(e=-1,t=he.L){this.moduleCount=0,this.dataList=[],this.typeNumber=e,this.errorCorrectLevel=t,this.moduleCount=0,this.dataList=[]}addData(e){if(this.typeNumber<=0)this.typeNumber=Va(e,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!Ta(this.typeNumber,e,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const t=new Oa(e);this.dataList.push(t),this.dataCache=void 0}isDark(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(`${e},${t}`);return this.modules[e][t]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let a=0;a<this.moduleCount;a++)this.modules[n][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Le.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)}setupPositionProbePattern(e,t){for(let n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(let a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=n&&n<=6&&(a==0||a==6)||0<=a&&a<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=a&&a<=4?this.modules[e+n][t+a]=!0:this.modules[e+n][t+a]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(Ve).includes(this.maskPattern))return this.maskPattern;let e=0,t=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);const a=ae.getLostPoint(this);(n==0||e>a)&&(e=a,t=n)}return t}setupTimingPattern(){for(let e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(let e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)}setupPositionAdjustPattern(){const e=ae.getPatternPosition(this.typeNumber);for(let t=0;t<e.length;t++)for(let n=0;n<e.length;n++){const a=e[t],o=e[n];if(this.modules[a][o]==null)for(let l=-2;l<=2;l++)for(let s=-2;s<=2;s++)l==-2||l==2||s==-2||s==2||l==0&&s==0?this.modules[a+l][o+s]=!0:this.modules[a+l][o+s]=!1}}setupTypeNumber(e){const t=ae.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var a=!e&&(t>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=a}for(var n=0;n<18;n++){var a=!e&&(t>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}}setupTypeInfo(e,t){const n=this.errorCorrectLevel<<3|t,a=ae.getBCHTypeInfo(n);for(var o=0;o<15;o++){var l=!e&&(a>>o&1)==1;o<6?this.modules[o][8]=l:o<8?this.modules[o+1][8]=l:this.modules[this.moduleCount-15+o][8]=l}for(var o=0;o<15;o++){var l=!e&&(a>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=l:o<9?this.modules[8][15-o-1+1]=l:this.modules[8][15-o-1]=l}this.modules[this.moduleCount-8][8]=!e}mapData(e,t){let n=-1,a=this.moduleCount-1,o=7,l=0;for(let s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(let d=0;d<2;d++)if(this.modules[a][s-d]==null){let h=!1;l<e.length&&(h=(e[l]>>>o&1)==1),ae.getMask(t,a,s-d)&&(h=!h),this.modules[a][s-d]=h,o--,o==-1&&(l++,o=7)}if(a+=n,a<0||this.moduleCount<=a){a-=n,n=-n;break}}}static createData(e,t,n){const a=Oe.getRSBlocks(e,t),o=new $a;for(var l=0;l<n.length;l++){const d=n[l];o.put(d.mode,4),o.put(d.getLength(),ae.getLengthInBits(d.mode,e)),d.write(o)}let s=0;for(var l=0;l<a.length;l++)s+=a[l].dataCount;if(o.getLengthInBits()>s*8)throw new Error(`code length overflow. (${o.getLengthInBits()}>${s*8})`);for(o.getLengthInBits()+4<=s*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=s*8||(o.put(Le.PAD0,8),o.getLengthInBits()>=s*8));)o.put(Le.PAD1,8);return Le.createBytes(o,a)}static createBytes(e,t){let n=0,a=0,o=0;const l=new Array(t.length),s=new Array(t.length);for(var d=0;d<t.length;d++){const g=t[d].dataCount,w=t[d].totalCount-g;a=Math.max(a,g),o=Math.max(o,w),l[d]=new Array(g);for(var h=0;h<l[d].length;h++)l[d][h]=255&e.buffer[h+n];n+=g;const _=ae.getErrorCorrectPolynomial(w),x=new Ke(l[d],_.getLength()-1).mod(_);s[d]=new Array(_.getLength()-1);for(var h=0;h<s[d].length;h++){const T=h+x.getLength()-s[d].length;s[d][h]=T>=0?x.get(T):0}}let c=0;for(var h=0;h<t.length;h++)c+=t[h].totalCount;const f=new Array(c);let y=0;for(var h=0;h<a;h++)for(var d=0;d<t.length;d++)h<l[d].length&&(f[y++]=l[d][h]);for(var h=0;h<o;h++)for(var d=0;d<t.length;d++)h<s[d].length&&(f[y++]=s[d][h]);return f}}Le.PAD0=236;Le.PAD1=17;const he={L:1,M:0,Q:3,H:2},be={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},Ve={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class ae{static getBCHTypeInfo(e){let t=e<<10;for(;ae.getBCHDigit(t)-ae.getBCHDigit(ae.G15)>=0;)t^=ae.G15<<ae.getBCHDigit(t)-ae.getBCHDigit(ae.G15);return(e<<10|t)^ae.G15_MASK}static getBCHTypeNumber(e){let t=e<<12;for(;ae.getBCHDigit(t)-ae.getBCHDigit(ae.G18)>=0;)t^=ae.G18<<ae.getBCHDigit(t)-ae.getBCHDigit(ae.G18);return e<<12|t}static getBCHDigit(e){let t=0;for(;e!=0;)t++,e>>>=1;return t}static getPatternPosition(e){return ae.PATTERN_POSITION_TABLE[e-1]}static getMask(e,t,n){switch(e){case Ve.PATTERN000:return(t+n)%2==0;case Ve.PATTERN001:return t%2==0;case Ve.PATTERN010:return n%3==0;case Ve.PATTERN011:return(t+n)%3==0;case Ve.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case Ve.PATTERN101:return t*n%2+t*n%3==0;case Ve.PATTERN110:return(t*n%2+t*n%3)%2==0;case Ve.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error(`bad maskPattern:${e}`)}}static getErrorCorrectPolynomial(e){let t=new Ke([1],0);for(let n=0;n<e;n++)t=t.multiply(new Ke([1,ie.gexp(n)],0));return t}static getLengthInBits(e,t){if(1<=t&&t<10)switch(e){case be.MODE_NUMBER:return 10;case be.MODE_ALPHA_NUM:return 9;case be.MODE_8BIT_BYTE:return 8;case be.MODE_KANJI:return 8;default:throw new Error(`mode:${e}`)}else if(t<27)switch(e){case be.MODE_NUMBER:return 12;case be.MODE_ALPHA_NUM:return 11;case be.MODE_8BIT_BYTE:return 16;case be.MODE_KANJI:return 10;default:throw new Error(`mode:${e}`)}else if(t<41)switch(e){case be.MODE_NUMBER:return 14;case be.MODE_ALPHA_NUM:return 13;case be.MODE_8BIT_BYTE:return 16;case be.MODE_KANJI:return 12;default:throw new Error(`mode:${e}`)}else throw new Error(`type:${t}`)}static getLostPoint(e){const t=e.getModuleCount();let n=0;for(var a=0;a<t;a++)for(var o=0;o<t;o++){let d=0;const h=e.isDark(a,o);for(let c=-1;c<=1;c++)if(!(a+c<0||t<=a+c))for(let f=-1;f<=1;f++)o+f<0||t<=o+f||c==0&&f==0||h==e.isDark(a+c,o+f)&&d++;d>5&&(n+=3+d-5)}for(var a=0;a<t-1;a++)for(var o=0;o<t-1;o++){let c=0;e.isDark(a,o)&&c++,e.isDark(a+1,o)&&c++,e.isDark(a,o+1)&&c++,e.isDark(a+1,o+1)&&c++,(c==0||c==4)&&(n+=3)}for(var a=0;a<t;a++)for(var o=0;o<t-6;o++)e.isDark(a,o)&&!e.isDark(a,o+1)&&e.isDark(a,o+2)&&e.isDark(a,o+3)&&e.isDark(a,o+4)&&!e.isDark(a,o+5)&&e.isDark(a,o+6)&&(n+=40);for(var o=0;o<t;o++)for(var a=0;a<t-6;a++)e.isDark(a,o)&&!e.isDark(a+1,o)&&e.isDark(a+2,o)&&e.isDark(a+3,o)&&e.isDark(a+4,o)&&!e.isDark(a+5,o)&&e.isDark(a+6,o)&&(n+=40);let l=0;for(var o=0;o<t;o++)for(var a=0;a<t;a++)e.isDark(a,o)&&l++;const s=Math.abs(100*l/t/t-50)/5;return n+=s*10,n}}ae.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];ae.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;ae.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;ae.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class ie{static glog(e){if(e<1)throw new Error(`glog(${e})`);return ie.LOG_TABLE[e]}static gexp(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ie.EXP_TABLE[e]}}ie.EXP_TABLE=new Array(256);ie.LOG_TABLE=new Array(256);ie._constructor=function(){for(var r=0;r<8;r++)ie.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)ie.EXP_TABLE[r]=ie.EXP_TABLE[r-4]^ie.EXP_TABLE[r-5]^ie.EXP_TABLE[r-6]^ie.EXP_TABLE[r-8];for(var r=0;r<255;r++)ie.LOG_TABLE[ie.EXP_TABLE[r]]=r}();class Ke{constructor(e,t){if(e.length==null)throw new Error(`${e.length}/${t}`);let n=0;for(;n<e.length&&e[n]==0;)n++;this.num=new Array(e.length-n+t);for(let a=0;a<e.length-n;a++)this.num[a]=e[a+n]}get(e){return this.num[e]}getLength(){return this.num.length}multiply(e){const t=new Array(this.getLength()+e.getLength()-1);for(let n=0;n<this.getLength();n++)for(let a=0;a<e.getLength();a++)t[n+a]^=ie.gexp(ie.glog(this.get(n))+ie.glog(e.get(a)));return new Ke(t,0)}mod(e){if(this.getLength()-e.getLength()<0)return this;const t=ie.glog(this.get(0))-ie.glog(e.get(0)),n=new Array(this.getLength());for(var a=0;a<this.getLength();a++)n[a]=this.get(a);for(var a=0;a<e.getLength();a++)n[a]^=ie.gexp(ie.glog(e.get(a))+t);return new Ke(n,0).mod(e)}}class Oe{constructor(e,t){this.totalCount=e,this.dataCount=t}static getRSBlocks(e,t){const n=Oe.getRsBlockTable(e,t);if(n==null)throw new Error(`bad rs block @ typeNumber:${e}/errorCorrectLevel:${t}`);const a=n.length/3,o=[];for(let l=0;l<a;l++){const s=n[l*3+0],d=n[l*3+1],h=n[l*3+2];for(let c=0;c<s;c++)o.push(new Oe(d,h))}return o}static getRsBlockTable(e,t){switch(t){case he.L:return Oe.RS_BLOCK_TABLE[(e-1)*4+0];case he.M:return Oe.RS_BLOCK_TABLE[(e-1)*4+1];case he.Q:return Oe.RS_BLOCK_TABLE[(e-1)*4+2];case he.H:return Oe.RS_BLOCK_TABLE[(e-1)*4+3];default:return}}}Oe.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class $a{constructor(){this.buffer=[],this.length=0}get(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1}put(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)==1)}getLengthInBits(){return this.length}putBit(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}}const Ae=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var Ra=100,pe=256,no=pe-1,Re=4,Do=16,Jt=1<<Do,Eo=10,Yt=10,La=Jt>>Yt,Ua=Jt<<Eo-Yt,Na=pe>>3,Ot=6,Ha=1<<Ot,ja=Na*Ha,za=30,Po=10,mt=1<<Po,Ao=8,ao=1<<Ao,qa=Po+Ao,ze=1<<qa,lo=499,ro=491,so=487,Mo=503,Ka=3*Mo;function Ga(r,e){var t,n,a,o,l;function s(){t=[],n=new Int32Array(256),a=new Int32Array(pe),o=new Int32Array(pe),l=new Int32Array(pe>>3);var x,A;for(x=0;x<pe;x++)A=(x<<Re+8)/pe,t[x]=new Float64Array([A,A,A,0]),o[x]=Jt/pe,a[x]=0}function d(){for(var x=0;x<pe;x++)t[x][0]>>=Re,t[x][1]>>=Re,t[x][2]>>=Re,t[x][3]=x}function h(x,A,T,k,v){t[A][0]-=x*(t[A][0]-T)/mt,t[A][1]-=x*(t[A][1]-k)/mt,t[A][2]-=x*(t[A][2]-v)/mt}function c(x,A,T,k,v){for(var m=Math.abs(A-x),C=Math.min(A+x,pe),I=A+1,R=A-1,U=1,b,F;I<C||R>m;)F=l[U++],I<C&&(b=t[I++],b[0]-=F*(b[0]-T)/ze,b[1]-=F*(b[1]-k)/ze,b[2]-=F*(b[2]-v)/ze),R>m&&(b=t[R--],b[0]-=F*(b[0]-T)/ze,b[1]-=F*(b[1]-k)/ze,b[2]-=F*(b[2]-v)/ze)}function f(x,A,T){var k=2147483647,v=k,m=-1,C=m,I,R,U,b,F;for(I=0;I<pe;I++)R=t[I],U=Math.abs(R[0]-x)+Math.abs(R[1]-A)+Math.abs(R[2]-T),U<k&&(k=U,m=I),b=U-(a[I]>>Do-Re),b<v&&(v=b,C=I),F=o[I]>>Yt,o[I]-=F,a[I]+=F<<Eo;return o[m]+=La,a[m]-=Ua,C}function y(){var x,A,T,k,v,m,C=0,I=0;for(x=0;x<pe;x++){for(T=t[x],v=x,m=T[1],A=x+1;A<pe;A++)k=t[A],k[1]<m&&(v=A,m=k[1]);if(k=t[v],x!=v&&(A=k[0],k[0]=T[0],T[0]=A,A=k[1],k[1]=T[1],T[1]=A,A=k[2],k[2]=T[2],T[2]=A,A=k[3],k[3]=T[3],T[3]=A),m!=C){for(n[C]=I+x>>1,A=C+1;A<m;A++)n[A]=x;C=m,I=x}}for(n[C]=I+no>>1,A=C+1;A<256;A++)n[A]=no}function g(x,A,T){for(var k,v,m,C=1e3,I=-1,R=n[A],U=R-1;R<pe||U>=0;)R<pe&&(v=t[R],m=v[1]-A,m>=C?R=pe:(R++,m<0&&(m=-m),k=v[0]-x,k<0&&(k=-k),m+=k,m<C&&(k=v[2]-T,k<0&&(k=-k),m+=k,m<C&&(C=m,I=v[3])))),U>=0&&(v=t[U],m=A-v[1],m>=C?U=-1:(U--,m<0&&(m=-m),k=v[0]-x,k<0&&(k=-k),m+=k,m<C&&(k=v[2]-T,k<0&&(k=-k),m+=k,m<C&&(C=m,I=v[3]))));return I}function w(){var x,A=r.length,T=30+(e-1)/3,k=A/(3*e),v=~~(k/Ra),m=mt,C=ja,I=C>>Ot;for(I<=1&&(I=0),x=0;x<I;x++)l[x]=m*((I*I-x*x)*ao/(I*I));var R;A<Ka?(e=1,R=3):A%lo!==0?R=3*lo:A%ro!==0?R=3*ro:A%so!==0?R=3*so:R=3*Mo;var U,b,F,D,L=0;for(x=0;x<k;)if(U=(r[L]&255)<<Re,b=(r[L+1]&255)<<Re,F=(r[L+2]&255)<<Re,D=f(U,b,F),h(m,D,U,b,F),I!==0&&c(I,D,U,b,F),L+=R,L>=A&&(L-=A),x++,v===0&&(v=1),x%v===0)for(m-=m/T,C-=C/za,I=C>>Ot,I<=1&&(I=0),D=0;D<I;D++)l[D]=m*((I*I-D*D)*ao/(I*I))}function _(){s(),w(),d(),y()}this.buildColormap=_;function M(){for(var x=[],A=[],T=0;T<pe;T++)A[t[T][3]]=T;for(var k=0,v=0;v<pe;v++){var m=A[v];x[k++]=t[m][0],x[k++]=t[m][1],x[k++]=t[m][2]}return x}this.getColormap=M,this.lookupRGB=g}var io=-1,ht=12,Je=5003,Wa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function Xa(r,e,t,n){var a=Math.max(2,n),o=new Uint8Array(256),l=new Int32Array(Je),s=new Int32Array(Je),d,h=0,c,f=0,y,g=!1,w,_,M,x,A,T;function k(D,L){o[c++]=D,c>=254&&R(L)}function v(D){m(Je),f=_+2,g=!0,F(_,D)}function m(D){for(var L=0;L<D;++L)l[L]=-1}function C(D,L){var B,H,K,E,S,V,Z;for(w=D,g=!1,T=w,y=U(T),_=1<<D-1,M=_+1,f=_+2,c=0,E=b(),Z=0,B=Je;B<65536;B*=2)++Z;Z=8-Z,V=Je,m(V),F(_,L);e:for(;(H=b())!=io;){if(B=(H<<ht)+E,K=H<<Z^E,l[K]===B){E=s[K];continue}else if(l[K]>=0){S=V-K,K===0&&(S=1);do if((K-=S)<0&&(K+=V),l[K]===B){E=s[K];continue e}while(l[K]>=0)}F(E,L),E=H,f<1<<ht?(s[K]=f++,l[K]=B):v(L)}F(E,L),F(M,L)}function I(D){D.writeByte(a),x=r*e,A=0,C(a+1,D),D.writeByte(0)}function R(D){c>0&&(D.writeByte(c),D.writeBytes(o,0,c),c=0)}function U(D){return(1<<D)-1}function b(){if(x===0)return io;--x;var D=t[A++];return D&255}function F(D,L){for(d&=Wa[h],h>0?d|=D<<h:d=D,h+=T;h>=8;)k(d&255,L),d>>=8,h-=8;if((f>y||g)&&(g?(y=U(T=w),g=!1):(++T,T==ht?y=1<<ht:y=U(T))),D==M){for(;h>0;)k(d&255,L),d>>=8,h-=8;R(L)}}this.encode=I}function ve(){this.page=-1,this.pages=[],this.newPage()}ve.pageSize=4096;ve.charMap={};for(var gt=0;gt<256;gt++)ve.charMap[gt]=String.fromCharCode(gt);ve.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ve.pageSize),this.cursor=0};ve.prototype.getData=function(){for(var r="",e=0;e<this.pages.length;e++)for(var t=0;t<ve.pageSize;t++)r+=ve.charMap[this.pages[e][t]];return r};ve.prototype.toFlattenUint8Array=function(){const r=[];for(var e=0;e<this.pages.length;e++)if(e===this.pages.length-1){const n=Uint8Array.from(this.pages[e].slice(0,this.cursor));r.push(n)}else r.push(this.pages[e]);const t=new Uint8Array(r.reduce((n,a)=>n+a.length,0));return r.reduce((n,a)=>(t.set(a,n),n+a.length),0),t};ve.prototype.writeByte=function(r){this.cursor>=ve.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=r};ve.prototype.writeUTFBytes=function(r){for(var e=r.length,t=0;t<e;t++)this.writeByte(r.charCodeAt(t))};ve.prototype.writeBytes=function(r,e,t){for(var n=t||r.length,a=e||0;a<n;a++)this.writeByte(r[a])};function re(r,e){this.width=~~r,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new ve}re.prototype.setDelay=function(r){this.delay=Math.round(r/10)};re.prototype.setFrameRate=function(r){this.delay=Math.round(100/r)};re.prototype.setDispose=function(r){r>=0&&(this.dispose=r)};re.prototype.setRepeat=function(r){this.repeat=r};re.prototype.setTransparent=function(r){this.transparent=r};re.prototype.addFrame=function(r){this.image=r,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};re.prototype.finish=function(){this.out.writeByte(59)};re.prototype.setQuality=function(r){r<1&&(r=1),this.sample=r};re.prototype.setDither=function(r){r===!0&&(r="FloydSteinberg"),this.dither=r};re.prototype.setGlobalPalette=function(r){this.globalPalette=r};re.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};re.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};re.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new Ga(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};re.prototype.indexPixels=function(r){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var t=0,n=0;n<e;n++){var a=this.findClosestRGB(this.pixels[t++]&255,this.pixels[t++]&255,this.pixels[t++]&255);this.usedEntry[a]=!0,this.indexedPixels[n]=a}};re.prototype.ditherPixels=function(r,e){var t={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!r||!t[r])throw"Unknown dithering kernel: "+r;var n=t[r],a=0,o=this.height,l=this.width,s=this.pixels,d=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var h=0;h<o;h++){e&&(d=d*-1);for(var c=d==1?0:l-1,f=d==1?l:0;c!==f;c+=d){a=h*l+c;var y=a*3,g=s[y],w=s[y+1],_=s[y+2];y=this.findClosestRGB(g,w,_),this.usedEntry[y]=!0,this.indexedPixels[a]=y,y*=3;for(var M=this.colorTab[y],x=this.colorTab[y+1],A=this.colorTab[y+2],T=g-M,k=w-x,v=_-A,m=d==1?0:n.length-1,C=d==1?n.length:0;m!==C;m+=d){var I=n[m][1],R=n[m][2];if(I+c>=0&&I+c<l&&R+h>=0&&R+h<o){var U=n[m][0];y=a+I+R*l,y*=3,s[y]=Math.max(0,Math.min(255,s[y]+T*U)),s[y+1]=Math.max(0,Math.min(255,s[y+1]+k*U)),s[y+2]=Math.max(0,Math.min(255,s[y+2]+v*U))}}}}};re.prototype.findClosest=function(r,e){return this.findClosestRGB((r&16711680)>>16,(r&65280)>>8,r&255,e)};re.prototype.findClosestRGB=function(r,e,t,n){if(this.colorTab===null)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(r,e,t);for(var a=0,o=256*256*256,l=this.colorTab.length,s=0,d=0;s<l;d++){var h=r-(this.colorTab[s++]&255),c=e-(this.colorTab[s++]&255),f=t-(this.colorTab[s++]&255),y=h*h+c*c+f*f;(!n||this.usedEntry[d])&&y<o&&(o=y,a=d)}return a};re.prototype.getImagePixels=function(){var r=this.width,e=this.height;this.pixels=new Uint8Array(r*e*3);for(var t=this.image,n=0,a=0,o=0;o<e;o++)for(var l=0;l<r;l++)this.pixels[a++]=t[n++],this.pixels[a++]=t[n++],this.pixels[a++]=t[n++],n++};re.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var r,e;this.transparent===null?(r=0,e=0):(r=1,e=2),this.dispose>=0&&(e=this.dispose&7),e<<=2,this.out.writeByte(0|e|0|r),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};re.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};re.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};re.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};re.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var r=3*256-this.colorTab.length,e=0;e<r;e++)this.out.writeByte(0)};re.prototype.writeShort=function(r){this.out.writeByte(r&255),this.out.writeByte(r>>8&255)};re.prototype.writePixels=function(){var r=new Xa(this.width,this.height,this.indexedPixels,this.colorDepth);r.encode(this.out)};re.prototype.stream=function(){return this.out};var Za=globalThis&&globalThis.__awaiter||function(r,e,t,n){function a(o){return o instanceof t?o:new t(function(l){l(o)})}return new(t||(t=Promise))(function(o,l){function s(c){try{h(n.next(c))}catch(f){l(f)}}function d(c){try{h(n.throw(c))}catch(f){l(f)}}function h(c){c.done?o(c.value):a(c.value).then(s,d)}h((n=n.apply(r,e||[])).next())})};const{Canvas:Te}=_a,yt=.4;function uo(r){if(!r)return;function e(t){t.onload=null,t.onerror=null}return new Promise(function(t,n){if(r.slice(0,4)=="data"){let o=new Image;o.onload=function(){t(o),e(o)},o.onerror=function(){n("Image load error"),e(o)},o.src=r;return}let a=new Image;a.setAttribute("crossOrigin","Anonymous"),a.onload=function(){t(a)},a.onerror=function(){n("Image load error")},a.src=r})}class ne{constructor(e){const t=Object.assign({},e);if(Object.keys(ne.defaultOptions).forEach(n=>{n in t||Object.defineProperty(t,n,{value:ne.defaultOptions[n],enumerable:!0,writable:!0})}),t.components?typeof t.components=="object"&&Object.keys(ne.defaultComponentOptions).forEach(n=>{n in t.components?Object.defineProperty(t.components,n,{value:Object.assign(Object.assign({},ne.defaultComponentOptions[n]),t.components[n]),enumerable:!0,writable:!0}):Object.defineProperty(t.components,n,{value:ne.defaultComponentOptions[n],enumerable:!0,writable:!0})}):t.components=ne.defaultComponentOptions,t.dotScale!==null&&t.dotScale!==void 0){if(t.dotScale<=0||t.dotScale>1)throw new Error("dotScale should be in range (0, 1].");t.components.data.scale=t.dotScale,t.components.timing.scale=t.dotScale,t.components.alignment.scale=t.dotScale}this.options=t,this.canvas=new Te(e.size,e.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new Le(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(e=>this._draw().then(e))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(e,t,n,a,o,l){e.beginPath(),e.moveTo(t,n),e.arcTo(t+a,n,t+a,n+o,l),e.arcTo(t+a,n+o,t,n+o,l),e.arcTo(t,n+o,t,n,l),e.arcTo(t,n,t+a,n,l),e.closePath()}static _getAverageRGB(e){const n={r:0,g:0,b:0};let a,o,l=-4;const s={r:0,g:0,b:0};let d=0;o=e.naturalHeight||e.height,a=e.naturalWidth||e.width;const c=new Te(a,o).getContext("2d");if(!c)return n;c.drawImage(e,0,0);let f;try{f=c.getImageData(0,0,a,o)}catch{return n}for(;(l+=5*4)<f.data.length;)f.data[l]>200||f.data[l+1]>200||f.data[l+2]>200||(++d,s.r+=f.data[l],s.g+=f.data[l+1],s.b+=f.data[l+2]);return s.r=~~(s.r/d),s.g=~~(s.g/d),s.b=~~(s.b/d),s}static _drawDot(e,t,n,a,o=0,l=1){e.fillRect((t+o)*a,(n+o)*a,l*a,l*a)}static _drawAlignProtector(e,t,n,a){e.clearRect((t-2)*a,(n-2)*a,5*a,5*a),e.fillRect((t-2)*a,(n-2)*a,5*a,5*a)}static _drawAlign(e,t,n,a,o=0,l=1,s,d){const h=e.fillStyle;e.fillStyle=s,new Array(4).fill(0).map((c,f)=>{ne._drawDot(e,t-2+f,n-2,a,o,l),ne._drawDot(e,t+2,n-2+f,a,o,l),ne._drawDot(e,t+2-f,n+2,a,o,l),ne._drawDot(e,t-2,n+2-f,a,o,l)}),ne._drawDot(e,t,n,a,o,l),d||(e.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((c,f)=>{ne._drawDot(e,t-1+f,n-1,a,o,l),ne._drawDot(e,t+1,n-1+f,a,o,l),ne._drawDot(e,t+1-f,n+1,a,o,l),ne._drawDot(e,t-1,n+1-f,a,o,l)})),e.fillStyle=h}_draw(){var e,t,n,a,o,l,s,d,h,c,f,y,g,w,_,M,x,A,T;return Za(this,void 0,void 0,function*(){const k=(e=this.qrCode)===null||e===void 0?void 0:e.moduleCount,v=this.options.size;let m=this.options.margin;(m<0||m*2>=v)&&(m=0);const C=Math.ceil(m),I=v-2*m,R=this.options.whiteMargin,U=this.options.backgroundDimming,b=Math.ceil(I/k),F=b*k,D=F+2*C,L=new Te(D,D),B=L.getContext("2d");this._clear(),B.save(),B.translate(C,C);const H=new Te(D,D),K=H.getContext("2d");let E=null,S=[];if(this.options.gifBackground){const z=Ma(this.options.gifBackground);if(E=z,S=Ba(z,!0),this.options.autoColor){let G=0,Y=0,te=0,q=0;for(let W=0;W<S[0].colorTable.length;W++){const Q=S[0].colorTable[W];Q[0]>200||Q[1]>200||Q[2]>200||Q[0]===0&&Q[1]===0&&Q[2]===0||(q++,G+=Q[0],Y+=Q[1],te+=Q[2])}G=~~(G/q),Y=~~(Y/q),te=~~(te/q),this.options.colorDark=`rgb(${G},${Y},${te})`}}else if(this.options.backgroundImage){const z=yield uo(this.options.backgroundImage);if(this.options.autoColor){const G=ne._getAverageRGB(z);this.options.colorDark=`rgb(${G.r},${G.g},${G.b})`}K.drawImage(z,0,0,z.width,z.height,0,0,D,D),K.rect(0,0,D,D),K.fillStyle=U,K.fill()}else K.rect(0,0,D,D),K.fillStyle=this.options.colorLight,K.fill();const V=ae.getPatternPosition(this.qrCode.typeNumber),Z=((n=(t=this.options.components)===null||t===void 0?void 0:t.data)===null||n===void 0?void 0:n.scale)||yt,ce=(1-Z)*.5;for(let z=0;z<k;z++)for(let G=0;G<k;G++){const Y=this.qrCode.isDark(z,G),te=G<8&&(z<8||z>=k-8)||G>=k-8&&z<8,q=z==6&&G>=8&&G<=k-8||G==6&&z>=8&&z<=k-8;let W=te||q;for(let me=1;me<V.length-1;me++)W=W||z>=V[me]-2&&z<=V[me]+2&&G>=V[me]-2&&G<=V[me]+2;const Q=G*b+(W?0:ce*b),ke=z*b+(W?0:ce*b);if(B.strokeStyle=Y?this.options.colorDark:this.options.colorLight,B.lineWidth=.5,B.fillStyle=Y?this.options.colorDark:this.options.colorLight,V.length===0)W||B.fillRect(Q,ke,(W?1:Z)*b,(W?1:Z)*b);else{const me=G<k-4&&G>=k-4-5&&z<k-4&&z>=k-4-5;!W&&!me&&B.fillRect(Q,ke,(W?1:Z)*b,(W?1:Z)*b)}}const J=V[V.length-1],_e=this.options.colorLight;if(B.fillStyle=_e,B.fillRect(0,0,8*b,8*b),B.fillRect(0,(k-8)*b,8*b,8*b),B.fillRect((k-8)*b,0,8*b,8*b),!((o=(a=this.options.components)===null||a===void 0?void 0:a.timing)===null||o===void 0)&&o.protectors&&(B.fillRect(8*b,6*b,(k-8-8)*b,b),B.fillRect(6*b,8*b,b,(k-8-8)*b)),!((s=(l=this.options.components)===null||l===void 0?void 0:l.cornerAlignment)===null||s===void 0)&&s.protectors&&ne._drawAlignProtector(B,J,J,b),!((h=(d=this.options.components)===null||d===void 0?void 0:d.alignment)===null||h===void 0)&&h.protectors)for(let z=0;z<V.length;z++)for(let G=0;G<V.length;G++){const Y=V[G],te=V[z];if(!(Y===6&&(te===6||te===J))){if(te===6&&(Y===6||Y===J))continue;if(Y===J&&te===J)continue;ne._drawAlignProtector(B,Y,te,b)}}B.fillStyle=this.options.colorDark,B.fillRect(0,0,7*b,b),B.fillRect((k-7)*b,0,7*b,b),B.fillRect(0,6*b,7*b,b),B.fillRect((k-7)*b,6*b,7*b,b),B.fillRect(0,(k-7)*b,7*b,b),B.fillRect(0,(k-7+6)*b,7*b,b),B.fillRect(0,0,b,7*b),B.fillRect(6*b,0,b,7*b),B.fillRect((k-7)*b,0,b,7*b),B.fillRect((k-7+6)*b,0,b,7*b),B.fillRect(0,(k-7)*b,b,7*b),B.fillRect(6*b,(k-7)*b,b,7*b),B.fillRect(2*b,2*b,3*b,3*b),B.fillRect((k-7+2)*b,2*b,3*b,3*b),B.fillRect(2*b,(k-7+2)*b,3*b,3*b);const De=((f=(c=this.options.components)===null||c===void 0?void 0:c.timing)===null||f===void 0?void 0:f.scale)||yt,Ee=(1-De)*.5;for(let z=0;z<k-8;z+=2)ne._drawDot(B,8+z,6,b,Ee,De),ne._drawDot(B,6,8+z,b,Ee,De);const ct=((g=(y=this.options.components)===null||y===void 0?void 0:y.cornerAlignment)===null||g===void 0?void 0:g.scale)||yt,Dt=(1-ct)*.5;ne._drawAlign(B,J,J,b,Dt,ct,this.options.colorDark,((_=(w=this.options.components)===null||w===void 0?void 0:w.cornerAlignment)===null||_===void 0?void 0:_.protectors)||!1);const Xe=((x=(M=this.options.components)===null||M===void 0?void 0:M.alignment)===null||x===void 0?void 0:x.scale)||yt,pt=(1-Xe)*.5;for(let z=0;z<V.length;z++)for(let G=0;G<V.length;G++){const Y=V[G],te=V[z];if(!(Y===6&&(te===6||te===J))){if(te===6&&(Y===6||Y===J))continue;if(Y===J&&te===J)continue;ne._drawAlign(B,Y,te,b,pt,Xe,this.options.colorDark,((T=(A=this.options.components)===null||A===void 0?void 0:A.alignment)===null||T===void 0?void 0:T.protectors)||!1)}}if(R&&(B.fillStyle=this.options.backgroundColor,B.fillRect(-C,-C,D,C),B.fillRect(-C,F,D,C),B.fillRect(F,-C,C,D),B.fillRect(-C,-C,C,D)),this.options.logoImage){const z=yield uo(this.options.logoImage);let G=this.options.logoScale,Y=this.options.logoMargin,te=this.options.logoCornerRadius;(G<=0||G>=1)&&(G=.2),Y<0&&(Y=0),te<0&&(te=0);const q=F*G,W=.5*(D-q),Q=W;B.restore(),B.fillStyle=this.options.logoBackgroundColor,B.save(),ne._prepareRoundedCornerClip(B,W-Y,Q-Y,q+2*Y,q+2*Y,te+Y),B.clip();const ke=B.globalCompositeOperation;B.globalCompositeOperation="destination-out",B.fill(),B.globalCompositeOperation=ke,B.restore(),B.save(),ne._prepareRoundedCornerClip(B,W,Q,q,q,te),B.clip(),B.drawImage(z,W,Q,q,q),B.restore(),B.save(),B.translate(C,C)}if(E){let z,G,Y,te,q,W;if(S.forEach(function(Q){z||(z=new re(v,v),z.setDelay(Q.delay),z.setRepeat(0));const{width:ke,height:me}=Q.dims;G||(G=new Te(ke,me),Y=G.getContext("2d"),Y.rect(0,0,G.width,G.height),Y.fillStyle="#ffffff",Y.fill()),(!te||!W||ke!==te.width||me!==te.height)&&(te=new Te(ke,me),q=te.getContext("2d"),W=q.createImageData(ke,me)),W.data.set(Q.patch),q.putImageData(W,0,0),Y.drawImage(te.getContext("2d").canvas,Q.dims.left,Q.dims.top);const ft=new Te(D,D),Ze=ft.getContext("2d");Ze.drawImage(G.getContext("2d").canvas,0,0,D,D),Ze.rect(0,0,D,D),Ze.fillStyle=U,Ze.fill(),Ze.drawImage(L.getContext("2d").canvas,0,0,D,D);const Et=new Te(v,v),eo=Et.getContext("2d");eo.drawImage(ft.getContext("2d").canvas,0,0,v,v),z.addFrame(eo.getImageData(0,0,Et.width,Et.height).data)}),!z)throw new Error("No frames.");if(z.finish(),co(this.canvas)){const ke=z.stream().toFlattenUint8Array().reduce((me,ft)=>me+String.fromCharCode(ft),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(ke)}`)}return Promise.resolve(Buffer.from(z.stream().toFlattenUint8Array()))}else{K.drawImage(L.getContext("2d").canvas,0,0,D,D),B.drawImage(H.getContext("2d").canvas,-C,-C,D,D);const z=new Te(v,v);z.getContext("2d").drawImage(L.getContext("2d").canvas,0,0,v,v),this.canvas=z;const Y=this.options.gifBackground?"gif":"png";return co(this.canvas)?Promise.resolve(this.canvas.toDataURL(Y)):Promise.resolve(this.canvas.toBuffer(Y))}})}}ne.CorrectLevel=he;ne.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};ne.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:he.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:ne.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function co(r){try{return r instanceof HTMLElement}catch{return typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object"}}const Ja={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const t=await Zn(this.gifBgSrc),n=this.logoSrc;this.render(void 0,n,t);return}const r=this.bgSrc,e=this.logoSrc;this.render(r,e)},async render(r,e,t){const n=this;new ne({gifBackground:t,text:n.text,size:n.size,margin:n.margin,colorDark:n.colorDark,colorLight:n.colorLight,backgroundColor:n.backgroundColor,backgroundImage:r,backgroundDimming:n.backgroundDimming,logoImage:e,logoScale:n.logoScale,logoBackgroundColor:n.logoBackgroundColor,correctLevel:n.correctLevel,logoMargin:n.logoMargin,logoCornerRadius:n.logoCornerRadius,whiteMargin:Pt(n.whiteMargin),dotScale:n.dotScale,autoColor:Pt(n.autoColor),binarize:Pt(n.binarize),binarizeThreshold:n.binarizeThreshold,components:n.components}).draw().then(a=>{this.imgUrl=a,n.callback&&n.callback(a,n.qid)})}}},Ya=["src"];function Qa(r,e,t,n,a,o){return t.bindElement?(P(),$("img",{key:0,style:{display:"inline-block"},src:a.imgUrl},null,8,Ya)):le("",!0)}const el=fe(Ja,[["render",Qa]]);const tl={class:"balck-box"},ol={__name:"SelectSign",setup(r,{expose:e}){const t=oe({visible:!1}),n=()=>{o.value=null,t.visible=!1},a=l=>{o.value=l,t.visible=!0},o=j();return e({open:a}),je(()=>{}),(l,s)=>{const d=Ce;return P(),$("div",null,[i(d,{"model-value":u(t).visible,"align-center":"","show-close":!u(t).loading,"close-on-press-escape":!1,title:"\u7B7E\u540D\u6D41\u7A0B",width:1e3,"z-index":100,"close-on-click-modal":!1,onClose:n},{default:p(()=>[N("div",tl,[N("pre",null,ee(u(o)),1)])]),_:1},8,["model-value","show-close"])])}}},nl=fe(ol,[["__scopeId","data-v-dd2425a9"]]);const al=r=>(dt("data-v-3376cb2c"),r=r(),ut(),r),ll={style:{padding:"0 24px","max-height":"590px"}},rl={class:"text-box"},sl={class:"text-item"},il={class:"item-title"},dl={class:"item-box"},ul={key:0,class:"status-text"},cl=al(()=>N("div",{style:{"min-width":"70px","padding-top":"8px"}},"\u6D4B\u8BD5\u7ED3\u679C",-1)),pl={class:"status-box"},fl={__name:"ImitateTest",setup(r){const e=j(),t=ge("editPayForm");function n(c){try{return JSON.parse(c)}catch{return[]}}const a=j([{title:"\u53D1\u9001\u5934",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null},{title:"\u53D1\u9001\u6570\u636E",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null},{title:"\u54CD\u5E94\u5934",btnText:"",jsonData:null},{title:"\u54CD\u5E94\u6570\u636E",btnText:"\u67E5\u770B\u7B7E\u540D\u6D41\u7A0B",jsonData:null}]),o=j({type:null}),l=c=>{Tt(c).then(f=>{a.value[0].jsonData=n(f.config)})},s=c=>{Tt(c).then(f=>{a.value[1].jsonData=n(f.config)})};(()=>{const c=t.type==="makeOrder"?t.makeOrder:t.queryOrder;c&&_t(c,"all").then(f=>{f.headerId&&l(f.headerId),f.bodyId&&s(f.bodyId),a.value[2].jsonData=f.response})})();const h=c=>{e.value.open(c)};return(c,f)=>{const y=ye,g=Ie,w=lt;return P(),$("div",ll,[N("div",null,[i(g,{modelValue:c.input1,"onUpdate:modelValue":f[0]||(f[0]=_=>c.input1=_),placeholder:""},{prepend:p(()=>[O("Http://")]),append:p(()=>[i(y,{style:{"background-color":"var(--el-color-primary)"},type:"primary",icon:c.Search},{default:p(()=>[O("\u6D4B\u8BD5\u4E0B\u5355")]),_:1},8,["icon"])]),_:1},8,["modelValue"])]),N("div",rl,[(P(!0),$(de,null,ue(u(a),_=>(P(),$("div",sl,[N("div",il,[N("div",null,ee(_.title),1),i(y,{type:"primary",onClick:M=>h(_.jsonData),link:""},{default:p(()=>[O(ee(_.btnText),1)]),_:2},1032,["onClick"])]),N("div",dl,[N("pre",null,""+ee(_.jsonData)+`
          `,1)])]))),256))]),u(o).type!==null?(P(),$("div",ul,[cl,N("div",pl,[N("div",null,[i(w,{color:u(o).type===0?"#FF4D4F":"#3DAA24"},{default:p(()=>[i(u(fo))]),_:1},8,["color"]),N("div",{style:Lo({color:u(o).type===0?"#FF4D4F":"#3DAA24",marginRight:"8px"})},"\u6D4B\u8BD5\u6210\u529F",4),O(" \u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0\u5931\u8D25\u539F\u56E0 ")]),i(el,{size:72,margin:10,style:{"margin-top":"8px"},text:"www.baidu.com"},null,8,["text"])])])):le("",!0),i(nl,{ref_key:"SelectSignRef",ref:e},null,512)])}}},$t=fe(fl,[["__scopeId","data-v-3376cb2c"]]),ml=()=>({payId:"",addr:"",method:"",contentType:"",accept:"",bodyId:"",headerId:"",bindData:null,response:null}),Qt=async(r,e,t)=>{const n=ml();return Object.keys(r).forEach(a=>{n[a]=r[a]}),e?await rn({...n,id:e},t):await ln(n,t)};const hl=r=>(dt("data-v-ae6154e0"),r=r(),ut(),r),gl=hl(()=>N("div",{class:"titleF"},"\u76EE\u524D\u4EC5\u652F\u6301 application/json",-1)),yl={class:"buttonBox"},_l={__name:"InterfaceConfig",emits:["updataInterfaceId"],setup(r,{emit:e}){const t=j(),n=j(!1),a=oe({addr:"",method:"post",contentType:"application/json",accept:"application/json"}),o=oe({addr:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42\u5730\u5740",trigger:"blur"}],method:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5",trigger:"blur"}]}),l=ge("editPayForm"),s=async d=>{!d||await d.validate((h,c)=>{if(h){n.value=!0;const f=l.type==="makeOrder"?l.makeOrder:l.queryOrder,y=f?"base":l.type;Qt({payId:l.payId||l.id,addr:a.addr,method:a.method,contentType:a.contentType,accept:a.accept},f,y).then(g=>{f||e("updataInterfaceId",g),Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).finally(g=>n.value=!1)}else console.log("error submit!",c)})};return je(()=>{const d=l.type==="makeOrder"?l.makeOrder:l.queryOrder;d&&_t(d,"base").then(h=>{a.addr=h.addr,a.method=h.method,a.contentType=h.contentType||"application/json",a.accept=h.accept||"application/json"})}),(d,h)=>{const c=tt,f=ot,y=Se,g=Ie,w=ye,_=Be;return P(),$("div",null,[i(_,{ref_key:"ruleFormRef",ref:t,"label-width":"80px",rules:u(o),model:u(a),"hide-required-asterisk":!1},{default:p(()=>[i(y,{label:"\u8BF7\u6C42\u65B9\u5F0F",prop:"method"},{default:p(()=>[i(f,{modelValue:u(a).method,"onUpdate:modelValue":h[0]||(h[0]=M=>u(a).method=M),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:p(()=>[i(c,{label:"GET",value:"GET"}),i(c,{label:"POST",value:"POST"})]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"\u8BF7\u6C42\u5730\u5740",prop:"addr"},{default:p(()=>[i(g,{spellcheck:"false",modelValue:u(a).addr,"onUpdate:modelValue":h[1]||(h[1]=M=>u(a).addr=M),modelModifiers:{trim:!0},clearable:"",placeholder:"\u793A\u4F8B\uFF1Ahttp://xxx.xxx/xxxxx"},null,8,["modelValue"])]),_:1}),i(y,{label:"\u8BF7\u6C42\u5934"},{default:p(()=>[i(f,{modelValue:u(a).contentType,"onUpdate:modelValue":h[2]||(h[2]=M=>u(a).contentType=M),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F"},{default:p(()=>[i(c,{label:"application/json",value:"application/json"}),i(c,{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"})]),_:1},8,["modelValue"])]),_:1}),i(y,{label:"\u54CD\u5E94\u5934"},{default:p(()=>[gl]),_:1}),i(y,{label:""},{default:p(()=>[N("div",yl,[i(w,{loading:u(n),onClick:h[3]||(h[3]=M=>s(u(t))),type:"primary"},{default:p(()=>[O("\u4FDD\u5B58\u5E76\u66F4\u65B0")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["rules","model"])])}}},Rt=fe(_l,[["__scopeId","data-v-ae6154e0"]]);const vl={style:{margin:"0 24px 24px 24px"}},bl={style:{display:"flex","align-items":"center"}},Cl={key:0,class:"input-color2",style:{color:"#4c83ff"}},wl={class:"el-dropdown-link input-color2"},xl={class:"el-dropdown-link"},kl={key:0,class:"input-color2",style:{color:"#4c83ff"}},Il={class:"el-dropdown-link input-color2"},Dl=["onClick"],El={style:{display:"flex"}},Pl={class:"el-dropdown-link"},Al={key:0,class:"input-color2",style:{color:"#4c83ff"}},Ml={class:"el-dropdown-link input-color2"},Fl={class:"value"},Sl={style:{"margin-left":"24px"},class:"buttonBox"},Bl={__name:"RespData",emits:["updataInterfaceId"],setup(r,{emit:e}){const t=j(),n=oe({respData:[{var2Type:"input",resCode:""}],dataOperate:[{}],payConstantList:{},quoteContOption:{}}),a=ge("editPayForm"),o=j(!1),l=j([]),s=j([]),d=(v,m,C,I)=>{const R=T(l.value,C);v.var1=null,v.var=null,v[m]=C,m==="varCode"&&I!==2&&(v.var1Type=R.type),m==="varCode"&&I===2&&(v.varType=R.type),console.log(v)},h=(v,m,C)=>{const I=T(s.value,C);v.var2=null,v[m]=C,v.var2Type=I.type,C==="IyCalcCustom"&&(A.value=v,f("")),console.log(v)},c=oe({loading:!1,visible:!1}),f=async v=>{c.visible=!0,v&&$e(async()=>{await t.value.initSign({id:v})})},y=async()=>{try{c.loading=!0;const v=await t.value.saveSign();A.value.resCode="IyCalc",A.value.var2=v,await w(),c.loading=!1,g(),Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}catch{}},g=()=>{A.value.value=null,c.visible=!1},w=async()=>{await et(a.payId||a.id).then(v=>{s.value=v[0].child;const m={};M(v[0].child,m),n.quoteContOption=m})};w();const _=()=>{o.value=!0;const v=a.type==="makeOrder"?a.makeOrder:a.queryOrder,m=v?"response":a.type;Qt({payId:a.payId||a.id,response:n.respData,bindData:n.dataOperate},v,m).then(C=>{v||e("updataInterfaceId",C),Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),o.value=!1})},M=(v,m)=>{v.forEach(C=>{m[C.key]=C.title,C.child instanceof Array&&M(C.child,m)})};Zo(a.payId||a.id).then(v=>{l.value=v||[];const m={};M(l.value,m),n.payConstantList=m,console.log(n.payConstantList)});const x=v=>{n.respData.splice(++v,0,{var2Type:"input",resCode:""})},A=j();function T(v,m){for(let C of v){if(C.key===m)return C;if(C.child&&C.child.length>0){let I=T(C.child,m);if(I)return I}}return null}const k=v=>Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(n.respData.splice(v,1)));return Xo().then(v=>{n.dataOperate=v==null?void 0:v.map(m=>{let C=Object.keys(m)[0];return{var:"",title:m[C],tovar:C}})}),je(()=>{const v=a.type==="makeOrder"?a.makeOrder:a.queryOrder;v&&_t(v,"response").then(m=>{n.respData=m.response.map(C=>({...C,varCodeValue:C.var1Type==="label"?[C.varCode,C.var1]:[C.varCode],resCodeValue:C.var2Type==="label"?[C.resCode,C.var2]:[C.resCode]}))||[{}],n.dataOperate=m.bindData.map(C=>({...C,varCodeValue:C.varType==="label"?[C.varCode,C.tovar]:[C.varCode]}))||[{}]})}),(v,m)=>{const C=lt,I=jt,R=zt,U=qt,b=Ie,F=Se,D=Be,L=ye,B=Ce;return P(),$("div",vl,[i(D,{ref:"ruleFormRef","label-width":"64px",model:u(n),rules:v.rules,"hide-required-asterisk":!1},{default:p(()=>[(P(!0),$(de,null,ue(u(n).respData,(H,K)=>(P(),$("div",bl,[i(C,{style:{"margin-bottom":"18px","margin-left":"8px"},onClick:E=>x(K),color:"#4c83ff"},{default:p(()=>[i(u(Ht))]),_:2},1032,["onClick"]),i(F,{"label-width":"36px",label:"\u5F53",prop:["respData",K+"","varCodeValue"]},{default:p(()=>[i(U,{onCommand:E=>d(H,"varCode",E)},{dropdown:p(()=>[i(R,null,{default:p(()=>[(P(!0),$(de,null,ue(u(l),E=>(P(),X(I,{class:we({"el-action-dropdown":H.varCode===E.key}),command:E.key},{default:p(()=>[O(ee(E.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:p(()=>[(P(),$("span",{class:"el-dropdown-link",key:H.varCode},ee(u(n).payConstantList[H.varCode]||"\u8BF7\u9009\u62E9"),1))]),_:2},1032,["onCommand"]),H.var1Type==="input"?(P(),$("div",Cl,[O("\uFF08"),i(b,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:H.var1,"onUpdate:modelValue":E=>H.var1=E},null,8,["modelValue","onUpdate:modelValue"]),O("\uFF09")])):(P(),X(U,{key:1,onCommand:E=>d(H,"var1",E)},{dropdown:p(()=>[i(R,null,{default:p(()=>{var E;return[(P(!0),$(de,null,ue(((E=u(l).find(S=>S.key===H.varCode))==null?void 0:E.child)||[],S=>(P(),X(I,{class:we({"el-action-dropdown":H.var1===S.key}),command:S.key},{default:p(()=>[O(ee(S.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:p(()=>[N("span",wl," \uFF08 "+ee(u(n).payConstantList[H.var1]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(F,{label:"\u4E0D\u7B49\u4E8E",prop:["respData",K+"","resCodeValue"]},{default:p(()=>[i(U,{onCommand:E=>h(H,"resCode",E)},{dropdown:p(()=>[i(R,null,{default:p(()=>[(P(!0),$(de,null,ue(u(s),E=>(P(),X(I,{class:we({"el-action-dropdown":H.resCode===E.key}),command:E.key},{default:p(()=>[O(ee(E.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:p(()=>[N("span",xl,ee(u(n).quoteContOption[H.resCode]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),H.var2Type==="input"?(P(),$("div",kl,[O("\uFF08"),i(b,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:H.var2,"onUpdate:modelValue":E=>H.var2=E},null,8,["modelValue","onUpdate:modelValue"]),O("\uFF09")])):(P(),X(U,{key:1,onCommand:E=>h(H,"var2",E)},{dropdown:p(()=>[i(R,null,{default:p(()=>{var E;return[(P(!0),$(de,null,ue(((E=u(s).find(S=>S.key===H.resCode))==null?void 0:E.child)||[],S=>(P(),X(I,{class:we({"el-action-dropdown":H.var2===S.key}),command:S.key},{default:p(()=>[O(ee(S.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:p(()=>[N("span",Il," \uFF08 "+ee(u(n).quoteContOption[H.var2]||"\u8BF7\u9009\u62E9")+" \uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(F,{label:"\u5219\u63D0\u793A",prop:["respData",K+"","message"]},{default:p(()=>[i(b,{style:{width:"180px"},spellcheck:"false",placeholder:"\u8BF7\u8F93\u5165",modelValue:H.message,"onUpdate:modelValue":E=>H.message=E},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),N("span",{style:{color:"#f56c6c","font-size":"12px","margin-left":"16px","margin-bottom":"12px"},onClick:E=>k(K)},"\u5220\u9664",8,Dl)]))),256)),i(F,{"label-width":"48px",label:"\u5426\u5219",prop:"title"}),(P(!0),$(de,null,ue(u(n).dataOperate,(H,K)=>(P(),$("div",El,[i(F,{"label-width":"36px",label:"\u628A",prop:["dataOperate",K+"","varCodeValue"]},{default:p(()=>[i(U,{onCommand:E=>d(H,"varCode",E,2)},{dropdown:p(()=>[i(R,null,{default:p(()=>[(P(!0),$(de,null,ue(u(l),E=>(P(),X(I,{class:we({"el-action-dropdown":H.varCode===E.key}),command:E.key},{default:p(()=>[O(ee(E.title),1)]),_:2},1032,["class","command"]))),256))]),_:2},1024)]),default:p(()=>[N("span",Pl,ee(u(n).payConstantList[H.varCode]||"\u8BF7\u9009\u62E9"),1)]),_:2},1032,["onCommand"]),H.varType==="input"?(P(),$("div",Al,[O("\uFF08"),i(b,{placeholder:"\u8BF7\u8F93\u5165",style:{width:"100px"},spellcheck:"false",modelValue:H.var,"onUpdate:modelValue":E=>H.var=E},null,8,["modelValue","onUpdate:modelValue"]),O("\uFF09")])):(P(),X(U,{key:1,onCommand:E=>d(H,"var",E,2)},{dropdown:p(()=>[i(R,null,{default:p(()=>{var E;return[(P(!0),$(de,null,ue(((E=u(l).find(S=>S.key===H.varCode))==null?void 0:E.child)||[],S=>(P(),X(I,{class:we({"el-action-dropdown":H.var===S.key}),command:S.key},{default:p(()=>[O(ee(S.title),1)]),_:2},1032,["class","command"]))),256))]}),_:2},1024)]),default:p(()=>[N("span",Ml," \uFF08"+ee(u(n).payConstantList[H.var]||"\u8BF7\u9009\u62E9")+"\uFF09 ",1)]),_:2},1032,["onCommand"]))]),_:2},1032,["prop"]),i(F,{label:"\u7ED1\u5B9A\u5230",prop:["dataOperate",K+"","var"]},{default:p(()=>[N("div",Fl,ee(H.title),1)]),_:2},1032,["prop"])]))),256))]),_:1},8,["model","rules"]),N("div",Sl,[i(L,{loading:u(o),onClick:_,type:"primary"},{default:p(()=>[O("\u4FDD\u5B58\u5E76\u66F4\u65B0")]),_:1},8,["loading"])]),i(B,{"model-value":u(c).visible,"align-center":"","destroy-on-close":"","show-close":!u(c).loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:g},{footer:p(()=>[i(L,{class:"ml-auto",size:"small",loading:u(c).loading,onClick:g},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(L,{size:"small",loading:u(c).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:y},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[i(kt,{class:"dialogHeight",style:{margin:"0"},ref_key:"selectSignatureRef",ref:t},null,512)]),_:1},8,["model-value","show-close"])])}}},Lt=fe(Bl,[["__scopeId","data-v-79e36826"]]);const Tl={style:{padding:"0"},class:"dialogHeight"},Vl={class:"data"},Ol={class:"buttonBox"},$l={__name:"SendHeader",props:["activeMenu","makeOrderForm"],emits:["updataInterfaceId"],setup(r,{emit:e}){const t=r,n=j(),a=j(),o=j([]),l=oe({type:null,id:"",num:0,value:""}),s=g=>{l.id=g,g!==null&&f(l.id)},d=ge("editPayForm"),h=j(!1),c=async()=>{try{h.value=!0,l.type!==null&&(l.id=await a.value.saveData());const g=d.type==="makeOrder"?d.makeOrder:d.queryOrder,w=g?t.activeMenu.includes("SendHeader")?"header":"body":d.type;Qt({payId:d.payId||d.id,headerId:l.type!==null&&t.activeMenu.includes("SendHeader")?l.id:null,bodyId:l.type!==null&&t.activeMenu.includes("SendData")?l.id:null},g,w).then(_=>{g||e("updataInterfaceId",_),Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"})}).finally(()=>h.value=!1)}catch{console.log("saveSignError"),h.value=!1}};oe({num:0,title:"\u65E0"});const f=g=>{$e(()=>{a.value.open({id:l.id})})};return(()=>Gt(d.payId||d.id).then(g=>{o.value=g}))(),je(()=>{const g=d.type==="makeOrder"?d.makeOrder:d.queryOrder;g&&_t(g,t.activeMenu.includes("SendHeader")?"header":"body").then(w=>{l.id=t.activeMenu.includes("SendHeader")?w.headerId:w.bodyId,l.id&&(l.type=l.id),$e(()=>{a.value.open({id:l.id})})})}),(g,w)=>{const _=tt,M=ot,x=Se,A=ye,T=Be;return P(),$("div",Tl,[i(T,{ref_key:"ruleFormRef",ref:n,"label-width":"80px",model:u(l),"hide-required-asterisk":!1},{default:p(()=>[i(x,{label:t.activeMenu.includes("SendHeader")?"\u53D1\u9001\u5934":"\u53D1\u9001\u6570\u636E",prop:"type"},{default:p(()=>[i(M,{onChange:s,modelValue:u(l).type,"onUpdate:modelValue":w[0]||(w[0]=k=>u(l).type=k),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:p(()=>[i(_,{label:"\u65E0",value:null}),i(_,{label:"\u81EA\u5B9A\u4E49\u53D1\u9001\u6570\u636E",onClick:g.openEdit,value:""},null,8,["onClick"]),(P(!0),$(de,null,ue(u(o),k=>(P(),X(_,{label:k.title,value:k.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label"]),i(x,null,{default:p(()=>[N("div",Vl,[u(l).type!==null?(P(),X(Wt,{key:0,ref_key:"EditSendHeaderRef",ref:a},null,512)):le("",!0)])]),_:1}),i(x),i(x,null,{default:p(()=>[N("div",Ol,[i(A,{loading:u(h),onClick:c,type:"primary"},{default:p(()=>[O("\u4FDD\u5B58\u5E76\u66F4\u65B0")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])])}}},qe=fe($l,[["__scopeId","data-v-748f87fe"]]),Rl={class:"main"},Ll={style:{display:"flex","flex-direction":"row",height:"590px"}},Ul={style:{flex:"1","padding-top":"24px",overflow:"hidden"}},Nl=We({__name:"HttpSign",emits:["updataAddrld"],setup(r,{expose:e,emit:t}){const n=j("OrderPlacement-InterfaceConfig"),a=oe({id:"",title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",config:[],type:"",payId:""}),o=()=>{s.visible=!1},l=c=>{c&&(a.type==="makeOrder"?a.makeOrder=c:a.queryOrder=c),t("updataAddrld",c)},s=oe({loading:!1,visible:!1,meuns:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderPlacement-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderPlacement-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderPlacement-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderPlacement-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderPlacement-ImitateTest"}]});ho("editPayForm",a);const d=ge("editPayForm");return e({openModal:c=>{a.payId=d.payId||d.id,a.type="sign",a.id="paySign",a.type==="makeOrder"?a.makeOrder=c.id:a.queryOrder=c.id,s.visible=!0}}),(c,f)=>{const y=Ce;return P(),$("div",Rl,[i(y,{"model-value":u(s).visible,"show-close":!u(s).loading,"align-center":"","close-on-press-escape":!1,title:"HTTP\u9A8C\u8BC1",width:1200,"z-index":1e3,"close-on-click-modal":!1,onClose:o},{default:p(()=>[N("div",Ll,[i(vo,{style:{"padding-bottom":"16px",height:"590px"},activeMenu:u(n),"onUpdate:activeMenu":f[0]||(f[0]=g=>mo(n)?n.value=g:null),data:u(s).meuns},null,8,["activeMenu","data"]),N("div",Ul,[u(n)==="OrderPlacement-InterfaceConfig"?(P(),X(Rt,{key:0,onUpdataInterfaceId:l})):le("",!0),u(n)==="OrderPlacement-SendHeader"?(P(),X(qe,{key:1,onUpdataInterfaceId:l,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderPlacement-SendData"?(P(),X(qe,{key:2,onUpdataInterfaceId:l,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderPlacement-RespData"?(P(),X(Lt,{key:3,onUpdataInterfaceId:l})):le("",!0),u(n)==="OrderPlacement-ImitateTest"?(P(),X($t,{key:4,onUpdataInterfaceId:l})):le("",!0)])])]),_:1},8,["model-value","show-close"])])}}});const Hl=fe(Nl,[["__scopeId","data-v-58e78a18"]]);const jl={class:"signa"},zl={key:2,style:{padding:"0 12px"}},ql=["onClick"],Kl={__name:"AddSignature",setup(r,{expose:e}){const t=j(),n=j(),a=j(),o=j(),l=j([]),s=oe({argumentId:null,type:0,title:"",addrId:"",id:"",process:[]}),d=oe({value:"key",label:"title",children:"child"}),h=j([]),c=ge("editPayForm"),f=j(),y=F=>{f.value=F},g=F=>{$e(()=>{var D;(D=a.value)==null||D.open({id:F})})},w=F=>{s.argumentId=F,F!==null&&g(s.argumentId)},_=()=>(console.log(c,"editPayForm"),Gt(c.payId||c.id).then(F=>{l.value=F})),M=F=>{var L;const D=v(h.value,F.code);D.type!=="label"&&(D==null?void 0:D.child)&&(f.value=F,(L=n.value)==null||L.open(D,F.args))},x=()=>{s.process=[],s.type===0&&(s.title="")},A=()=>{var F;(F=t.value)==null||F.openModal({id:s.addrId})},T=F=>{s.addrId=F},k=F=>{const D=["\u96F6","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"],L="\u5341",B=F.toString().split("");let H="";return B.length===2?(B[0]==="1"?H+=L:B[0]!=="0"&&(H+=D[parseInt(B[0])]+L),B[1]!=="0"&&(H+=D[parseInt(B[1])])):H+=D[parseInt(B[0])],H};_();function v(F,D){for(let L of F){if(L.key===D)return L;if(L.child&&L.child.length>0){let B=v(L.child,D);if(B)return B}}return null}const m=F=>{var L;const D=v(h.value,F[1]);D.type!=="label"&&(D==null?void 0:D.child)?(L=n.value)==null||L.open(D):(f.value.code=D.key,f.value.args=null,f.value.name=D.title)},C=F=>{f.value.code=F==null?void 0:F.code,f.value.args=F==null?void 0:F.args,f.value.name=F==null?void 0:F.name},I=F=>{Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(s.process.splice(F,1)))},R=()=>{s.process.push({})};return Wo().then(F=>{h.value=F.map(D=>({...D,leaf:!1,child:D.child.map(L=>({...L,leaf:!0}))}))}),e({saveSign:async()=>{var F,D;try{return s.type===0?null:s.type===1&&!s.title?Promise.reject(Kt.error("\u8BF7\u586B\u5199\u7B97\u6CD5\u540D\u79F0")):(console.log(s.argumentId,";value"),s.argumentId!=null&&(s.argumentId=await a.value.saveData()),console.log(s.argumentId,"value"),s.id?await on({...s,payId:c.payId||c.id,addrId:s.type===2?s.addrId:"",process:((F=s.process)==null?void 0:F.length)>0&&s.type===1?s.process:null}).then(L=>Promise.resolve(s.id)):await tn({...s,payId:c.payId||c.id,addrId:s.type===2?s.addrId:"",process:((D=s.process)==null?void 0:D.length)>0&&s.type===1?s.process:null}).then(L=>Promise.resolve(L)))}catch(L){throw console.log("saveSignError"),new Error(L)}},initSign:({id:F})=>{nn(F).then(D=>{s.title=D.title,s.id=F,s.addrId=D.addrId,s.id&&(s.addrId?s.type=2:s.type=1),D.process&&(s.process=JSON.parse(D.process)),D.argumentId&&(s.argumentId=D.argumentId),g(s.argumentId)})}}),(F,D)=>{const L=tt,B=ot,H=Se,K=Ie,E=ye,S=rt,V=Uo,Z=st,ce=Be;return P(),$("div",jl,[i(ce,{ref_key:"ruleFormRef",ref:o,"label-width":"80px",model:u(s),"hide-required-asterisk":!1},{default:p(()=>[i(H,{label:"\u8BBE\u7F6E\u914D\u7F6E",prop:"argumentId"},{default:p(()=>[i(B,{onChange:w,modelValue:u(s).argumentId,"onUpdate:modelValue":D[0]||(D[0]=J=>u(s).argumentId=J),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:p(()=>[i(L,{label:"\u65E0",value:null}),i(L,{label:"\u81EA\u5B9A\u4E49\u53D1\u9001\u6570\u636E",onClick:F.openEdit,value:""},null,8,["onClick"]),(P(!0),$(de,null,ue(u(l),J=>(P(),X(L,{label:J.title,value:J.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),u(s).argumentId!==null?(P(),X(Wt,{key:0,ref_key:"EditSendHeaderRef",ref:a},null,512)):le("",!0),i(H,{label:"\u914D\u7F6E\u8FD0\u7B97"},{default:p(()=>[i(B,{modelValue:u(s).type,"onUpdate:modelValue":D[1]||(D[1]=J=>u(s).type=J),onChange:x,class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u53D1\u9001\u5934\u8BBE\u7F6E"},{default:p(()=>[i(L,{label:"\u65E0",value:0}),i(L,{label:"\u81EA\u5B9A\u4E49\u7B97\u6CD5\u6821\u9A8C",value:1}),i(L,{onClick:A,label:"HTTP\u9A8C\u8BC1",value:2})]),_:1},8,["modelValue"])]),_:1}),u(s).type===1||u(s).type===2?(P(),X(H,{key:1,label:"\u7B97\u6CD5\u540D\u79F0",prop:"title"},{default:p(()=>[i(K,{spellcheck:"false",modelValue:u(s).title,"onUpdate:modelValue":D[2]||(D[2]=J=>u(s).title=J),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u7B97\u6CD5\u540D\u79F0"},null,8,["modelValue"])]),_:1})):le("",!0),u(s).type===1?(P(),$("div",zl,[i(H,{label:"\u81EA\u5B9A\u4E49\u7B7E\u540D"},{default:p(()=>[i(E,{onClick:R,type:"primary"},{default:p(()=>[O("\u65B0\u589E\u7B7E\u540D\u6B65\u9AA4")]),_:1})]),_:1}),i(Z,{data:u(s).process},{default:p(()=>[i(S,{prop:"order",label:"\u6B65\u9AA4",width:"80"},{default:p(({row:J,$index:_e})=>[O(" \u7B2C"+ee(k(_e+1))+"\u6B65 ",1)]),_:1}),i(S,{prop:"code",label:"\u7B7E\u540D\u53C2\u6570\u64CD\u4F5C",width:"280"},{default:p(({row:J})=>[i(V,{modelValue:J.code,"onUpdate:modelValue":_e=>J.code=_e,onFocus:_e=>y(J),props:u(d),options:u(h),onChange:m},null,8,["modelValue","onUpdate:modelValue","onFocus","props","options"])]),_:1}),i(S,{prop:"args",label:"\u503C"},{default:p(({row:J})=>[N("div",{onClick:_e=>M(J)},ee(J.name),9,ql)]),_:1}),i(S,{label:"\u64CD\u4F5C"},{default:p(({row:J,$index:_e})=>[i(E,{type:"danger",link:"",onClick:De=>I(_e)},{default:p(()=>[O("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):le("",!0)]),_:1},8,["model"]),i(An,{onLoad:C,ref_key:"editParamModalRef",ref:n},null,512),i(Hl,{onUpdataAddrld:T,ref_key:"httpSignRef",ref:t},null,512)])}}},kt=fe(Kl,[["__scopeId","data-v-47f968f5"]]),Gl={style:{margin:"0 24px 24px 16px","max-height":"542px",overflow:"auto"}},Wl={key:0},Xl={key:1},Zl={__name:"index",setup(r){const e=j(),t=oe({data:[]}),n=ge("editPayForm"),a=oe({loading:!1,visible:!1}),o=()=>{en(n.payId||n.id).then(c=>{t.data=c})},l=async c=>{a.visible=!0,$e(async()=>{await e.value.initSign({id:c.id})})},s=async()=>{a.loading=!0,await e.value.saveSign(),a.loading=!1,d()},d=()=>{a.visible=!1},h=c=>Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u6E20\u9053\u5220\u9664\u6210\u529F"},()=>an(c.id).then(f=>(o(),f)));return je(()=>{o()}),(c,f)=>{const y=rt,g=ye,w=st,_=Ce;return P(),$("div",Gl,[i(w,{border:"",data:u(t).data},{default:p(()=>[i(y,{prop:"id",label:"\u7B97\u6CD5\u6807\u8BC6"}),i(y,{prop:"title",label:"\u7B97\u6CD5\u540D\u79F0"}),i(y,{prop:"calcID",label:"\u7B97\u6CD5\u65B9\u5F0F"},{default:p(({row:M})=>[M.addrId?(P(),$("span",Wl," HTTP\u7B7E\u540D ")):(P(),$("span",Xl,ee(M.process?"\u81EA\u5B9A\u4E49\u7B97\u6CD5\u6821\u9A8C":"\u65E0"),1))]),_:1}),i(y,{label:"\u64CD\u4F5C"},{default:p(({row:M,$index:x})=>[i(g,{type:"primary",link:"",onClick:A=>l(M)},{default:p(()=>[O("\u7F16\u8F91")]),_:2},1032,["onClick"]),i(g,{type:"danger",link:"",onClick:A=>h(M)},{default:p(()=>[O("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(_,{"model-value":u(a).visible,"align-center":"","destroy-on-close":"","show-close":!u(a).loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:d},{footer:p(()=>[i(g,{class:"ml-auto",size:"small",loading:u(a).loading,onClick:d},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(g,{size:"small",loading:u(a).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:s},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[i(kt,{class:"dialogHeight",style:{margin:"0"},ref_key:"AddSignatureRef",ref:e},null,512)]),_:1},8,["model-value","show-close"])])}}},Jl={style:{margin:"0 24px 24px 16px","max-height":"542px",overflow:"auto"}},Yl={key:0},Ql={key:1},er={__name:"index",setup(r){const e=j(),t=oe({data:[]}),n=oe({loading:!1,visible:!1}),a=ge("editPayForm"),o=()=>{Gt(a.payId||a.id).then(c=>{t.data=c})},l=c=>Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u6E20\u9053\u5220\u9664\u6210\u529F"},()=>Qo(c.id).then(f=>(o(),f))),s=async()=>{try{n.loading=!0;const c=await e.value.saveData();n.loading=!1,Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),d()}catch{}},d=()=>{n.visible=!1,o()},h=c=>{n.visible=!0,$e(()=>{e.value.open({id:c.id})})};return je(()=>{o()}),(c,f)=>{const y=rt,g=ye,w=st,_=Ce;return P(),$("div",Jl,[i(w,{border:"",data:u(t).data},{default:p(()=>[i(y,{prop:"id",label:"\u914D\u7F6E\u6807\u8BC6"}),i(y,{prop:"title",label:"\u914D\u7F6E\u540D\u79F0"}),i(y,{prop:"number",label:"\u6570\u636E\u9879"}),i(y,{prop:"calcID",label:"\u914D\u7F6E\u52A0\u7B7E"},{default:p(({row:M})=>[M.calcID?(P(),$("span",Yl," \u81EA\u5B9A\u4E49\u7B97\u6CD5\u6821\u9A8C")):(P(),$("span",Ql,"\u65E0 "))]),_:1}),i(y,{label:"\u64CD\u4F5C"},{default:p(({row:M,$index:x})=>[i(g,{type:"primary",link:"",onClick:A=>h(M)},{default:p(()=>[O("\u7F16\u8F91")]),_:2},1032,["onClick"]),i(g,{type:"danger",link:"",onClick:A=>l(M)},{default:p(()=>[O("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),i(_,{"model-value":u(n).visible,"align-center":"","destroy-on-close":"","show-close":!u(n).loading,"close-on-press-escape":!1,title:"\u7F16\u8F91\u7B97\u6CD5\u7EC4",width:1200,"z-index":100,"close-on-click-modal":!1,onClose:d},{footer:p(()=>[i(g,{class:"ml-auto",size:"small",loading:u(n).loading,onClick:d},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(g,{size:"small",loading:u(n).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:s},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[i(Wt,{class:"dialogHeight","is-write":!0,style:{margin:"0"},ref_key:"EditSendHeaderRef",ref:e},null,512)]),_:1},8,["model-value","show-close"])])}}};const tr={style:{"padding-left":"16px"}},or={class:"publicSetting"},nr={style:{"padding-right":"120px"}},ar={class:"info"},lr={class:"buttonBox"},rr={__name:"index",setup(r){const e=ge("editPayForm"),t=j(),n=j(!1),a=j({}),o=oe({id:"",title:"",clientId:[],state:1}),l=j([]),s=j([]),d=e.payId||e.id;d&&et(d).then(w=>{s.value=w});const h=()=>{l.value.push({})},c=w=>{Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>Promise.resolve(l.value.splice(w,1)))},f=w=>{try{return w.forEach(_=>{Object.keys(_).forEach(M=>{if(console.log(_),_[M]===null||_[M]===""||_[M]===void 0)throw new Error(_[M])})}),!0}catch(_){return console.log(_.message),Kt.error("\u8BF7\u5B8C\u5584\u8868\u683C\u53C2\u6570"),!1}},y=()=>{n.value=!0,f(l.value)&&zo({...a.value,...o,clientWeb:o.clientId.includes("Web")?1:2,clientH5:o.clientId.includes("H5")?1:2,clientAPP:o.clientId.includes("App")?1:2,config:l.value.length>0?l.value:null}).then(w=>{Me({position:"bottom-right",type:"success",message:"\u4FDD\u5B58\u6210\u529F"}),g()}).finally(()=>{n.value=!1})},g=()=>{e.id&&Ho(e.id).then(w=>{o.id=w.id,w.clientAPP===1&&o.clientId.push("App"),w.clientH5===1&&o.clientId.push("H5"),w.clientWeb===1&&o.clientId.push("Web"),o.state=w.state,o.title=w.title,w.config&&(l.value=JSON.parse(w.config)),a.value={...w}})};return je(()=>{g()}),(w,_)=>{const M=Ie,x=Se,A=nt,T=Ut,k=Nt,v=lt,m=rt,C=ye,I=st,R=Be;return P(),$("div",tr,[i(R,{ref_key:"ruleFormRef",ref:t,"label-width":"80px",model:u(o),"hide-required-asterisk":!1},{default:p(()=>[i(x,{label:"\u652F\u4ED8\u540D\u79F0",prop:"title"},{default:p(()=>[i(M,{spellcheck:"false",modelValue:u(o).title,"onUpdate:modelValue":_[0]||(_[0]=U=>u(o).title=U),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6E20\u9053\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(x,{label:"\u652F\u4ED8\u72B6\u6001",prop:"status"},{default:p(()=>[i(A,{modelValue:u(o).state,"onUpdate:modelValue":_[1]||(_[1]=U=>u(o).state=U),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1}),i(x,{label:"\u5BA2\u6237\u7AEF",prop:"clientId"},{default:p(()=>[i(k,{modelValue:u(o).clientId,"onUpdate:modelValue":_[2]||(_[2]=U=>u(o).clientId=U)},{default:p(()=>[i(T,{label:"Web"}),i(T,{label:"H5"}),i(T,{label:"App"})]),_:1},8,["modelValue"])]),_:1}),i(x,{label:"\u516C\u5171\u914D\u7F6E",prop:"clientId"},{default:p(()=>[N("div",or,[N("div",{onClick:h,class:"publicSettingItem"},[i(v,null,{default:p(()=>[i(u(Ht))]),_:1}),O(" \u81EA\u5B9A\u4E49\u914D\u7F6E\u9879 ")])])]),_:1}),i(x,{label:"",prop:"clientId"},{default:p(()=>[N("div",nr,[i(I,{border:"",class:we({"show-border":u(l).length===0}),data:u(l)},{default:p(()=>[i(m,{prop:"var",label:"\u53D8\u91CF\u540D",width:"180"},{default:p(({row:U})=>[i(M,{placeholder:"\u70B9\u51FB\u8F93\u5165",spellcheck:"false",modelValue:U.var,"onUpdate:modelValue":b=>U.var=b,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(m,{prop:"remark",label:"\u5907\u6CE8",width:"180"},{default:p(({row:U})=>[i(M,{placeholder:"\u70B9\u51FB\u8F93\u5165",spellcheck:"false",modelValue:U.remark,"onUpdate:modelValue":b=>U.remark=b,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(m,{prop:"value",width:"380",label:"\u9ED8\u8BA4\u503C"},{default:p(({row:U})=>[i(M,{placeholder:"\u70B9\u51FB\u8F93\u5165",type:"textarea",rows:1,spellcheck:"false",modelValue:U.value,"onUpdate:modelValue":b=>U.value=b,modelModifiers:{trim:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),i(m,{label:"\u64CD\u4F5C"},{default:p(({row:U,$index:b})=>[i(C,{type:"danger",link:"",onClick:F=>c(b)},{default:p(()=>[O("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["class","data"])])]),_:1}),i(x,{label:"",prop:"clientId"},{default:p(()=>[N("div",ar,[i(v,{style:{"margin-right":"16px"},size:16,color:"#FF9F46"},{default:p(()=>[i(u(fo))]),_:1}),O(" \u516C\u5171\u914D\u7F6E\u652F\u6301\u5F15\u7528\u8C03\u7528\uFF0C\u5F15\u7528\u793A\u4F8B\uFF1A"+ee("<<PayCfg.APPID>>"),1)])]),_:1}),i(x,{label:"",prop:"clientId"},{default:p(()=>[N("div",lr,[i(C,{loading:u(n),onClick:y,type:"primary"},{default:p(()=>[O("\u4FDD\u5B58\u5E76\u66F4\u65B0")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])])}}},sr=fe(rr,[["__scopeId","data-v-61eb3398"]]),ir={class:"main-1"},dr={style:{display:"flex","flex-direction":"row"}},ur={style:{flex:"1","padding-top":"24px",overflow:"hidden"}},cr=We({__name:"editPay",emits:["updataTableList"],setup(r,{expose:e,emit:t}){const n=j("PublicConfig"),a={id:null,title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",config:[],type:""},o=oe({id:null,title:"",state:1,clientWeb:1,clientH5:1,clientAPP:1,makeOrder:"",queryOrder:"",config:[],type:""}),l=()=>{Object.keys(a).forEach(f=>{o[f]=a[f]}),t("updataTableList"),n.value="",s.visible=!1},s=oe({loading:!1,visible:!1,meuns:[{name:"\u516C\u5171\u914D\u7F6E",key:"PublicConfig",icon:["#icon-tishi"]},{name:"\u7EDF\u4E00\u4E0B\u5355",key:"OrderPlacement",icon:["#icon-jiaqian","#icon-tishi"],redirectKey:"OrderPlacement-InterfaceConfig",children:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderPlacement-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderPlacement-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderPlacement-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderPlacement-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderPlacement-ImitateTest"}]},{name:"\u8BA2\u5355\u67E5\u8BE2",key:"OrderQuery",icon:[{name:"#icon-jiaqian",color:"#57C76D"}],redirectKey:"OrderQuery-InterfaceConfig",children:[{name:"\u63A5\u53E3\u914D\u7F6E",key:"OrderQuery-InterfaceConfig"},{name:"\u53D1\u9001\u5934",key:"OrderQuery-SendHeader"},{name:"\u53D1\u9001\u6570\u636E",key:"OrderQuery-SendData"},{name:"\u54CD\u5E94\u6570\u636E",key:"OrderQuery-RespData"},{name:"\u6A21\u62DF\u6D4B\u8BD5",key:"OrderQuery-ImitateTest"}]},{name:"\u914D\u7F6E\u7EC4\u7BA1\u7406",key:"ConfigSetting",icon:[]},{name:"\u7B97\u6CD5\u7EC4\u7BA1\u7406",key:"AlgoGroupSetting",icon:[]}]}),d=f=>{n.value="PublicConfig",Object.keys(o).forEach(y=>{o[y]=f[y]}),o.id=f.id,console.log(o,f,"from"),s.visible=!0},h=f=>{f.includes("OrderPlacement")&&(o.type="makeOrder"),f.includes("OrderQuery")&&(o.type="queryOrder")},c=f=>{f&&(o.type==="makeOrder"?o.makeOrder=f:o.queryOrder=f)};return ho("editPayForm",o),e({openModal:d}),(f,y)=>{const g=Ce;return P(),$("div",ir,[i(g,{"model-value":u(s).visible,"align-center":"","show-close":!u(s).loading,"close-on-press-escape":!1,title:"\u7ED1\u5B9A\u7AD9\u70B9",width:1200,"z-index":20,"close-on-click-modal":!1,onClose:l},{default:p(()=>[N("div",dr,[i(vo,{onChange:h,style:{"padding-bottom":"16px"},activeMenu:u(n),"onUpdate:activeMenu":y[0]||(y[0]=w=>mo(n)?n.value=w:null),data:u(s).meuns},null,8,["activeMenu","data"]),N("div",ur,[u(n)==="PublicConfig"?(P(),X(sr,{key:0})):le("",!0),u(n)==="OrderPlacement-InterfaceConfig"?(P(),X(Rt,{key:1,onUpdataInterfaceId:c})):le("",!0),u(n)==="OrderPlacement-SendHeader"?(P(),X(qe,{key:2,onUpdataInterfaceId:c,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderPlacement-SendData"?(P(),X(qe,{key:3,onUpdataInterfaceId:c,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderPlacement-RespData"?(P(),X(Lt,{key:4,onUpdataInterfaceId:c})):le("",!0),u(n)==="OrderPlacement-ImitateTest"?(P(),X($t,{key:5,onUpdataInterfaceId:c})):le("",!0),u(n)==="OrderQuery-InterfaceConfig"?(P(),X(Rt,{key:6,onUpdataInterfaceId:c})):le("",!0),u(n)==="OrderQuery-SendHeader"?(P(),X(qe,{key:7,onUpdataInterfaceId:c,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderQuery-SendData"?(P(),X(qe,{key:8,onUpdataInterfaceId:c,activeMenu:u(n)},null,8,["activeMenu"])):le("",!0),u(n)==="OrderQuery-RespData"?(P(),X(Lt,{key:9,onUpdataInterfaceId:c})):le("",!0),u(n)==="OrderQuery-ImitateTest"?(P(),X($t,{key:10,onUpdataInterfaceId:c})):le("",!0),u(n)==="ConfigSetting"?(P(),X(er,{key:11})):le("",!0),u(n)==="AlgoGroupSetting"?(P(),X(Zl,{key:12})):le("",!0)])])]),_:1},8,["model-value","show-close"])])}}});const pr=fe(cr,[["__scopeId","data-v-f6c6fb34"]]),It=r=>(dt("data-v-2c4ff6f1"),r=r(),ut(),r),fr=It(()=>N("span",{style:{"font-size":"12px",margin:"0 18px 0 6px"}},"\u5143",-1)),mr=It(()=>N("span",{class:"ps"},"\u6536\u6B3E\u91D1\u989D",-1)),hr=It(()=>N("span",{style:{"font-size":"12px",margin:"0 18px 0 6px"}},"\u5143",-1)),gr=It(()=>N("span",{class:"ps"},"\u6536\u6B3E\u91D1\u989D",-1)),yr=We({__name:"editWxPay",emits:["load"],setup(r,{expose:e,emit:t}){const n=j(),a=j(0),o=oe({dayMaxMoney:void 0,onceMaxMoney:void 0,sort:0,name:"",appId:"",apiv3Key:"",macId:"",parivate_Key:"",serialNo:"",status:1}),l=oe({loading:!1,visible:!1,other:void 0}),s=ge("debounce")(y=>{!y||y.validate(g=>{g&&(l.loading=!0,yo({...o,id:l.other.id,dayMaxMoney:o.dayMaxMoney?o.dayMaxMoney*100:void 0,onceMaxMoney:o.onceMaxMoney?o.onceMaxMoney*100:void 0,wechatPay:{apiv3Key:o.apiv3Key,appId:o.appId,macId:o.macId,parivate_Key:o.parivate_Key,serialNo:o.serialNo}},2).then(w=>{var _;Me({position:"bottom-right",type:"success",message:(_=l.other)!=null&&_.id?"\u914D\u7F6E\u66F4\u65B0\u6210\u529F":"\u914D\u7F6E\u65B0\u589E\u6210\u529F"}),t("load",w),a.value=w,d()}).finally(()=>{l.loading=!1}))})},300),d=()=>{l.other=void 0,l.visible=!1},h={};function c(){var y,g,w,_,M,x,A,T,k,v,m,C,I,R,U;Object.keys(o).forEach(b=>{var F,D;((F=l.other)==null?void 0:F[b])!==void 0&&(o[b]=(D=l.other)==null?void 0:D[b])}),o.dayMaxMoney=(y=l.other)!=null&&y.dayMaxMoney?((g=l.other)==null?void 0:g.dayMaxMoney)/100:void 0,o.onceMaxMoney=(w=l.other)!=null&&w.onceMaxMoney?((_=l.other)==null?void 0:_.onceMaxMoney)/100:void 0,o.id=(M=l.other)==null?void 0:M.id,o.apiv3Key=(A=(x=l.other)==null?void 0:x.WechatPay)==null?void 0:A.apiv3Key,o.macId=(k=(T=l.other)==null?void 0:T.WechatPay)==null?void 0:k.macId,o.parivate_Key=(m=(v=l.other)==null?void 0:v.WechatPay)==null?void 0:m.parivate_Key,o.appId=(I=(C=l.other)==null?void 0:C.WechatPay)==null?void 0:I.appId,o.serialNo=(U=(R=l.other)==null?void 0:R.WechatPay)==null?void 0:U.serialNo}e({open(y){var g;console.log(y,"id"),y?_o(y).then(w=>{l.visible=!0,l.other=w}):((g=n.value)==null||g.resetFields(),l.visible=!0,l.other={})},formId:a,clearFrom(){a.value=0}});const f=Qe(()=>{var y;return(y=l.other)!=null&&y.id?"\u7F16\u8F91\u914D\u7F6E":"\u65B0\u589E\u914D\u7F6E"});return(y,g)=>{const w=Ie,_=Se,M=po,x=nt,A=Be,T=ye,k=Ce,v=at;return P(),$("div",null,[i(k,{"model-value":l.visible,"show-close":!l.loading,"close-on-press-escape":!1,title:u(f),width:450,"z-index":20,"close-on-click-modal":!1,onClose:d,onOpened:c},{footer:p(()=>[i(T,{class:"ml-auto",loading:l.loading,onClick:d},{default:p(()=>[O(" \u53D6\u6D88 ")]),_:1},8,["loading"]),i(T,{loading:l.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:g[10]||(g[10]=m=>u(s)(n.value))},{default:p(()=>[O(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:p(()=>[it((P(),$("div",null,[i(A,{ref_key:"ruleFormRef",ref:n,"label-width":"95px",model:o,rules:h,"hide-required-asterisk":!1},{default:p(()=>[i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},prop:"name",label:"\u914D\u7F6E\u540D\u79F0"},{default:p(()=>[i(w,{modelValue:o.name,"onUpdate:modelValue":g[0]||(g[0]=m=>o.name=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u914D\u7F6E\u540D\u79F0"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},prop:"appId",label:"\u5E94\u7528ID"},{default:p(()=>[i(w,{modelValue:o.appId,"onUpdate:modelValue":g[1]||(g[1]=m=>o.appId=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528ID"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5E94\u7528Secret"},prop:"apiv3Key",label:"\u5E94\u7528Secret"},{default:p(()=>[i(w,{modelValue:o.apiv3Key,"onUpdate:modelValue":g[2]||(g[2]=m=>o.apiv3Key=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5E94\u7528Secret"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u6237ID"},prop:"macId",label:"\u5546\u6237ID"},{default:p(()=>[i(w,{modelValue:o.macId,"onUpdate:modelValue":g[3]||(g[3]=m=>o.macId=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5546\u6237ID"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5546\u6237\u5BC6\u94A5"},prop:"parivate_Key",label:"\u5546\u6237\u5BC6\u94A5"},{default:p(()=>[i(w,{modelValue:o.parivate_Key,"onUpdate:modelValue":g[4]||(g[4]=m=>o.parivate_Key=m),clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5546\u6237\u5BC6\u94A5",rows:1,type:"textarea"},null,8,["modelValue"])]),_:1}),i(_,{rules:{required:!0,message:"\u8BF7\u8F93\u5165\u5E8F\u5217\u53F7"},prop:"serialNo",label:"\u5E8F\u5217\u53F7"},{default:p(()=>[i(w,{modelValue:o.serialNo,"onUpdate:modelValue":g[5]||(g[5]=m=>o.serialNo=m),type:"text",clearable:"",class:"input emailIpt",placeholder:"\u8BF7\u8F93\u5165\u5E8F\u5217\u53F7"},null,8,["modelValue"])]),_:1}),i(_,{prop:"dayMaxMoney",label:"\u5355\u65E5\u6700\u9AD8"},{default:p(()=>[i(M,{modelValue:o.dayMaxMoney,"onUpdate:modelValue":g[6]||(g[6]=m=>o.dayMaxMoney=m),modelModifiers:{number:!0},clearable:"",precision:0,"step-strictly":"",min:0,"controls-position":"right",placeholder:"\u5355\u65E5\u6700\u9AD8"},null,8,["modelValue"]),fr,mr]),_:1}),i(_,{prop:"onceMaxMoney",label:"\u5355\u7B14\u6700\u9AD8",rules:{validator:(m,C,I)=>{o.onceMaxMoney&&o.onceMaxMoney>o.dayMaxMoney?I("\u5355\u7B14\u6700\u9AD8\u4E0D\u80FD\u5927\u4E8E\u5355\u65E5\u6700\u9AD8\u6536\u6B3E\u91D1\u989D"):I()},trigger:"blur"}},{default:p(()=>[i(M,{modelValue:o.onceMaxMoney,"onUpdate:modelValue":g[7]||(g[7]=m=>o.onceMaxMoney=m),modelModifiers:{number:!0},clearable:"",precision:0,class:"w80","step-strictly":"",min:1,"controls-position":"right",placeholder:"\u5355\u7B14\u6700\u9AD8"},null,8,["modelValue"]),hr,gr]),_:1},8,["rules"]),i(_,{prop:"sort",label:"\u5E8F\u53F7"},{default:p(()=>[i(M,{modelValue:o.sort,"onUpdate:modelValue":g[8]||(g[8]=m=>o.sort=m),modelModifiers:{number:!0},clearable:"",precision:0,class:"w80","step-strictly":"",min:1,"controls-position":"right",placeholder:"\u5E8F\u53F7"},null,8,["modelValue"])]),_:1}),i(_,{label:"\u72B6\u6001",prop:"status"},{default:p(()=>[i(x,{modelValue:o.status,"onUpdate:modelValue":g[9]||(g[9]=m=>o.status=m),"active-value":1,"inactive-value":2},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])),[[v,l.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const _r=fe(yr,[["__scopeId","data-v-2c4ff6f1"]]);const vr={class:"flex-y box",style:{"padding-top":"24px"}},br={class:"flex-x-between"},Cr={class:"search m-0"},wr={style:{gap:"12px","padding-top":"16px"},class:"flex-y"},xr={style:{display:"flex","align-items":"center",width:"80px",cursor:"pointer"}},kr={key:1},Ir={style:{display:"flex","justify-content":"flex-end"}},Hr={__name:"index",setup(r){const e=j(),t=j(),n=j(),a=j(),o=j();j();const l=j({pageIndex:1,pageSize:20,total:0}),s=oe({loading:!1,data:[],searchVal:{keywords:""},selectList:[],load(f){l.value=f||l.value,s.loading=!0,No().then(y=>{s.data=y}).finally(()=>{s.loading=!1})},handleSelectionChange(f){s.selectList=f},sortChnage({column:f,prop:y,order:g}){g?s.searchVal.order=`${y} ${g==="ascending"?"asc":"desc"}`:s.searchVal.order="",s.load()}}),d=f=>{t.value.openModal(f)},h=f=>{switch(f==null?void 0:f.payType){case"alipay":a.value.open(f.payConfigId);break;case"wechat":o.value.open(f.payConfigId);break;case"custom":n.value.openModal(f);break}},c={del:f=>Ge({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u5220\u9664\u6210\u529F"},()=>qo(f.id).then(y=>(s.load(),y)))};return s.load(),(f,y)=>{const g=ye,w=Bo,_=rt,M=lt,x=go,A=st,T=Vo,k=at;return P(),$("div",vr,[i(Oo,null,{default:p(()=>[O("\u652F\u4ED8\u7BA1\u7406")]),_:1}),N("div",br,[N("div",null,[i(g,{type:"primary",onClick:y[0]||(y[0]=v=>{var m;return(m=u(e))==null?void 0:m.open({})})},{default:p(()=>[O(" \u65B0\u589E\u652F\u4ED8 ")]),_:1})]),N("div",Cr,[i(w,{modelValue:u(s).searchVal.keywords,"onUpdate:modelValue":y[1]||(y[1]=v=>u(s).searchVal.keywords=v),onChange:y[2]||(y[2]=()=>{u(l).pageIndex=1,u(s).load()})},null,8,["modelValue"])])]),it((P(),X(A,{class:"auto",data:u(s).data,stripe:!0,onSortChange:u(s).sortChnage,onSelectionChange:u(s).handleSelectionChange},{default:p(()=>[i(_,{type:"index",label:"\u5E8F\u53F7",width:"100"}),i(_,{prop:"title",label:"\u652F\u4ED8\u540D\u79F0","show-overflow-tooltip":!0}),i(_,{prop:"ceilingAmount",label:"\u4E0A\u9650\u91D1\u989D"},{default:p(({row:v})=>[O(ee(v.ceilingAmount===0?"\u65E0\u9650\u5236":v.ceilingAmount),1)]),_:1}),i(_,{prop:"minimumAmount",label:"\u4E0B\u9650\u91D1\u989D"},{default:p(({row:v})=>[O(ee(v.minimumAmount===0?"\u65E0\u9650\u5236":v.minimumAmount),1)]),_:1}),i(_,{label:"\u4F7F\u7528\u7AD9\u70B9"},{default:p(({row:v})=>{var m,C;return[(m=v.sites)!=null&&m.length?(P(),X(x,{key:0,placement:"right",width:200,trigger:"hover"},{reference:p(()=>{var I;return[N("div",xr,[O(ee(((I=v.sites)==null?void 0:I.length)||0)+" ",1),i(M,{style:{background:"#4b82fa","border-radius":"6px",padding:"0 2px","margin-left":"4px"},color:"#fff",size:12},{default:p(()=>[i(u(To))]),_:1})])]}),default:p(()=>[N("div",wr,[(P(!0),$(de,null,ue(v.sites,I=>(P(),$("p",null,ee(I.name),1))),256))])]),_:2},1024)):(P(),$("span",kr,ee(((C=v.sites)==null?void 0:C.length)||0),1))]}),_:1}),i(_,{fixed:"right",label:"\u64CD\u4F5C",align:"right",width:"180"},{default:p(({row:v})=>[i(g,{onClick:m=>d(v),type:"primary",link:""},{default:p(()=>[O(" \u7ED1\u5B9A\u7AD9\u70B9 ")]),_:2},1032,["onClick"]),i(g,{type:"primary",link:"",onClick:m=>h(v)},{default:p(()=>[O(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),i(g,{type:"danger",link:"",onClick:m=>c.del(v)},{default:p(()=>[O(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[k,u(s).loading]]),N("div",Ir,[i(T,{pageinfo:u(l),onChange:u(s).load},null,8,["pageinfo","onChange"]),i(un,{editAliPayRef:u(a),editWxPayRef:u(o),ref_key:"editorRef",ref:e,onLoad:u(s).load},null,8,["editAliPayRef","editWxPayRef","onLoad"])]),i(mn,{onLoad:y[3]||(y[3]=v=>u(s).load(1)),ref_key:"bindSiteRef",ref:t},null,512),i(pr,{onUpdataTableList:y[4]||(y[4]=v=>u(s).load()),ref_key:"editPayRef",ref:n},null,512),i(bn,{ref_key:"editAliPayRef",ref:a},null,512),i(_r,{ref_key:"editWxPayRef",ref:o},null,512)])}}};export{Hr as default};
