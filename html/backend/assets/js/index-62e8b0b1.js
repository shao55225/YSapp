import{R as f,_ as T,a as R,j as C,v as I,T as S,o as V,E as N,C as E,m as $}from"./entry-9cc5c370.js";/* empty css                        */import{E as W}from"./el-link-94d8db34.js";import{_ as B}from"./empty3-246c8c4c.js";import{p as L}from"./plugHeader-c50619f4.js";import{a as h,Z as v,d as A,m as g,p,W as D,U as o,S as r,u as P,L as U,R as j,l as m,a6 as c,ap as q,aq as z,at as M}from"./vue-11eabec3.js";/* empty css                      *//* empty css                                                                   */const H=()=>f({url:"/tools/process",method:"get"}),Z=d=>f({url:`/tools/process/${d}`,method:"delete"});const F=d=>(q("data-v-956cbfdb"),d=d(),z(),d),G={key:0,class:"box",style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},J=F(()=>p("img",{style:{margin:"36px auto",display:"block",height:"120px"},src:B,alt:"",srcset:""},null,-1)),K={key:1,class:"flex-y box",style:{"padding-top":"24px"}},O={class:"flex-x-between"},Q={__name:"index",setup(d){const b=M();R();const n=h({pageIndex:1,pageSize:20,total:0}),u=h(),a=v({loading:!1,data:[],searchVal:{keywords:"",order:""},selectList:[],load(l){n.value=l||n.value,a.loading=!0,H({page:n.value.pageIndex,limit:n.value.pageSize,...a.searchVal}).then(t=>{t.forEach(e=>{e.cpu=e.cpu?Number(e.cpu):e.diskReadTotal,e.pId=e.pId?Number(e.pId):e.diskReadTotal,e.memory=e.memory?Number(e.memory):e.diskReadTotal,e.diskReadTotal=e.diskReadTotal?Number(e.diskReadTotal):e.diskReadTotal,e.diskWriteTotal=e.diskWriteTotal?Number(e.diskWriteTotal):e.diskReadTotal,e.diskRead=e.diskRead?Number(e.diskRead):e.diskReadTotal,e.diskWrite=e.diskWrite?Number(e.diskWrite):e.diskReadTotal}),a.data=t,n.value.total=t.total}).catch(t=>{u.value=t.message}).finally(()=>{a.loading=!1})},handleSelectionChange(l){a.selectList=l},sortChnage({column:l,prop:t,order:e}){e?a.searchVal.order=`${t} ${e==="ascending"?"asc":"desc"}`:a.searchVal.order="",a.load()}}),k={statusChange(l,t){t.loading=!0,changeStatusApi([t.id],l).then(()=>{N({position:"bottom-right",type:"success",message:"\u72B6\u6001\u66F4\u65B0\u6210\u529F"})}).catch(()=>{t.status=l===1?2:1}).finally(()=>{t.loading=!1})},del:l=>E({message:"\u786E\u5B9A\u8981\u7ED3\u675F\u6B64\u8FDB\u7A0B\u5417\uFF1F",okEms:"\u8FDB\u7A0B\u7ED3\u675F\u6210\u529F"},()=>Z(l).then(t=>(a.load(),t)))};return A(()=>{a.load()}),(l,t)=>{const e=W,_=C,y=S,i=$,x=V,w=I;return u.value?(m(),g("div",G,[J,p("h3",null,D(u.value),1),o(e,{type:"primary",onClick:t[0]||(t[0]=s=>P(b).go(-1))},{default:r(()=>[c("\u8FD4\u56DE\u4E0A\u4E00\u7EA7")]),_:1})])):(m(),g("div",K,[o(L,null,{default:r(()=>[c("\u8FDB\u7A0B\u7BA1\u7406")]),_:1}),p("div",O,[p("div",null,[o(_,{disabled:a.loading,onClick:t[1]||(t[1]=s=>a.load()),class:"refresh"},{default:r(()=>[c(" \u5237\u65B0 ")]),_:1},8,["disabled"])]),p("div",null,[o(y,{modelValue:a.searchVal.keywords,"onUpdate:modelValue":t[2]||(t[2]=s=>a.searchVal.keywords=s),style:{width:"180px"},onBlur:t[3]||(t[3]=s=>n.value.pageIndex=1)},null,8,["modelValue"])])]),U((m(),j(x,{data:a.data.filter(s=>s.name.includes(a.searchVal.keywords)),class:"auto",stripe:!0,onSelectionChange:a.handleSelectionChange},{default:r(()=>[o(i,{sortable:"",prop:"name","show-overflow-tooltip":!0,label:"\u8FDB\u7A0B\u540D","min-width":"130"}),o(i,{sortable:"",prop:"pId","show-overflow-tooltip":!0,label:"PID",width:"110"}),o(i,{sortable:"",prop:"user","show-overflow-tooltip":!0,label:"\u7528\u6237",width:"180"}),o(i,{sortable:"",prop:"cpu","show-overflow-tooltip":!0,label:"CPU\u5360\u7528\uFF08%\uFF09",width:"140"}),o(i,{sortable:"",prop:"memory",label:"\u5185\u5B58\uFF08M\uFF09",width:"120"}),o(i,{sortable:"",prop:"priority",label:"\u4F18\u5148\u7EA7",width:"100"}),o(i,{fixed:"right",label:"\u64CD\u4F5C",align:"right",width:"70"},{default:r(({row:s})=>[o(_,{type:"danger",link:"",onClick:X=>k.del(s.pId)},{default:r(()=>[c(" \u7ED3\u675F ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[w,a.loading]])]))}}},de=T(Q,[["__scopeId","data-v-956cbfdb"]]);export{de as default};
