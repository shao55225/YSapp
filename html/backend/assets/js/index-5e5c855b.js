import{R as x,E as z,b as H,c as K,g as Q,i as X,j as q,k as G,v as P,_ as M,a as Y,d as ee,f as te,C as j,T as oe,o as le,H as ae,m as se}from"./entry-9cc5c370.js";/* empty css                        */import{p as re}from"./plugHeader-c50619f4.js";import{G as W,a as V,Z as B,z as Z,e as ne,m as A,U as l,S as s,u as T,l as y,a6 as b,L as N,R as $,O,d as ie,p as f,ag as ue,P as de,af as pe,W as R,V as ce,X as me,ap as _e,aq as ge}from"./vue-11eabec3.js";import{P as fe}from"./pagination-db6078c7.js";import{E as he}from"./el-date-picker-4cb808f0.js";import{E as ve}from"./el-cascader-panel-27ac6c37.js";/* empty css                      */import"./index-971e6ee4.js";/* empty css                                                                   */import"./panel-time-pick-2e9d1eeb.js";import"./arrays-2e03ed1f.js";const be=(n={page:0})=>x({version:"v3",url:"/cami/page",method:"get",params:n}),ye=n=>x({version:"v3",url:"/cami",method:"post",data:n}),we=(n,F)=>x({version:"v3",url:"/cami/"+n,method:"put",data:F}),xe=n=>x({version:"v3",url:"/cami/"+n,method:"get"}),Ce=n=>x({version:"v3",url:"/cami/"+n,method:"delete"}),Fe=(n={page:0})=>x({version:"v3",url:"/cami/server/list",method:"get",params:n}),Ee=n=>x({version:"v3",url:"/cami",method:"delete",data:n}),ke=n=>x({version:"v3",url:"/cami/pwd",method:"put",data:n}),Ve=()=>x({version:"v3",url:"/cami/status/list",method:"get"}),Be=W({__name:"editor",emits:["load"],setup(n,{expose:F,emit:d}){const h=V(),t=B({password:"",type:"",bid:0,uid:"",expiredAt:null,nums:0,typearr:[],uidstr:"",id:"",money:1}),D={password:[{min:6,max:20,message:"\u957F\u5EA6\u5728 6 \u5230 20 \u4E2A\u5B57\u7B26",trigger:"blur"}],typearr:{type:"array",required:!0,message:"\u8BF7\u9009\u62E9\u7ED1\u5B9A\u540D\u79F0",trigger:"change"},uidstr:[{required:!0,message:"\u8BF7\u9009\u62E9\u8D26\u53F7",trigger:"change"}],expiredAt:[{required:!0,message:"\u8BF7\u9009\u62E9\u5361\u5BC6\u6709\u6548\u671F",trigger:"blur"}],nums:[{required:!0,message:"\u8BF7\u8F93\u5165\u751F\u6210\u5361\u6570",trigger:"blur"}]},e=B({loading:!1,visible:!1,cardmioption:[],props:{label:"title",value:"value",children:"child",emitPath:!0},other:{}}),E=Z("debounce")(o=>{!o||o.validate(a=>{if(a){e.loading=!0;let i={password:t.password,type:t.typearr[0],bid:t.typearr[1],uid:t.uid,expiredAt:t.expiredAt,nums:t.nums,money:t.money};t.id?we(t.id,i).then(()=>{z.success({message:"\u66F4\u65B0\u6210\u529F",showClose:!0,position:"bottom-right"}),d("load"),p()}).finally(()=>{e.loading=!1}):ye(i).then(()=>{z.success({message:t.id?"\u4EFB\u52A1\u66F4\u65B0\u6210\u529F":"\u65B0\u589E\u6210\u529F",showClose:!0,position:"bottom-right"}),d("load"),p()}).finally(()=>{e.loading=!1})}})},300),C=()=>{Fe().then(o=>{e.cardmioption=o})},w={disabledDate(o){return o.getTime()<Date.now()-864e5}},m=(o,a)=>{xe(o).then(i=>{e.other.row=i,e.other.row.uidstr=a})},p=()=>{e.other={},e.visible=!1};F({open(o){var a,i;(a=h.value)==null||a.resetFields(),e.visible=!0,(i=o.row)!=null&&i.account?m(o.row.account,o.row.userName):e.other=o}});function k(){delete t.id,C(),e.other.row?(Object.keys(t).forEach(o=>{t[o]=e.other.row[o]}),t.typearr=[t.type,t.bid],t.id=e.other.row.account,t.money=e.other.row.money,e.other.row.uid?t.uidstr=e.other.row.uidstr:t.uidstr="\u6240\u6709\u8D26\u53F7",t.nums=1):t.id=0,t.type==0&&(t.type=1)}const u=ne(()=>t.id?"\u7F16\u8F91\u5361\u5BC6":"\u65B0\u589E\u5361\u5BC6");return(o,a)=>{const i=H,v=K,L=ve,S=Q,g=he,U=X,I=q,r=G,_=P;return y(),A("div",null,[l(r,{"model-value":e.visible,"show-close":!e.loading,"close-on-press-escape":!1,title:T(u),width:500,"z-index":20,"close-on-click-modal":!1,onClose:p,onOpened:k},{footer:s(()=>[l(I,{class:"ml-auto",size:"small",loading:e.loading,onClick:p},{default:s(()=>[b(" \u53D6\u6D88 ")]),_:1},8,["loading"]),l(I,{size:"small",loading:e.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:a[6]||(a[6]=c=>T(E)(h.value))},{default:s(()=>[b(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:s(()=>[N((y(),A("div",null,[l(U,{ref_key:"ruleFormRef",ref:h,"label-width":"100px",model:t,rules:D,style:{"max-width":"460px"},"hide-required-asterisk":!1},{default:s(()=>[l(v,{label:"\u5361\u53F7\u5BC6\u7801",prop:"password"},{default:s(()=>[l(i,{modelValue:t.password,"onUpdate:modelValue":a[0]||(a[0]=c=>t.password=c),modelModifiers:{trim:!0},clearable:"",class:"input",placeholder:"\u9ED8\u8BA4123456"},null,8,["modelValue"])]),_:1}),l(v,{label:"\u7ED1\u5B9A\u6D88\u8D39\u9879",prop:"typearr"},{default:s(()=>[l(L,{modelValue:t.typearr,"onUpdate:modelValue":a[1]||(a[1]=c=>t.typearr=c),options:e.cardmioption,props:e.props,placeholder:"\u8BF7\u9009\u62E9\u7ED1\u5B9A\u540D\u79F0"},null,8,["modelValue","options","props"])]),_:1}),t.typearr[1]==0?(y(),$(v,{key:0,label:t.typearr[0]=="vip"?"vip\u5929\u6570":"\u91D1\u5E01\u4E2A\u6570",prop:"money",rules:{required:!0,message:`\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49${t.typearr[0]=="vip"?"vip\u5929\u6570":"\u91D1\u5E01\u4E2A\u6570"}`,trigger:"blur"}},{default:s(()=>[l(S,{modelValue:t.money,"onUpdate:modelValue":a[2]||(a[2]=c=>t.money=c),modelModifiers:{number:!0},clearable:"",min:"1",precision:0,"step-strictly":"",placeholder:"\u8BF7\u8F93\u5165\u81EA\u5B9A\u4E49"},null,8,["modelValue"])]),_:1},8,["label","rules"])):O("",!0),l(v,{label:"\u6709\u6548\u65E5\u671F",prop:"expiredAt"},{default:s(()=>[l(g,{modelValue:t.expiredAt,"onUpdate:modelValue":a[3]||(a[3]=c=>t.expiredAt=c),modelModifiers:{number:!0},type:"date",placeholder:"\u9009\u62E9\u6709\u6548\u671F",clearable:"",class:"dates","disabled-date":w.disabledDate,"value-format":"X",onChange:a[4]||(a[4]=c=>t.expiredAt=t.expiredAt?t.expiredAt+86399:null)},null,8,["modelValue","disabled-date"])]),_:1}),t.id?O("",!0):(y(),$(v,{key:1,label:"\u751F\u6210\u5361\u6570",prop:"nums"},{default:s(()=>[l(S,{modelValue:t.nums,"onUpdate:modelValue":a[5]||(a[5]=c=>t.nums=c),modelModifiers:{number:!0},clearable:"",class:"input xuhao",placeholder:"0","controls-position":"right",min:1,precision:0,"step-strictly":""},null,8,["modelValue"])]),_:1}))]),_:1},8,["model"])])),[[_,e.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const Ae=M(Be,[["__scopeId","data-v-b625c563"]]),De=W({__name:"editorpasswrod",emits:["load"],setup(n,{expose:F,emit:d}){const h=V(),t=B({password:"",accounts:[]}),D={password:[{min:6,max:20,message:"\u957F\u5EA6\u5728 6 \u5230 20 \u4E2A\u5B57\u7B26",trigger:"blur"}]},e=B({loading:!1,visible:!1,cardmioption:[],props:{label:"title",value:"value",children:"child",emitPath:!0},other:{}}),E=Z("debounce")(w=>{!w||w.validate(m=>{if(m){e.loading=!0;let p={accounts:t.accounts,password:t.password};ke(p).then(()=>{z.success({message:"\u5BC6\u7801\u4FEE\u6539\u6210\u529F",showClose:!0,position:"bottom-right"}),d("load"),C()}).finally(()=>{e.loading=!1})}})},300),C=()=>{e.visible=!1};return F({open(w){var m;(m=h.value)==null||m.resetFields(),t.accounts=w.map(p=>p.account),e.visible=!0}}),(w,m)=>{const p=H,k=K,u=X,o=q,a=G,i=P;return y(),A("div",null,[l(a,{"model-value":e.visible,"show-close":!e.loading,"close-on-press-escape":!1,title:"\u4FEE\u6539\u5BC6\u7801",width:500,"z-index":20,"close-on-click-modal":!1,onClose:C},{footer:s(()=>[l(o,{class:"ml-auto",size:"small",loading:e.loading,onClick:C},{default:s(()=>[b(" \u53D6\u6D88 ")]),_:1},8,["loading"]),l(o,{size:"small",loading:e.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:m[1]||(m[1]=v=>T(E)(h.value))},{default:s(()=>[b(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:s(()=>[N((y(),A("div",null,[l(u,{ref_key:"ruleFormRef",ref:h,"label-width":"100px",model:t,rules:D,style:{"max-width":"460px"},"hide-required-asterisk":!1},{default:s(()=>[l(k,{label:"\u5361\u53F7\u5BC6\u7801",prop:"password"},{default:s(()=>[l(p,{modelValue:t.password,"onUpdate:modelValue":m[0]||(m[0]=v=>t.password=v),modelModifiers:{trim:!0},clearable:"",class:"input",placeholder:"\u9ED8\u8BA4123456"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])),[[i,e.loading]])]),_:1},8,["model-value","show-close"])])}}});const Se=M(De,[["__scopeId","data-v-5c784d36"]]);const J=n=>(_e("data-v-57c43d23"),n=n(),ge(),n),Ie={class:"flex-y box"},$e={class:"flex-x-between"},Le={class:"flex"},Ue={class:"search"},Re={class:"ellipsis"},ze=J(()=>f("span",{class:"icon iconfont icon-fuzhi"},null,-1)),Te={class:"ellipsis"},qe=J(()=>f("span",{class:"icon iconfont icon-fuzhi"},null,-1)),Pe={class:"flex-x",style:{"align-items":"center",gap:"8px"}},Me={style:{"line-height":"1"}},Ne={__name:"index",setup(n){const F=Y(),d=V({pageIndex:1,pageSize:20,total:0}),h={waiting:{label:"\u5F85\u4F7F\u7528",color:"#FAAD14"},used:{label:"\u5DF2\u4F7F\u7528",color:"#52C41A"},inactive:{label:"\u5DF2\u5931\u6548",color:"#FF4D4F"}},t=B([]),D=V(),e=B({loading:!1,data:[],searchVal:{key:"",status:"",order:"",key:""},selectList:[],statuslist:[],load(u){d.value=u||d.value,e.loading=!0;let o={page:d.value.pageIndex,limit:d.value.pageSize,keyword:e.searchVal.key,order:e.searchVal.order,status:e.searchVal.status,...F.siteObj};e.searchVal.channelId&&(o.channelId=e.searchVal.channelId),e.loading=!1,be(o).then(a=>{var i;t.splice(0,t.length),t.push(...a.list),d.value.total=(i=a.total)!=null?i:0}).finally(()=>{e.loading=!1}),Ve().then(a=>{e.statuslist=a})},handleSelectionChange(u){e.selectList=u},sortChnage({column:u,prop:o,order:a}){a?e.searchVal.order=`${o} ${a==="ascending"?"asc":"desc"}`:e.searchVal.order="",console.log(e.searchVal.order),e.load()}}),E=V(),C=V(),w={rechargedel:u=>j({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F\u5220\u9664\u540E\u8BE5\u5361\u5BC6\u5C06\u65E0\u6CD5\u518D\u67E5\u770B\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okEms:"\u5361\u5BC6\u5220\u9664\u6210\u529F"},()=>Ce(u.account).then(o=>(e.load(),o)))},m=()=>{j({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F\u5220\u9664\u6240\u9009\u5361\u5BC6\u5C06\u65E0\u6CD5\u518D\u67E5\u770B\uFF0C\u8BF7\u8C28\u614E\u64CD\u4F5C",okEms:"\u5361\u5BC6\u5220\u9664\u6210\u529F"},()=>Ee({accounts:e.selectList.map(u=>u.account)}).then(u=>(e.load(),u)))};ie(()=>{e.load()});let p=null;const k=u=>{p&&clearTimeout(p),u&&(p=setTimeout(()=>{ae(u)},300))};return(u,o)=>{const a=re,i=q,v=ee,L=te,S=oe,g=se,U=le,I=P;return y(),A("div",Ie,[l(a,null,{default:s(()=>[b("\u5361\u5BC6\u7BA1\u7406")]),_:1}),f("div",$e,[f("div",null,[l(i,{type:"primary",onClick:o[0]||(o[0]=r=>{var _;return(_=E.value)==null?void 0:_.open({})})},{default:s(()=>[b(" \u65B0\u589E\u5361\u5BC6 ")]),_:1}),l(i,{type:"primary",onClick:o[1]||(o[1]=r=>{var _;return(_=C.value)==null?void 0:_.open(e.selectList)}),disabled:!e.selectList.length>0},{default:s(()=>[b(" \u6279\u91CF\u4FEE\u6539\u5BC6\u7801 ")]),_:1},8,["disabled"]),l(i,{type:"danger",onClick:m,disabled:!e.selectList.length>0},{default:s(()=>[b(" \u6279\u91CF\u5220\u9664 ")]),_:1},8,["disabled"])]),f("div",Le,[l(L,{modelValue:e.searchVal.status,"onUpdate:modelValue":o[2]||(o[2]=r=>e.searchVal.status=r),style:{"margin-right":"12px"},placeholder:"\u5168\u90E8\u72B6\u6001",clearable:"",onChange:o[3]||(o[3]=r=>{d.value.pageIndex=1,e.load()})},{default:s(()=>[(y(!0),A(de,null,pe(e.statuslist,(r,_)=>(y(),$(v,{key:r,label:r,value:_},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),f("div",Ue,[l(S,{modelValue:e.searchVal.key,"onUpdate:modelValue":o[4]||(o[4]=r=>e.searchVal.key=r),clearable:"",placeholder:"\u641C\u7D22\u5173\u952E\u5B57",onKeyup:o[5]||(o[5]=ue(r=>{d.value.pageIndex=1,e.load()},["enter","native"])),onChange:o[6]||(o[6]=r=>{d.value.pageIndex=1,e.load()})},null,8,["modelValue"])])])]),N((y(),$(U,{data:t,class:"auto",stripe:!0,ref_key:"multipleTableRef",ref:D,"row-class-name":({row:r})=>r.deletedAt?"delete-row":"",onSortChange:e.sortChnage,onSelectionChange:e.handleSelectionChange},{default:s(()=>[l(g,{type:"selection",width:"55"}),l(g,{prop:"account",label:"\u5361\u53F7",width:"120","show-overflow-tooltip":!0},{default:s(({row:r})=>[f("div",Re,R(r.account),1)]),_:1}),l(g,{prop:"address","show-overflow-tooltip":!0,width:"50"},{default:s(({row:r})=>[l(i,{type:"primary",link:"",onClick:ce(_=>k(r.account),["stop"])},{default:s(()=>[ze]),_:2},1032,["onClick"])]),_:1}),l(g,{prop:"password",label:"\u5361\u5BC6",width:"120","show-overflow-tooltip":!0},{default:s(({row:r})=>[f("div",Te,R(r.password),1)]),_:1}),l(g,{prop:"address","show-overflow-tooltip":!0,width:"50"},{default:s(({row:r})=>[l(i,{type:"primary",link:"",onClick:_=>k(r.password)},{default:s(()=>[qe]),_:2},1032,["onClick"])]),_:1}),l(g,{prop:"bidTxt",label:"\u6D88\u8D39\u9879","min-width":"120"}),l(g,{prop:"status",label:"\u4F7F\u7528\u72B6\u6001","min-width":"90"},{default:s(({row:r})=>[f("p",Pe,[f("span",{style:me({backgroundColor:h[r.status].color,width:"5px",height:"5px",display:"inline-block",borderRadius:"50%"})},null,4),f("span",Me,R(h[r.status].label),1)])]),_:1}),l(g,{label:"\u6709\u6548\u671F","min-width":"120",prop:"expiredAt"}),l(g,{prop:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4","min-width":"120"}),l(g,{fixed:"right",label:"\u64CD\u4F5C","min-width":"100",align:"right"},{default:s(({row:r})=>[l(i,{type:"primary",link:"",class:"text-dangerColor",onClick:_=>{var c;return(c=E.value)==null?void 0:c.open({row:r})},disabled:r.status!="waiting"},{default:s(()=>[b(" \u7F16\u8F91 ")]),_:2},1032,["onClick","disabled"]),l(i,{type:"danger",link:"",class:"text-primaryColor",onClick:_=>w.rechargedel(r)},{default:s(()=>[b(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","row-class-name","onSortChange","onSelectionChange"])),[[I,e.loading]]),l(fe,{pageinfo:d.value,class:"ml-auto",onChange:e.load},null,8,["pageinfo","onChange"]),l(Ae,{ref_key:"editorRef",ref:E,onLoad:e.load},null,8,["onLoad"]),l(Se,{ref_key:"editorpasswrodRef",ref:C,onLoad:e.load},null,8,["onLoad"])])}}},tt=M(Ne,[["__scopeId","data-v-57c43d23"]]);export{tt as default};
