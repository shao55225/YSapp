import{_ as V,cq as E,h as L,j as R,k as B,v as D,cr as y,E as I}from"./entry-9cc5c370.js";import{p as A}from"./plugHeader-c50619f4.js";import{Z as T,a as S,C as j,m as c,p as s,U as u,S as a,a6 as o,u as l,L as H,P as q,O as _,W as C,R as U,aA as W,l as d,ap as z,aq as F}from"./vue-11eabec3.js";const O=""+new URL("../png/plugin11-c8864857.png",import.meta.url).href,P=""+new URL("../svg/g4-9c4f6b20.svg",import.meta.url).href,Z=""+new URL("../svg/g1-1952fd8d.svg",import.meta.url).href,G=""+new URL("../svg/g3-75b3ada1.svg",import.meta.url).href,J=""+new URL("../svg/g2-9147ea2e.svg",import.meta.url).href;const p=v=>(z("data-v-ed053e43"),v=v(),F(),v),K={style:{height:"100%"}},M={class:"card",style:{overflow:"hidden"}},Q={class:"flex-x-between"},X=W('<div class="left" data-v-ed053e43><img src="'+O+'" alt="" style="width:80px;height:80px;" data-v-ed053e43><div class="flex-y" data-v-ed053e43><p class="name" data-v-ed053e43>\u7CFB\u7EDF\u5B88\u62A4</p><p class="business" data-v-ed053e43><img src="'+P+'" style="width:14px;height:14px;margin-right:6px;" data-v-ed053e43> \u652F\u6301\u7CFB\u7EDF\uFF1ACentos 7\uFF0CUbuntu </p></div></div>',1),Y={class:"right flex-x-center"},ee={class:"flex-x-center static flex-y-center"},te={key:0,class:"flex-y cfg card",style:{"margin-top":"24px",height:"180px",overflow:"auto","padding-bottom":"24px","justify-content":"flex-start"}},se=p(()=>s("p",{class:"title"},"\u5B88\u62A4\u63D0\u793A",-1)),le={key:0,class:"flex-y-center",style:{gap:"32px"}},oe={key:0,class:"success flex-y-center"},ie=p(()=>s("img",{src:Z},null,-1)),ne=p(()=>s("div",{class:"info"},[s("p",null,"\u672A\u5F00\u542F"),s("p",null,"\u60A8\u7684\u529F\u80FD\u5C1A\u672A\u5F00\u542F")],-1)),ae=[ie,ne],de={key:0,class:"success flex-y-center"},ce=p(()=>s("img",{src:G},null,-1)),ue={class:"info"},re={key:0,style:{color:"red"}},pe={key:1,class:"success flex-y-center"},me=p(()=>s("img",{src:J},null,-1)),_e=p(()=>s("div",{class:"info"},[s("p",null,"\u672A\u542F\u52A8"),s("p",null,"\u5DF2\u5B89\u88C5\uFF0C\u9700\u8981\u91CD\u542F\u751F\u6548\uFF0C\u8BF7\u624B\u52A8\u8F93\u5165 systemctl start iycms")],-1)),ve=[me,_e],fe={key:1,class:"flex",style:{"margin-top":"40px"}},ye={key:0,class:"flex-y"},ge=p(()=>s("ul",null,[s("li",null,"\u5B88\u62A4\u670D\u52A1\u5DF2\u5173\u95ED\u6210\u529F\uFF0C\u9700\u8981\u91CD\u542F\u540E\u751F\u6548"),s("li",null,"\u7EE7\u7EED\u4F7F\u7528\u76F4\u81F3\u5230\u4E0B\u6B21\u751F\u6548\u524D\uFF0C\u8BF7\u70B9\u51FB \u201C\u6211\u5DF2\u4E86\u89E3\u201D"),s("li",null,"\u5982\u9700\u5173\u95ED\u5B88\u62A4\u540E\u7EE7\u7EED\u4F7F\u7528\u7CFB\u7EDF\uFF0C\u8BF7\u5728\u7EC8\u7AEF\u624B\u52A8\u6267\u884C\uFF1A")],-1)),he={class:"code"},ke={key:1,class:"flex-y"},xe=p(()=>s("ul",null,[s("li",null,"\u56E0\u4E3A\u7CFB\u7EDF\u65E0\u6CD5\u81EA\u5DF1\u542F\u52A8\u81EA\u5DF1\u7684\u539F\u5219"),s("li",null,"\u6267\u884C\u542F\u52A8\u547D\u4EE4\u540E\u5F53\u524D\u8FDB\u7A0B\u7ACB\u5373\u505C\u6B62\u5E76\u7531\u5B88\u62A4\u670D\u52A1\u542F\u52A8"),s("li",null,"\u8BF7\u4F60\u5728\u7EC8\u7AEF\u624B\u52A8\u6267\u884C\u547D\u4EE4\uFF1A")],-1)),be={class:"code"},we={key:2,class:"flex-y"},Ce=p(()=>s("ul",null,[s("li",null,"\u505C\u6B62\u540E\u5F53\u524D\u8FDB\u7A0B\u7ACB\u5373\u4E0D\u53EF\u7528"),s("li",null,"\u4E3A\u4FDD\u8BC1\u4F60\u5F53\u524D\u670D\u52A1\u6B63\u5E38\u542F\u52A8\uFF0C\u9700\u8981\u624B\u52A8\u6267\u884C\u547D\u4EE4\u505C\u6B62"),s("li",null,"\u8BF7\u4F60\u5728\u7EC8\u7AEF\u624B\u52A8\u6267\u884C\u547D\u4EE4\uFF1A")],-1)),$e={class:"code"},Ie={__name:"guard",setup(v){let g="";const e=T({status:!1,loading:!1,visible:!1,active:1,info:{},get(){e.loading=!0,y.get().then(r=>{e.status=r,g=setInterval(()=>{y.status().then(t=>{e.info=t,N(t.install_time),console.log("\u72B6\u6001\uFF1A",t)}).finally(()=>{e.loading=!1})},1e3)})},put(){e.loading||(e.loading=!0,(e.status?y.install():y.uninstall()).then(r=>{I({position:"bottom-right",type:"success",message:e.status?"\u5B89\u88C5\u6210\u529F":"\u5378\u8F7D\u6210\u529F"}),setTimeout(()=>{!e.status&&e.info.active&&(e.active=1,e.visible=!0)},500)}).finally(()=>{setTimeout(()=>{e.loading=!1},500)}))}}),h=S(!1);E().then(r=>{r.windows?h.value=!0:e.get()});const $=S(""),N=r=>{const t=r,k=Date.parse(new Date),n=(Number(k/1e3)-Number(t))*1e3;var f;let x=parseInt(n/(1e3*60*60*24)),i=parseInt(n%(1e3*60*60*24)/(1e3*60*60)),b=parseInt(n%(1e3*60*60)/(1e3*60)),w=n%(1e3*60)/1e3;f=x+" \u5929 "+(i<10?"0"+i:i)+" \u65F6 "+(b<10?"0"+b:b)+" \u5206 "+(w<10?"0"+w:w)+" \u79D2 ",$.value=f},m=r=>{const t=document.createElement("input");t.setAttribute("readonly","readonly"),t.setAttribute("value",r),document.body.appendChild(t),t.select(),document.execCommand("copy")&&(document.execCommand("copy"),I({position:"bottom-right",type:"success",message:"\u590D\u5236\u6210\u529F"})),document.body.removeChild(t)};return j(()=>{g&&clearInterval(g)}),(r,t)=>{const k=L,n=R,f=B,x=D;return d(),c("div",K,[s("div",M,[u(A,{style:{"margin-bottom":"0","margin-top":"-4px"}},{default:a(()=>[o("\u7CFB\u7EDF\u5B88\u62A4")]),_:1}),s("div",Q,[X,s("div",Y,[s("p",ee,[o(" \u529F\u80FD\u72B6\u6001 "),u(k,{style:{"margin-left":"6px"},disabled:l(h),onChange:t[0]||(t[0]=i=>l(e).put()),modelValue:l(e).status,"onUpdate:modelValue":t[1]||(t[1]=i=>l(e).status=i),"active-value":!0,"inactive-value":!1},null,8,["disabled","modelValue"])])])])]),l(h)?_("",!0):H((d(),c("div",te,[se,l(e).loading?_("",!0):(d(),c("div",le,[!l(e).status&&!l(e).info.active?(d(),c("div",oe,ae)):(d(),c(q,{key:1},[l(e).info.active?(d(),c("div",de,[ce,s("div",ue,[s("p",null,[o(" \u8FD0\u884C\u4E2D "),l(e).status?_("",!0):(d(),c("span",re,"(\u91CD\u542F\u540E\u5931\u6548)"))]),s("p",null,"\u5DF2\u5B88\u62A4 \u2002"+C(l($)),1)])])):(d(),c("div",pe,ve))],64))])),l(e).status?(d(),c("div",fe,[l(e).info.active?(d(),U(n,{key:1,type:"danger",onClick:t[3]||(t[3]=i=>{l(e).active=3,l(e).visible=!0})},{default:a(()=>[o("\u505C\u6B62")]),_:1})):(d(),U(n,{key:0,type:"primary",onClick:t[2]||(t[2]=i=>{l(e).active=2,l(e).visible=!0})},{default:a(()=>[o("\u542F\u52A8")]),_:1}))])):_("",!0)])),[[x,l(e).loading]]),u(f,{"model-value":l(e).visible,"close-on-press-escape":!1,title:"\u6E29\u99A8\u63D0\u793A","show-close":!1,class:"jh_guard",width:420,"z-index":20,"close-on-click-modal":!1,"destroy-on-close":!0,onClose:t[13]||(t[13]=i=>l(e).visible=!1)},{footer:a(()=>[u(n,{class:"ml-auto",type:"primary",loading:l(e).loading,onClick:t[12]||(t[12]=i=>l(e).visible=!1)},{default:a(()=>[o(" \u6211\u5DF2\u4E86\u89E3 ")]),_:1},8,["loading"])]),default:a(()=>[l(e).active==1?(d(),c("div",ye,[ge,s("div",he,[s("p",null,[o(" 1.systemctl stop iycms "),u(n,{link:"",onClick:t[4]||(t[4]=i=>m("systemctl stop iycms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})]),s("p",null,[o(" 2.cd "+C(l(e).info.pwd)+"; ",1),u(n,{link:"",onClick:t[5]||(t[5]=i=>m(`cd ${l(e).info.pwd}`))},{default:a(()=>[o("\u590D\u5236")]),_:1})]),s("p",null,[o(" 3.sudo ./cms; "),u(n,{link:"",onClick:t[6]||(t[6]=i=>m("sudo ./cms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})])])])):_("",!0),l(e).active==2?(d(),c("div",ke,[xe,s("div",be,[s("p",null,[o(" 1.pkill cms; "),u(n,{link:"",onClick:t[7]||(t[7]=i=>m("pkill cms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})]),s("p",null,[o(" 2.systemctl start iycms; "),u(n,{link:"",onClick:t[8]||(t[8]=i=>m("systemctl start iycms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})])])])):_("",!0),l(e).active==3?(d(),c("div",we,[Ce,s("div",$e,[s("p",null,[o(" 1.systemctl stop iycms "),u(n,{link:"",onClick:t[9]||(t[9]=i=>m("systemctl stop iycms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})]),s("p",null,[o(" 2.cd "+C(l(e).info.pwd)+"; ",1),u(n,{link:"",onClick:t[10]||(t[10]=i=>m(`cd ${l(e).info.pwd}`))},{default:a(()=>[o("\u590D\u5236")]),_:1})]),s("p",null,[o(" 3.sudo ./cms; "),u(n,{link:"",onClick:t[11]||(t[11]=i=>m("sudo ./cms"))},{default:a(()=>[o("\u590D\u5236")]),_:1})])])])):_("",!0)]),_:1},8,["model-value"])])}}},Ve=V(Ie,[["__scopeId","data-v-ed053e43"]]);export{Ve as default};
