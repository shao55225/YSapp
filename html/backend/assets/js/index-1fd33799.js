import{u as Be,E as q,b as fe,c as oe,d as pe,f as ce,i as ue,j as ee,k as ae,v as Z,_ as le,m as xe,o as De,bT as Ue,H as He,C as W,T as $e,s as qe,h as Ke,q as Oe,B as je,bU as Me,Q as Xe,O as Ge,P as Qe}from"./entry-9cc5c370.js";/* empty css                        */import{E as Ne}from"./el-date-picker-4cb808f0.js";/* empty css                   */import{E as We,a as Ze}from"./el-tab-pane-8ec9369b.js";/* empty css                   */import{G as ie,a as V,Z as w,z as de,e as ge,m as C,U as e,S as l,u as c,l as m,a6 as E,L as O,p as r,P as G,af as Q,R as N,ap as Se,aq as Ve,W as T,O as J,aC as Je,d as Ye,M as _e,X as el,at as ll,ac as tl}from"./vue-11eabec3.js";import{p as ol}from"./plugHeader-c50619f4.js";import{g as we,d as al,a as sl,s as Y,c as nl,r as ul,e as il,f as dl,h as rl,i as pl,b as cl,j as ml,k as _l}from"./prefix-78671e4d.js";import{P as ne}from"./pagination-db6078c7.js";import{d as re}from"./domain-32b7fa1f.js";import{E as fl}from"./el-upload-e1a152a0.js";import{c as Le,d as gl,l as hl,e as vl}from"./channels-9b6c6a42.js";import{E as ze}from"./index-bf5a11eb.js";import"./panel-time-pick-2e9d1eeb.js";import"./arrays-2e03ed1f.js";/* empty css                      */import"./index-971e6ee4.js";/* empty css                                                                   */const yl=L=>(Se("data-v-3bbe084d"),L=L(),Ve(),L),Fl=yl(()=>r("div",null,null,-1)),bl=ie({__name:"editor",emits:["load"],setup(L,{expose:z,emit:H}){const F=Be(),a=V(),t=w({domainName:[],hosts:[],dNSSettingID:0,resolverType:0,remark:"",tlsType:1}),u=w({checkList:[""],checkList1:[""],sslvalue:[]}),h=w({loading:!1,visible:!1,other:void 0}),B=w({arr:[[[1,0],"HTTP"]]});w([[1,"\u4EC5HTTP"],[2,"\u4EC5HTTPS"],[3,"HTTP+HTTPS"],[4,"\u5F3A\u5236HTTPS"]]);const I=de("debounce")(_=>{!_||_.validate(o=>{o&&(h.loading=!0,re.add(t.siteId,{domainName:t.domainName,showDate:t.showDate}).then(()=>{var p;q({position:"bottom-right",type:"success",message:(p=h.other)!=null&&p.id?"\u57DF\u540D\u66F4\u65B0\u6210\u529F":"\u57DF\u540D\u65B0\u589E\u6210\u529F"}),H("load"),v()}).finally(()=>{h.loading=!1}))})},300),v=()=>{h.other=void 0,h.visible=!1,u.checkList=[""],u.checkList1=[""],t.showDate=null},f={domainName:[{required:!0,message:"\u8BF7\u8F93\u5165\u57DF\u540D",trigger:"blur"}],siteId:[{required:!0,message:"\u8BF7\u9009\u62E9\u7AD9\u70B9",trigger:"change"}]};function b(){var _,o;t.hosts=[],Object.keys(t).forEach(p=>{var g,k;((g=h.other)==null?void 0:g[p])!==void 0&&(t[p]=(k=h.other)==null?void 0:k[p])}),(_=h.other)!=null&&_.id&&(t.id=(o=h.other)==null?void 0:o.id),B.arr=[[[1,0],"HTTP"]],we().then(p=>{p.list=p.list.filter(g=>g.state==1),p.list.forEach((g,k)=>{g.serviceProvider==1?B.arr.push([[2,g.id],`\u817E\u8BAF\u4E91-${g.name}`]):g.serviceProvider==2?B.arr.push([[2,g.id],`\u963F\u91CC\u4E91-${g.name}`]):B.arr.push([[2,g.id],`\u5176\u4ED6-${g.name}`])})}),t.autoApply=!1}z({open(_){var o;(o=a.value)==null||o.resetFields(),h.visible=!0,h.other=_}});const s=ge(()=>{var _;return(_=h.other)!=null&&_.id?"\u7F16\u8F91\u57DF\u540D":"\u65B0\u589E\u57DF\u540D"});return(_,o)=>{const p=fe,g=oe,k=Ne,x=pe,K=ce,X=ue,$=ee,M=ae,D=Z;return m(),C("div",null,[e(M,{"model-value":h.visible,"show-close":!h.loading,"close-on-press-escape":!1,title:c(s),"z-index":20,"close-on-click-modal":!1,onClose:v,onOpened:b,width:"450px"},{footer:l(()=>[e($,{class:"ml-auto",size:"small",loading:h.loading,onClick:v},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e($,{size:"small",loading:h.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:o[5]||(o[5]=j=>c(I)(a.value))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(X,{ref_key:"ruleFormRef",ref:a,"label-width":"75px",model:t,rules:f,"hide-required-asterisk":!1},{default:l(()=>[r("div",null,[e(g,{label:"\u7AD9\u70B9\u57DF\u540D",prop:"domainName"},{default:l(()=>[e(p,{spellcheck:"false","model-value":t.domainName.join(`
`),"onUpdate:modelValue":o[0]||(o[0]=j=>t.domainName=j.split(`
`)),clearable:"",class:"textareas",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u4E0D\u5E26\u534F\u8BAE\u5934\u7684\u57DF\u540D\uFF0C\u4F8B\u5982\uFF1Abaidu.com\uFF0C\u4E00\u884C\u4E00\u4E2A",onChange:o[1]||(o[1]=j=>{j.substring(0,5)==="https"?(t.autoApply=!0,t.autoRenew=!0):(t.autoApply=!1,t.autoRenew=!1)}),onBlur:o[2]||(o[2]=j=>t.domainName=t.domainName.filter(he=>he))},null,8,["model-value"])]),_:1}),e(g,{label:"\u4F7F\u7528\u65E5\u671F",prop:"remark"},{default:l(()=>[e(k,{modelValue:t.showDate,"onUpdate:modelValue":o[3]||(o[3]=j=>t.showDate=j),modelModifiers:{number:!0},type:"date",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u4F7F\u7528\u65E5\u671F",size:"default","value-format":"X"},null,8,["modelValue"])]),_:1}),e(g,{label:"\u7AD9\u70B9\u540D\u79F0",prop:"siteId"},{default:l(()=>[e(K,{modelValue:t.siteId,"onUpdate:modelValue":o[4]||(o[4]=j=>t.siteId=j),class:"input",placeholder:"\u9009\u62E9\u7AD9\u70B9"},{default:l(()=>[(m(!0),C(G,null,Q(c(F).list,j=>(m(),N(x,{key:j.id,label:j.name,value:j.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),Fl]),_:1},8,["model"])])),[[D,h.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const Cl=le(bl,[["__scopeId","data-v-3bbe084d"]]),El=ie({__name:"dnsEditor",emits:["load"],setup(L,{expose:z,emit:H}){const F=V(),a=w({name:"",secretId:"",secretKey:"",serviceProvider:"",state:1}),t=w({loading:!1,visible:!1,other:void 0}),u=[[1,"\u817E\u8BAF\u4E91"],[2,"\u963F\u91CC\u4E91"],[3,"\u5176\u4ED6"],[4,"cloudflare"]],h=de("debounce")(b=>{!b||b.validate(s=>{var _;s&&(t.loading=!0,(_=t.other)!=null&&_.id?sl(a).then(()=>{q({position:"bottom-right",type:"success",message:"DNS\u66F4\u65B0\u6210\u529F"}),H("load"),B()}).finally(()=>{t.loading=!1}):al(a).then(o=>{q({position:"bottom-right",type:"success",message:"DNS\u65B0\u589E\u6210\u529F"}),H("load"),B()}).finally(()=>{t.loading=!1}))})},300),B=()=>{t.other=void 0,t.visible=!1},I={name:[{required:!0,message:"\u8BF7\u8F93\u5165DNS\u540D\u79F0",trigger:"blur"}],secretId:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5185\u5BB9",trigger:"blur"}],secretKey:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u4E66Key",trigger:"blur"}],serviceProvider:[{required:!0,message:"\u8BF7\u9009\u62E9DNS\u670D\u52A1\u5546",trigger:"blur"}]};function v(){var b;Object.keys(a).forEach(s=>{var _,o;((_=t.other)==null?void 0:_[s])!==void 0&&(a[s]=(o=t.other)==null?void 0:o[s])}),a.id=(b=t.other)==null?void 0:b.id}z({open(b){var s;(s=F.value)==null||s.resetFields(),t.visible=!0,t.other=b}});const f=ge(()=>{var b;return(b=t.other)!=null&&b.id?"\u7F16\u8F91DNS":"\u65B0\u589EDNS"});return(b,s)=>{const _=fe,o=oe,p=pe,g=ce,k=ue,x=ee,K=ae,X=Z;return m(),C("div",null,[e(K,{"model-value":t.visible,"show-close":!t.loading,"close-on-press-escape":!1,title:c(f),width:"min-content","z-index":20,"close-on-click-modal":!1,onClose:B,onOpened:v},{footer:l(()=>[e(x,{class:"ml-auto",size:"small",loading:t.loading,onClick:B},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(x,{size:"small",loading:t.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:s[4]||(s[4]=$=>c(h)(F.value))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(k,{ref_key:"ruleFormRef",ref:F,"label-width":"80px",model:a,rules:I,"hide-required-asterisk":!1},{default:l(()=>[r("div",null,[e(o,{label:"\u540D\u79F0",prop:"name"},{default:l(()=>[e(_,{spellcheck:"false",modelValue:a.name,"onUpdate:modelValue":s[0]||(s[0]=$=>a.name=$),modelModifiers:{trim:!0},class:"input",placeholder:"\u8BF7\u8F93\u5165DNS\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(o,{label:"DNS\u670D\u52A1\u5546",prop:"serviceProvider"},{default:l(()=>[e(g,{modelValue:a.serviceProvider,"onUpdate:modelValue":s[1]||(s[1]=$=>a.serviceProvider=$),class:"w-full",placeholder:"\u8BF7\u9009\u62E9DNS",disabled:a.id},{default:l(()=>[(m(),C(G,null,Q(u,($,M)=>e(p,{key:M,label:$[1],value:$[0]},null,8,["label","value"])),64))]),_:1},8,["modelValue","disabled"])]),_:1}),e(o,{label:"\u8D26\u6237\u540D",prop:"secretId"},{default:l(()=>[e(_,{spellcheck:"false",modelValue:a.secretId,"onUpdate:modelValue":s[2]||(s[2]=$=>a.secretId=$),modelModifiers:{trim:!0},type:"textarea",class:"secre",placeholder:"\u8BF7\u8F93\u5165SecretID"},null,8,["modelValue"])]),_:1}),e(o,{label:"\u5BC6\u94A5",prop:"secretKey"},{default:l(()=>[e(_,{spellcheck:"false",modelValue:a.secretKey,"onUpdate:modelValue":s[3]||(s[3]=$=>a.secretKey=$),modelModifiers:{trim:!0},type:"textarea",class:"secre",placeholder:"\u8BF7\u8F93\u5165SecretKey"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])])),[[X,t.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const kl=le(El,[["__scopeId","data-v-ec69f89d"]]),Bl=L=>(Se("data-v-5fc5fdd5"),L=L(),Ve(),L),xl=Bl(()=>r("div",null,null,-1)),Dl=ie({__name:"ssleditor",emits:["load"],setup(L,{expose:z,emit:H}){const F=V(),a=w({domainName:[],dNSSettingID:0,resolverType:0,remark:"",tlsType:1}),t=w({checkList:[""],checkList1:[""],sslvalue:[]}),u=w({loading:!1,visible:!1,other:void 0}),h=w({arr:[[[1,0],"HTTP"]]}),B=()=>{a.resolverType=t.sslvalue[0],a.dNSSettingID=t.sslvalue[1]},I=de("debounce")(_=>{!_||_.validate(o=>{var p;o&&(u.loading=!0,t.sslvalue==0,t.sslvalue,Y.set({id:(p=u.other)==null?void 0:p.id,sid:u.other.siteId},a).then(()=>{var g;q({position:"bottom-right",type:"success",message:(g=u.other)!=null&&g.id?"\u57DF\u540D\u66F4\u65B0\u6210\u529F":"\u57DF\u540D\u65B0\u589E\u6210\u529F"}),H("load"),v()}).finally(()=>{u.loading=!1}))})},300),v=()=>{u.other=void 0,u.visible=!1,t.checkList=[""],t.checkList1=[""]},f={domainName:[{required:!0,message:"\u8BF7\u8F93\u5165\u57DF\u540D",trigger:"blur"}]};function b(){var _,o;Object.keys(a).forEach(p=>{var g,k;((g=u.other)==null?void 0:g[p])!==void 0&&(a[p]=(k=u.other)==null?void 0:k[p])}),(_=u.other)!=null&&_.id&&(a.id=(o=u.other)==null?void 0:o.id),h.arr=[[[1,0],"HTTP"]],we({limit:999}).then(p=>{var g,k;if(p.list=p.list.filter(x=>x.state==1),p.list.forEach((x,K)=>{x.state===1&&(x.serviceProvider==1?h.arr.push([[2,x.id],`\u817E\u8BAF\u4E91-${x.name}`]):x.serviceProvider==2?h.arr.push([[2,x.id],`\u963F\u91CC\u4E91-${x.name}`]):h.arr.push([[2,x.id],`\u5176\u4ED6-${x.name}`]))}),((g=u.other)==null?void 0:g.resolverType)==1)t.sslvalue="HTTP";else if(((k=u.other)==null?void 0:k.resolverType)==2){let x=h.arr.filter(K=>{var X;return K[0][1]==((X=u.other)==null?void 0:X.dNSSettingID)});t.sslvalue=x[0][1]}else t.sslvalue=""})}z({open(_){var o;(o=F.value)==null||o.resetFields(),console.log(_,"==="),u.visible=!0,u.other=_}});const s=ge(()=>{var _;return`${(_=u.other)==null?void 0:_.domainName}-SSL\u914D\u7F6E`});return(_,o)=>{const p=pe,g=ce,k=oe,x=ue,K=ee,X=ae,$=Z;return m(),C("div",null,[e(X,{"model-value":u.visible,"show-close":!u.loading,"close-on-press-escape":!1,title:c(s),width:"min-content","z-index":20,"close-on-click-modal":!1,onClose:v,onOpened:b},{footer:l(()=>[e(K,{class:"ml-auto",size:"small",loading:u.loading,onClick:v},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(K,{size:"small",loading:u.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:o[2]||(o[2]=M=>c(I)(F.value))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(x,{ref_key:"ruleFormRef",ref:F,"label-width":"80px",model:a,rules:f,"hide-required-asterisk":!1},{default:l(()=>[r("div",null,[e(k,{label:"\u9A8C\u8BC1\u65B9\u5F0F",prop:"remark"},{default:l(()=>[e(g,{modelValue:t.sslvalue,"onUpdate:modelValue":o[0]||(o[0]=M=>t.sslvalue=M),onChange:o[1]||(o[1]=M=>B()),class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u9A8C\u8BC1\u65B9\u5F0F"},{default:l(()=>[(m(!0),C(G,null,Q(h.arr,(M,D)=>(m(),N(p,{key:D,label:M[1],value:M[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),xl]),_:1},8,["model"])])),[[$,u.loading]])]),_:1},8,["model-value","show-close","title"])])}}});const Sl=le(Dl,[["__scopeId","data-v-5fc5fdd5"]]),Vl=ie({__name:"uploadCert",emits:["load"],setup(L,{expose:z,emit:H}){const F=V(),a=w({cer:"",domainName:"",hostHead:"",id:0,isTls:2,key:"",remark:"",autoApply:!1,autoRenew:!1}),t=w({loading:!1,visible:!1,other:void 0,siteId:0}),u=de("debounce")(v=>{!v||v.validate(f=>{f&&(t.loading=!0,Y.cert({sid:t.siteId,id:a==null?void 0:a.id},a).then(()=>{q({position:"bottom-right",type:"success",message:"\u8BC1\u4E66\u4E0A\u4F20\u6210\u529F"}),H("load"),h()}).finally(()=>{t.loading=!1}))})},300),h=()=>{t.other=void 0,t.visible=!1};function B(){var v;Object.keys(a).forEach(f=>{var b,s;((b=t.other)==null?void 0:b[f])!==void 0&&(a[f]=(s=t.other)==null?void 0:s[f])}),a.id=(v=t.other)==null?void 0:v.id,a.isTls||(a.isTls=1)}z({open(v,f){var b;(b=F.value)==null||b.resetFields(),t.visible=!0,t.other=v,t.siteId=f}});const I="\u5F55\u5165\u8BC1\u4E66";return(v,f)=>{const b=fe,s=oe,_=ue,o=ee,p=ae,g=Z;return m(),C("div",null,[e(p,{"model-value":t.visible,"show-close":!t.loading,"close-on-press-escape":!1,title:I,width:"450px","z-index":20,"close-on-click-modal":!1,onClose:h,onOpened:B},{footer:l(()=>[e(o,{class:"ml-auto",size:"small",loading:t.loading,onClick:h},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(o,{size:"small",loading:t.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:f[2]||(f[2]=k=>c(u)(F.value))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(_,{ref_key:"ruleFormRef",ref:F,"label-width":"72px",model:a,"hide-required-asterisk":!1},{default:l(()=>[r("div",null,[e(s,{label:"\u8BC1\u4E66\u5185\u5BB9",prop:"cer",rules:{required:!a.autoApply&&a.isTls===1,message:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5185\u5BB9"}},{default:l(()=>[e(b,{spellcheck:"false",modelValue:a.cer,"onUpdate:modelValue":f[0]||(f[0]=k=>a.cer=k),rows:8,resize:"none",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u8BC1\u4E66\u5185\u5BB9"},null,8,["modelValue"])]),_:1},8,["rules"]),e(s,{label:"\u8BC1\u4E66key",prop:"key",style:{"margin-bottom":"0"},rules:{required:!a.autoApply&&a.isTls===1,message:"\u8BF7\u8F93\u5165\u8BC1\u4E66Key"}},{default:l(()=>[e(b,{spellcheck:"false",modelValue:a.key,"onUpdate:modelValue":f[1]||(f[1]=k=>a.key=k),rows:8,resize:"none",type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u8BC1\u4E66Key"},null,8,["modelValue"])]),_:1},8,["rules"])])]),_:1},8,["model"])])),[[g,t.loading]])]),_:1},8,["model-value","show-close"])])}}});const wl=le(Vl,[["__scopeId","data-v-4aaf81f1"]]),Al={key:0,style:{"padding-left":"12px"}},Il={key:0,style:{"padding-left":"12px"}},Tl=ie({__name:"uploadFile",emits:["load"],setup(L,{expose:z,emit:H}){const F=V(),a=w({id:0,domainId:"",cer:void 0,key:void 0,cerName:"",keyName:""}),t=w({loading:!1,visible:!1,other:{},siteId:0}),u=async f=>{const b=f.file;a.cer=b,a.cerName=b.name},h=async f=>{const b=f.file;a.key=b,a.keyName=b.name},B=de("debounce")(f=>{let b={id:a.id,domain:a.domainId};const s=new FormData;if(a.cer)s.append("cer",a.cer);else{q({position:"bottom-right",type:"error",message:"\u8BF7\u4E0A\u4F20\u8BC1\u4E66\u5185\u5BB9"});return}if(a.key)s.append("key",a.key);else{q({position:"bottom-right",type:"error",message:"\u8BF7\u4E0A\u4F20\u8BC1\u4E66key"});return}!f||f.validate(_=>{Y.upload(b,s).then(()=>{q({position:"bottom-right",type:"success",message:"\u4E0A\u4F20\u6587\u4EF6\u6210\u529F"}),H("load"),I()}).finally(()=>{t.loading=!1})})},300),I=()=>{t.other={},t.visible=!1,new FormData,a.cer=void 0,a.key=void 0,a.cerName="",a.keyName=""};z({open(f,b){var s;(s=F.value)==null||s.resetFields(),t.other=f,t.visible=!0,a.id=f.id,t.siteId=b}});const v="\u4E0A\u4F20\u8BC1\u4E66";return(f,b)=>{const s=ee,_=fl,o=oe,p=ue,g=ae,k=Z;return m(),C("div",null,[e(g,{"model-value":t.visible,"show-close":!t.loading,"close-on-press-escape":!1,title:v,width:444,"z-index":20,"close-on-click-modal":!1,onClose:I},{footer:l(()=>[e(s,{class:"ml-auto",size:"small",loading:t.loading,onClick:I},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(s,{size:"small",loading:t.loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:b[0]||(b[0]=x=>c(B)(F.value))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(p,{ref_key:"ruleFormRef",ref:F,class:"backStr","label-width":"80px",model:a,style:{"max-width":"460px"},"hide-required-asterisk":!1},{default:l(()=>[e(o,{prop:"path",label:"\u4E0A\u4F20\u8BC1\u4E66\u5185\u5BB9","label-width":"100px"},{default:l(()=>[e(_,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,action:"123","http-request":u},{default:l(()=>[e(s,{style:{width:"100px"},type:"primary"},{default:l(()=>[E(" \u4E0A\u4F20\u8BC1\u4E66\u5185\u5BB9 ")]),_:1}),a.cerName?(m(),C("span",Al,T(a.cerName),1)):J("",!0)]),_:1},512)]),_:1}),e(o,{prop:"path",label:"\u4E0A\u4F20\u8BC1\u4E66key","label-width":"100px"},{default:l(()=>[e(_,{ref:"uploadRef",class:"upload-demo","show-file-list":!1,action:"123","http-request":h},{default:l(()=>[e(s,{style:{width:"100px"},type:"primary"},{default:l(()=>[E(" \u4E0A\u4F20\u8BC1\u4E66key ")]),_:1}),a.keyName?(m(),C("span",Il,T(a.keyName),1)):J("",!0)]),_:1},512)]),_:1})]),_:1},8,["model"])])),[[k,t.loading]])]),_:1},8,["model-value","show-close"])])}}});const $l=le(Tl,[["__scopeId","data-v-2b09e82f"]]);const Nl={class:"hhhh"},Ll={__name:"editor",emits:["load"],setup(L,{expose:z,emit:H}){const F=Be(),a=V(),t=w({name:"",domainsId:[],state:1}),u=w({loading:!1,visible:!1,other:void 0}),h=de("debounce")(_=>{!_||_.validate(o=>{o&&(u.loading=!0,Le.set(t.siteId,{...t,domainsId:t.domainsId||[]}).then(()=>{var p;q({position:"bottom-right",type:"success",message:(p=u.other)!=null&&p.id?"\u6E20\u9053\u66F4\u65B0\u6210\u529F":"\u6E20\u9053\u65B0\u589E\u6210\u529F"}),H("load"),B()}).finally(()=>{u.loading=!1}))})},300),B=()=>{u.other=void 0,u.visible=!1},I={name:{required:!0,validator:(_,o,p)=>{if(o){if(o==="\u9ED8\u8BA4\u6E20\u9053")return p(new Error("\u6B64\u540D\u79F0\u4E0D\u53EF\u7528"));p()}else return p(new Error("\u8BF7\u8F93\u5165\u6E20\u9053\u540D\u79F0"))},trigger:"blur"},domainsId:{required:!1,message:"\u8BF7\u8F93\u5165\u5185\u5BB9",trigger:"blur"},siteId:{required:!0,message:"\u8BF7\u9009\u62E9\u7AD9\u70B9",trigger:"change"}};V([]);const v=V([]),f=(_=!0)=>{re.get(t.siteId).then(o=>{v.value=o.list,_&&(t.domainsId="")})};function b(){var _,o,p,g,k,x;u.loading=!0,(_=u.other)!=null&&_.id?(t.siteId=(o=u.other)==null?void 0:o.siteId,t.id=(p=u.other)==null?void 0:p.id,t.name=(g=u.other)==null?void 0:g.name,t.domainsId=((k=u.other)==null?void 0:k.domains.map(K=>K.id))||[],t.state=((x=u.other)==null?void 0:x.state)||1,f(!1)):t.id=void 0,u.loading=!1}z({open(_){var o,p;(o=a.value)==null||o.resetFields(),u.visible=!0,u.other=_,t.id=(p=u.other)==null?void 0:p.id}});const s=ge(()=>{var _;return(_=u.other)!=null&&_.id?"\u7F16\u8F91\u6E20\u9053":"\u65B0\u589E\u6E20\u9053"});return(_,o)=>{const p=fe,g=oe,k=pe,x=ce,K=ue,X=ee,$=ae,M=Z;return m(),C("div",Nl,[e($,{"model-value":c(u).visible,"show-close":!c(u).loading,"close-on-press-escape":!1,title:c(s),width:460,"z-index":20,"close-on-click-modal":!1,onClose:B,onOpened:b},{footer:l(()=>[e(X,{class:"ml-auto",size:"small",loading:c(u).loading,onClick:B},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1},8,["loading"]),e(X,{size:"small",loading:c(u).loading,type:"primary",class:"border-0 bg-orange group-hover:bg-orangeLight",onClick:o[4]||(o[4]=D=>c(h)(c(a)))},{default:l(()=>[E(" \u4FDD\u5B58 ")]),_:1},8,["loading"])]),default:l(()=>[O((m(),C("div",null,[e(K,{ref_key:"ruleFormRef",ref:a,"label-width":"80px",model:c(t),rules:I,"hide-required-asterisk":!1},{default:l(()=>[e(g,{label:"\u6E20\u9053\u540D\u79F0",prop:"name"},{default:l(()=>[e(p,{spellcheck:"false",modelValue:c(t).name,"onUpdate:modelValue":o[0]||(o[0]=D=>c(t).name=D),modelModifiers:{trim:!0},clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6E20\u9053\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e(g,{label:"\u7AD9\u70B9\u540D\u79F0",prop:"siteId"},{default:l(()=>[e(x,{modelValue:c(t).siteId,"onUpdate:modelValue":o[1]||(o[1]=D=>c(t).siteId=D),class:"input",onChange:o[2]||(o[2]=D=>f()),style:{width:"100%"},placeholder:"\u9009\u62E9\u7AD9\u70B9"},{default:l(()=>[(m(!0),C(G,null,Q(c(F).list,D=>(m(),N(k,{key:D.id,label:D.name,value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),c(t).siteId?(m(),N(g,{key:0,label:"\u6765\u8DEF\u57DF\u540D",prop:"domainsId"},{default:l(()=>[e(x,{modelValue:c(t).domainsId,"onUpdate:modelValue":o[3]||(o[3]=D=>c(t).domainsId=D),clearable:"",class:"w-full",multiple:!0,placeholder:"\u8BF7\u9009\u62E9\u6765\u8DEF\u57DF\u540D"},{default:l(()=>[(m(!0),C(G,null,Q(c(v),D=>(m(),N(k,{key:D.id,label:D.domainName,value:D.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):J("",!0)]),_:1},8,["model"])])),[[M,c(u).loading]])]),_:1},8,["model-value","show-close","title"])])}}},zl=le(Ll,[["__scopeId","data-v-e7b8a855"]]);const Pl={class:"flex-y",style:{height:"100%"}},Rl={class:"flex-x-end dia-footer"},Ul={class:"flex-y",style:{height:"100%",gap:"16px"}},Hl={__name:"origin",emits:["load"],setup(L,{expose:z,emit:H}){const F=w({visible:!1,name:"",pageinfo:{pageIndex:1,pageSize:20,total:0},data:[]}),a=V({pageIndex:1,pageSize:20,total:0}),t=w({loading:!1,data:[],load(I){var v;a.value=I||a.value,t.loading=!0,gl((v=u.other)==null?void 0:v.id).then(f=>{t.data=f.domains,a.value.total=f.domains.length}).finally(()=>{t.loading=!1})}}),u=w({visible:!1,other:void 0}),h=()=>{u.visible=!1,a.value.pageIndex=1,H("load")};z({open(I){u.other=I,u.visible=!0,a.value.pageIndex=1,t.load()}});const B="\u6765\u8DEF\u57DF\u540D";return(I,v)=>{const f=xe,b=De,s=Ue,_=ae,o=Z;return m(),N(_,{modelValue:c(u).visible,"onUpdate:modelValue":v[3]||(v[3]=p=>c(u).visible=p),"show-close":!0,"close-on-press-escape":!1,title:B,width:838,"z-index":20,top:"20vh",style:{height:"65vh"},"close-on-click-modal":!1,onClose:h},{default:l(()=>{var p;return[O((m(),C("div",Pl,[O((m(),N(b,{data:(p=c(t).data)==null?void 0:p.slice((c(a).pageIndex-1)*c(a).pageSize,c(a).pageIndex*c(a).pageSize),class:"auto",stripe:!0,onSortChange:c(t).sortChnage},{default:l(()=>[e(f,{prop:"domain",label:"\u57DF\u540D","show-overflow-tooltip":!0}),e(f,{prop:"memberCount",label:"\u4F1A\u5458\u6570"},{default:l(({row:g})=>[E(T(g.memberCount),1)]),_:1}),e(f,{prop:"children",label:"\u8BB0\u5F55\u6570"},{default:l(({row:g})=>[E(T(g.children.length||0)+" ",1)]),_:1})]),_:1},8,["data","onSortChange"])),[[o,c(t).loading]]),r("div",Rl,[e(ne,{pageinfo:c(a),class:"ml-auto",onChange:v[0]||(v[0]=g=>a.value=g)},null,8,["pageinfo"])]),e(s,{modelValue:c(F).visible,"onUpdate:modelValue":v[2]||(v[2]=g=>c(F).visible=g),direction:"rtl",size:"440"},{header:l(()=>[E(T(c(F).name)+"\u7684\u8BB0\u5F55 ",1)]),default:l(()=>{var g;return[r("div",Ul,[O((m(),N(b,{data:(g=c(F).data)==null?void 0:g.slice((c(F).pageinfo.pageIndex-1)*c(F).pageinfo.pageSize,c(F).pageinfo.pageIndex*c(F).pageinfo.pageSize),stripe:!0,border:!0,class:"auto"},{default:l(()=>[e(f,{prop:"domain",label:"\u57DF\u540D","show-overflow-tooltip":!0}),e(f,{label:"\u4F1A\u5458\u6570"},{default:l(({row:k})=>[E(T(k.memberCount),1)]),_:1})]),_:1},8,["data"])),[[o,c(F).loading]]),e(ne,{pageinfo:c(F).pageinfo,class:"ml-auto",onChange:v[1]||(v[1]=k=>c(F).pageinfo=k),layout:"total,next,pager,prev"},null,8,["pageinfo"])])]}),_:1},8,["modelValue"])])),[[o,c(t).loading]])]}),_:1},8,["modelValue"])}}},ql=le(Hl,[["__scopeId","data-v-2ed54b4c"]]);const Kl={class:"box",style:{flex:"1",display:"flex","flex-direction":"column",gap:"16px",padding:"0"}},Ol={class:"flex-x-between"},jl={class:"search m-0"},Ml={style:{padding:"8px","word-break":"normal"}},Xl={key:1},Gl={style:{display:"flex","justify-content":"flex-end"}},Ql={__name:"index",setup(L){const z=V(),H=V(),F=V({pageIndex:1,pageSize:20,total:0}),a=w({loading:!1,data:[],searchVal:{keywords:""},selectList:[],load(u){F.value=u||F.value,a.loading=!0,hl({page:F.value.pageIndex,limit:F.value.pageSize,...a.searchVal}).then(h=>{a.data=h.list,F.value.total=h.total}).finally(()=>{a.loading=!1})},handleSelectionChange(u){a.selectList=u},sortChnage({column:u,prop:h,order:B}){B?a.searchVal.order=`${h} ${B==="ascending"?"asc":"desc"}`:a.searchVal.order="",a.load()}}),t={del:u=>W({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u6E20\u9053\u5220\u9664\u6210\u529F"},()=>Le.delete({id:u.id,sid:u.siteId}).then(h=>(a.load(),h))),statusChange(u,h){h.loading=!0,vl(h.id,u).catch(()=>{h.state=u===1?2:1}).then(()=>{q({position:"bottom-right",type:"success",message:"\u72B6\u6001\u66F4\u65B0\u6210\u529F"})}).catch(()=>{h.state=u===1?2:1}).finally(()=>{h.loading=!1})}};return a.load(),(u,h)=>{const B=ee,I=$e,v=xe,f=ze,b=De,s=ne,_=Z;return m(),C("div",Kl,[r("div",Ol,[r("div",null,[e(B,{type:"primary",onClick:h[0]||(h[0]=o=>{var p;return(p=c(z))==null?void 0:p.open({})})},{default:l(()=>[E(" \u65B0\u589E\u6E20\u9053 ")]),_:1})]),r("div",jl,[e(I,{modelValue:c(a).searchVal.keywords,"onUpdate:modelValue":h[1]||(h[1]=o=>c(a).searchVal.keywords=o),onChange:h[2]||(h[2]=o=>{c(F).pageIndex=1,c(a).load()})},null,8,["modelValue"])])]),O((m(),N(b,{class:"auto",data:c(a).data,stripe:!0,onSortChange:c(a).sortChnage,onSelectionChange:c(a).handleSelectionChange},{default:l(()=>[e(v,{prop:"channelCode",label:"\u6E20\u9053ID",width:"120"},{default:l(({row:o})=>[e(B,{disabled:!o.channelCode,type:"primary",link:"",onClick:p=>c(He)(o.channelCode)},{default:l(()=>[E(T(o.channelCode||"-"),1)]),_:2},1032,["disabled","onClick"])]),_:1}),e(v,{prop:"name",label:"\u6E20\u9053\u540D\u79F0","min-width":"200","show-overflow-tooltip":!0}),e(v,{label:"\u6765\u8DEF\u57DF\u540D","min-width":"200"},{default:l(({row:o})=>[o.domains&&o.domains.length>0?(m(),N(f,{key:0,placement:"right",trigger:"hover",width:200,"popper-class":"yumingSSl not_pb"},{reference:l(()=>[e(B,{type:"primary",link:""},{default:l(()=>[E(" \u67E5\u770B ")]),_:1})]),default:l(()=>[r("div",Ml,[(m(!0),C(G,null,Q(o.domains,p=>(m(),C("p",null,T(p.domain),1))),256))])]),_:2},1024)):(m(),C("span",Xl,"-"))]),_:1}),e(v,{prop:"title",label:"\u4F1A\u5458\u6570\u91CF","min-width":"200","show-overflow-tooltip":!0},{default:l(({row:o})=>[E(T(o.memberCount),1)]),_:1}),e(v,{fixed:"right",label:"\u64CD\u4F5C",align:"right",width:"110"},{default:l(({row:o})=>[e(B,{type:"primary",link:"",onClick:p=>{var g;return(g=c(z))==null?void 0:g.open(o)}},{default:l(()=>[E(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(B,{type:"danger",link:"",onClick:p=>t.del(o),disabled:o.domains.reduce((p,g)=>p+=g.memberCount,0)>0},{default:l(()=>[E(" \u5220\u9664 ")]),_:2},1032,["onClick","disabled"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange"])),[[_,c(a).loading]]),r("div",Gl,[e(s,{pageinfo:c(F),onChange:c(a).load},null,8,["pageinfo","onChange"]),e(zl,{ref_key:"editorRef",ref:z,onLoad:c(a).load},null,8,["onLoad"]),e(ql,{ref_key:"originRef",ref:H,onLoad:c(a).load},null,8,["onLoad"])])])}}},A=L=>(Se("data-v-f3c33bfe"),L=L(),Ve(),L),Wl={class:"content"},Zl={class:"box",style:{"padding-top":"24px"}},Jl={class:"flex-y",style:{flex:"1",height:"100%"}},Yl={class:"flex-y",style:{flex:"1",height:"100%"}},et={class:"flex-x-between"},lt={class:"flex-x-center search"},tt=A(()=>r("span",{style:{flexShrink:0}},"\u7AD9\u70B9",-1)),ot={style:{padding:"8px","word-break":"normal"}},at={key:0,style:{"font-size":"12px"}},st={key:1,style:{"font-size":"12px"}},nt={key:2,style:{"font-size":"12px"}},ut={style:{"margin-left":"4px",cursor:"pointer",color:"#409eff"}},it=["onClick"],dt={style:{margin:"20px 0","border-bottom":"1px solid #d2ddec","padding-bottom":"20px"}},rt={class:"flex-y-center",style:{"margin-bottom":"16px"}},pt=A(()=>r("span",{style:{"font-size":"12px","margin-right":"12px"}},"\u8BBF\u95EE\u65B9\u5F0F",-1)),ct=A(()=>r("ul",{class:"flex-y",style:{"font-size":"12px","text-align":"left",gap:"6px","margin-left":"16px"}},[r("li",null," \u8BBF\u95EE\u65B9\u5F0F\u5305\u542Bhttps\u9700\u8981\u786E\u8BA4\u8BE5\u57DF\u540D\u662F\u5426\u6709\u7533\u8BF7\u8BC1\u4E66\uFF0C\u7AEF\u53E3443\u662F\u5426\u5F00\u653E "),r("li",null,"\u5982\u679C\u662F\u5B9D\u5854\u73AF\u5883\u5219\u9700\u6C42\u914D\u7F6E\u53CD\u5411\u4EE3\u7406443\u7AEF\u53E3\u5230\u672C\u673A"),r("li",null,"\u7533\u8BF7\u8BC1\u4E66\uFF1ASSL\u8BC1\u4E66\u91CC\u7533\u8BF7\u8BC1\u4E66"),r("li",null," \u5F00\u653E443\u7AEF\u53E3\uFF1A\u7CFB\u7EDF\u8BBE\u7F6E->\u524D\u53F0\u5B89\u5168\u914D\u7F6E->\u628AHTTPS\u7AEF\u53E3\u6253\u5F00 ")],-1)),mt={style:{"text-align":"right","margin-top":"20px"}},_t=A(()=>r("p",null,null,-1)),ft={class:"hideKey"},gt={style:{"text-align":"right","margin-top":"16px","margin-bottom":"0px"}},ht=A(()=>r("p",null,null,-1)),vt={style:{"max-height":"300px","overflow-y":"auto",padding:"0"}},yt=["onClick"],Ft={style:{color:"#4c83ff",cursor:"pointer"}},bt={class:"flex-y",style:{flex:"1",height:"100%"}},Ct={class:"flex-y",style:{flex:"1",height:"100%"}},Et={class:"flex-x-between"},kt={class:"flex-x-center search"},Bt=A(()=>r("span",{style:{flexShrink:0}},"\u7AD9\u70B9",-1)),xt={style:{padding:"8px","word-break":"normal"}},Dt={key:0,style:{"font-size":"12px"}},St={key:1,style:{"font-size":"12px"}},Vt={key:2,style:{"font-size":"12px"}},wt={style:{"margin-left":"4px",cursor:"pointer",color:"#409eff"}},At={key:0},It=A(()=>r("span",{style:{"background-color":"#d5d5d5 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),Tt=A(()=>r("span",{style:{color:"#444444"}}," \u672A\u542F\u7528",-1)),$t=[It,Tt],Nt={key:1},Lt=A(()=>r("span",{style:{"background-color":"#d5d5d5 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),zt=A(()=>r("span",{style:{color:"#444444"}}," \u5F85\u7533\u8BF7",-1)),Pt=[Lt,zt],Rt={key:2},Ut=A(()=>r("span",{style:{"background-color":"#faad14 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),Ht=A(()=>r("span",{style:{color:"#444444"}}," \u5F85\u7533\u8BF7",-1)),qt=[Ut,Ht],Kt={key:3},Ot=A(()=>r("span",{style:{"background-color":"rgb(75, 130, 250) !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),jt=A(()=>r("span",{style:{color:"#444444"}}," \u7533\u8BF7\u4E2D",-1)),Mt=[Ot,jt],Xt={key:4},Gt=A(()=>r("span",{style:{"background-color":"rgb(102 225 180) !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),Qt=A(()=>r("span",{style:{color:"#444444"}}," \u6B63\u5E38",-1)),Wt=[Gt,Qt],Zt={key:5,style:{position:"relative"}},Jt=A(()=>r("span",{style:{"background-color":"#ff4d4f !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),Yt=A(()=>r("span",{style:{color:"#444444"}}," \u7533\u8BF7\u5931\u8D25",-1)),eo={style:{padding:"8px"}},lo={key:6},to=A(()=>r("span",{style:{"background-color":"#faad14 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px",padding:"8px"}},null,-1)),oo=A(()=>r("span",{style:{color:"#444444"}}," \u5373\u5C06\u8FC7\u671F",-1)),ao=[to,oo],so={key:7},no=A(()=>r("span",{style:{"background-color":"#d5d5d5 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),uo=A(()=>r("span",{style:{color:"#d3d3d3"}}," \u5DF2\u8FC7\u671F",-1)),io=[no,uo],ro={key:8},po=A(()=>r("span",{style:{"background-color":"#d5d5d5 !important",display:"inline-block",width:"5px",height:"5px","border-radius":"50%","margin-bottom":"2px"}},null,-1)),co=A(()=>r("span",{style:{color:"#d3d3d3"}}," \u5DF2\u540A\u9500",-1)),mo=[po,co],_o=["onClick"],fo={style:{padding:"11px 0",display:"flex","flex-direction":"column","justify-content":"center"}},go={class:"flex-y",style:{height:"100%",flex:"1"}},ho={class:"flex-x-between",style:{height:"48px"}},vo={class:"hideKey"},yo={style:{width:"270px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},Fo=ie({__name:"index",setup(L){const z=Be(),H=w([[1,"\u4EC5HTTP"],[2,"\u4EC5HTTPS"],[3,"HTTP+HTTPS"],[4,"\u5F3A\u5236HTTPS"]]),F=V({pageIndex:1,pageSize:20,total:0});V({pageIndex:1,pageSize:20,total:0});const a=V({pageIndex:1,pageSize:20,total:0}),t=V({pageIndex:1,pageSize:20,total:0}),u=w({type:4,level:1,domainId:"",domainName:"",showPover:"",showPover1:"",showDate:0,remark:"",isdefault:!1,tlsType:""}),h=d=>{u.showDate=d.showDate,u.showPover=d.id,v.value=!0},B=d=>{u.tlsType=d.tlsType||"",u.showPover1=d.id,f.value=!0},I=d=>{u.type=d,v.value=!1,f.value=!1},v=V(!1),f=V(!1),b=ll(),s=w({listening:!1,loading:!0,data:[],searchVal:{keyword:"",order:""},selectList:[],site:[],load(d){F.value=d||F.value,b.currentRoute.value.name==="sysDomain"&&(s.loading=!0,s.getData().then(i=>{i.list.forEach(S=>delete S.children),s.data=i.list,F.value.total=i.total}).finally(()=>{s.loading=!1}))},listen(){s.listening||s.loading||(s.listening=!0,s.getData().then(d=>{s.data=d.list}).finally(()=>{s.listening=!1}))},getData(){return il({page:F.value.pageIndex,limit:F.value.pageSize,...s.searchVal}).then(d=>d)},handleSelectionChange(d){s.selectList=d},sortChnage({column:d,prop:i,order:S}){S?s.searchVal.order=`${i} ${S==="ascending"?"asc":"desc"}`:s.searchVal.order="",s.load()},pull(){dl().then(d=>{s.site=d.list})},bind(d,i){rl({id:d.id,sid:d.siteId==i.id?0:i.id}).then(S=>{q({position:"bottom-right",type:"success",message:d.siteId==i.id?"\u89E3\u7ED1\u6210\u529F":"\u7ED1\u5B9A\u6210\u529F"}),s.load()})}});s.pull();function _(){document.querySelectorAll(".sslBtn").forEach(d=>{d.style.display="none"})}const o=w({listening:!1,loading:!0,data:[],searchVal:{keyword:"",order:""},selectList:[],load(d){a.value=d||a.value,b.currentRoute.value.name==="sysDomain"&&(o.loading=!0,o.getData().then(i=>{o.data=i.list,a.value.total=i.total}).finally(()=>{o.loading=!1}))},listen(){o.listening||o.loading||(o.listening=!0,o.getData().then(d=>{o.data=d.list}).finally(()=>{o.listening=!1}))},getData(){return we({page:a.value.pageIndex,limit:a.value.pageSize,...o.searchVal}).then(d=>d)},handleSelectionChange(d){this.selectList=d},sortChnage({column:d,prop:i,order:S}){S?o.searchVal.order=`${i} ${S==="ascending"?"asc":"desc"}`:o.searchVal.order="",o.load()}});Je(()=>{v.value=!1,f.value=!1});const p=w({listening:!1,loading:!0,data:[],searchVal:{keyword:"",order:""},selectList:[],load(d){t.value=d||t.value,b.currentRoute.value.name==="sysDomain"&&(p.loading=!0,p.getData().then(i=>{p.data=i.list,t.value.total=i.total}).finally(()=>{p.loading=!1}))},listen(){p.listening||p.loading||(p.listening=!0,p.getData().then(d=>{p.data=d.list}).finally(()=>{p.listening=!1}))},getData(){return pl({id:u.domainId,page:t.value.pageIndex,limit:t.value.pageSize,...p.searchVal}).then(d=>d)},handleSelectionChange(d){this.selectList=d},sortChnage({column:d,prop:i,order:S}){S?s.searchVal.order=`${i} ${S==="ascending"?"asc":"desc"}`:s.searchVal.order="",s.load()}}),g=d=>{var S,se;let i=o.data.filter(P=>P.id==d);return((S=i[0])==null?void 0:S.serviceProvider)==1?"\u817E\u8BAF\u4E91-":((se=i[0])==null?void 0:se.serviceProvider)==2?"\u963F\u91CC\u4E91-":"\u5176\u4ED6"},k=d=>{let i="";for(let S=0;S<d.length;S++)i+="*";return i},x=V(),K=V(),X=V();V();const $=V();V();const M=V(),D={del:d=>W({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u57DF\u540D\u5220\u9664\u6210\u529F"},()=>re.delete({id:d.id,sid:d.siteId}).then(i=>(s.load(),i))),changetlsType(d){let i={id:d.id,tlsType:u.tlsType};re.tlsType(d.siteId,i).then(()=>{f.value=!1,s.load(),q({position:"bottom-right",type:"success",message:"\u8BBF\u95EE\u65B9\u5F0F\u66F4\u65B0\u6210\u529F"})})},statusChange(d,i){i.loading=!0},DnsStatusChange:(d,i)=>W({message:"\u786E\u5B9A\u8981\u4FEE\u6539\u5417\uFF1F"},()=>nl([i.id],d).then(()=>{q({position:"bottom-right",type:"success",message:"DNS\u72B6\u6001\u66F4\u65B0\u6210\u529F"}),o.load()}),o.load()),changeDate(d){let i={id:d.id,dNSSettingID:d.dNSSettingID,domainName:d.domainName,remark:d.remark,resolverType:d.resolverType,showDate:u.showDate};re.data(d.siteId,i).then(()=>{v.value=!1,s.load(),q({position:"bottom-right",type:"success",message:"\u4F7F\u7528\u65E5\u671F\u66F4\u65B0\u6210\u529F"})})},changeRemark(d){let i=d;i.remark=u.remark,ul(i).then(()=>{f.value=!1,q({position:"bottom-right",type:"success",message:"\u5907\u6CE8\u66F4\u65B0\u6210\u529F"})})},Dnsdel:d=>W({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"DNS\u914D\u7F6E\u5220\u9664\u6210\u529F"},()=>cl([d.id]).then(i=>(o.load(),i))),recorddel:d=>W({message:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okEms:"\u4E3B\u673A\u5934\u5220\u9664\u6210\u529F"},()=>ml([d.id],u.domainId).then(i=>(p.load(),i))),expand:d=>{let i=ve.value||[],S=i.indexOf(d.id);S==-1?i.push(d.id):i.splice(S,1),ve.value=i},statusChangeautoApply:(d,i)=>W({message:"\u786E\u5B9A\u8981\u4FEE\u6539\u5417\uFF1F"},()=>Y.applyAuto(i.siteId,{id:i.id,state:d?1:2}).then(S=>{q({position:"bottom-right",type:"success",message:"\u81EA\u52A8\u7533\u8BF7\u66F4\u65B0\u6210\u529F"}),d==!1&&Y.renewAuto(i.siteId,{id:i.id,state:2}).catch(()=>{i.autoRenew=!0}).finally(()=>{s.load()}),s.load()}),s.load()),statusChangeautoRenew:(d,i)=>W({message:"\u786E\u5B9A\u8981\u4FEE\u6539\u5417\uFF1F"},()=>Y.renewAuto(i.siteId,{id:i.id,state:d?1:2}).then(()=>{q({position:"bottom-right",type:"success",message:"\u81EA\u52A8\u7EED\u7B7E\u66F4\u65B0\u6210\u529F"}),s.load()}),s.load()),removeCertEv:(d,i)=>W({message:"\u786E\u5B9A\u8981\u64A4\u9500\u8BC1\u4E66\u5417\uFF1F",okEms:"\u8BC1\u4E66\u64A4\u9500\u6210\u529F!"},()=>_l([d.id],i).then(S=>(p.load(),S)))},j=(d,i,S=!0)=>{let se=[()=>Y.applyCert(d,{ids:i}),()=>Y.applyCertBatch({ids:i})];W({message:"\u786E\u5B9A\u8981\u7533\u8BF7\u8BC1\u4E66\u5417\uFF1F"},()=>se[S?0:1]().then(P=>{q({position:"bottom-right",type:"success",message:"\u4F60\u6240\u63D0\u4EA4\u7684\u8BF7\u6C42\u5DF2\u6210\u529F\uFF0C\u8BF7\u53CA\u65F6\u8DDF\u8FDB\u7533\u8BF7\u72B6\u51B5\u3002\u5982\u6709\u95EE\u9898\uFF0C\u8BF7\u8054\u7CFB\u5BA1\u6838\u4EBA\u5458\u6216\u5728\u7EBF\u5BA2\u670D\u3002"}),s.load()}).catch(P=>{console.log(P)}))},he=d=>{d.showKey==null?d.showKey=1:d.showKey=void 0};Ye(()=>{s.load(),o.load()});const ve=V([]);return(d,i)=>{var Te;const S=We,se=Ze,P=ee,ye=pe,Fe=ce,Ae=$e,Ie=tl("svg-i"),te=ze,R=xe,Pe=Ne,Re=oe,me=qe,be=De,Ce=Ke,Ee=Z;return m(),C("div",Wl,[r("div",Zl,[e(ol,null,{default:l(()=>[e(se,{modelValue:u.type,"onUpdate:modelValue":i[0]||(i[0]=n=>u.type=n),class:"jh-tabs",onTabChange:I},{default:l(()=>[e(S,{label:"\u57DF\u540D\u7BA1\u7406",name:4}),e(S,{label:"SSL\u8BC1\u4E66",name:1}),e(S,{label:"DNS\u914D\u7F6E",name:2}),e(S,{label:"\u6E20\u9053\u7BA1\u7406",name:3})]),_:1},8,["modelValue"])]),_:1}),O(r("div",Jl,[r("div",Yl,[r("div",et,[r("div",null,[e(P,{type:"primary",onClick:i[1]||(i[1]=n=>{var y;return(y=x.value)==null?void 0:y.open({})})},{default:l(()=>[E(" \u65B0\u589E\u57DF\u540D ")]),_:1})]),r("div",lt,[tt,e(Fe,{modelValue:s.searchVal.siteId,"onUpdate:modelValue":i[2]||(i[2]=n=>s.searchVal.siteId=n),class:"m-2",placeholder:"\u6240\u6709\u7AD9\u70B9",clearable:"",onChange:i[3]||(i[3]=n=>s.load())},{default:l(()=>[(m(!0),C(G,null,Q(c(z).list,n=>(m(),N(ye,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(Ae,{modelValue:s.searchVal.keyword,"onUpdate:modelValue":i[4]||(i[4]=n=>s.searchVal.keyword=n),onBlur:i[5]||(i[5]=n=>{F.value.pageIndex=1,s.load()})},null,8,["modelValue"])])]),O((m(),N(be,{data:s.data,class:"auto",stripe:!0},{default:l(()=>[e(R,{prop:"domainName",label:"\u57DF\u540D","show-overflow-tooltip":""},{default:l(({row:n})=>[e(te,{placement:"left",trigger:"hover","popper-class":"yumingSSl not_pb"},{reference:l(()=>[e(Ie,{name:"SSL",size:"20px",color:n.hasSSL==1?"#52C41A":n.hasSSL==2?"#D9D9D9":"#FF4D4F"},null,8,["color"])]),default:l(()=>[r("div",ot,[n.hasSSL==1?(m(),C("span",at,"\u6B64\u57DF\u540D\u5DF2\u542F\u7528ssl\u8BC1\u4E66")):n.hasSSL==2?(m(),C("span",st,"\u6B64\u57DF\u540D\u672A\u542F\u7528ssl\u8BC1\u4E66")):(m(),C("span",nt,"\u6B64\u57DF\u540D\u542F\u7528ssl\u8BC1\u4E66\u5F02\u5E38"))])]),_:2},1024),r("span",ut,T(n.domainName),1)]),_:1}),e(R,{prop:"resolverName",label:"\u8BBF\u95EE\u65B9\u5F0F","show-overflow-tooltip":""},{default:l(({row:n})=>[r("div",{style:{cursor:"pointer",color:"var(--el-color-primary)"},onClick:y=>B(n)},[r("span",null,T(["","\u4EC5HTTP","\u4EC5HTTPS","HTTP+HTTPS","\u5F3A\u5236HTTPS"][n.tlsType]||"\u672A\u542F\u7528"),1)],8,it),u.showPover1==n.id?(m(),N(te,{key:0,trigger:"click",visible:f.value,title:"\u7F16\u8F91","popper-class":"timePover",placement:"bottom",width:440},{reference:l(()=>[_t]),default:l(()=>[r("div",dt,[r("div",rt,[pt,e(Fe,{modelValue:u.tlsType,"onUpdate:modelValue":i[6]||(i[6]=y=>u.tlsType=y),style:{width:"250px"},class:"m-2",placeholder:"\u8BF7\u9009\u62E9\u8BBF\u95EE\u65B9\u5F0F"},{default:l(()=>[(m(!0),C(G,null,Q(H,(y,U)=>(m(),N(ye,{key:U,label:y[1],value:y[0]},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),ct]),r("div",mt,[e(P,{size:"small",onClick:i[7]||(i[7]=y=>f.value=!1)},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1}),e(P,{size:"small",type:"primary",disabled:!u.tlsType,onClick:y=>D.changetlsType(n)},{default:l(()=>[E(" \u786E\u8BA4 ")]),_:2},1032,["disabled","onClick"])])]),_:2},1032,["visible"])):J("",!0)]),_:1}),e(R,{prop:"showDate",label:"\u4F7F\u7528\u65E5\u671F","show-overflow-tooltip":"",type:"date"},{default:l(({row:n})=>[r("div",ft,[r("span",null,T(n.showDate>0?c(Oe)(n.showDate,"{y}-{m}-{d}"):"-"),1),u.showPover==n.id?(m(),N(te,{key:0,trigger:"click",visible:v.value,title:"\u4FEE\u6539\u4F7F\u7528\u65E5\u671F","popper-class":"timePover",placement:"bottom",width:365},{reference:l(()=>[ht]),default:l(()=>[r("div",gt,[e(Re,{prop:"remark","label-width":"0",class:"popover-change_time"},{default:l(()=>[e(Pe,{modelValue:u.showDate,"onUpdate:modelValue":i[8]||(i[8]=y=>u.showDate=y),modelModifiers:{number:!0},type:"date",style:{width:"100%"},placeholder:"\u8BF7\u9009\u62E9\u4F7F\u7528\u65E5\u671F",size:"default","value-format":"X",class:"datePicker"},null,8,["modelValue"])]),_:1}),e(P,{size:"small",onClick:i[9]||(i[9]=y=>v.value=!1)},{default:l(()=>[E(" \u53D6\u6D88 ")]),_:1}),e(P,{size:"small",type:"primary",onClick:y=>D.changeDate(n)},{default:l(()=>[E(" \u786E\u8BA4 ")]),_:2},1032,["onClick"])])]),_:2},1032,["visible"])):J("",!0),e(me,{color:"#4C83FF",middle:"",class:"keyIcon",style:el({marginLeft:"6px",display:v.value&&u.showPover==n.id?"block":"none"}),onClick:y=>h(n)},{default:l(()=>[e(c(je))]),_:2},1032,["style","onClick"])])]),_:1}),e(R,{prop:"remark",label:"\u7ED1\u5B9A\u7AD9\u70B9","show-overflow-tooltip":""},{default:l(({row:n})=>[e(te,{trigger:"hover","popper-class":"jh_Pover",placement:"bottom",width:240},{reference:l(()=>{var y,U;return[r("p",Ft,T(((U=(y=s.site)==null?void 0:y.filter(ke=>ke.id==n.siteId)[0])==null?void 0:U.name)||"\u7ED1\u5B9A\u7AD9\u70B9"),1)]}),default:l(()=>[r("div",vt,[(m(!0),C(G,null,Q(s.site,y=>(m(),C("div",{class:"siteHover",onClick:U=>s.bind(n,y)},[E(T(y.name)+" ",1),n.siteId==y.id?(m(),N(me,{key:0},{default:l(()=>[e(c(Me))]),_:1})):J("",!0)],8,yt))),256))])]),_:2},1024)]),_:1}),e(R,{prop:"name",label:"\u64CD\u4F5C","show-overflow-tooltip":"",align:"right",width:"210px"},{default:l(({row:n})=>[e(P,{type:"danger",link:"",onClick:y=>{D.del(n),v.value=!1,f.value=!1}},{default:l(()=>[E(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ee,s.loading]]),e(ne,{pageinfo:F.value,style:{"margin-top":"1rem"},onChange:s.load},null,8,["pageinfo","onChange"])])],512),[[_e,u.type==4]]),O(r("div",bt,[r("div",Ct,[r("div",Et,[r("div",null,[e(P,{type:"primary",disabled:((Te=s.selectList)==null?void 0:Te.length)<=0,onClick:i[10]||(i[10]=n=>j(0,s.selectList.map(y=>y.id),!1))},{default:l(()=>[E(" \u6279\u91CF\u7533\u8BF7\u8BC1\u4E66 ")]),_:1},8,["disabled"])]),r("div",kt,[Bt,e(Fe,{modelValue:s.searchVal.siteId,"onUpdate:modelValue":i[11]||(i[11]=n=>s.searchVal.siteId=n),class:"m-2",placeholder:"\u6240\u6709\u7AD9\u70B9",clearable:"",onChange:s.load},{default:l(()=>[(m(!0),C(G,null,Q(c(z).list,n=>(m(),N(ye,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"]),e(Ae,{modelValue:s.searchVal.keyword,"onUpdate:modelValue":i[12]||(i[12]=n=>s.searchVal.keyword=n),onBlur:i[13]||(i[13]=n=>{F.value.pageIndex=1,s.load()})},null,8,["modelValue"])])]),O((m(),N(be,{data:s.data,class:"auto",stripe:!0,"row-key":"id","expand-row-keys":ve.value,onSortChange:s.sortChnage,onSelectionChange:s.handleSelectionChange,onExpandChange:D.expand},{default:l(()=>[e(R,{type:"selection",width:"25"}),e(R,{prop:"domainName",label:"\u57DF\u540D","show-overflow-tooltip":""},{default:l(({row:n})=>[e(te,{placement:"left",trigger:"hover",width:150,"popper-class":"yumingSSl not_pb"},{reference:l(()=>[e(Ie,{name:"SSL",size:"20px",color:n.hasSSL==1?"#52C41A":n.hasSSL==2?"#D9D9D9":"#FF4D4F"},null,8,["color"])]),default:l(()=>[r("div",xt,[n.hasSSL==1?(m(),C("span",Dt,"\u6B64\u57DF\u540D\u5DF2\u542F\u7528ssl\u8BC1\u4E66")):n.hasSSL==2?(m(),C("span",St,"\u6B64\u57DF\u540D\u672A\u542F\u7528ssl\u8BC1\u4E66")):(m(),C("span",Vt,"\u6B64\u57DF\u540D\u542F\u7528ssl\u8BC1\u4E66\u5F02\u5E38"))])]),_:2},1024),r("span",wt,T(n.domainName),1)]),_:1}),e(R,{prop:"certStatus",label:"\u8BC1\u4E66\u72B6\u6001",width:"120","show-overflow-tooltip":""},{default:l(({row:n})=>[n.certStatus===0?(m(),C("span",At,$t)):J("",!0),n.certStatus===1?(m(),C("span",Nt,Pt)):n.certStatus===2?(m(),C("span",Rt,qt)):n.certStatus===3?(m(),C("span",Kt,Mt)):n.certStatus===4?(m(),C("span",Xt,Wt)):n.certStatus===5?(m(),C("div",Zt,[Jt,Yt,e(te,{placement:"top-start",width:200,trigger:"hover","popper-class":"not_pb"},{reference:l(()=>[e(me,{style:{color:"red",position:"absolute",top:"4px",left:"60px"}},{default:l(()=>[e(c(Xe))]),_:1})]),default:l(()=>[r("div",eo,T(n.message),1)]),_:2},1024)])):n.certStatus===6?(m(),C("span",lo,ao)):n.certStatus===7?(m(),C("span",so,io)):n.certStatus===8?(m(),C("span",ro,mo)):J("",!0)]),_:1}),e(R,{prop:"resolverName",label:"\u8BC1\u4E66\u9A8C\u8BC1\u65B9\u5F0F","show-overflow-tooltip":""},{default:l(({row:n})=>[r("div",{style:{cursor:"pointer",color:"var(--el-color-primary)"},onClick:y=>{var U;(U=X.value)==null||U.open(n),v.value=!1,f.value=!1}},[r("span",null,T(n.resolverType==1?"HTTP":n.resolverType==2?g(n.dNSSettingID):"\u672A\u542F\u7528"),1),r("span",null,T(n.resolverName),1)],8,_o)]),_:1}),e(R,{prop:"autoApply",width:"100",label:"\u81EA\u52A8\u7533\u8BF7"},{default:l(({row:n})=>[e(Ce,{modelValue:n.autoApply,"onUpdate:modelValue":y=>n.autoApply=y,onChange:y=>D.statusChangeautoApply(y,n),"active-value":!0,loading:n.loading,size:"small","inactive-value":!1},null,8,["modelValue","onUpdate:modelValue","onChange","loading"])]),_:1}),e(R,{prop:"autoRenew",width:"100",label:"\u81EA\u52A8\u7EED\u7B7E"},{default:l(({row:n})=>[e(Ce,{modelValue:n.autoRenew,"onUpdate:modelValue":y=>n.autoRenew=y,onChange:y=>D.statusChangeautoRenew(y,n),"active-value":!0,loading:n.loading,size:"small","inactive-value":!1,disabled:n.autoApply==!1},null,8,["modelValue","onUpdate:modelValue","onChange","loading","disabled"])]),_:1}),e(R,{prop:"expiredTime",type:"date",width:"150",label:"\u5230\u671F\u65F6\u95F4"}),e(R,{prop:"remark",label:"\u7AD9\u70B9","show-overflow-tooltip":""},{default:l(({row:n})=>{var y,U;return[E(T(((U=(y=s.site)==null?void 0:y.filter(ke=>ke.id==n.siteId)[0])==null?void 0:U.name)||"-")+" ",1)]}),_:1}),e(R,{prop:"name",label:"\u64CD\u4F5C","show-overflow-tooltip":"",align:"right",width:"210px"},{default:l(({row:n})=>[e(te,{width:100,placement:"bottom",trigger:"hover","popper-class":"sslBtn shadow"},{reference:l(()=>[e(P,{type:"primary",link:""},{default:l(()=>[E(" SSL ")]),_:1})]),default:l(()=>[r("div",fo,[e(P,{class:"sslBtnH not_shadow",disabled:u.isdefault,onClick:y=>{j(n.siteId,[n.id]),_(),f.value=!1}},{default:l(()=>[E(" \u7533\u8BF7\u8BC1\u4E66 ")]),_:2},1032,["disabled","onClick"]),e(P,{class:"sslBtnH not_shadow",disabled:u.isdefault,style:{"margin-left":"0px"},onClick:y=>{var U;(U=M.value)==null||U.open(n,n.siteId),_(),f.value=!1}},{default:l(()=>[E(" \u4E0A\u4F20\u8BC1\u4E66 ")]),_:2},1032,["disabled","onClick"]),e(P,{class:"sslBtnH not_shadow",disabled:u.isdefault,style:{"margin-left":"0px"},onClick:y=>{var U;(U=$.value)==null||U.open(n,n.siteId),_(),v.value=!1,f.value=!1}},{default:l(()=>[E(" \u5F55\u5165\u8BC1\u4E66 ")]),_:2},1032,["disabled","onClick"])])]),_:2},1024),e(P,{type:"danger",link:"",onClick:y=>{D.del(n),v.value=!1,f.value=!1}},{default:l(()=>[E(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","expand-row-keys","onSortChange","onSelectionChange","onExpandChange"])),[[Ee,s.loading]]),e(ne,{pageinfo:F.value,style:{"margin-top":"1rem"},onChange:s.load},null,8,["pageinfo","onChange"])]),e(Sl,{ref_key:"ssleditorRef",ref:X,onLoad:s.load},null,8,["onLoad"])],512),[[_e,u.type==1]]),O(r("div",go,[r("div",ho,[r("div",null,[e(P,{type:"primary",onClick:i[14]||(i[14]=n=>{var y;return(y=K.value)==null?void 0:y.open({})})},{default:l(()=>[E(" \u65B0\u589EDNS ")]),_:1})])]),O((m(),N(be,{data:o.data,class:"auto",stripe:!0,onSortChange:s.sortChnage,onSelectionChange:s.handleSelectionChange,onExpandChange:D.expand},{default:l(()=>[e(R,{prop:"name",label:"\u540D\u79F0","show-overflow-tooltip":""}),e(R,{prop:"domainName",label:"\u5BC6\u94A5","show-overflow-tooltip":""},{default:l(({row:n})=>[r("p",null,"SecretID:"+T(n.secretId),1),r("div",vo,[r("div",yo," SecretKey: "+T(n.showKey?n.secretKey:k(n.secretKey)),1),e(me,{color:"#4C83FF",middle:"",class:"keyIcon",onClick:y=>he(n)},{default:l(()=>[n.showKey?(m(),N(c(Ge),{key:0})):(m(),N(c(Qe),{key:1}))]),_:2},1032,["onClick"])])]),_:1}),e(R,{prop:"serviceProvider",label:"\u670D\u52A1\u5546","show-overflow-tooltip":""},{default:l(({row:n})=>[r("span",null,T(["","\u817E\u8BAF\u4E91","\u963F\u91CC\u4E91","\u5176\u4ED6","cloudflare"][n.serviceProvider]),1)]),_:1}),e(R,{prop:"state",label:"\u72B6\u6001","show-overflow-tooltip":""},{default:l(({row:n})=>[e(Ce,{modelValue:n.state,"onUpdate:modelValue":y=>n.state=y,"active-value":1,loading:n.loading,"inactive-value":2,onChange:y=>D.DnsStatusChange(y,n)},null,8,["modelValue","onUpdate:modelValue","loading","onChange"])]),_:1}),e(R,{prop:"createAt",label:"\u521B\u5EFA\u65F6\u95F4","show-overflow-tooltip":"",type:"date",sortable:""}),e(R,{prop:"domainName",label:"\u64CD\u4F5C","show-overflow-tooltip":"",align:"right",width:"120"},{default:l(({row:n})=>[e(P,{type:"primary",link:"",onClick:y=>{var U;return(U=K.value)==null?void 0:U.open(n)}},{default:l(()=>[E(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),e(P,{type:"danger",link:"",onClick:y=>D.Dnsdel(n)},{default:l(()=>[E(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","onSortChange","onSelectionChange","onExpandChange"])),[[Ee,s.loading]]),e(ne,{pageinfo:a.value,style:{"margin-top":"1rem"},onChange:o.load},null,8,["pageinfo","onChange"]),e(kl,{ref_key:"dnseditorRef",ref:K,onLoad:o.load},null,8,["onLoad"])],512),[[_e,u.type==2]]),O(e(Ql,null,null,512),[[_e,u.type==3]]),e(wl,{ref_key:"recorduploadRef",ref:$,onLoad:s.load,id:u.domainId},null,8,["onLoad","id"]),e(Cl,{ref_key:"editorRef",ref:x,onLoad:s.load},null,8,["onLoad"]),e($l,{ref_key:"uploadFileRef",ref:M,onLoad:s.load,id:u.domainId},null,8,["onLoad","id"])])])}}});const Uo=le(Fo,[["__scopeId","data-v-f3c33bfe"]]);export{Uo as default};
