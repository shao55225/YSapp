import{t as he,u as ke,b as Se,a as Te,T as W,d as R,c as Pe,e as _e,f as we,D as De,C as Ce}from"./panel-time-pick-2e9d1eeb.js";import{ah as Re,ai as Ae,aj as Ve,ak as xe,al as Oe,am as H,an as X,ao as Ie,ap as Ee,aq as Me,X as Ne,Y as ye,ar as Be,a0 as Q,a2 as Fe,a9 as He}from"./entry-9cc5c370.js";import{G as Z,z as Ue,e as C,a as J,l as Le,m as je,p as k,Q as v,u as a,W as x,U as I,O as $e,f as U,y as Ge,I as Ke}from"./vue-11eabec3.js";function Ye(){}function qe(t,s,r,i){for(var c=t.length,u=r+(i?1:-1);i?u--:++u<c;)if(s(t[u],u,t))return u;return-1}function ze(t){return t!==t}function We(t,s,r){for(var i=r-1,c=t.length;++i<c;)if(t[i]===s)return i;return-1}function Qe(t,s,r){return s===s?We(t,s,r):qe(t,ze,r)}function Xe(t,s){var r=t==null?0:t.length;return!!r&&Qe(t,s,0)>-1}function Ze(t,s){return Re(Ae(t,s,Ve),t+"")}function Je(t){return xe(t)&&Oe(t)}function en(t,s,r){for(var i=-1,c=t==null?0:t.length;++i<c;)if(r(s,t[i]))return!0;return!1}var nn=1/0,tn=H&&1/X(new H([,-0]))[1]==nn?function(t){return new H(t)}:Ye;const an=tn;var sn=200;function on(t,s,r){var i=-1,c=Xe,u=t.length,o=!0,d=[],g=d;if(r)o=!1,c=en;else if(u>=sn){var T=s?null:an(t);if(T)return X(T);o=!1,c=Ee,g=new Ie}else g=s?[]:d;e:for(;++i<u;){var b=t[i],S=s?s(b):b;if(b=r||b!==0?b:0,o&&S===S){for(var A=g.length;A--;)if(g[A]===S)continue e;s&&g.push(S),d.push(b)}else c(g,S,r)||(g!==d&&g.push(S),d.push(b))}return d}var rn=Ze(function(t){return on(Me(t,1,Je,!0))});const L=rn,ln=Ne({...he,parsedValue:{type:ye(Array)}}),cn=["disabled"],un=Z({__name:"panel-time-range",props:ln,emits:["pick","select-range","set-picker-option"],setup(t,{emit:s}){const r=t,i=(e,n)=>{const l=[];for(let p=e;p<=n;p++)l.push(p);return l},{t:c,lang:u}=Be(),o=Q("time"),d=Q("picker"),g=Ue("EP_PICKER_BASE"),{arrowControl:T,disabledHours:b,disabledMinutes:S,disabledSeconds:A,defaultValue:E}=g.props,P=C(()=>r.parsedValue[0]),_=C(()=>r.parsedValue[1]),ee=ke(r),ne=()=>{s("pick",ee.value,!1)},w=C(()=>r.format.includes("ss")),j=C(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),te=(e=!1)=>{s("pick",[P.value,_.value],e)},ae=e=>{$(e.millisecond(0),_.value)},se=e=>{$(P.value,e.millisecond(0))},oe=e=>{const n=e.map(p=>R(p).locale(u.value)),l=K(n);return n[0].isSame(l[0])&&n[1].isSame(l[1])},$=(e,n)=>{s("pick",[e,n],!0)},re=C(()=>P.value>_.value),V=J([0,2]),le=(e,n)=>{s("select-range",e,n,"min"),V.value=[e,n]},G=C(()=>w.value?11:8),ie=(e,n)=>{s("select-range",e,n,"max");const l=a(G);V.value=[e+l,n+l]},ce=e=>{const n=w.value?[0,3,6,11,14,17]:[0,3,8,11],l=["hours","minutes"].concat(w.value?["seconds"]:[]),m=(n.indexOf(V.value[0])+e+n.length)%n.length,f=n.length/2;m<f?B.start_emitSelectRange(l[m]):B.end_emitSelectRange(l[m-f])},ue=e=>{const n=e.code,{left:l,right:p,up:m,down:f}=He;if([l,p].includes(n)){ce(n===l?-1:1),e.preventDefault();return}if([m,f].includes(n)){const h=n===m?-1:1,D=V.value[0]<G.value?"start":"end";B[`${D}_scrollDown`](h),e.preventDefault();return}},M=(e,n)=>{const l=b?b(e):[],p=e==="start",f=(n||(p?_.value:P.value)).hour(),h=p?i(f+1,23):i(0,f-1);return L(l,h)},N=(e,n,l)=>{const p=S?S(e,n):[],m=n==="start",f=l||(m?_.value:P.value),h=f.hour();if(e!==h)return p;const D=f.minute(),F=m?i(D+1,59):i(0,D-1);return L(p,F)},y=(e,n,l,p)=>{const m=A?A(e,n,l):[],f=l==="start",h=p||(f?_.value:P.value),D=h.hour(),F=h.minute();if(e!==D||n!==F)return m;const z=h.second(),be=f?i(z+1,59):i(0,z-1);return L(m,be)},K=([e,n])=>[Y(e,"start",!0,n),Y(n,"end",!1,e)],{getAvailableHours:de,getAvailableMinutes:pe,getAvailableSeconds:me}=Se(M,N,y),{timePickerOptions:B,getAvailableTime:Y,onSetOption:q}=Te({getAvailableHours:de,getAvailableMinutes:pe,getAvailableSeconds:me}),fe=e=>e?U(e)?e.map(n=>R(n,r.format).locale(u.value)):R(e,r.format).locale(u.value):null,ge=e=>e?U(e)?e.map(n=>n.format(r.format)):e.format(r.format):null,ve=()=>{if(U(E))return E.map(n=>R(n).locale(u.value));const e=R(E).locale(u.value);return[e,e.add(60,"m")]};return s("set-picker-option",["formatToString",ge]),s("set-picker-option",["parseUserInput",fe]),s("set-picker-option",["isValidValue",oe]),s("set-picker-option",["handleKeydownInput",ue]),s("set-picker-option",["getDefaultValue",ve]),s("set-picker-option",["getRangeAvailableTime",K]),(e,n)=>e.actualVisible?(Le(),je("div",{key:0,class:v([a(o).b("range-picker"),a(d).b("panel")])},[k("div",{class:v(a(o).be("range-picker","content"))},[k("div",{class:v(a(o).be("range-picker","cell"))},[k("div",{class:v(a(o).be("range-picker","header"))},x(a(c)("el.datepicker.startTime")),3),k("div",{class:v([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(T)),{"has-seconds":a(w)}])},[I(W,{ref:"minSpinner",role:"start","show-seconds":a(w),"am-pm-mode":a(j),"arrow-control":a(T),"spinner-date":a(P),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:ae,onSetOption:a(q),onSelectRange:le},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),k("div",{class:v(a(o).be("range-picker","cell"))},[k("div",{class:v(a(o).be("range-picker","header"))},x(a(c)("el.datepicker.endTime")),3),k("div",{class:v([a(o).be("range-picker","body"),a(o).be("panel","content"),a(o).is("arrow",a(T)),{"has-seconds":a(w)}])},[I(W,{ref:"maxSpinner",role:"end","show-seconds":a(w),"am-pm-mode":a(j),"arrow-control":a(T),"spinner-date":a(_),"disabled-hours":M,"disabled-minutes":N,"disabled-seconds":y,onChange:se,onSetOption:a(q),onSelectRange:ie},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),k("div",{class:v(a(o).be("panel","footer"))},[k("button",{type:"button",class:v([a(o).be("panel","btn"),"cancel"]),onClick:n[0]||(n[0]=l=>ne())},x(a(c)("el.datepicker.cancel")),3),k("button",{type:"button",class:v([a(o).be("panel","btn"),"confirm"]),disabled:a(re),onClick:n[1]||(n[1]=l=>te())},x(a(c)("el.datepicker.confirm")),11,cn)],2)],2)):$e("v-if",!0)}});var dn=Fe(un,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);R.extend(Pe);var pn=Z({name:"ElTimePicker",install:null,props:{..._e,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,s){const r=J(),[i,c]=t.isRange?["timerange",dn]:["time",we],u=o=>s.emit("update:modelValue",o);return Ge("ElPopperOptions",t.popperOptions),s.expose({focus:o=>{var d;(d=r.value)==null||d.handleFocusInput(o)},blur:o=>{var d;(d=r.value)==null||d.handleBlurInput(o)},handleOpen:()=>{var o;(o=r.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=r.value)==null||o.handleClose()}}),()=>{var o;const d=(o=t.format)!=null?o:De;return I(Ce,Ke(t,{ref:r,type:i,format:d,"onUpdate:modelValue":u}),{default:g=>I(c,g,null)})}}});const O=pn;O.install=t=>{t.component(O.name,O)};const vn=O;export{vn as E};
