import{a as te,bM as oe,bq as se,bj as ae,s as ie,v as ne,bN as le,bO as ue,b8 as U,bP as G,_ as de}from"./entry-9cc5c370.js";import{G as re,a as z,Z as ce,aC as pe,d as me,L as ve,u as n,m as R,p as e,a6 as I,U as m,S as E,V as W,W as B,Q as he,P as H,af as fe,aA as be,ap as _e,aq as ge,at as ye,l as V,O as ke,ac as xe}from"./vue-11eabec3.js";import{i as ee}from"./echarts-0cc39665.js";const Fe=""+new URL("../svg/process-8164685e.svg",import.meta.url).href,Ce=""+new URL("../svg/SSH-d270a0ed.svg",import.meta.url).href,q=(y,k,T=100)=>{const L=y instanceof HTMLElement?y:document.getElementById(y);if(!L)throw new Error("\u997C\u72B6\u56FE\u751F\u6210\u5931\u8D25\uFF0C\u627E\u4E0D\u5230\u5143\u7D20#"+y);const w=ee(L),t=[{value:k,name:"",detail:{valueAnimation:!0,offsetCenter:["0%","0%"],borderWidth:0}}],p={tooltip:{trigger:"axis"},series:[{type:"gauge",startAngle:90,endAngle:-270,radius:"65px",max:T,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!0,clip:!1,itemStyle:{borderWidth:0,color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#C5DCFF"},{offset:1,color:"#78AEFF"}],global:!1},borderColor:"#464646"}},axisLine:{lineStyle:{width:11}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:t,title:{fontSize:14},detail:{width:45,height:14,fontSize:20,color:"#4C83FF",borderColor:"auto",borderRadius:20,borderWidth:1,formatter:function(x){return(x/T*100).toFixed(2)+"%"}}}]};return p&&w.setOption(p),w.reset=x=>{t.forEach((M,b)=>M.value=x[b]),w.setOption({series:[{data:t,pointer:{show:!1}}]})},w},Z=(y,k,T,L)=>{const w=document.getElementById(y);if(!w)throw new Error("\u997C\u72B6\u56FE\u751F\u6210\u5931\u8D25\uFF0C\u627E\u4E0D\u5230\u5143\u7D20#"+y);const t=new Date,p=[`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`],x=ee(w),M={xAxis:{type:"category",data:p,boundaryGap:!0},tooltip:{trigger:"axis",formatter:L},legend:{data:k==null?void 0:k.map(b=>b.name||""),top:"15px",itemHeight:6,itemWidth:18,textStyle:{fontSize:12,lineHeight:18,rich:{a:{verticalAlign:"middle"}},padding:[0,0,-2,0]},icon:"roundRect"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},dataZoom:[{show:!0,realtime:!0,start:30,end:70,xAxisIndex:[0,1]},{type:"inside",realtime:!0,start:30,end:70,xAxisIndex:[0,1]}],yAxis:{type:"value",name:T},series:k};return M&&x.setOption(M),x.reset=b=>{const h=new Date;p.push(`${h.getHours()}:${h.getMinutes()}:${h.getSeconds()}`),p.length>20&&(p.shift(),k.forEach(j=>{j.data.shift()})),b(k),x.setOption({xAxis:{type:"category",data:p},series:k})},x},v=y=>(_e("data-v-83bc2b9a"),y=y(),ge(),y),Ie={class:"home"},we={class:"bottom-content"},Ee=v(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-GZIP"})],-1)),Be=v(()=>e("p",null,"\u538B\u7F29\u7B49\u7EA7",-1)),De={class:"bottom-content"},Oe=v(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-shujukugaikuang"})],-1)),Ne=v(()=>e("p",null,"\u6570\u636E\u5E93\u4E2A\u6570",-1)),$e={class:"bottom-content"},Ae=v(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-FTPgaikuang"})],-1)),Se=v(()=>e("p",null,"FTP\u4E2A\u6570",-1)),ze={class:"info-block block4"},Te=v(()=>e("h3",null,"\u5E38\u7528\u5DE5\u5177",-1)),Le={class:"bottom-content"},Me=v(()=>e("img",{class:"icon",style:{"box-shadow":"none"},src:Fe,alt:""},null,-1)),Pe=v(()=>e("p",null,"\u8FDB\u7A0B\u7BA1\u7406",-1)),Re=v(()=>e("img",{class:"icon",style:{"box-shadow":"none"},src:Ce,alt:""},null,-1)),Ve=v(()=>e("p",null,"SSH\u7EC8\u7AEF",-1)),je={class:"cpu"},Ge=v(()=>e("h3",null,"CPU\u4F7F\u7528\u7387",-1)),He={class:"cake"},Ue=v(()=>e("div",{id:"cpuCake"},null,-1)),We={class:"memory"},qe=v(()=>e("h3",null,"\u5185\u5B58\u4F7F\u7528\u7387",-1)),Ze={class:"cake"},Ke=v(()=>e("div",{id:"memoryCake"},null,-1)),Qe={class:"zone"},Je=v(()=>e("h3",null,"\u5206\u533A\u4F7F\u7528\u7387",-1)),Xe={style:{width:"100%",overflow:"hidden"}},Ye={id:"zoneEchartsView",class:"flex",style:{height:"100%",width:"max-content",transition:"all 0.3s"}},et={class:"zone-item"},tt=v(()=>e("div",{class:"chare"},null,-1)),ot={style:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}},st=be('<div class="load" data-v-83bc2b9a><h3 data-v-83bc2b9a>\u7CFB\u7EDF\u8D1F\u8F7D</h3><div id="load" class="bottom-content" data-v-83bc2b9a></div></div><div class="discIO" data-v-83bc2b9a><h3 data-v-83bc2b9a>\u78C1\u76D8IO\u5206\u6790</h3><div id="discIO" class="bottom-content" data-v-83bc2b9a></div></div><div class="intIO" data-v-83bc2b9a><h3 data-v-83bc2b9a>\u7F51\u7EDCIO\u5206\u6790</h3><div id="intIO" class="bottom-content" data-v-83bc2b9a></div></div>',3),at=re({__name:"info",setup(y){te();const k=z(),T=z(),L=z(),w=z(),t=z();oe().then(d=>{T.value=d}),se().then(d=>{L.value=d}),ae().then(d=>{w.value=d});const p=ye();function x(d=!1){if(p.currentRoute.value.name==="sysInfo"){if(!d&&j.value){setTimeout(()=>{x()},1e3);return}return le().then(a=>{var l,F,_,g,r,D,O,N,$;setTimeout(()=>{x()},1e3),t.value?(t.value=a,M()):(t.value=a,b.cpu=q("cpuCake",Number((F=(l=t.value)==null?void 0:l.cpu)==null?void 0:F.cpuPercent)/100,Number((g=(_=t.value)==null?void 0:_.cpu)==null?void 0:g.cpuNumber)),b.mem=q("memoryCake",Number((r=t.value)==null?void 0:r.mem.memUsed),Number((D=t.value)==null?void 0:D.mem.memTotal)),setTimeout(()=>{var s,o;const i=(s=k.value)==null?void 0:s.querySelectorAll(".chare");Number((o=t.value)==null?void 0:o.allDisk[0].used),b.zone=Array.prototype.map.call(i,(c,f)=>{var C,A;return q(c,Number((C=t.value)==null?void 0:C.allDisk[f].used),Number((A=t.value)==null?void 0:A.allDisk[f].total))})},0),h.load=Z("load",Object.keys((O=t.value)==null?void 0:O.loadInfo).map(i=>{var s;return{data:[Number((s=t.value)==null?void 0:s.loadInfo[i]).toFixed(2)||0],type:"line",smooth:!0,name:i}}),"%",i=>{let s=`<p>${i[0].axisValueLabel}</p>`;for(let o of i)s+=`<span style="background:${o.color};display:inline-block;height:10px;width:10px;border-radius:50%;margin-right:8px"></span><span style="display:inline-block;width:50px">${o.seriesName}:</span>${o.value}%<br/>`;return s}),h.discIO=Z("discIO",Object.keys((N=t.value)==null?void 0:N.diskIo).reduce((i,s)=>{var o,c,f,C;return i[0].data[0]+=((o=t.value)==null?void 0:o.diskIo[s].readCount)||0,i[1].data[0]+=((c=t.value)==null?void 0:c.diskIo[s].writeCount)||0,i[2].data[0]+=((f=t.value)==null?void 0:f.diskIo[s].readCount)||0,i[3].data[0]+=((C=t.value)==null?void 0:C.diskIo[s].ioTime)||0,i},[{data:[0],type:"line",smooth:!0,name:"\u8BFB\u53D6\u6B21\u6570"},{data:[0],type:"line",smooth:!0,name:"\u5199\u5165\u6B21\u6570"},{data:[0],type:"line",smooth:!0,name:"\u6BCF\u79D2\u8BFB\u6B21\u6570"},{data:[0],type:"line",smooth:!0,name:"IO\u5EF6\u8FDF"}]),"\u6B21",i=>{let s=`<p>${i[0].axisValueLabel}</p>`;for(let o of i)s+=`<span style="background:${o.color};display:inline-block;height:10px;width:10px;border-radius:50%;margin-right:8px"></span><span style="display:inline-block;width:100px">${o.seriesName}:</span>${o.value}${o.seriesName==="IO\u5EF6\u8FDF"?"":"\u6B21"}<br/>`;return s}),h.intIO=Z("intIO",($=t.value)==null?void 0:$.netIo.reduce((i,s)=>(i[0].data[0]+=s.bytesSent?Math.ceil(s.bytesSent/1024):0,i[1].data[0]+=s.bytesRecv?Math.ceil(s.bytesRecv/1024):0,i),[{data:[0],type:"line",smooth:!0,name:"\u4E0A\u884C"},{data:[0],type:"line",smooth:!0,name:"\u4E0B\u884C"}]),"kbps",i=>{let s=`<p>${i[0].axisValueLabel}</p>`;for(let o of i)s+=`<span style="background:${o.color};display:inline-block;height:10px;width:10px;border-radius:50%;margin-right:8px"></span><span style="display:inline-block;width:50px">${o.seriesName}:</span>${o.value}kbps<br/>`;return s}))})}}function M(){var d,a,l,F,_,g,r,D,O,N,$,i;(l=b.cpu)==null||l.reset([Number((d=t.value)==null?void 0:d.cpu.cpuPercent)/100*((a=t.value)==null?void 0:a.cpu.cpuNumber)]),(_=b.mem)==null||_.reset([Number((F=t.value)==null?void 0:F.mem.memUsed)]),(g=b.zone)==null||g.forEach((s,o)=>{var c;s.reset([Number((c=t.value)==null?void 0:c.allDisk[o].used)])}),(r=h.load)!=null&&r.reset&&((D=h.load)==null||D.reset(s=>{s.forEach(o=>{var c;o.data.push(Number((c=t.value)==null?void 0:c.loadInfo[o.name].toFixed(2))||0)})})),(O=h.discIO)!=null&&O.reset&&((N=h.discIO)==null||N.reset(s=>{var c,f,C,A,u,Q,J,X,Y;let o=[0,0,0,0];for(let S in(c=t.value)==null?void 0:c.diskIo)o[0]+=(f=t.value)!=null&&f.diskIo[S].readCount?Math.ceil((C=t.value)==null?void 0:C.diskIo[S].readCount):0,o[1]+=(A=t.value)!=null&&A.diskIo[S].writeCount?Math.ceil((u=t.value)==null?void 0:u.diskIo[S].writeCount):0,o[2]+=(Q=t.value)!=null&&Q.diskIo[S].readCount?Math.ceil((J=t.value)==null?void 0:J.diskIo[S].readCount):0,o[3]+=(X=t.value)!=null&&X.diskIo[S].ioTime?Math.ceil((Y=t.value)==null?void 0:Y.diskIo[S].ioTime):0;s[0].data.push(o[0]),s[1].data.push(o[1]),s[2].data.push(o[2]),s[3].data.push(o[3])})),($=h.intIO)!=null&&$.reset&&((i=h.intIO)==null||i.reset(s=>{var c;let o=[0,0,0,0];for(let f of((c=t.value)==null?void 0:c.netIo)||[])o[0]+=f.bytesSent?Math.ceil(f.bytesSent/1024):0,o[1]+=f.bytesRecv?Math.ceil(f.bytesRecv/1024):0;s[0].data.push(o[0]),s[1].data.push(o[1])}))}const b={cpu:void 0,zone:void 0,mem:void 0},h={load:void 0,discIO:void 0,intIO:void 0},j=z(!0);z(!1),z(0);function K(d,a){const l=document.querySelector(d);if(!l)return!1;let F=l.style.marginLeft?Number(l.style.marginLeft.replace("px","")):0,_=l.clientWidth,g=l.parentElement.clientWidth,r=F+a;if(r=r<=-_+g?-_+g:r,r=r>=0?0:r,l.style.marginLeft=r+"px",_>=r)return"max";if(r<=0)return"min"}const P=ce({data:{},get(){ue().then(d=>{this.data=d})}});return P.get(),pe(()=>{var d,a,l,F,_,g;(d=h.load)==null||d.dispose(),(a=h.discIO)==null||a.dispose(),(l=h.intIO)==null||l.dispose(),(F=b.cpu)==null||F.dispose(),(_=b.zone)==null||_.forEach(r=>r.dispose()),(g=b.mem)==null||g.dispose()}),me(()=>{var d;(d=x(!0))==null||d.finally(()=>{setTimeout(()=>{j.value=!1},300)})}),(d,a)=>{var g,r,D,O,N,$,i,s,o,c,f,C,A;const l=ie,F=xe("CaretLeft"),_=ne;return ve((V(),R("div",Ie,[e("div",{class:he(["info-block block1 point",{"disabled-card":((r=(g=n(P).data)==null?void 0:g.gzip)==null?void 0:r.gzip)===!1}]),onClick:a[1]||(a[1]=W(u=>n(p).push("/sysCfg?t=2"),["stop"]))},[e("h3",null,[I(" GZIP "),m(l,{class:"point jump",onClick:a[0]||(a[0]=W(u=>n(p).push("/sysCfg?t=2"),["stop"]))},{default:E(()=>[m(n(U))]),_:1})]),e("div",we,[Ee,e("div",null,[Be,e("p",null,B((O=(D=n(P).data)==null?void 0:D.gzip)!=null&&O.gzip?(($=(N=n(P).data)==null?void 0:N.gzip)==null?void 0:$.gzipLevel)||6:"\u5DF2\u5173\u95ED"),1)])])],2),e("div",{class:"info-block block2 point",onClick:a[3]||(a[3]=u=>n(p).push("/database/newTool"))},[e("h3",null,[I(" \u6570\u636E\u5E93\u6982\u51B5 "),m(l,{class:"point jump",onClick:a[2]||(a[2]=W(u=>n(p).push("/database/newTool"),["stop"])),color:"#999999"},{default:E(()=>[m(n(U))]),_:1})]),e("div",De,[Oe,e("div",null,[Ne,e("p",null,B(((i=n(P).data)==null?void 0:i.dbTotal)||0),1)])])]),e("div",{class:"info-block block3 point",onClick:a[5]||(a[5]=u=>n(p).push("/database/FTP"))},[e("h3",null,[I(" FTP\u6982\u51B5 "),m(l,{class:"point jump",onClick:a[4]||(a[4]=u=>n(p).push("/database/FTP")),color:"#999999"},{default:E(()=>[m(n(U))]),_:1})]),e("div",$e,[Ae,e("div",null,[Se,e("p",null,B(((s=n(P).data)==null?void 0:s.ftpTotal)||0),1)])])]),e("div",ze,[Te,e("div",Le,[e("div",null,[Me,e("div",null,[Pe,e("p",{onClick:a[6]||(a[6]=u=>n(p).push("/database/process")),class:"jump"},[I(" \u8FDB\u5165 "),m(l,{style:{color:"#999999"}},{default:E(()=>[m(n(G))]),_:1}),m(l,{style:{color:"#d8d8d8","margin-left":"-3px"}},{default:E(()=>[m(n(G))]),_:1})])])]),e("div",null,[Re,e("div",null,[Ve,e("p",{onClick:a[7]||(a[7]=u=>n(p).push("/database/ssh")),class:"jump"},[I(" \u8FDB\u5165 "),m(l,{style:{color:"#999999"}},{default:E(()=>[m(n(G))]),_:1}),m(l,{style:{color:"#d8d8d8","margin-left":"-3px"}},{default:E(()=>[m(n(G))]),_:1})])])])])]),e("div",je,[Ge,e("div",He,[Ue,I(" "+B((o=n(t))==null?void 0:o.cpu.cpuNumber)+"\u6838\u5FC3 ",1)])]),e("div",We,[qe,e("div",Ze,[Ke,I(" "+B((((c=n(t))==null?void 0:c.mem.memUsed)/1048576/1024||0).toFixed(2)+"GB/"+((f=n(t))!=null&&f.mem.memTotal?(((C=n(t))==null?void 0:C.mem.memTotal)/1048576/1024).toFixed(2):0))+"GB ",1)])]),e("div",Qe,[Je,e("div",{ref_key:"zoneNodeRef",ref:k,class:"bottom-content flex-x"},[e("div",{class:"arrow point",onClick:a[8]||(a[8]=u=>K("#zoneEchartsView",300))},[m(l,null,{default:E(()=>[m(F)]),_:1})]),e("div",{class:"arrow point",onClick:a[9]||(a[9]=u=>K("#zoneEchartsView",-300))},[m(l,null,{default:E(()=>[m(n(G))]),_:1})]),e("div",Xe,[e("div",Ye,[(V(!0),R(H,null,fe((A=n(t))==null?void 0:A.allDisk,u=>(V(),R("div",et,[tt,e("p",ot,B(u.path),1),u.total>1073741824?(V(),R(H,{key:0},[I(B((u.used/1073741824||0).toFixed(2)+"GB/"+(u.total/1073741824||0).toFixed(2))+"GB ",1)],64)):u.total>1048576?(V(),R(H,{key:1},[I(B((u.used/1048576||0).toFixed(2)+"MB/"+(u.total/1048576||0).toFixed(2))+"MB ",1)],64)):u.total>1024?(V(),R(H,{key:2},[I(B((u.used/1024||0).toFixed(2)+"KB/"+(u.total/1024||0).toFixed(2))+"KB ",1)],64)):ke("",!0)]))),256))])])],512)]),st])),[[_,n(j),void 0,{fullscreen:!0,lock:!0}]])}}});const ut=de(at,[["__scopeId","data-v-83bc2b9a"]]);export{ut as default};
