import{_ as e}from"./HeaderH5-49d0ad48.js";import{w as a,a as t,b as n}from"./withdrawalbank-0eda1e37.js";import{u as i}from"./vendor-vuex-61b6ee10.js";import{a6 as l,_ as o}from"./index-886f43d3.js";import{d as r,r as c,w as s,o as d,R as u,ba as v,bh as m,l as p,Q as h,bf as w,bo as y,u as g,bk as b,a4 as _,bj as A,bc as f,h as C,bd as N,be as k}from"./vendor-others-96825896.js";import{m as x,I as j,B as F}from"./vendor-ant-design-vue-7dd2b151.js";import"./index-b0450432.js";import"./vendor-vue-router-5605f985.js";import"./vendor-axios-a0dbaeda.js";const R=e=>(N("data-v-aa73e683"),e=e(),k(),e),P={class:"withdrawal-code-box"},I=R((()=>w("div",{class:"withdrawal_title"},"提现方式",-1))),U={class:"withdrawal_content_list"},H=["src"],O=R((()=>w("div",{class:"withdrawal_content_item_title"},"支付宝",-1))),B=["src"],Q=R((()=>w("div",{class:"withdrawal_content_item_title"},"微信",-1))),Y=["src"],$={class:"withdrawal_form"},q={key:0,style:{color:"var(--cus-button-delete)"}},z={key:0,style:{color:"var(--cus-button-delete)"}},D=R((()=>w("div",{class:"withdrawalbtn_text"},"提现金额",-1))),E={class:"withdrawal_moey"},G={class:"withdrawal_tx"},J={style:{color:"#ff9668"}},K={style:{color:"#ff9668"}},L={class:"withdrawalbtn_footer"},M=R((()=>w("div",null,"手续汇率",-1))),S={class:"withdrawalbtn_footer"},T=R((()=>w("div",null,"实际到账",-1))),V={style:{color:"var(--cus-theme-color9)"}},W={class:"withdrawalbtn"},X=o(r({__name:"make",emits:["load"],setup(o,{expose:r,emit:N}){const k=c({visible:!0,loading:!1,exchangeRate:0,handleFeeRate:0,times:0,totalAmount:0,money:0,hash:"",addr:""}),R=c({receiveName:null,receiveAccount:null,money:0,hash:"",exchangeRate:0,handlingFee:0,amount:0,address:"",fundPassword:"",amountCny:null,receiveAgency:"alipay"}),X=C();i();const{$http:Z}=X.appContext.config.globalProperties,ee={openPass(){let e="";return R.amountCny||(e="请输入提现金额"),R.amountCny%10!=0&&(e="总额只能是10倍数"),R.amountCny>k.totalAmount&&(e="总额不能超过可提现金额"),k.times||(e="今日提现次数已用完"),k.totalAmount||(e="无可提现金额"),!e||(x.error(e),!1)}},ae=()=>{if(ee.openPass()){if(!R.receiveName||!R.receiveAccount)return R.receiveName||(R.receiveName=""),void(R.receiveAccount||(R.receiveAccount=""));k.loading=!0,Z.post("/openapi/member/agent/withdraw",{handlingFee:Number(R.amountCny*k.handleFeeRate/100),amountCny:Number(R.amountCny),receiveAgency:R.receiveAgency,receiveName:R.receiveName,receiveAccount:R.receiveAccount}).then((e=>{x.success("提现申请成功"),k.loading=!1,l.push({name:"AgentOutput"}),R.receiveName=null,R.receiveAccount=null,R.money=0,R.hash="",R.exchangeRate=0,R.handlingFee=0,R.amount=0,R.address="",R.fundPassword="",R.amountCny=null,R.receiveAgency="alipay",k.visible=!1})).catch((e=>{k.loading=!1,x.error(e.response.data.message)}))}},te=()=>{k.visible=!0,Z.get("/openapi/member/agent/withdraw_info").then((e=>{Object.assign(k,e.data)}))};return s((()=>R.amountCny),(e=>{k.money=e?Number((e*(1-k.handleFeeRate/100)).toFixed(2)):0})),d((()=>{te()})),r({open:te}),(i,l)=>{const o=e,r=j,c=F,s=u("loading");return v(),m("div",null,[p(o,{title:"佣金提现"}),h((v(),m("div",P,[I,w("div",U,[w("div",{class:y({withdrawal_content_item:!0,withdrawal_content_actvie:"alipay"===R.receiveAgency}),onClick:l[0]||(l[0]=e=>R.receiveAgency="alipay")},[w("div",null,[w("img",{src:g(a),alt:""},null,8,H),O])],2),w("div",{class:y({withdrawal_content_item:!0,withdrawal_content_actvie:"wechat"===R.receiveAgency}),onClick:l[1]||(l[1]=e=>R.receiveAgency="wechat")},[w("div",null,[w("img",{src:g(t),alt:""},null,8,B),Q])],2),w("div",{class:y({withdrawal_content_item:!0,withdrawal_content_actvie:"bank"===R.receiveAgency}),onClick:l[3]||(l[3]=e=>R.receiveAgency="bank")},[w("div",null,[w("img",{src:g(n),alt:""},null,8,Y),w("div",{class:"withdrawal_content_item_title",onClick:l[2]||(l[2]=e=>R.receiveAgency="bank")}," 银行卡 ")])],2)]),w("div",$,[w("div",null,[p(r,{value:R.receiveAccount,"onUpdate:value":l[4]||(l[4]=e=>R.receiveAccount=e),placeholder:"请输入收款账号",onInput:l[5]||(l[5]=e=>R.receiveAccount=R.receiveAccount.replace(/[\u4e00-\u9fa5]/g,"")),class:y({"input-error":""===R.receiveAccount})},null,8,["value","class"]),""===R.receiveAccount?(v(),m("span",q,"请输入收款账号")):b("",!0)]),w("div",null,[p(r,{value:R.receiveName,"onUpdate:value":l[6]||(l[6]=e=>R.receiveName=e),placeholder:"请输入收款人姓名",class:y({"input-error":""===R.receiveName})},null,8,["value","class"]),""===R.receiveName?(v(),m("span",z,"请输入收款人姓名")):b("",!0)])]),D,w("div",E,[p(r,{autofocus:"",ref:"moneyInput",min:0,precision:0,value:R.amountCny,"onUpdate:value":l[7]||(l[7]=e=>R.amountCny=e),placeholder:"",prefix:"￥",oninput:"this.value=this.value.replace(/[^\\d]/g,'')"},null,8,["value"])]),w("div",G,[_(" 今日可提现次数剩余"),w("span",J,A(k.times),1),_("次，可提现金额"),w("span",K,"¥"+A(k.totalAmount)+"，",1),w("span",{style:{color:"#4b82fa",cursor:"pointer"},onClick:l[8]||(l[8]=e=>{return a=k.totalAmount,void(k.totalAmount?R.amountCny=Number(a):x.error("无可提现金额"));var a})},"全部提现")]),w("div",L,[M,w("div",null,A(k.handleFeeRate)+"%",1)]),w("div",S,[T,w("div",V,A(k.money||0)+" CNY ",1)]),w("div",W,[p(c,{type:"primary",block:"",onClick:ae,loading:k.loading},{default:f((()=>[_("提现")])),_:1},8,["loading"])])])),[[s,k.loading]])])}}}),[["__scopeId","data-v-aa73e683"]]);export{X as default};
