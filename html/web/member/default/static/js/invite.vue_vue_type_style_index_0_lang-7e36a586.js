import{V as e,a6 as A,W as o,a2 as t,a1 as s}from"./index-886f43d3.js";import{u as n}from"./vendor-vuex-61b6ee10.js";import{d as a,w as i,r as l,a6 as r,ba as c,bb as m,bc as v,bf as p,u as d,bj as u,h as b}from"./vendor-others-96825896.js";import{m as f,M as g}from"./vendor-ant-design-vue-7dd2b151.js";const N={class:"inviInfo"},h=["src"],T={class:"name"},B=p("img",{src:"data:image/png;base64,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"},null,-1),I={class:"inviteCode"},M=[p("svg",{t:"1682240810163",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9189",width:"20",height:"20"},[p("path",{fill:"#3D3D3D",d:"M601.376 512l191.52-191.52c28.096-28.096 30.976-71.168 6.4-95.744s-67.68-21.696-95.744 6.4l-191.52 191.52-191.52-191.52c-28.096-28.096-71.168-30.976-95.744-6.368s-21.696 67.68 6.4 95.744l191.52 191.52-191.52 191.52c-28.096 28.096-30.976 71.168-6.368 95.744s67.68 21.696 95.744-6.4l191.52-191.52 191.52 191.52c28.096 28.096 71.168 30.976 95.744 6.4s21.696-67.68-6.4-95.744l-191.52-191.52z","p-id":"9190"})],-1)],k=a({__name:"invite",props:{type:{type:String,default:"pc"}},emits:["ok"],setup(a,{emit:k}){const S=a,Z=n(),D=b(),{$http:w}=D.appContext.config.globalProperties;i((()=>Z.getters.confirmModel),(e=>{e&&V.get()}));const V=l({visible:!1,info:{},get(){let A=e.getSession("inviteCode");w.get("/openapi/member/agent/findInfoByCode",{params:{inviteCode:A}}).then((e=>{let{data:A}=e;A?(V.info=A,V.visible=!0):(V.close(),f.error("邀请码有误！"))})).catch((e=>{var A;V.visible=!1,Z.commit("SETCONFIRMMODEL",!1);let o=null==(A=e.response.data)?void 0:A.message;f.error(o||"发生错误！")}))},put(){var e;Z.getters.isLogin||"loginPage"==A.currentRoute.value.name?k("ok"):o()&&2==(null==(e=Z.getters.userInfo)?void 0:e.isTourists)?w.post("/openapi/member/become_agent",{invitation:V.info.inviteCode}).then((e=>{let{data:o}=e;f.success(o||"操作成功！"),V.close(),Z.commit("SETAGENTMODEL",!1),Z.dispatch("refreshInfo"),"h5"==S.type?A.push({name:"AgentIndex"}):k("ok")})).catch((e=>{var A;let o=null==(A=e.response.data)?void 0:A.message;f.error(o||"发生错误！")})):t()?(Z.commit("SETLOGINPATH",A.currentRoute.value.name),A.push({path:"/login",query:s()||{}})):(Z.commit("SETLOGINPATH","/reload"),Z.commit("SETISLOGIN",!0))},close(){V.visible=!1,Z.commit("SETCONFIRMMODEL",!1),e.clearOneSession("inviteCode")}}),{info:E}=r(V);return(e,A)=>{const o=g;return c(),m(o,{visible:V.visible,"onUpdate:visible":A[2]||(A[2]=e=>V.visible=e),closable:!1,"destroy-on-close":"","append-to-body":"","close-on-click-modal":!1,top:"pc"==a.type?"17%":"40%",class:"inviteModel",zIndex:10011,width:320,"show-close":!1},{footer:v((()=>[p("div",{class:"close",onClick:A[1]||(A[1]=e=>V.close())},M)])),default:v((()=>[p("div",N,[p("img",{src:d(E).avatar,onerror:"errorImg(this)",name:"avator"},null,8,h),p("p",T,u(d(E).memberUsername||d(E).nickname),1),p("p",null,u(d(E).agentLevelName),1)]),B,p("div",I,u(d(E).inviteCode),1),p("button",{class:"butns",onClick:A[0]||(A[0]=e=>V.put())},"加入其团队")])),_:1},8,["visible","top"])}}});export{k as _};
