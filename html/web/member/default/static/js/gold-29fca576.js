import{_ as e}from"./index-b0450432.js";import{_ as s}from"./gold-2bafa79e.js";import{_ as a}from"./empty-ec21309c.js";import{_ as t}from"./HeaderH5-49d0ad48.js";import{u as o}from"./vendor-vuex-61b6ee10.js";import{a6 as n,T as i,_ as r}from"./index-886f43d3.js";import{d as l,o as c,r as d,a6 as m,ba as p,bh as u,l as f,bf as g,bj as b,u as h,a4 as v,bc as x,F as y,bm as k,bo as _,bk as j,h as C,bd as E,be as T}from"./vendor-others-96825896.js";import{M as I,m as P,B as A}from"./vendor-ant-design-vue-7dd2b151.js";import"./vendor-vue-router-5605f985.js";import"./vendor-axios-a0dbaeda.js";const S=e=>(E("data-v-c5dff4f0"),e=e(),T(),e),w={class:"main-bg"},L={class:"content"},N={class:"gold-num"},U={class:"num"},Y={class:"text"},F={class:"exchange-box"},H={class:"icons"},O={class:"info"},$={style:{height:"32px"}},q={class:"text"},z=S((()=>g("img",{src:s,alt:""},null,-1))),B={key:0,style:{padding:"80px 0",width:"100%"},class:"query-empty"},D=[S((()=>g("img",{src:a,alt:"空状态"},null,-1))),S((()=>g("p",null,"暂无兑换套餐",-1)))],M=r(l({__name:"gold",setup(s){const a=o(),r=C(),{$http:l}=r.appContext.config.globalProperties,E=(e,s={})=>{if(!e)return!1;"gold"==s.type&&(a.commit("SETPAYTYPE","gold"),a.commit("SETPAYINDEX",0)),n.push({path:e})},T=()=>{l.get("/openapi/member/info").then((e=>{let{data:s}=e;a.commit("SETUSERINFO",s),S.userInfo=s,l.get("/openapi/gold/info").then((e=>{S.consumption=e.data.consumption||0}))}))};c((()=>{document.title="我的金币",T(),l.get("/openapi/pck/all",{params:{type:3}}).then((e=>{let s=e.data?e.data.sort(((e,s)=>e.sort-s.sort)):[];S.pckList=s}))}));const S=d({consumption:0,pckList:[],userInfo:{}}),{consumption:M,userInfo:R,pckList:X}=m(S);return(s,a)=>{const o=e,n=A;return p(),u("div",w,[f(t,{title:"金币兑换"}),g("div",L,[g("div",N,[g("div",U,b(h(R).goldCoin),1),g("div",Y,[v(" 金币 "),f(o,{name:"xiangyouhuadong",onClick:a[0]||(a[0]=e=>E("/memberUser/deal"))})])]),f(n,{class:"toExchange",onClick:a[1]||(a[1]=e=>E("/memberUser/task")),type:"primary"},{default:x((()=>[v(" 马上去赚金币 ")])),_:1}),g("div",F,[(p(!0),u(y,null,k(h(X),((e,s)=>(p(),u("div",{class:_(["item-exch",{moEvents:h(R).goldCoin<e.price}]),key:s},[g("div",null,[g("div",H,[f(o,{name:"huangguan",color:"#fff",size:"22px"})]),g("div",O,[g("span",$,[g("label",null,b(e.number),1),v("天")]),g("span",q,b(e.description),1)])]),f(n,{type:"primary",shape:"round",onClick:s=>(e=>{if(i("h5"))return!1;I.confirm({title:"兑换提醒",content:"是否兑换该套餐！",okText:"确定",cancelText:"取消",closable:!0,centered:!0,wrapClassName:"cu_model",onOk:()=>new Promise(((s,a)=>{l.get(`/openapi/pck/exchange/${e}`).then((e=>{P.success(e.data||"兑换成功！"),T(),setTimeout((()=>{I.destroyAll()}),200)})).catch((e=>{P.error(e.data||"兑换失败！"),a(!1)}))})),onCancel(){I.destroyAll()}})})(e.id),class:"exch-btn"},{default:x((()=>[z,v(b(e.price)+"金币",1)])),_:2},1032,["onClick"])],2)))),128)),0==h(X).length?(p(),u("div",B,D)):j("",!0)])])])}}}),[["__scopeId","data-v-c5dff4f0"]]);export{M as default};
