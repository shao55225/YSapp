import{_ as e}from"./index-b0450432.js";import{d as s,w as i,r as t,a6 as n,ba as o,bb as a,bc as l,bf as r,bh as c,Q as m,bp as p,u as d,a5 as u,a4 as v,F as g,bk as b,bo as h,h as f,k as y,v as k,o as I,l as x,bj as U,bm as _,bn as C,bd as T,be as w}from"./vendor-others-96825896.js";import{V as j,a6 as E,Z as M,p as S,T as A,_ as P}from"./index-886f43d3.js";import{u as L}from"./vendor-vuex-61b6ee10.js";import{m as D,M as G,B as N}from"./vendor-ant-design-vue-7dd2b151.js";import{_ as z}from"./invite.vue_vue_type_style_index_0_lang-7e36a586.js";import{_ as O}from"./HeaderH5-49d0ad48.js";import{_ as V,c as Y}from"./camiactivation-fb6b0686.js";import"./vendor-vue-router-5605f985.js";import"./vendor-axios-a0dbaeda.js";const q=r("img",{class:"modelbg",src:"/memberUser/static/png/agentmodel-1471527c.png"},null,-1),B={class:"click-box"},F=r("p",null,"请输入邀请码",-1),H=["disabled"],K={class:"answer"},R=r("img",{class:"modelbg",src:"/memberUser/static/png/agentmodelPc-8ef6a592.png"},null,-1),$={class:"click-box"},Q=r("p",null,"请输入邀请码",-1),W=["disabled"],X={class:"answer"},Z=[r("svg",{t:"1682240810163",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9189",width:"20",height:"20"},[r("path",{fill:"#3D3D3D",d:"M601.376 512l191.52-191.52c28.096-28.096 30.976-71.168 6.4-95.744s-67.68-21.696-95.744 6.4l-191.52 191.52-191.52-191.52c-28.096-28.096-71.168-30.976-95.744-6.368s-21.696 67.68 6.4 95.744l191.52 191.52-191.52 191.52c-28.096 28.096-30.976 71.168-6.368 95.744s67.68 21.696 95.744-6.4l191.52-191.52 191.52 191.52c28.096 28.096 71.168 30.976 95.744 6.4s21.696-67.68-6.4-95.744l-191.52-191.52z","p-id":"9190"})],-1)],J=s({__name:"dialog",props:{type:{type:String,default:"pc"}},emits:["ok"],setup(e,{emit:s}){const y=e,k=L(),I=f(),{$http:x}=I.appContext.config.globalProperties;i((()=>k.getters.isAgentModel),(e=>{U.visible=e}));const U=t({visible:!1,invitation:"",confirm(){j.setSession("inviteCode",U.invitation.trim()),k.commit("SETCONFIRMMODEL",!0)},put(){x.post("/openapi/member/become_agent",{invitation:""}).then((e=>{let{data:i}=e;D.success(i||"操作成功！"),U.close(),k.dispatch("refreshInfo"),"h5"==y.type?E.push({name:"AgentIndex"}):s("ok")})).catch((e=>{var s;let i=null==(s=e.response.data)?void 0:s.message;D.error(i||"发生错误！")}))},close(){U.visible=!1,U.invitation="",k.commit("SETAGENTMODEL",!1)}}),{invitation:_}=n(U);return(s,i)=>{const t=G;return o(),a(t,{visible:U.visible,"onUpdate:visible":i[8]||(i[8]=e=>U.visible=e),"destroy-on-close":"","append-to-body":"","close-on-click-modal":!1,top:"pc"==e.type?"15%":"40%",class:h(["agentModel",{agentPcModel:"pc"==e.type}]),zIndex:10010,width:"pc"==e.type?520:312,"show-close":!1},{footer:l((()=>[r("div",{class:"close",onClick:i[7]||(i[7]=e=>U.close())},Z)])),default:l((()=>["h5"==e.type?(o(),c(g,{key:0},[q,r("div",B,[F,m(r("input",{type:"text","onUpdate:modelValue":i[0]||(i[0]=e=>u(_)?_.value=e:null),placeholder:"邀请码"},null,512),[[p,d(_)]]),r("button",{onClick:i[1]||(i[1]=e=>U.confirm()),disabled:!d(_)}," 立即提交 ",8,H),r("div",K,[v(" 想要成为一级代理？"),r("span",{onClick:i[2]||(i[2]=e=>U.put())},"点击前往")])])],64)):b("",!0),"pc"==e.type?(o(),c(g,{key:1},[R,r("div",$,[Q,m(r("input",{type:"text","onUpdate:modelValue":i[3]||(i[3]=e=>u(_)?_.value=e:null),onInput:i[4]||(i[4]=e=>{return s=d(_),void(U.invitation=s.replace(/[\W]/g,""));var s}),placeholder:"邀请码"},null,544),[[p,d(_)]]),r("button",{onClick:i[5]||(i[5]=e=>U.confirm()),disabled:!d(_)}," 立即提交 ",8,W),r("div",X,[v(" 想要成为一级代理？"),r("span",{onClick:i[6]||(i[6]=e=>U.put())},"点击前往")])])],64)):b("",!0)])),_:1},8,["visible","top","class","width"])}}}),ee=e=>(T("data-v-a1774e20"),e=e(),w(),e),se={class:"content-bg"},ie={class:"per-center-top"},te={class:"user"},ne={class:"user-avator"},oe={class:"avator"},ae=["src"],le={class:"info"},re={class:"h5name"},ce={key:0},me={style:{color:"#e16b37"}},pe={key:1},de={class:"user-opt"},ue=[ee((()=>r("h3",null,"邀请好友",-1))),ee((()=>r("p",null,"邀请好友赠送VIP",-1)))],ve={class:"more-opt"},ge=[ee((()=>r("img",{src:"/memberUser/static/svg/receGold-76c2f30d.svg",alt:""},null,-1))),ee((()=>r("div",null,[r("h3",null,"签到领金币"),r("p",null,"每日签到领金币")],-1)))],be=[ee((()=>r("img",{src:"/memberUser/static/svg/buyGold-1651b1a2.svg",alt:""},null,-1))),ee((()=>r("div",null,[r("h3",null,"购买金币"),r("p",null,"金币充值便利购")],-1)))],he=[ee((()=>r("img",{src:"/memberUser/static/svg/changeGold-d5f60414.svg",alt:""},null,-1))),ee((()=>r("div",null,[r("h3",null,"金币兑换"),r("p",null,"积累金币换福利")],-1)))],fe=[ee((()=>r("img",{src:"/memberUser/static/svg/makeGold-67bfc8ec.svg",alt:""},null,-1))),ee((()=>r("div",null,[r("h3",null,"赚金币"),r("p",null,"完成任务赚金币")],-1)))],ye={key:0,class:"user-history"},ke={class:"lookMore"},Ie={class:"list-items"},xe={class:"userInfo"},Ue={class:"user-menu"},_e=["onClick"],Ce={class:"icon-text"},Te={class:"ohter"},we=P(s({__name:"index",setup(s){var i;const m=f(),{$http:p}=m.appContext.config.globalProperties,u=L(),h=t({menu:[{id:1,title:"卡密激活",icon:"kamijihuo1"},{id:2,title:"我的订单",icon:"wodedingdan",path:"/memberUser/record"},{id:6,title:"点播记录",icon:"dianbolishi",path:"/memberUser/demandPlay"},{id:5,title:"账号设置",icon:"zhanghaoshezhi",path:"/memberUser/account"}],userInfo:y((()=>u.getters.userInfo))||{},myMenuKey:1,consumption:0,historyList:[],timeType:"day",siteInfo:y((()=>u.getters.siteInfo))||{camiState:1}});1==(null==(i=u.getters.userInfo)?void 0:i.isTourists)&&h.menu.shift();const T=e=>{u.commit("SETPAYTYPE",e),u.commit("SETPAYINDEX",0),E.push({path:"/memberUser/pay"})},w=k(),j=e=>{if(!e)return w.value.open(),!1;E.push({path:e})},P=()=>{u.dispatch("logout"),window.open(location.origin,"_self")},D=()=>{var e;if(A("h5"))return!1;(null==(e=h.userInfo)?void 0:e.isAgent)?E.push({name:"Agent"}):u.commit("SETAGENTMODEL",!0)};I((()=>{document.title="个人中心",(()=>{if(A("query"))return!1;p.get("/openapi/browse/mobile/page",{params:{limit:3}}).then((e=>{let{data:s}=e;h.historyList=s.list}))})(),p.get("/openapi/member/info").then((e=>{let{data:s}=e;u.commit("SETUSERINFO",s),p.get("/openapi/gold/info").then((e=>{h.consumption=e.data.consumption||0}))}))}));const{consumption:G,menu:q,userInfo:B,historyList:F}=n(h);return(s,i)=>{var t,n,m;const p=e,f=N;return o(),c("div",se,[r("div",ie,[x(O,{title:"个人中心"}),r("div",te,[r("div",ne,[r("div",oe,[r("img",{src:d(M)(d(B).headImg),name:"avator",class:"cover",onerror:"errorImg(this)"},null,8,ae)]),r("div",le,[r("p",re,U(d(B).nickname||d(B).name),1),2==d(B).group?(o(),c("span",ce,[v(U(2==d(B).group?null==(t=d(B))?void 0:t.memberGroupName:"开通VIP")+" 有效期至：",1),r("span",me,U(d(B).expireTime&&2==d(B).group?d(S)(1e3*d(B).expireTime,"{y}-{m}-{d}"):"即可无限高清播放"),1),v(" ")])):(o(),c("span",pe,"暂未开通"))])]),r("div",de,[r("section",{onClick:i[0]||(i[0]=e=>T("vip"))},[r("h3",null,U(2==d(B).group?null==(n=d(B))?void 0:n.memberGroupName:"开通VIP"),1),r("p",null,U(0!=d(B).expireTime&&2==d(B).group?"有效期至："+d(S)(1e3*d(B).expireTime,"{y}-{m}-{d}"):"即可无限高清播放"),1)]),r("section",{onClick:i[1]||(i[1]=e=>j("/memberUser/share"))},ue)])])]),r("div",ve,[r("section",{onClick:i[2]||(i[2]=e=>j("/memberUser/reap"))},ge),r("section",{onClick:i[3]||(i[3]=e=>T("gold"))},be),r("section",{onClick:i[4]||(i[4]=e=>j("/memberUser/gold"))},he),r("section",{onClick:i[5]||(i[5]=e=>j("/memberUser/task"))},fe)]),(null==(m=d(F))?void 0:m.length)>0?(o(),c("div",ye,[r("h2",ke,[v(" 观看记录 "),r("span",{onClick:i[6]||(i[6]=e=>j("/memberUser/history"))},[v("更多 "),x(p,{size:"14px",name:"qianjin"})])]),r("div",Ie,[(o(!0),c(g,null,_(d(F),((e,s)=>(o(),a(V,{isTo:!0,isMobile:!0,progress:0,playLine:e.playLine,jumpUrl:e.jumpUrl,items:e.videoInfo},null,8,["playLine","jumpUrl","items"])))),256))])])):b("",!0),r("div",xe,[1!=d(u).state.userInfo.isTourists?(o(),c("img",{key:0,style:{width:"100%"},onClick:D,src:"/memberUser/static/png/userbanner-6e2833e7.png"})):b("",!0),r("div",Ue,[(o(!0),c(g,null,_(d(q),((e,s)=>(o(),c("div",{class:"menu-item",onClick:s=>j(e.path),style:C({display:h.siteInfo.camiState||0!=s?"":"none"})},[r("div",Ce,[x(p,{name:e.icon},null,8,["name"]),v(" "+U(e.title),1)]),r("div",Te,[x(p,{size:"16px",color:"#A7A7A7",name:"zhankai"})])],12,_e)))),256))]),d(A)("query")?(o(),a(f,{key:1,type:"primary",onClick:i[7]||(i[7]=e=>(u.commit("SETBINDKEY",!0),void E.push({path:"/memberUser/login"}))),class:"loginOut"},{default:l((()=>[v("切换账号")])),_:1})):(o(),a(f,{key:2,type:"primary",onClick:P,class:"loginOut"},{default:l((()=>[v("退出登录")])),_:1}))]),x(J,{type:"h5"}),x(z,{type:"h5"}),x(Y,{ref_key:"camiactivationref",ref:w},null,512)])}}}),[["__scopeId","data-v-a1774e20"]]);export{we as default};
